\section{Introduction}
The \agdaalgebras library \cite{ualib_v2.0.1} formalizes the foundations of universal algebra
in intensional Martin-LÃ¶f type theory (\mltt) using \agda~\cite{Norell:2007,agdaref}.
The library includes a wide collection of definitions and verified theorems originated in classical
set-theory based universal algebra and equational logic, but have been adapted to fit within MLTT.

The first major milestone of the \agdaalgebras project is a proof of \emph{Birkhoff's
variety theorem} (also known as the \emph{HSP theorem})~\cite{Birkhoff:1935}.
To the best of our knowledge, this constitutes the first formal proof of
Birkhoff's in Martin-LÃ¶f Type Theory, and it is the first such machine-verified proof of Birkhoff's
celebrated 1935 result.  An alternative formalization, based on classical
set-theory, was achieved in~\cite{birkhoff-in-mizar:1999}; see \href{http://www.mizar.org/JFM/Vol9/birkhoff.html\#BIB21}{mizar.org/JFM/Vol9/birkhoff.html}.

Presented here is our second proof of the HSP theorem. The first proof\footnote{See the
 \href{https://github.com/ualib/ualib.github.io/blob/71f173858701398d56224dd79d152c380c0c2b5e/src/lagda/UALib/Birkhoff.lagda}{\textsf{Birkhoff.lagda}} file
 in the \href{https://github.com/ualib/ualib.github.io}{\textsf{ualib/ualib.gitlab.io}}
 repository (\href{https://github.com/ualib/ualib.github.io/commit/71f173858701398d56224dd79d152c380c0c2b5e}{15
 Jan 2021 commit 71f1738})~\cite{ualib_v1.0.0}.}
suffered from flaws that raised two concerns. First, it was not clear whether the
proof was fully constructive (because of its use of function extensionality in \mltt). Second,
it was shown that if one were to take the type
\ab{X}---which we use to represent an arbitrary collection of
variable symbols---to be  the two element type, then one could combine this with our
proof and derive a contradiction. To resolve these issues, we have rewritten parts of the library and
developed a new proof of the HSP theorem. We are confident that the
proof presented here\footnote{based on \agdaalgebras, ver.~2.0.1~\cite{ualib_v2.0.1}, \agda ver.2.6.2 and \agdastdlib ver.1.7.} is constructive and
 correct. %, a conviction we justify in the sequel (\qv).

What follows is a self-contained formal proof of the HSP theorem in \agda.  This is achieved by
extracting a subset of the \agdaalgebras library, including only the
pieces needed for the proof, into a literate \agda document.\footnote{See
\HSPlagda in the \agdaalgebras repository: \agdaalgebrasrepo .}
\ifshort
For spaces reasons, we elide some inessential parts,
but strive to preserve the essential content and character of the development.
More specifically, routine or overly technical components, as well as anything that does not
seem to offer insight into the central ideas of the proof are omitted.\footnote{The full proof
appears in the unabridged version of the present paper~\cite{DeMeo:2021}.}
\else
We include here every line of code of our new proof of Birkhoff's theorem
in a single \agda module, presented as a literate \agda document,\footnote{See
\HSPlagda in the \agdaalgebras repository: \agdaalgebrasrepo .}.  Apart from a few dozen
imports from the \agdastdlib, the module is self-contained.
\fi

We highlight some of the challenging aspects of formalizing universal algebra in type theory.
Nonetheless, we hope to show that the patient mathematician, with enough resolve and the will to learn
dependent type theory, can reap the rewards of the further insights that mechanization provides.

\ifshort\else
We give a sobering glimpse of the technical hurdles that must be overcome
to conduct research in mathematics using dependent type theory in \agda.
The results are rather gratifying and enlightening, and we feel are worth
the investment. Users of Coq and Lean have recently reported similar feelings
from the outcome of their formalization efforts.
\fi

Our main contribution is to show that a straightforward but very general representation of algebraic structures
and their signatures in dependent type theory is quite practical,
as we demonstrate by formalizing one of the deepest results in the field.

\section{Preliminaries}

For the most part, we assume that the reader is familiar with \mltt, and can decipher its encoding in \agda.

\subsection{Logical foundations}

To best emulate \mltt, we use
<pre class="Agda">
<a id="4368" class="Symbol">{-#</a> <a id="4372" class="Keyword">OPTIONS</a> <a id="4380" class="Pragma">--without-K</a> <a id="4392" class="Pragma">--exact-split</a> <a id="4406" class="Pragma">--safe</a> <a id="4413" class="Symbol">#-}</a>
</pre>
.
\ifshort
\AgdaPragma{without-K} disables
\href{https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29}{Streicher's K axiom},
\AgdaPragma{exact-split} directs \agda to accept only definitions behaving like
{\it judgmental} equalities, and
\AgdaPragma{safe} ensures that nothing is postulated outright.
See~\cite{agdaref-axiomk,agdaref-safeagda,agdatools-patternmatching} for more details.
\else
Here are brief descriptions of these options, accompanied by links to related documentation.
\begin{itemize}
\item
\AgdaPragma{without-K} disables \href{https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29}{Streicher's K axiom}.
See the \href{https://agda.readthedocs.io/en/v2.6.1/language/without-k.html}{section on axiom K} in
the \href{https://agda.readthedocs.io/en/v2.6.1.3/language}{Agda Language Reference Manual}~\cite{agdaref-axiomk}.
\item
\AgdaPragma{exact-split} makes \agda accept only those definitions that behave like so-called {\it judgmental} equalities.
See the \href{https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#pattern-matching-and-equality}%
{Pattern matching and equality} section of
the \href{https://agda.readthedocs.io/en/v2.6.1.3/tools/}{Agda Tools} documentation~\cite{agdatools-patternmatching}.
\item
\AgdaPragma{safe} ensures that nothing is postulated outright---every non-\mltt axiom has to be an explicit assumption (e.g., an argument to a function or module).
See the \href{https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#cmdoption-safe}{cmdoption-safe} section of~\cite{agdaref-safeagda}.
\end{itemize}
\fi

We also make use of some definitions from Agda's standard library (ver.~1.7).
<pre class="Agda">
<a id="6116" class="Symbol">{-#</a> <a id="6120" class="Keyword">OPTIONS</a> <a id="6128" class="Pragma">--without-K</a> <a id="6140" class="Pragma">--exact-split</a> <a id="6154" class="Pragma">--safe</a> <a id="6161" class="Symbol">#-}</a>
</pre>
\ifshort\else
<pre class="Agda">

<a id="6204" class="Comment">-- Import universe levels and Signature type (described below) from the agda-algebras library.</a>
<a id="6299" class="Keyword">open</a> <a id="6304" class="Keyword">import</a> <a id="6311" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="6331" class="Keyword">using</a> <a id="6337" class="Symbol">(</a> <a id="6339" href="Base.Algebras.Basic.html#1162" class="Generalizable">ğ“</a> <a id="6341" class="Symbol">;</a> <a id="6343" href="Base.Algebras.Basic.html#1164" class="Generalizable">ğ“¥</a> <a id="6345" class="Symbol">;</a> <a id="6347" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="6357" class="Symbol">)</a>

<a id="6360" class="Keyword">module</a> <a id="6367" href="Demos.HSP.html" class="Module">Demos.HSP</a> <a id="6377" class="Symbol">{</a><a id="6378" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="6380" class="Symbol">:</a> <a id="6382" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="6392" href="Base.Algebras.Basic.html#1162" class="Generalizable">ğ“</a> <a id="6394" href="Base.Algebras.Basic.html#1164" class="Generalizable">ğ“¥</a><a id="6395" class="Symbol">}</a> <a id="6397" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

<a id="6432" class="Comment">-- Import 16 definitions from the Agda Standard Library.</a>
<a id="6489" class="Keyword">open</a> <a id="6494" class="Keyword">import</a>  <a id="6502" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a>                   <a id="6542" class="Keyword">using</a> <a id="6548" class="Symbol">(</a> <a id="6550" href="Data.Unit.Polymorphic.Base.html#480" class="Function">âŠ¤</a> <a id="6552" class="Symbol">;</a> <a id="6554" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>                                            <a id="6600" class="Symbol">)</a>
<a id="6602" class="Keyword">open</a> <a id="6607" class="Keyword">import</a>  <a id="6615" href="Function.html" class="Module">Function</a>                                <a id="6655" class="Keyword">using</a> <a id="6661" class="Symbol">(</a> <a id="6663" href="Function.Base.html#615" class="Function">id</a> <a id="6666" class="Symbol">;</a> <a id="6668" href="Function.Base.html#1554" class="Function">flip</a> <a id="6673" class="Symbol">;</a> <a id="6675" href="Function.Base.html#1031" class="Function Operator">_âˆ˜_</a>                                   <a id="6713" class="Symbol">)</a>
<a id="6715" class="Keyword">open</a> <a id="6720" class="Keyword">import</a>  <a id="6728" href="Level.html" class="Module">Level</a>                                   <a id="6768" class="Keyword">using</a> <a id="6774" class="Symbol">(</a> <a id="6776" href="Agda.Primitive.html#597" class="Postulate">Level</a>                                             <a id="6826" class="Symbol">)</a>
<a id="6828" class="Keyword">open</a> <a id="6833" class="Keyword">import</a>  <a id="6841" href="Relation.Binary.html" class="Module">Relation.Binary</a>                         <a id="6881" class="Keyword">using</a> <a id="6887" class="Symbol">(</a> <a id="6889" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="6893" class="Symbol">;</a> <a id="6895" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="6902" class="Symbol">;</a> <a id="6904" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>                      <a id="6939" class="Symbol">)</a>
<a id="6941" class="Keyword">open</a> <a id="6946" class="Keyword">import</a>  <a id="6954" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a>             <a id="6994" class="Keyword">using</a> <a id="7000" class="Symbol">(</a> <a id="7002" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="7012" class="Symbol">;</a> <a id="7014" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a> <a id="7024" class="Symbol">;</a> <a id="7026" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a> <a id="7037" class="Symbol">;</a> <a id="7039" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="7043" class="Symbol">;</a> <a id="7045" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a>  <a id="7052" class="Symbol">)</a>
<a id="7054" class="Keyword">open</a> <a id="7059" class="Keyword">import</a>  <a id="7067" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>   <a id="7107" class="Keyword">using</a> <a id="7113" class="Symbol">(</a> <a id="7115" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_â‰¡_</a>                                               <a id="7165" class="Symbol">)</a>
<a id="7167" class="Keyword">open</a> <a id="7172" class="Keyword">import</a>  <a id="7180" href="Relation.Unary.html" class="Module">Relation.Unary</a>                          <a id="7220" class="Keyword">using</a> <a id="7226" class="Symbol">(</a> <a id="7228" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="7233" class="Symbol">;</a> <a id="7235" href="Relation.Unary.html#1742" class="Function Operator">_âŠ†_</a> <a id="7239" class="Symbol">;</a> <a id="7241" href="Relation.Unary.html#1523" class="Function Operator">_âˆˆ_</a>                                  <a id="7278" class="Symbol">)</a>

<a id="7281" class="Comment">-- Import 23 definitions from the Agda Standard Library and rename 12 of them.</a>
<a id="7360" class="Keyword">open</a> <a id="7365" class="Keyword">import</a>  <a id="7373" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="7389" class="Keyword">renaming</a>  <a id="7399" class="Symbol">(</a> <a id="7401" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="7405" class="Symbol">to</a> <a id="7408" class="Primitive">Type</a> <a id="7413" class="Symbol">)</a>                  <a id="7432" class="Keyword">using</a> <a id="7438" class="Symbol">(</a> <a id="7440" href="Agda.Primitive.html#810" class="Primitive Operator">_âŠ”_</a> <a id="7444" class="Symbol">;</a> <a id="7446" href="Agda.Primitive.html#780" class="Primitive">lsuc</a>                     <a id="7471" class="Symbol">)</a>
<a id="7473" class="Keyword">open</a> <a id="7478" class="Keyword">import</a>  <a id="7486" href="Data.Product.html" class="Module">Data.Product</a>    <a id="7502" class="Keyword">renaming</a>  <a id="7512" class="Symbol">(</a> <a id="7514" href="Agda.Builtin.Sigma.html#252" class="Field">projâ‚</a> <a id="7520" class="Symbol">to</a> <a id="7523" class="Field">fst</a> <a id="7527" class="Symbol">;</a> <a id="7529" href="Agda.Builtin.Sigma.html#264" class="Field">projâ‚‚</a> <a id="7535" class="Symbol">to</a> <a id="7538" class="Field">snd</a> <a id="7542" class="Symbol">)</a>  <a id="7545" class="Keyword">using</a> <a id="7551" class="Symbol">(</a> <a id="7553" href="Data.Product.html#1167" class="Function Operator">_Ã—_</a> <a id="7557" class="Symbol">;</a> <a id="7559" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="7563" class="Symbol">;</a> <a id="7565" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="7567" class="Symbol">;</a> <a id="7569" href="Data.Product.html#916" class="Function">Î£-syntax</a>       <a id="7584" class="Symbol">)</a>
<a id="7586" class="Keyword">open</a> <a id="7591" class="Keyword">import</a>  <a id="7599" href="Function.html" class="Module">Function</a>        <a id="7615" class="Keyword">renaming</a>  <a id="7625" class="Symbol">(</a> <a id="7627" href="Function.Bundles.html#1868" class="Record">Func</a> <a id="7632" class="Symbol">to</a> <a id="7635" class="Record">_âŸ¶_</a> <a id="7639" class="Symbol">)</a>                  <a id="7658" class="Keyword">using</a> <a id="7664" class="Symbol">(</a> <a id="7666" href="Function.Bundles.html#2240" class="Record">Injection</a> <a id="7676" class="Symbol">;</a> <a id="7678" href="Function.Bundles.html#2677" class="Record">Surjection</a>         <a id="7697" class="Symbol">)</a>
<a id="7699" class="Keyword">open</a>         <a id="7712" href="Demos.HSP.html#7635" class="Module">_âŸ¶_</a>             <a id="7728" class="Keyword">renaming</a>  <a id="7738" class="Symbol">(</a> <a id="7740" href="Function.Bundles.html#1919" class="Field">f</a>      <a id="7747" class="Symbol">to</a> <a id="7750" class="Field">_âŸ¨$âŸ©_</a>   <a id="7758" class="Symbol">)</a>            <a id="7771" class="Keyword">using</a> <a id="7777" class="Symbol">(</a> <a id="7779" href="Function.Bundles.html#1938" class="Field">cong</a>                           <a id="7810" class="Symbol">)</a>
<a id="7812" class="Keyword">open</a>         <a id="7825" href="Relation.Binary.Structures.html#1522" class="Module">IsEquivalence</a>   <a id="7841" class="Keyword">renaming</a>  <a id="7851" class="Symbol">(</a> <a id="7853" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="7858" class="Symbol">to</a> <a id="7861" class="Field">refláµ‰</a>  <a id="7868" class="Symbol">;</a> <a id="7870" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="7874" class="Symbol">to</a> <a id="7877" class="Field">symáµ‰</a>  <a id="7883" class="Symbol">;</a> <a id="7885" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="7892" class="Symbol">to</a> <a id="7895" class="Field">transáµ‰</a> <a id="7902" class="Symbol">)</a>  <a id="7905" class="Keyword">using</a> <a id="7911" class="Symbol">(</a>           <a id="7923" class="Symbol">)</a>
<a id="7925" class="Keyword">open</a>         <a id="7938" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>          <a id="7954" class="Keyword">renaming</a>  <a id="7964" class="Symbol">(</a> <a id="7966" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="7971" class="Symbol">to</a> <a id="7974" class="Function">reflË¢</a>  <a id="7981" class="Symbol">;</a> <a id="7983" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="7987" class="Symbol">to</a> <a id="7990" class="Function">symË¢</a>  <a id="7996" class="Symbol">;</a> <a id="7998" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="8005" class="Symbol">to</a> <a id="8008" class="Function">transË¢</a> <a id="8015" class="Symbol">;</a> <a id="8017" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="8021" class="Symbol">to</a> <a id="8024" class="Field Operator">_â‰ˆË¢_</a>        <a id="8036" class="Symbol">)</a>
                             <a id="8067" class="Keyword">using</a>     <a id="8077" class="Symbol">(</a> <a id="8079" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="8087" class="Symbol">;</a> <a id="8089" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>                                               <a id="8149" class="Symbol">)</a>

<a id="8152" class="Comment">-- Assign handles to 3 modules of the Agda Standard Library.</a>
<a id="8213" class="Keyword">import</a>       <a id="8226" href="Function.Definitions.html" class="Module">Function.Definitions</a>                   <a id="8265" class="Symbol">as</a>   <a id="8270" class="Module">FD</a>
<a id="8273" class="Keyword">import</a>       <a id="8286" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="8325" class="Symbol">as</a>   <a id="8330" class="Module">â‰¡</a>
<a id="8332" class="Keyword">import</a>       <a id="8345" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a>       <a id="8384" class="Symbol">as</a>   <a id="8389" class="Module">SetoidReasoning</a>

<a id="8406" class="Keyword">private</a> <a id="8414" class="Keyword">variable</a> <a id="8423" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="8425" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="8428" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="8430" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a> <a id="8433" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="8435" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a> <a id="8438" href="Demos.HSP.html#8438" class="Generalizable">Î´</a> <a id="8440" href="Demos.HSP.html#8440" class="Generalizable">Ïáµˆ</a> <a id="8443" href="Demos.HSP.html#8443" class="Generalizable">Ï</a> <a id="8445" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a> <a id="8447" href="Demos.HSP.html#8447" class="Generalizable">â„“</a> <a id="8449" class="Symbol">:</a> <a id="8451" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="8457" class="Symbol">;</a>     <a id="8463" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="8465" href="Demos.HSP.html#8465" class="Generalizable">Î”</a> <a id="8467" class="Symbol">:</a> <a id="8469" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="8474" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a> <a id="8476" class="Symbol">;</a>         <a id="8486" href="Demos.HSP.html#8486" class="Generalizable">ğ‘“</a>  <a id="8489" class="Symbol">:</a> <a id="8491" href="Demos.HSP.html#7523" class="Field">fst</a> <a id="8495" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a>
</pre>

The above imports include some adjustments to ``standard \agda'' syntax; in particular,
we use \AgdaPrimitive{Type} in place of \AgdaPrimitive{Set}, the infix long arrow symbol,
\AgdaRecord{\AgdaUnderscore{}âŸ¶\AgdaUnderscore{}}, instead of \AgdaRecord{Func} (the type of ``setoid functions,'' discussed in Â§\ref{setoid-functions} below), and the symbol \aofld{\au{}âŸ¨\$âŸ©\au{}} in place of \afld{f} (application of the map of a setoid function); we use
\AgdaField{fst} and \AgdaField{snd}, and sometimes \AgdaOperator{\AgdaFunction{âˆ£\AgdaUnderscore{}âˆ£}} and
\AgdaOperator{\AgdaFunction{âˆ¥\AgdaUnderscore{}âˆ¥}}, to denote the first and second
projections out of the product type
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}Ã—\AgdaUnderscore{}}}.
\ifshort\else

<pre class="Agda">
<a id="9277" class="Keyword">module</a> <a id="9284" href="Demos.HSP.html#9284" class="Module">_</a> <a id="9286" class="Symbol">{</a><a id="9287" href="Demos.HSP.html#9287" class="Bound">A</a> <a id="9289" class="Symbol">:</a> <a id="9291" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="9296" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="9298" class="Symbol">}{</a><a id="9300" href="Demos.HSP.html#9300" class="Bound">B</a> <a id="9302" class="Symbol">:</a> <a id="9304" href="Demos.HSP.html#9287" class="Bound">A</a> <a id="9306" class="Symbol">â†’</a> <a id="9308" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="9313" href="Demos.HSP.html#8428" class="Generalizable">Î²</a><a id="9314" class="Symbol">}</a> <a id="9316" class="Keyword">where</a>
 <a id="9323" href="Demos.HSP.html#9323" class="Function Operator">âˆ£_âˆ£</a> <a id="9327" class="Symbol">:</a> <a id="9329" href="Data.Product.html#916" class="Function">Î£[</a> <a id="9332" href="Demos.HSP.html#9332" class="Bound">x</a> <a id="9334" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="9336" href="Demos.HSP.html#9287" class="Bound">A</a> <a id="9338" href="Data.Product.html#916" class="Function">]</a> <a id="9340" href="Demos.HSP.html#9300" class="Bound">B</a> <a id="9342" href="Demos.HSP.html#9332" class="Bound">x</a> <a id="9344" class="Symbol">â†’</a> <a id="9346" href="Demos.HSP.html#9287" class="Bound">A</a>
 <a id="9349" href="Demos.HSP.html#9323" class="Function Operator">âˆ£_âˆ£</a> <a id="9353" class="Symbol">=</a> <a id="9355" href="Demos.HSP.html#7523" class="Field">fst</a>
 <a id="9360" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥_âˆ¥</a> <a id="9364" class="Symbol">:</a> <a id="9366" class="Symbol">(</a><a id="9367" href="Demos.HSP.html#9367" class="Bound">z</a> <a id="9369" class="Symbol">:</a> <a id="9371" href="Data.Product.html#916" class="Function">Î£[</a> <a id="9374" href="Demos.HSP.html#9374" class="Bound">a</a> <a id="9376" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="9378" href="Demos.HSP.html#9287" class="Bound">A</a> <a id="9380" href="Data.Product.html#916" class="Function">]</a> <a id="9382" href="Demos.HSP.html#9300" class="Bound">B</a> <a id="9384" href="Demos.HSP.html#9374" class="Bound">a</a><a id="9385" class="Symbol">)</a> <a id="9387" class="Symbol">â†’</a> <a id="9389" href="Demos.HSP.html#9300" class="Bound">B</a> <a id="9391" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="9393" href="Demos.HSP.html#9367" class="Bound">z</a> <a id="9395" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
 <a id="9398" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥_âˆ¥</a> <a id="9402" class="Symbol">=</a> <a id="9404" href="Demos.HSP.html#7538" class="Field">snd</a>
</pre>
\fi

%% -----------------------------------------------------------------------------
\subsection{Setoids}\label{setoids}
A \defn{setoid} is a pair consisting of a type \ab A and
an equivalence relation \af{â‰ˆ} on \ab A.  Setoids are useful for representing a
set with a ``local'' notion of equivalence, instead of relying on
the global one as is usual in set theory. In reality,
mathematial practice uses equivalence relations quite pervasively, and
takes great care to only define equivalence-preserving functions, while
eliding the actual details. To be properly formal, such details must be given.
While there are many different workable approaches, the one that requires
no additional meta-theory is based on setoids, which is why we adopt it here.
While in some settings this has been found by others to be burdensome, we have not
found it to be so for universal algebra.

% \ddmmyydate

The \agdaalgebras library was first developed without setoids, relying on
propositional equality \ad{\au{}â‰¡\au{}} instead,
along with some experimental, domain-specific types for equivalence classes, quotients, etc.
This required postulating function extensionality,%
\footnote{An axiom that asserts that two point-wise equal functions are equal.} which is
known to be independent from \mltt~\cite{MHE, MHE:2019}. This was
an unsatisfactory state of affairs, as %we were curious to see if
our aim is to show that the theorems hold directly in \mltt without extra axioms.
In particular, we make no appeal to classical axioms like Choice or Excluded Middle.


%% -----------------------------------------------------------------------------
\subsection{Setoid functions}
\label{setoid-functions}
A ``setoid function'' (denoted by
\AgdaRecord{\AgdaUnderscore{}âŸ¶\AgdaUnderscore{}}) is a function from
a setoid \ab A to another setoid \ab B that respects the underlying equivalences.

\ifshort\else
An example of a setoid function is the identity function from a setoid to itself.
We define it, along with a binary composition operation for setoid functions,
\AgdaOperator{\AgdaFunction{âŸ¨âˆ˜âŸ©}}, as follows.

<pre class="Agda">

<a id="ğ‘–ğ‘‘"></a><a id="11528" href="Demos.HSP.html#11528" class="Function">ğ‘–ğ‘‘</a> <a id="11531" class="Symbol">:</a> <a id="11533" class="Symbol">{</a><a id="11534" href="Demos.HSP.html#11534" class="Bound">A</a> <a id="11536" class="Symbol">:</a> <a id="11538" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11545" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="11547" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="11549" class="Symbol">}</a> <a id="11551" class="Symbol">â†’</a> <a id="11553" href="Demos.HSP.html#11534" class="Bound">A</a> <a id="11555" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="11557" href="Demos.HSP.html#11534" class="Bound">A</a>
<a id="11559" href="Demos.HSP.html#11528" class="Function">ğ‘–ğ‘‘</a> <a id="11562" class="Symbol">{</a><a id="11563" href="Demos.HSP.html#11563" class="Bound">A</a><a id="11564" class="Symbol">}</a> <a id="11566" class="Symbol">=</a> <a id="11568" class="Keyword">record</a> <a id="11575" class="Symbol">{</a> <a id="11577" href="Function.Bundles.html#1919" class="Field">f</a> <a id="11579" class="Symbol">=</a> <a id="11581" href="Function.Base.html#615" class="Function">id</a> <a id="11584" class="Symbol">;</a> <a id="11586" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11591" class="Symbol">=</a> <a id="11593" href="Function.Base.html#615" class="Function">id</a> <a id="11596" class="Symbol">}</a>

<a id="_âŸ¨âˆ˜âŸ©_"></a><a id="11599" href="Demos.HSP.html#11599" class="Function Operator">_âŸ¨âˆ˜âŸ©_</a> <a id="11605" class="Symbol">:</a>  <a id="11608" class="Symbol">{</a><a id="11609" href="Demos.HSP.html#11609" class="Bound">A</a> <a id="11611" class="Symbol">:</a> <a id="11613" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11620" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="11622" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="11624" class="Symbol">}</a> <a id="11626" class="Symbol">{</a><a id="11627" href="Demos.HSP.html#11627" class="Bound">B</a> <a id="11629" class="Symbol">:</a> <a id="11631" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11638" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="11640" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="11642" class="Symbol">}</a> <a id="11644" class="Symbol">{</a><a id="11645" href="Demos.HSP.html#11645" class="Bound">C</a> <a id="11647" class="Symbol">:</a> <a id="11649" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11656" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="11658" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="11660" class="Symbol">}</a>
 <a id="11663" class="Symbol">â†’</a>       <a id="11671" href="Demos.HSP.html#11627" class="Bound">B</a> <a id="11673" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="11675" href="Demos.HSP.html#11645" class="Bound">C</a>  <a id="11678" class="Symbol">â†’</a>  <a id="11681" href="Demos.HSP.html#11609" class="Bound">A</a> <a id="11683" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="11685" href="Demos.HSP.html#11627" class="Bound">B</a>  <a id="11688" class="Symbol">â†’</a>  <a id="11691" href="Demos.HSP.html#11609" class="Bound">A</a> <a id="11693" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="11695" href="Demos.HSP.html#11645" class="Bound">C</a>

<a id="11698" href="Demos.HSP.html#11698" class="Bound">f</a> <a id="11700" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="11704" href="Demos.HSP.html#11704" class="Bound">g</a> <a id="11706" class="Symbol">=</a> <a id="11708" class="Keyword">record</a>  <a id="11716" class="Symbol">{</a> <a id="11718" href="Function.Bundles.html#1919" class="Field">f</a> <a id="11720" class="Symbol">=</a> <a id="11722" class="Symbol">(</a><a id="11723" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="11729" href="Demos.HSP.html#11698" class="Bound">f</a><a id="11730" class="Symbol">)</a> <a id="11732" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="11734" class="Symbol">(</a><a id="11735" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="11741" href="Demos.HSP.html#11704" class="Bound">g</a><a id="11742" class="Symbol">)</a>
                  <a id="11762" class="Symbol">;</a> <a id="11764" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11769" class="Symbol">=</a> <a id="11771" class="Symbol">(</a><a id="11772" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11777" href="Demos.HSP.html#11698" class="Bound">f</a><a id="11778" class="Symbol">)</a> <a id="11780" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="11782" class="Symbol">(</a><a id="11783" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11788" href="Demos.HSP.html#11704" class="Bound">g</a><a id="11789" class="Symbol">)</a> <a id="11791" class="Symbol">}</a>
</pre>
\fi

\paragraph*{Inverses}
We frequently need to deal with the \defn{inverse} of a function. This is most easily defined in terms of the
\emph{image} of the function's domain, as follows.

<pre class="Agda">

<a id="12007" class="Keyword">module</a> <a id="12014" href="Demos.HSP.html#12014" class="Module">_</a> <a id="12016" class="Symbol">{</a><a id="12017" href="Demos.HSP.html#12017" class="Bound">ğ‘¨</a> <a id="12019" class="Symbol">:</a> <a id="12021" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12028" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="12030" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="12032" class="Symbol">}{</a><a id="12034" href="Demos.HSP.html#12034" class="Bound">ğ‘©</a> <a id="12036" class="Symbol">:</a> <a id="12038" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12045" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="12047" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="12049" class="Symbol">}</a> <a id="12051" class="Keyword">where</a>
 <a id="12058" class="Keyword">open</a> <a id="12063" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12070" href="Demos.HSP.html#12034" class="Bound">ğ‘©</a> <a id="12072" class="Keyword">using</a> <a id="12078" class="Symbol">(</a> <a id="12080" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="12084" class="Symbol">;</a> <a id="12086" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="12090" class="Symbol">)</a> <a id="12092" class="Keyword">renaming</a> <a id="12101" class="Symbol">(</a> <a id="12103" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12111" class="Symbol">to</a> <a id="12114" class="Field">B</a> <a id="12116" class="Symbol">)</a>

 <a id="12120" class="Keyword">data</a> <a id="12125" href="Demos.HSP.html#12125" class="Datatype Operator">Image_âˆ‹_</a> <a id="12134" class="Symbol">(</a><a id="12135" href="Demos.HSP.html#12135" class="Bound">f</a> <a id="12137" class="Symbol">:</a> <a id="12139" href="Demos.HSP.html#12017" class="Bound">ğ‘¨</a> <a id="12141" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="12143" href="Demos.HSP.html#12034" class="Bound">ğ‘©</a><a id="12144" class="Symbol">)</a> <a id="12146" class="Symbol">:</a> <a id="12148" href="Demos.HSP.html#12114" class="Field">B</a> <a id="12150" class="Symbol">â†’</a> <a id="12152" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="12157" class="Symbol">(</a><a id="12158" href="Demos.HSP.html#12028" class="Bound">Î±</a> <a id="12160" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="12162" href="Demos.HSP.html#12045" class="Bound">Î²</a> <a id="12164" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="12166" href="Demos.HSP.html#12047" class="Bound">Ïáµ‡</a><a id="12168" class="Symbol">)</a> <a id="12170" class="Keyword">where</a>
  <a id="12178" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="12181" class="Symbol">:</a> <a id="12183" class="Symbol">{</a><a id="12184" href="Demos.HSP.html#12184" class="Bound">b</a> <a id="12186" class="Symbol">:</a> <a id="12188" href="Demos.HSP.html#12114" class="Field">B</a><a id="12189" class="Symbol">}</a> <a id="12191" class="Symbol">â†’</a> <a id="12193" class="Symbol">âˆ€</a> <a id="12195" href="Demos.HSP.html#12195" class="Bound">a</a> <a id="12197" class="Symbol">â†’</a> <a id="12199" href="Demos.HSP.html#12184" class="Bound">b</a> <a id="12201" href="Relation.Binary.Bundles.html#1098" class="Field Operator">â‰ˆ</a> <a id="12203" href="Demos.HSP.html#12135" class="Bound">f</a> <a id="12205" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="12209" href="Demos.HSP.html#12195" class="Bound">a</a> <a id="12211" class="Symbol">â†’</a> <a id="12213" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="12219" href="Demos.HSP.html#12135" class="Bound">f</a> <a id="12221" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="12223" href="Demos.HSP.html#12184" class="Bound">b</a>

</pre>

An inhabitant of the \aod{Image} \ab f \aod{âˆ‹} \ab b type is a point \ab a of type \ab A,
along with a proof, \ab p~\as :~\ab b \af{â‰ˆ} \ab f~\ab a, that \ab f maps \ab a to \ab b.
Since the witness that \ab b
belongs to the image of \ab f is always accompanied by a concrete witness \AgdaTyped{a}{A}, we can
\emph{compute} a range-restricted right-inverse of \ab f.  For extra certainty, we also verify
that our witness really is an inverse.

<pre class="Agda">

 <a id="12696" href="Demos.HSP.html#12696" class="Function">Inv</a> <a id="12700" class="Symbol">:</a> <a id="12702" class="Symbol">(</a><a id="12703" href="Demos.HSP.html#12703" class="Bound">f</a> <a id="12705" class="Symbol">:</a> <a id="12707" href="Demos.HSP.html#12017" class="Bound">ğ‘¨</a> <a id="12709" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="12711" href="Demos.HSP.html#12034" class="Bound">ğ‘©</a><a id="12712" class="Symbol">){</a><a id="12714" href="Demos.HSP.html#12714" class="Bound">b</a> <a id="12716" class="Symbol">:</a> <a id="12718" href="Demos.HSP.html#12114" class="Field">B</a><a id="12719" class="Symbol">}</a> <a id="12721" class="Symbol">â†’</a> <a id="12723" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="12729" href="Demos.HSP.html#12703" class="Bound">f</a> <a id="12731" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="12733" href="Demos.HSP.html#12714" class="Bound">b</a> <a id="12735" class="Symbol">â†’</a> <a id="12737" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12745" href="Demos.HSP.html#12017" class="Bound">ğ‘¨</a>
 <a id="12748" href="Demos.HSP.html#12696" class="Function">Inv</a> <a id="12752" class="Symbol">_</a> <a id="12754" class="Symbol">(</a><a id="12755" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="12758" href="Demos.HSP.html#12758" class="Bound">a</a> <a id="12760" class="Symbol">_)</a> <a id="12763" class="Symbol">=</a> <a id="12765" href="Demos.HSP.html#12758" class="Bound">a</a>

 <a id="12769" href="Demos.HSP.html#12769" class="Function">InvIsInverseÊ³</a> <a id="12783" class="Symbol">:</a> <a id="12785" class="Symbol">{</a><a id="12786" href="Demos.HSP.html#12786" class="Bound">f</a> <a id="12788" class="Symbol">:</a> <a id="12790" href="Demos.HSP.html#12017" class="Bound">ğ‘¨</a> <a id="12792" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="12794" href="Demos.HSP.html#12034" class="Bound">ğ‘©</a><a id="12795" class="Symbol">}{</a><a id="12797" href="Demos.HSP.html#12797" class="Bound">b</a> <a id="12799" class="Symbol">:</a> <a id="12801" href="Demos.HSP.html#12114" class="Field">B</a><a id="12802" class="Symbol">}(</a><a id="12804" href="Demos.HSP.html#12804" class="Bound">q</a> <a id="12806" class="Symbol">:</a> <a id="12808" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="12814" href="Demos.HSP.html#12786" class="Bound">f</a> <a id="12816" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="12818" href="Demos.HSP.html#12797" class="Bound">b</a><a id="12819" class="Symbol">)</a> <a id="12821" class="Symbol">â†’</a> <a id="12823" href="Demos.HSP.html#12786" class="Bound">f</a> <a id="12825" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="12829" class="Symbol">(</a><a id="12830" href="Demos.HSP.html#12696" class="Function">Inv</a> <a id="12834" href="Demos.HSP.html#12786" class="Bound">f</a> <a id="12836" href="Demos.HSP.html#12804" class="Bound">q</a><a id="12837" class="Symbol">)</a> <a id="12839" href="Relation.Binary.Bundles.html#1098" class="Field Operator">â‰ˆ</a> <a id="12841" href="Demos.HSP.html#12797" class="Bound">b</a>
 <a id="12844" href="Demos.HSP.html#12769" class="Function">InvIsInverseÊ³</a> <a id="12858" class="Symbol">(</a><a id="12859" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="12862" class="Symbol">_</a> <a id="12864" href="Demos.HSP.html#12864" class="Bound">p</a><a id="12865" class="Symbol">)</a> <a id="12867" class="Symbol">=</a> <a id="12869" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="12873" href="Demos.HSP.html#12864" class="Bound">p</a>
</pre>

\paragraph*{Injective and surjective setoid functions}
If \ab{f} : \ab{ğ‘¨} \aor{âŸ¶} \ab{ğ‘©}
then we call \ab f \defn{injective} provided
\as{âˆ€} (\ab{aâ‚€} \ab{aâ‚} \as : \ab{A}), \ab{f} \aofld{âŸ¨\$âŸ©} \ab{aâ‚€} \af{â‰ˆá´®} \ab{f} \aofld{âŸ¨\$âŸ©} \ab{aâ‚}
implies \ab{aâ‚€} \af{â‰ˆá´¬} \ab{aâ‚}; we call \ab{f} \defn{surjective} provided
\as{âˆ€} (\AgdaTyped{b}{B}), \as{âˆƒ}~(\AgdaTyped{a}{A}) such that \ab{f} \aofld{âŸ¨\$âŸ©} \ab{a} \af{â‰ˆá´®} \ab{b}.
\ifshort
We omit the straightforward \agda definitions.
\else

We represent injective functions on bare types by the
type \af{Injective}, and uses this to define the \af{IsInjective} type to represent
the property of being an injective setoid function. Similarly, the type \af{IsSurjective}
represents the property of being a surjective setoid function. \af{SurjInv} represents the \emph{right-inverse} of a surjective function.

We reproduce the definitions and prove some of their properties
inside the next submodule where we first set the stage by declaring two
setoids \ab{ğ‘¨} and \ab{ğ‘©}, naming their equality relations, and making some
definitions from the standard library available.

<pre class="Agda">

<a id="14011" class="Keyword">module</a> <a id="14018" href="Demos.HSP.html#14018" class="Module">_</a> <a id="14020" class="Symbol">{</a><a id="14021" href="Demos.HSP.html#14021" class="Bound">ğ‘¨</a> <a id="14023" class="Symbol">:</a> <a id="14025" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14032" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="14034" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="14036" class="Symbol">}{</a><a id="14038" href="Demos.HSP.html#14038" class="Bound">ğ‘©</a> <a id="14040" class="Symbol">:</a> <a id="14042" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14049" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="14051" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="14053" class="Symbol">}</a> <a id="14055" class="Keyword">where</a>
 <a id="14062" class="Keyword">open</a> <a id="14067" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="14074" href="Demos.HSP.html#14021" class="Bound">ğ‘¨</a> <a id="14076" class="Keyword">using</a> <a id="14082" class="Symbol">()</a> <a id="14085" class="Keyword">renaming</a> <a id="14094" class="Symbol">(</a> <a id="14096" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="14100" class="Symbol">to</a> <a id="14103" class="Field Operator">_â‰ˆá´¬_</a> <a id="14108" class="Symbol">)</a>
 <a id="14111" class="Keyword">open</a> <a id="14116" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="14123" href="Demos.HSP.html#14038" class="Bound">ğ‘©</a> <a id="14125" class="Keyword">using</a> <a id="14131" class="Symbol">()</a> <a id="14134" class="Keyword">renaming</a> <a id="14143" class="Symbol">(</a> <a id="14145" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="14149" class="Symbol">to</a> <a id="14152" class="Field Operator">_â‰ˆá´®_</a> <a id="14157" class="Symbol">)</a>
 <a id="14160" class="Keyword">open</a> <a id="14165" href="Function.Definitions.html" class="Module">FD</a> <a id="14168" href="Demos.HSP.html#14103" class="Function Operator">_â‰ˆá´¬_</a> <a id="14173" href="Demos.HSP.html#14152" class="Field Operator">_â‰ˆá´®_</a>

 <a id="14180" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="14192" class="Symbol">:</a> <a id="14194" class="Symbol">(</a><a id="14195" href="Demos.HSP.html#14021" class="Bound">ğ‘¨</a> <a id="14197" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="14199" href="Demos.HSP.html#14038" class="Bound">ğ‘©</a><a id="14200" class="Symbol">)</a> <a id="14202" class="Symbol">â†’</a>  <a id="14205" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="14210" class="Symbol">(</a><a id="14211" href="Demos.HSP.html#14032" class="Bound">Î±</a> <a id="14213" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="14215" href="Demos.HSP.html#14034" class="Bound">Ïáµƒ</a> <a id="14218" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="14220" href="Demos.HSP.html#14051" class="Bound">Ïáµ‡</a><a id="14222" class="Symbol">)</a>
 <a id="14225" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="14237" href="Demos.HSP.html#14237" class="Bound">f</a> <a id="14239" class="Symbol">=</a> <a id="14241" href="Function.Definitions.html#889" class="Function">Injective</a> <a id="14251" class="Symbol">(</a><a id="14252" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="14258" href="Demos.HSP.html#14237" class="Bound">f</a><a id="14259" class="Symbol">)</a>

 <a id="14263" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="14276" class="Symbol">:</a> <a id="14278" class="Symbol">(</a><a id="14279" href="Demos.HSP.html#14021" class="Bound">ğ‘¨</a> <a id="14281" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="14283" href="Demos.HSP.html#14038" class="Bound">ğ‘©</a><a id="14284" class="Symbol">)</a> <a id="14286" class="Symbol">â†’</a>  <a id="14289" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="14294" class="Symbol">(</a><a id="14295" href="Demos.HSP.html#14032" class="Bound">Î±</a> <a id="14297" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="14299" href="Demos.HSP.html#14049" class="Bound">Î²</a> <a id="14301" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="14303" href="Demos.HSP.html#14051" class="Bound">Ïáµ‡</a><a id="14305" class="Symbol">)</a>
 <a id="14308" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="14321" href="Demos.HSP.html#14321" class="Bound">F</a> <a id="14323" class="Symbol">=</a> <a id="14325" class="Symbol">âˆ€</a> <a id="14327" class="Symbol">{</a><a id="14328" href="Demos.HSP.html#14328" class="Bound">y</a><a id="14329" class="Symbol">}</a> <a id="14331" class="Symbol">â†’</a> <a id="14333" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="14339" href="Demos.HSP.html#14321" class="Bound">F</a> <a id="14341" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="14343" href="Demos.HSP.html#14328" class="Bound">y</a>

 <a id="14347" href="Demos.HSP.html#14347" class="Function">SurjInv</a> <a id="14355" class="Symbol">:</a> <a id="14357" class="Symbol">(</a><a id="14358" href="Demos.HSP.html#14358" class="Bound">f</a> <a id="14360" class="Symbol">:</a> <a id="14362" href="Demos.HSP.html#14021" class="Bound">ğ‘¨</a> <a id="14364" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="14366" href="Demos.HSP.html#14038" class="Bound">ğ‘©</a><a id="14367" class="Symbol">)</a> <a id="14369" class="Symbol">â†’</a> <a id="14371" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="14384" href="Demos.HSP.html#14358" class="Bound">f</a> <a id="14386" class="Symbol">â†’</a> <a id="14388" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="14396" href="Demos.HSP.html#14038" class="Bound">ğ‘©</a> <a id="14398" class="Symbol">â†’</a> <a id="14400" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="14408" href="Demos.HSP.html#14021" class="Bound">ğ‘¨</a>
 <a id="14411" href="Demos.HSP.html#14347" class="Function">SurjInv</a> <a id="14419" href="Demos.HSP.html#14419" class="Bound">f</a> <a id="14421" href="Demos.HSP.html#14421" class="Bound">fonto</a> <a id="14427" href="Demos.HSP.html#14427" class="Bound">b</a> <a id="14429" class="Symbol">=</a> <a id="14431" href="Demos.HSP.html#12696" class="Function">Inv</a> <a id="14435" href="Demos.HSP.html#14419" class="Bound">f</a> <a id="14437" class="Symbol">(</a><a id="14438" href="Demos.HSP.html#14421" class="Bound">fonto</a> <a id="14444" class="Symbol">{</a><a id="14445" href="Demos.HSP.html#14427" class="Bound">b</a><a id="14446" class="Symbol">})</a>

</pre>

Proving that the composition of injective setoid functions is again injective
is simply a matter of composing the two assumed witnesses to injectivity.
Proving that surjectivity is preserved under composition is only slightly more involved.

<pre class="Agda">

<a id="14718" class="Keyword">module</a> <a id="14725" href="Demos.HSP.html#14725" class="Module">_</a>  <a id="14728" class="Symbol">{</a><a id="14729" href="Demos.HSP.html#14729" class="Bound">ğ‘¨</a> <a id="14731" class="Symbol">:</a> <a id="14733" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14740" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="14742" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="14744" class="Symbol">}{</a><a id="14746" href="Demos.HSP.html#14746" class="Bound">ğ‘©</a> <a id="14748" class="Symbol">:</a> <a id="14750" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14757" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="14759" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="14761" class="Symbol">}{</a><a id="14763" href="Demos.HSP.html#14763" class="Bound">ğ‘ª</a> <a id="14765" class="Symbol">:</a> <a id="14767" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14774" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="14776" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="14778" class="Symbol">}</a>
          <a id="14790" class="Symbol">(</a><a id="14791" href="Demos.HSP.html#14791" class="Bound">f</a> <a id="14793" class="Symbol">:</a> <a id="14795" href="Demos.HSP.html#14729" class="Bound">ğ‘¨</a> <a id="14797" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="14799" href="Demos.HSP.html#14746" class="Bound">ğ‘©</a><a id="14800" class="Symbol">)(</a><a id="14802" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="14804" class="Symbol">:</a> <a id="14806" href="Demos.HSP.html#14746" class="Bound">ğ‘©</a> <a id="14808" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="14810" href="Demos.HSP.html#14763" class="Bound">ğ‘ª</a><a id="14811" class="Symbol">)</a> <a id="14813" class="Keyword">where</a>

 <a id="14821" href="Demos.HSP.html#14821" class="Function">âˆ˜-IsInjective</a> <a id="14835" class="Symbol">:</a> <a id="14837" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="14849" href="Demos.HSP.html#14791" class="Bound">f</a> <a id="14851" class="Symbol">â†’</a> <a id="14853" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="14865" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="14867" class="Symbol">â†’</a> <a id="14869" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="14881" class="Symbol">(</a><a id="14882" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="14884" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="14888" href="Demos.HSP.html#14791" class="Bound">f</a><a id="14889" class="Symbol">)</a>
 <a id="14892" href="Demos.HSP.html#14821" class="Function">âˆ˜-IsInjective</a> <a id="14906" href="Demos.HSP.html#14906" class="Bound">finj</a> <a id="14911" href="Demos.HSP.html#14911" class="Bound">ginj</a> <a id="14916" class="Symbol">=</a> <a id="14918" href="Demos.HSP.html#14906" class="Bound">finj</a> <a id="14923" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="14925" href="Demos.HSP.html#14911" class="Bound">ginj</a>

 <a id="14932" href="Demos.HSP.html#14932" class="Function">âˆ˜-IsSurjective</a> <a id="14947" class="Symbol">:</a> <a id="14949" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="14962" href="Demos.HSP.html#14791" class="Bound">f</a> <a id="14964" class="Symbol">â†’</a> <a id="14966" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="14979" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="14981" class="Symbol">â†’</a> <a id="14983" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="14996" class="Symbol">(</a><a id="14997" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="14999" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="15003" href="Demos.HSP.html#14791" class="Bound">f</a><a id="15004" class="Symbol">)</a>
 <a id="15007" href="Demos.HSP.html#14932" class="Function">âˆ˜-IsSurjective</a> <a id="15022" href="Demos.HSP.html#15022" class="Bound">fonto</a> <a id="15028" href="Demos.HSP.html#15028" class="Bound">gonto</a> <a id="15034" class="Symbol">{</a><a id="15035" href="Demos.HSP.html#15035" class="Bound">y</a><a id="15036" class="Symbol">}</a> <a id="15038" class="Symbol">=</a> <a id="15040" href="Demos.HSP.html#15242" class="Function">Goal</a>
  <a id="15047" class="Keyword">where</a>
  <a id="15055" href="Demos.HSP.html#15055" class="Function">mp</a> <a id="15058" class="Symbol">:</a> <a id="15060" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="15066" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="15068" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="15070" href="Demos.HSP.html#15035" class="Bound">y</a> <a id="15072" class="Symbol">â†’</a> <a id="15074" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="15080" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="15082" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="15086" href="Demos.HSP.html#14791" class="Bound">f</a> <a id="15088" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="15090" href="Demos.HSP.html#15035" class="Bound">y</a>
  <a id="15094" href="Demos.HSP.html#15055" class="Function">mp</a> <a id="15097" class="Symbol">(</a><a id="15098" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="15101" href="Demos.HSP.html#15101" class="Bound">c</a> <a id="15103" href="Demos.HSP.html#15103" class="Bound">p</a><a id="15104" class="Symbol">)</a> <a id="15106" class="Symbol">=</a> <a id="15108" href="Demos.HSP.html#15161" class="Function">Î·</a> <a id="15110" href="Demos.HSP.html#15022" class="Bound">fonto</a>
   <a id="15119" class="Keyword">where</a>
   <a id="15128" class="Keyword">open</a> <a id="15133" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="15140" href="Demos.HSP.html#14763" class="Bound">ğ‘ª</a> <a id="15142" class="Keyword">using</a> <a id="15148" class="Symbol">(</a> <a id="15150" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="15156" class="Symbol">)</a>
   <a id="15161" href="Demos.HSP.html#15161" class="Function">Î·</a> <a id="15163" class="Symbol">:</a> <a id="15165" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="15171" href="Demos.HSP.html#14791" class="Bound">f</a> <a id="15173" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="15175" href="Demos.HSP.html#15101" class="Bound">c</a> <a id="15177" class="Symbol">â†’</a> <a id="15179" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="15185" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="15187" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="15191" href="Demos.HSP.html#14791" class="Bound">f</a> <a id="15193" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="15195" href="Demos.HSP.html#15035" class="Bound">y</a>
   <a id="15200" href="Demos.HSP.html#15161" class="Function">Î·</a> <a id="15202" class="Symbol">(</a><a id="15203" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="15206" href="Demos.HSP.html#15206" class="Bound">a</a> <a id="15208" href="Demos.HSP.html#15208" class="Bound">q</a><a id="15209" class="Symbol">)</a> <a id="15211" class="Symbol">=</a> <a id="15213" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="15216" href="Demos.HSP.html#15206" class="Bound">a</a> <a id="15218" class="Symbol">(</a><a id="15219" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="15225" href="Demos.HSP.html#15103" class="Bound">p</a> <a id="15227" class="Symbol">(</a><a id="15228" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="15233" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="15235" href="Demos.HSP.html#15208" class="Bound">q</a><a id="15236" class="Symbol">))</a>

  <a id="15242" href="Demos.HSP.html#15242" class="Function">Goal</a> <a id="15247" class="Symbol">:</a> <a id="15249" href="Demos.HSP.html#12125" class="Datatype Operator">Image</a> <a id="15255" href="Demos.HSP.html#14802" class="Bound">g</a> <a id="15257" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="15261" href="Demos.HSP.html#14791" class="Bound">f</a> <a id="15263" href="Demos.HSP.html#12125" class="Datatype Operator">âˆ‹</a> <a id="15265" href="Demos.HSP.html#15035" class="Bound">y</a>
  <a id="15269" href="Demos.HSP.html#15242" class="Function">Goal</a> <a id="15274" class="Symbol">=</a> <a id="15276" href="Demos.HSP.html#15055" class="Function">mp</a> <a id="15279" href="Demos.HSP.html#15028" class="Bound">gonto</a>
</pre>
\fi

\paragraph*{Kernels of setoid functions}
The \defn{kernel} of a function \ab f~\as :~\ab A~\as{â†’}~\ab B is defined informally
by \{\AgdaPair{x}{y} \aod{âˆˆ} \ab A \aof{Ã—} \ab A \as :
\ab f \ab x \as{=} \ab f \ab y \}. This can be represented in a number of ways,
but for our purposes it is convenient to define the kernel as an inhabitant of a (unary)
predicate over \ab A \aof{Ã—} \ab A.

<pre class="Agda">

<a id="kernel"></a><a id="15702" href="Demos.HSP.html#15702" class="Function">kernel</a> <a id="15709" class="Symbol">:</a> <a id="15711" class="Symbol">{</a><a id="15712" href="Demos.HSP.html#15712" class="Bound">A</a> <a id="15714" class="Symbol">:</a> <a id="15716" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="15721" href="Demos.HSP.html#8423" class="Generalizable">Î±</a><a id="15722" class="Symbol">}{</a><a id="15724" href="Demos.HSP.html#15724" class="Bound">B</a> <a id="15726" class="Symbol">:</a> <a id="15728" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="15733" href="Demos.HSP.html#8428" class="Generalizable">Î²</a><a id="15734" class="Symbol">}</a> <a id="15736" class="Symbol">â†’</a> <a id="15738" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="15742" href="Demos.HSP.html#15724" class="Bound">B</a> <a id="15744" href="Demos.HSP.html#8443" class="Generalizable">Ï</a> <a id="15746" class="Symbol">â†’</a> <a id="15748" class="Symbol">(</a><a id="15749" href="Demos.HSP.html#15712" class="Bound">A</a> <a id="15751" class="Symbol">â†’</a> <a id="15753" href="Demos.HSP.html#15724" class="Bound">B</a><a id="15754" class="Symbol">)</a> <a id="15756" class="Symbol">â†’</a> <a id="15758" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="15763" class="Symbol">(</a><a id="15764" href="Demos.HSP.html#15712" class="Bound">A</a> <a id="15766" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="15768" href="Demos.HSP.html#15712" class="Bound">A</a><a id="15769" class="Symbol">)</a> <a id="15771" href="Demos.HSP.html#8443" class="Generalizable">Ï</a>
<a id="15773" href="Demos.HSP.html#15702" class="Function">kernel</a> <a id="15780" href="Demos.HSP.html#15780" class="Bound Operator">_â‰ˆ_</a> <a id="15784" href="Demos.HSP.html#15784" class="Bound">f</a> <a id="15786" class="Symbol">(</a><a id="15787" href="Demos.HSP.html#15787" class="Bound">x</a> <a id="15789" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15791" href="Demos.HSP.html#15791" class="Bound">y</a><a id="15792" class="Symbol">)</a> <a id="15794" class="Symbol">=</a> <a id="15796" href="Demos.HSP.html#15784" class="Bound">f</a> <a id="15798" href="Demos.HSP.html#15787" class="Bound">x</a> <a id="15800" href="Demos.HSP.html#15780" class="Bound Operator">â‰ˆ</a> <a id="15802" href="Demos.HSP.html#15784" class="Bound">f</a> <a id="15804" href="Demos.HSP.html#15791" class="Bound">y</a>

</pre>
The kernel of a \emph{setoid} function \ab f \as : \ab{ğ´} \aor{âŸ¶} \ab{ğµ} is
defined similarly.

\ifshort\else
<pre class="Agda">
<a id="15941" class="Keyword">module</a> <a id="15948" href="Demos.HSP.html#15948" class="Module">_</a> <a id="15950" class="Symbol">{</a><a id="15951" href="Demos.HSP.html#15951" class="Bound">ğ´</a> <a id="15953" class="Symbol">:</a> <a id="15955" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="15962" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="15964" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="15966" class="Symbol">}{</a><a id="15968" href="Demos.HSP.html#15968" class="Bound">ğµ</a> <a id="15970" class="Symbol">:</a> <a id="15972" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="15979" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="15981" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="15983" class="Symbol">}</a> <a id="15985" class="Keyword">where</a>
 <a id="15992" class="Keyword">open</a> <a id="15997" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="16004" href="Demos.HSP.html#15951" class="Bound">ğ´</a> <a id="16006" class="Keyword">using</a> <a id="16012" class="Symbol">()</a> <a id="16015" class="Keyword">renaming</a> <a id="16024" class="Symbol">(</a> <a id="16026" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="16034" class="Symbol">to</a> <a id="16037" class="Field">A</a> <a id="16039" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="16071" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="16075" class="Symbol">:</a> <a id="16077" class="Symbol">(</a><a id="16078" href="Demos.HSP.html#15951" class="Bound">ğ´</a> <a id="16080" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="16082" href="Demos.HSP.html#15968" class="Bound">ğµ</a><a id="16083" class="Symbol">)</a> <a id="16085" class="Symbol">â†’</a> <a id="16087" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="16092" class="Symbol">(</a><a id="16093" href="Demos.HSP.html#16037" class="Function">A</a> <a id="16095" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="16097" href="Demos.HSP.html#16037" class="Function">A</a><a id="16098" class="Symbol">)</a> <a id="16100" href="Demos.HSP.html#15981" class="Bound">Ïáµ‡</a>
 <a id="16104" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="16108" href="Demos.HSP.html#16108" class="Bound">g</a> <a id="16110" class="Symbol">(</a><a id="16111" href="Demos.HSP.html#16111" class="Bound">x</a> <a id="16113" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="16115" href="Demos.HSP.html#16115" class="Bound">y</a><a id="16116" class="Symbol">)</a> <a id="16118" class="Symbol">=</a> <a id="16120" href="Demos.HSP.html#16108" class="Bound">g</a> <a id="16122" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="16126" href="Demos.HSP.html#16111" class="Bound">x</a> <a id="16128" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="16130" href="Demos.HSP.html#16108" class="Bound">g</a> <a id="16132" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="16136" href="Demos.HSP.html#16115" class="Bound">y</a> <a id="16138" class="Keyword">where</a> <a id="16144" class="Keyword">open</a> <a id="16149" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="16156" href="Demos.HSP.html#15968" class="Bound">ğµ</a> <a id="16158" class="Keyword">using</a> <a id="16164" class="Symbol">(</a> <a id="16166" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="16170" class="Symbol">)</a>
</pre>


%% -------------------------------------------------------------------------------------

\section{Basic Universal Algebra}
\label{basic-universal-algebra}
We now develop a working vocabulary in \mltt corresponding to classical,
single-sorted, set-based universal algebra.
We cover a number of important concepts, but limit ourselves to those
required to prove Birkhoff's HSP theorem.
In each case, we give a type-theoretic version of the informal definition,
followed by an \agda implementation.

This section is organized into the following subsections:
Â§\ref{signatures} defines a general notion of \emph{signature} of a structure and
then defines a type that represent signatures;
Â§\ref{algebras} does the same for \emph{algebraic structures} and \emph{product algebras};
Â§\ref{homomorphisms} defines \emph{homomorphisms}, \emph{monomorphisms}, and \emph{epimorphisms},
presents types that codify these concepts, and formally verifies some of their basic properties;
Â§Â§\ref{subalgebras}--\ref{terms} do the same for \emph{subalgebras} and \emph{terms}, respectively.

%% -----------------------------------------------------------------------------
\subsection{Signatures}
\label{signatures}

\ifshort
An (algebraic) \defn{signature}
\else
In model theory, the \defn{signature} of a structure is a quadruple \ab{ğ‘†} = (\ab{C},
\ab{F}, \ab{R}, \ab{Ï}) consisting of three (possibly empty) sets \ab{C}, \ab{F}, and
\ab{R}---called \emph{constant}, \emph{function}, and \emph{relation} symbols,
respectively---along with a function \ab{Ï} : \ab{C} \as{+} \ab{F} \as{+} \ab{R}
\as{â†’} \ab{N} that assigns an \emph{arity} to each symbol. Often, but not always, \ab{N}
is taken to be the set of natural numbers.

As our focus here is universal algebra, we consider the restricted notion of an
\emph{algebraic signature}, that is, a signature for ``purely algebraic'' structures. Such
a signature
\fi
is a pair \ab{ğ‘†} = \AgdaPair{F}{Ï} where \ab{F} is a collection of
\defn{operation symbols} and \ab{Ï} : \ab{F} \as{â†’} \ab{N} is an \defn{arity function}
which maps each operation symbol to its arity. Here, \ab{N} denotes the \emph{arity type}.
Heuristically, the arity \ab{Ï} \ab{f} of an operation symbol \ab{f} \as{âˆˆ} \ab{F} may be
thought of as the number of arguments that \ab{f} takes as ``input.''
Here (and in the Agda Universal Algebra Library) we represent signatures in a very general way, as the
inhabitants of the following dependent pair type.

\begin{center}

\AgdaFunction{Signature}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ“}\AgdaSpace{}%
\AgdaBound{ğ“¥}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Level}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaPrimitive{lsuc}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ“}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaBound{ğ“¥}\AgdaSymbol{))}\\[4pt]
\AgdaFunction{Signature}\AgdaSpace{}%
\AgdaBound{ğ“}\AgdaSpace{}%
\AgdaBound{ğ“¥}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Î£[}\AgdaSpace{}%
\AgdaBound{F}\AgdaSpace{}%
\AgdaFunction{âˆˆ}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaBound{ğ“}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{F}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaBound{ğ“¥}\AgdaSymbol{)}

\end{center}
Recalling our syntax for the first and second
projections, if \ab{ğ‘†} %\as{:} \af{Signature} \ab{ğ“} \ab{ğ“¥}
is a signature, then
\aof{âˆ£} \ab{ğ‘†} \aof{âˆ£} denotes the set of operation symbols and \aof{âˆ¥} \ab{ğ‘†} \aof{âˆ¥} denotes the arity function.
Thus, if \ab{f} \as{:} \aof{âˆ£} \ab{ğ‘†} \aof{âˆ£} is an operation symbol in the
signature \ab{ğ‘†}, then \aof{âˆ¥} \ab{ğ‘†} \aof{âˆ¥} \ab{f} is the arity of \ab{f}.

We need to augment the \af{Signature} type so that it supports algebras over setoid domains.
\ifshort\else
To do so---following Andreas Abel's lead (cf.~\cite{Abel:2021})---we
define an operator that translates an ordinary signature into a \defn{setoid signature},
that is, a signature over a setoid domain.
\fi
This raises a minor technical issue:
given operations \ab{f} and \ab{g}, with arguments
\ab{u} \as{:} \aof{âˆ¥} \ab{ğ‘†} \aof{âˆ¥} \ab{f} \as{â†’}\ab{A} and \ab{v} \as{:} \aof{âˆ¥} \ab{ğ‘†}
\aof{âˆ¥} \ab{g} \as{â†’} \ab{A}, respectively, and a proof that \ab{f} \aod{â‰¡} \ab{g} (i.e.
intensionally), we ought to be able to check whether \ab u and \ab v are pointwise
equal. Technically, \ab{u} and \ab{v} appear to inhabit different types; this is where the
hypothesis \ab f \aod{â‰¡} \ab g comes in, as we see in the definition of \af{EqArgs} below (adapted
from Andreas Abel's development~\cite{Abel:2021}).

<pre class="Agda">

<a id="EqArgs"></a><a id="20858" href="Demos.HSP.html#20858" class="Function">EqArgs</a> <a id="20865" class="Symbol">:</a>  <a id="20868" class="Symbol">{</a><a id="20869" href="Demos.HSP.html#20869" class="Bound">ğ‘†</a> <a id="20871" class="Symbol">:</a> <a id="20873" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="20883" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="20885" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a><a id="20886" class="Symbol">}{</a><a id="20888" href="Demos.HSP.html#20888" class="Bound">Î¾</a> <a id="20890" class="Symbol">:</a> <a id="20892" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="20899" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="20901" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="20903" class="Symbol">}</a>
 <a id="20906" class="Symbol">â†’</a>        <a id="20915" class="Symbol">âˆ€</a> <a id="20917" class="Symbol">{</a><a id="20918" href="Demos.HSP.html#20918" class="Bound">f</a> <a id="20920" href="Demos.HSP.html#20920" class="Bound">g</a><a id="20921" class="Symbol">}</a> <a id="20923" class="Symbol">â†’</a> <a id="20925" href="Demos.HSP.html#20918" class="Bound">f</a> <a id="20927" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="20929" href="Demos.HSP.html#20920" class="Bound">g</a> <a id="20931" class="Symbol">â†’</a> <a id="20933" class="Symbol">(</a><a id="20934" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="20936" href="Demos.HSP.html#20869" class="Bound">ğ‘†</a> <a id="20938" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="20940" href="Demos.HSP.html#20918" class="Bound">f</a> <a id="20942" class="Symbol">â†’</a> <a id="20944" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="20952" href="Demos.HSP.html#20888" class="Bound">Î¾</a><a id="20953" class="Symbol">)</a> <a id="20955" class="Symbol">â†’</a> <a id="20957" class="Symbol">(</a><a id="20958" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="20960" href="Demos.HSP.html#20869" class="Bound">ğ‘†</a> <a id="20962" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="20964" href="Demos.HSP.html#20920" class="Bound">g</a> <a id="20966" class="Symbol">â†’</a> <a id="20968" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="20976" href="Demos.HSP.html#20888" class="Bound">Î¾</a><a id="20977" class="Symbol">)</a> <a id="20979" class="Symbol">â†’</a> <a id="20981" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="20986" class="Symbol">(</a><a id="20987" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="20989" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="20991" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="20993" class="Symbol">)</a>
<a id="20995" href="Demos.HSP.html#20858" class="Function">EqArgs</a> <a id="21002" class="Symbol">{</a><a id="21003" class="Argument">Î¾</a> <a id="21005" class="Symbol">=</a> <a id="21007" href="Demos.HSP.html#21007" class="Bound">Î¾</a><a id="21008" class="Symbol">}</a> <a id="21010" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21017" href="Demos.HSP.html#21017" class="Bound">u</a> <a id="21019" href="Demos.HSP.html#21019" class="Bound">v</a> <a id="21021" class="Symbol">=</a> <a id="21023" class="Symbol">âˆ€</a> <a id="21025" href="Demos.HSP.html#21025" class="Bound">i</a> <a id="21027" class="Symbol">â†’</a> <a id="21029" href="Demos.HSP.html#21017" class="Bound">u</a> <a id="21031" href="Demos.HSP.html#21025" class="Bound">i</a> <a id="21033" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="21035" href="Demos.HSP.html#21019" class="Bound">v</a> <a id="21037" href="Demos.HSP.html#21025" class="Bound">i</a> <a id="21039" class="Keyword">where</a> <a id="21045" class="Keyword">open</a> <a id="21050" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="21057" href="Demos.HSP.html#21007" class="Bound">Î¾</a> <a id="21059" class="Keyword">using</a> <a id="21065" class="Symbol">(</a> <a id="21067" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="21071" class="Symbol">)</a>

</pre>
\noindent
This enables us to define an operator which translates a signature for algebras over bare types into a signature for algebras over setoids.
\ifshort\else
We denote this operator by \aof{âŸ¨\AgdaUnderscore{}âŸ©} and define it as follows.
\fi

<pre class="Agda">

<a id="âŸ¨_âŸ©"></a><a id="21347" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨_âŸ©</a> <a id="21351" class="Symbol">:</a> <a id="21353" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="21363" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="21365" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="21367" class="Symbol">â†’</a> <a id="21369" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="21376" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="21378" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="21381" class="Symbol">â†’</a> <a id="21383" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="21390" class="Symbol">_</a> <a id="21392" class="Symbol">_</a>

<a id="21395" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="21404" class="Symbol">(</a><a id="21405" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨</a> <a id="21407" href="Demos.HSP.html#21407" class="Bound">ğ‘†</a> <a id="21409" href="Demos.HSP.html#21347" class="Function Operator">âŸ©</a> <a id="21411" href="Demos.HSP.html#21411" class="Bound">Î¾</a><a id="21412" class="Symbol">)</a>                <a id="21429" class="Symbol">=</a> <a id="21431" href="Data.Product.html#916" class="Function">Î£[</a> <a id="21434" href="Demos.HSP.html#21434" class="Bound">f</a> <a id="21436" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="21438" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="21440" href="Demos.HSP.html#21407" class="Bound">ğ‘†</a> <a id="21442" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="21444" href="Data.Product.html#916" class="Function">]</a> <a id="21446" class="Symbol">(</a><a id="21447" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="21449" href="Demos.HSP.html#21407" class="Bound">ğ‘†</a> <a id="21451" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="21453" href="Demos.HSP.html#21434" class="Bound">f</a> <a id="21455" class="Symbol">â†’</a> <a id="21457" href="Demos.HSP.html#21411" class="Bound">Î¾</a> <a id="21459" class="Symbol">.</a><a id="21460" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="21467" class="Symbol">)</a>
<a id="21469" href="Demos.HSP.html#8024" class="Field Operator">_â‰ˆË¢_</a>     <a id="21478" class="Symbol">(</a><a id="21479" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨</a> <a id="21481" href="Demos.HSP.html#21481" class="Bound">ğ‘†</a> <a id="21483" href="Demos.HSP.html#21347" class="Function Operator">âŸ©</a> <a id="21485" href="Demos.HSP.html#21485" class="Bound">Î¾</a><a id="21486" class="Symbol">)(</a><a id="21488" href="Demos.HSP.html#21488" class="Bound">f</a> <a id="21490" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21492" href="Demos.HSP.html#21492" class="Bound">u</a><a id="21493" class="Symbol">)(</a><a id="21495" href="Demos.HSP.html#21495" class="Bound">g</a> <a id="21497" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21499" href="Demos.HSP.html#21499" class="Bound">v</a><a id="21500" class="Symbol">)</a>  <a id="21503" class="Symbol">=</a> <a id="21505" href="Data.Product.html#916" class="Function">Î£[</a> <a id="21508" href="Demos.HSP.html#21508" class="Bound">eqv</a> <a id="21512" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="21514" href="Demos.HSP.html#21488" class="Bound">f</a> <a id="21516" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="21518" href="Demos.HSP.html#21495" class="Bound">g</a> <a id="21520" href="Data.Product.html#916" class="Function">]</a> <a id="21522" href="Demos.HSP.html#20858" class="Function">EqArgs</a><a id="21528" class="Symbol">{</a><a id="21529" class="Argument">Î¾</a> <a id="21531" class="Symbol">=</a> <a id="21533" href="Demos.HSP.html#21485" class="Bound">Î¾</a><a id="21534" class="Symbol">}</a> <a id="21536" href="Demos.HSP.html#21508" class="Bound">eqv</a> <a id="21540" href="Demos.HSP.html#21492" class="Bound">u</a> <a id="21542" href="Demos.HSP.html#21499" class="Bound">v</a>

<a id="21545" href="Demos.HSP.html#7861" class="Field">refláµ‰</a>   <a id="21553" class="Symbol">(</a><a id="21554" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="21568" class="Symbol">(</a><a id="21569" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨</a> <a id="21571" href="Demos.HSP.html#21571" class="Bound">ğ‘†</a> <a id="21573" href="Demos.HSP.html#21347" class="Function Operator">âŸ©</a> <a id="21575" href="Demos.HSP.html#21575" class="Bound">Î¾</a><a id="21576" class="Symbol">))</a>                           <a id="21605" class="Symbol">=</a> <a id="21607" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21614" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21616" class="Symbol">Î»</a> <a id="21618" href="Demos.HSP.html#21618" class="Bound">i</a> <a id="21620" class="Symbol">â†’</a> <a id="21622" href="Demos.HSP.html#7974" class="Function">reflË¢</a>   <a id="21630" href="Demos.HSP.html#21575" class="Bound">Î¾</a>
<a id="21632" href="Demos.HSP.html#7877" class="Field">symáµ‰</a>    <a id="21640" class="Symbol">(</a><a id="21641" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="21655" class="Symbol">(</a><a id="21656" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨</a> <a id="21658" href="Demos.HSP.html#21658" class="Bound">ğ‘†</a> <a id="21660" href="Demos.HSP.html#21347" class="Function Operator">âŸ©</a> <a id="21662" href="Demos.HSP.html#21662" class="Bound">Î¾</a><a id="21663" class="Symbol">))</a> <a id="21666" class="Symbol">(</a><a id="21667" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21674" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21676" href="Demos.HSP.html#21676" class="Bound">g</a><a id="21677" class="Symbol">)</a>              <a id="21692" class="Symbol">=</a> <a id="21694" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21701" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21703" class="Symbol">Î»</a> <a id="21705" href="Demos.HSP.html#21705" class="Bound">i</a> <a id="21707" class="Symbol">â†’</a> <a id="21709" href="Demos.HSP.html#7990" class="Function">symË¢</a>    <a id="21717" href="Demos.HSP.html#21662" class="Bound">Î¾</a> <a id="21719" class="Symbol">(</a><a id="21720" href="Demos.HSP.html#21676" class="Bound">g</a> <a id="21722" href="Demos.HSP.html#21705" class="Bound">i</a><a id="21723" class="Symbol">)</a>
<a id="21725" href="Demos.HSP.html#7895" class="Field">transáµ‰</a>  <a id="21733" class="Symbol">(</a><a id="21734" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="21748" class="Symbol">(</a><a id="21749" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨</a> <a id="21751" href="Demos.HSP.html#21751" class="Bound">ğ‘†</a> <a id="21753" href="Demos.HSP.html#21347" class="Function Operator">âŸ©</a> <a id="21755" href="Demos.HSP.html#21755" class="Bound">Î¾</a><a id="21756" class="Symbol">))</a> <a id="21759" class="Symbol">(</a><a id="21760" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21767" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21769" href="Demos.HSP.html#21769" class="Bound">g</a><a id="21770" class="Symbol">)(</a><a id="21772" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21779" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21781" href="Demos.HSP.html#21781" class="Bound">h</a><a id="21782" class="Symbol">)</a>  <a id="21785" class="Symbol">=</a> <a id="21787" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21794" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21796" class="Symbol">Î»</a> <a id="21798" href="Demos.HSP.html#21798" class="Bound">i</a> <a id="21800" class="Symbol">â†’</a> <a id="21802" href="Demos.HSP.html#8008" class="Function">transË¢</a>  <a id="21810" href="Demos.HSP.html#21755" class="Bound">Î¾</a> <a id="21812" class="Symbol">(</a><a id="21813" href="Demos.HSP.html#21769" class="Bound">g</a> <a id="21815" href="Demos.HSP.html#21798" class="Bound">i</a><a id="21816" class="Symbol">)</a> <a id="21818" class="Symbol">(</a><a id="21819" href="Demos.HSP.html#21781" class="Bound">h</a> <a id="21821" href="Demos.HSP.html#21798" class="Bound">i</a><a id="21822" class="Symbol">)</a>
</pre>

%% -----------------------------------------------------------------------------
\subsection{Algebras}\label{algebras}
Informally, an \defn{algebraic structure} \ab{ğ‘¨} = (\ab{A}, \ab{Fá´¬}) \defn{in the signature}
\ab{ğ‘†} = (\ab{F}, \ab{Ï}), or \ab{ğ‘†}-\defn{algebra}, consists of
\begin{itemize}
\item a nonempty type \ab A, called the \defn{domain} (or \defn{carrier} or
\defn{universe}) of the algebra;
\item a collection \ab{Fá´¬} :=
  \{ \ab{fá´¬} \as{âˆ£} \ab f \as{âˆˆ} \ab F, \ab{fá´¬} \as :
    (\ab{Ï} \ab f \as{â†’} \ab A) \as{â†’} \ab A \} of \defn{operations} on \ab{A};
\item a (potentially empty) collection of \defn{identities} satisfied by elements and
operations of \ab{ğ‘¨}.
\end{itemize}
Our \agda implementation represents algebras as inhabitants of a record type with two
fields---a \afld{Domain} setoid denoting the domain of the algebras, and an \afld{Interp} function denoting the interpretation of each operation symbol in \ab{ğ‘†}. We postpone introducing identities until~Â§\ref{equational-logic}.

<pre class="Agda">

<a id="22854" class="Keyword">record</a> <a id="Algebra"></a><a id="22861" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="22869" href="Demos.HSP.html#22869" class="Bound">Î±</a> <a id="22871" href="Demos.HSP.html#22871" class="Bound">Ï</a> <a id="22873" class="Symbol">:</a> <a id="22875" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="22880" class="Symbol">(</a><a id="22881" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="22883" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="22885" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="22887" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="22889" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="22894" class="Symbol">(</a><a id="22895" href="Demos.HSP.html#22869" class="Bound">Î±</a> <a id="22897" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="22899" href="Demos.HSP.html#22871" class="Bound">Ï</a><a id="22900" class="Symbol">))</a> <a id="22903" class="Keyword">where</a>
 <a id="22910" class="Keyword">field</a>  <a id="Algebra.Domain"></a><a id="22917" href="Demos.HSP.html#22917" class="Field">Domain</a>  <a id="22925" class="Symbol">:</a> <a id="22927" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="22934" href="Demos.HSP.html#22869" class="Bound">Î±</a> <a id="22936" href="Demos.HSP.html#22871" class="Bound">Ï</a>
        <a id="Algebra.Interp"></a><a id="22946" href="Demos.HSP.html#22946" class="Field">Interp</a>  <a id="22954" class="Symbol">:</a> <a id="22956" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨</a> <a id="22958" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="22960" href="Demos.HSP.html#21347" class="Function Operator">âŸ©</a> <a id="22962" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="22969" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="22971" href="Demos.HSP.html#22917" class="Field">Domain</a>

</pre>
Thus, for each operation symbol in \ab{ğ‘†}, we have a setoid function
\ab f, whose domain is a power of \afld{Domain}, and whose codomain is \afld{Domain}.

Further, we define some syntactic sugar to make our formalizations easier to read and comprehend.
Specifically, if \ab{ğ‘¨} is an algebra, then
\begin{itemize}
\item \aof{ğ”»[ \ab{ğ‘¨} ]} denotes the \afld{Domain} setoid of \ab{ğ‘¨},
\item \aof{ğ•Œ[ \ab{ğ‘¨} ]} is the underlying carrier of (the \afld{Domain} setoid of) \ab{ğ‘¨}, and
\item \ab f \aof{Ì‚} \ab{ğ‘¨} denotes the interpretation of the operation symbol \ab f in the algebra \ab{ğ‘¨}.
\end{itemize}
\ifshort %%% BEGIN SHORT VERSION ONLY
 We omit the straightforward formal definitions of these types (\seemedium).
\else    %%% END SHORT VERSION ONLY
         %%% BEGIN LONG VERSION ONLY SECTION
<pre class="Agda">
<a id="23797" class="Keyword">open</a> <a id="23802" href="Demos.HSP.html#22861" class="Module">Algebra</a>
<a id="ğ”»[_]"></a><a id="23810" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[_]</a> <a id="23815" class="Symbol">:</a> <a id="23817" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="23825" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="23827" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="23830" class="Symbol">â†’</a>  <a id="23833" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="23840" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="23842" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a>
<a id="23845" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="23848" href="Demos.HSP.html#23848" class="Bound">ğ‘¨</a> <a id="23850" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="23852" class="Symbol">=</a> <a id="23854" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="23861" href="Demos.HSP.html#23848" class="Bound">ğ‘¨</a>
<a id="ğ•Œ[_]"></a><a id="23863" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[_]</a> <a id="23868" class="Symbol">:</a> <a id="23870" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="23878" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="23880" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="23883" class="Symbol">â†’</a>  <a id="23886" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="23891" href="Demos.HSP.html#8423" class="Generalizable">Î±</a>
<a id="23893" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="23896" href="Demos.HSP.html#23896" class="Bound">ğ‘¨</a> <a id="23898" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="23900" class="Symbol">=</a> <a id="23902" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="23910" class="Symbol">(</a><a id="23911" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="23918" href="Demos.HSP.html#23896" class="Bound">ğ‘¨</a><a id="23919" class="Symbol">)</a>
<a id="_Ì‚_"></a><a id="23921" href="Demos.HSP.html#23921" class="Function Operator">_Ì‚_</a> <a id="23925" class="Symbol">:</a> <a id="23927" class="Symbol">(</a><a id="23928" href="Demos.HSP.html#23928" class="Bound">f</a> <a id="23930" class="Symbol">:</a> <a id="23932" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="23934" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="23936" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a><a id="23937" class="Symbol">)(</a><a id="23939" href="Demos.HSP.html#23939" class="Bound">ğ‘¨</a> <a id="23941" class="Symbol">:</a> <a id="23943" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="23951" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="23953" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="23955" class="Symbol">)</a> <a id="23957" class="Symbol">â†’</a> <a id="23959" class="Symbol">(</a><a id="23960" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="23962" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="23964" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="23966" href="Demos.HSP.html#23928" class="Bound">f</a>  <a id="23969" class="Symbol">â†’</a>  <a id="23972" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="23975" href="Demos.HSP.html#23939" class="Bound">ğ‘¨</a> <a id="23977" href="Demos.HSP.html#23863" class="Function Operator">]</a><a id="23978" class="Symbol">)</a> <a id="23980" class="Symbol">â†’</a> <a id="23982" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="23985" href="Demos.HSP.html#23939" class="Bound">ğ‘¨</a> <a id="23987" href="Demos.HSP.html#23863" class="Function Operator">]</a>
<a id="23989" href="Demos.HSP.html#23989" class="Bound">f</a> <a id="23991" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="23993" href="Demos.HSP.html#23993" class="Bound">ğ‘¨</a> <a id="23995" class="Symbol">=</a> <a id="23997" class="Symbol">Î»</a> <a id="23999" href="Demos.HSP.html#23999" class="Bound">a</a> <a id="24001" class="Symbol">â†’</a> <a id="24003" class="Symbol">(</a><a id="24004" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="24011" href="Demos.HSP.html#23993" class="Bound">ğ‘¨</a><a id="24012" class="Symbol">)</a> <a id="24014" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="24018" class="Symbol">(</a><a id="24019" href="Demos.HSP.html#23989" class="Bound">f</a> <a id="24021" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24023" href="Demos.HSP.html#23999" class="Bound">a</a><a id="24024" class="Symbol">)</a>
</pre>
\fi

%% -----------------------------------------------------------------------------
\paragraph*{Universe levels of algebra types}
Types belong to \emph{universes}, which are structured in \agda as
follows:
\ap{Type} \ab{â„“} : \ap{Type} (\ap{suc} \ab{â„“}), \ap{Type} (\ap{suc} \ab{â„“}) : \ap{Type}
(\ap{suc} (\ap{suc} \ab{â„“})), â€¦.\footnote{\ap{suc} \ab{â„“} denotes the successor of \ab{â„“} in the universe hierarchy.} While this means that \ap{Type} \ab{â„“} has type \ap{Type}
(\ap{suc} \ab{â„“}), it does \emph{not} imply that \ap{Type} \ab{â„“} has type
\ap{Type} (\ap{suc} (\ap{suc} \ab{â„“})). In other words, \agda's universes are
\emph{non-cumulative}.
This can be advantageous as it becomes possible to treat size issues
more generally and precisely.  However, dealing with explicit
universe levels can be daunting, and the standard literature
(in which uniform smallness is typically assumed) offers little guidance.
\ifshort\else
This aspect of the language was one of the few stumbling
blocks we encountered while learning how to use \agda for formalizing universal algebra in
type theory. Although some may consider this to be one of the least interesting and most
technical aspects of this paper, others might find the presentation more helpful if we
resist the urge to gloss over these technicalities.
\fi
While in some settings, such as category theory, formalizing it in \agda~\cite{agda-categories}
works smoothly with respect to universe levels, in universal algebra the terrain is bumpier.
Thus, it seems worthwhile to explain how we make use
of universe lifting and lowering functions, available in the \agdastdlib, to
develop domain-specific tools for dealing with \agda's non-cumulative universe hierarchy.

\ifshort\else
Let us be more concrete about what is at issue by considering a typical example. \agda
frequently encounters problems during the type-checking process and responds by printing a
message like the following.
{\color{red}{\small
\begin{verbatim}
  HSP.lagda:498,20-23
  Î± != ğ“ âŠ” ğ“¥ âŠ” (lsuc Î±) when checking that... has type...
\end{verbatim}}}
\noindent Here \agda informs us that it encountered universe level \ab{Î±} on line 498 of
the HSP module, where it was expecting level \ab{ğ“}~\aop{âŠ”}~\ab{ğ“¥}~\aop{âŠ”}~(\ap{lsuc}
\ab{Î±}). In this case, we tried to use an algebra inhabiting the type \ar{Algebra}
\ab{Î±} \ab{Ïáµƒ} whereas \agda expected an inhabitant of the type \ar{Algebra} (\ab{ğ“}
\aop{âŠ”} \ab{ğ“¥} \aop{âŠ”} (\ap{lsuc} \ab{Î±})) \ab{Ïáµƒ}.
\fi
The \ar{Lift} operation of the standard library embeds a type into a higher universe.
Specializing \ar{Lift} to our situation, we
define a function \af{Lift-Alg}%
\ifshort
~with the following interface.
\vskip-2mm
\else
.

<pre class="Agda">

<a id="26745" class="Keyword">module</a> <a id="26752" href="Demos.HSP.html#26752" class="Module">_</a> <a id="26754" class="Symbol">(</a><a id="26755" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a> <a id="26757" class="Symbol">:</a> <a id="26759" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="26767" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="26769" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="26771" class="Symbol">)</a> <a id="26773" class="Keyword">where</a>
 <a id="26780" class="Keyword">open</a> <a id="26785" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="26792" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="26795" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a> <a id="26797" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="26799" class="Keyword">using</a> <a id="26805" class="Symbol">(</a> <a id="26807" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="26811" class="Symbol">;</a> <a id="26813" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="26818" class="Symbol">;</a> <a id="26820" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="26824" class="Symbol">;</a> <a id="26826" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="26832" class="Symbol">)</a> <a id="26834" class="Symbol">;</a> <a id="26836" class="Keyword">open</a> <a id="26841" href="Level.html" class="Module">Level</a>
 <a id="26848" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="26858" class="Symbol">:</a> <a id="26860" class="Symbol">(</a><a id="26861" href="Demos.HSP.html#26861" class="Bound">â„“</a> <a id="26863" class="Symbol">:</a> <a id="26865" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="26870" class="Symbol">)</a> <a id="26872" class="Symbol">â†’</a> <a id="26874" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="26882" class="Symbol">(</a><a id="26883" href="Demos.HSP.html#26767" class="Bound">Î±</a> <a id="26885" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="26887" href="Demos.HSP.html#26861" class="Bound">â„“</a><a id="26888" class="Symbol">)</a> <a id="26890" href="Demos.HSP.html#26769" class="Bound">Ïáµƒ</a>
 <a id="26894" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="26901" class="Symbol">(</a><a id="26902" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="26912" href="Demos.HSP.html#26912" class="Bound">â„“</a><a id="26913" class="Symbol">)</a> <a id="26915" class="Symbol">=</a>
  <a id="26919" class="Keyword">record</a>  <a id="26927" class="Symbol">{</a> <a id="26929" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="26944" class="Symbol">=</a> <a id="26946" href="Level.html#400" class="Record">Lift</a> <a id="26951" href="Demos.HSP.html#26912" class="Bound">â„“</a> <a id="26953" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="26956" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a> <a id="26958" href="Demos.HSP.html#23863" class="Function Operator">]</a>
          <a id="26970" class="Symbol">;</a> <a id="26972" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a>            <a id="26987" class="Symbol">=</a> <a id="26989" class="Symbol">Î»</a> <a id="26991" href="Demos.HSP.html#26991" class="Bound">x</a> <a id="26993" href="Demos.HSP.html#26993" class="Bound">y</a> <a id="26995" class="Symbol">â†’</a> <a id="26997" href="Level.html#470" class="Field">lower</a> <a id="27003" href="Demos.HSP.html#26991" class="Bound">x</a> <a id="27005" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="27007" href="Level.html#470" class="Field">lower</a> <a id="27013" href="Demos.HSP.html#26993" class="Bound">y</a>
          <a id="27025" class="Symbol">;</a> <a id="27027" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="27042" class="Symbol">=</a> <a id="27044" class="Keyword">record</a> <a id="27051" class="Symbol">{</a> <a id="27053" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="27058" class="Symbol">=</a> <a id="27060" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="27065" class="Symbol">;</a> <a id="27067" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="27071" class="Symbol">=</a> <a id="27073" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="27077" class="Symbol">;</a> <a id="27079" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="27085" class="Symbol">=</a> <a id="27087" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="27093" class="Symbol">}}</a>

 <a id="27098" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="27105" class="Symbol">(</a><a id="27106" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="27116" href="Demos.HSP.html#27116" class="Bound">â„“</a><a id="27117" class="Symbol">)</a> <a id="27119" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="27123" class="Symbol">(</a><a id="27124" href="Demos.HSP.html#27124" class="Bound">f</a> <a id="27126" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27128" href="Demos.HSP.html#27128" class="Bound">la</a><a id="27130" class="Symbol">)</a> <a id="27132" class="Symbol">=</a> <a id="27134" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27139" class="Symbol">((</a><a id="27141" href="Demos.HSP.html#27124" class="Bound">f</a> <a id="27143" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="27145" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a><a id="27146" class="Symbol">)</a> <a id="27148" class="Symbol">(</a><a id="27149" href="Level.html#470" class="Field">lower</a> <a id="27155" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="27157" href="Demos.HSP.html#27128" class="Bound">la</a><a id="27159" class="Symbol">))</a>
 <a id="27163" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="27168" class="Symbol">(</a><a id="27169" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="27176" class="Symbol">(</a><a id="27177" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="27187" href="Demos.HSP.html#27187" class="Bound">â„“</a><a id="27188" class="Symbol">))</a> <a id="27191" class="Symbol">(</a><a id="27192" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="27199" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27201" href="Demos.HSP.html#27201" class="Bound">lab</a><a id="27204" class="Symbol">)</a> <a id="27206" class="Symbol">=</a> <a id="27208" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="27213" class="Symbol">(</a><a id="27214" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="27221" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a><a id="27222" class="Symbol">)</a> <a id="27224" class="Symbol">((</a><a id="27226" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="27233" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27235" href="Demos.HSP.html#27201" class="Bound">lab</a><a id="27238" class="Symbol">))</a>

 <a id="27243" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="27253" class="Symbol">:</a> <a id="27255" class="Symbol">(</a><a id="27256" href="Demos.HSP.html#27256" class="Bound">â„“</a> <a id="27258" class="Symbol">:</a> <a id="27260" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="27265" class="Symbol">)</a> <a id="27267" class="Symbol">â†’</a> <a id="27269" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="27277" href="Demos.HSP.html#26767" class="Bound">Î±</a> <a id="27279" class="Symbol">(</a><a id="27280" href="Demos.HSP.html#26769" class="Bound">Ïáµƒ</a> <a id="27283" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27285" href="Demos.HSP.html#27256" class="Bound">â„“</a><a id="27286" class="Symbol">)</a>
 <a id="27289" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="27296" class="Symbol">(</a><a id="27297" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="27307" href="Demos.HSP.html#27307" class="Bound">â„“</a><a id="27308" class="Symbol">)</a> <a id="27310" class="Symbol">=</a>
  <a id="27314" class="Keyword">record</a>  <a id="27322" class="Symbol">{</a> <a id="27324" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="27339" class="Symbol">=</a> <a id="27341" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="27344" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a> <a id="27346" href="Demos.HSP.html#23863" class="Function Operator">]</a>
          <a id="27358" class="Symbol">;</a> <a id="27360" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a>            <a id="27375" class="Symbol">=</a> <a id="27377" class="Symbol">Î»</a> <a id="27379" href="Demos.HSP.html#27379" class="Bound">x</a> <a id="27381" href="Demos.HSP.html#27381" class="Bound">y</a> <a id="27383" class="Symbol">â†’</a> <a id="27385" href="Level.html#400" class="Record">Lift</a> <a id="27390" href="Demos.HSP.html#27307" class="Bound">â„“</a> <a id="27392" class="Symbol">(</a><a id="27393" href="Demos.HSP.html#27379" class="Bound">x</a> <a id="27395" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="27397" href="Demos.HSP.html#27381" class="Bound">y</a><a id="27398" class="Symbol">)</a>
          <a id="27410" class="Symbol">;</a> <a id="27412" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="27427" class="Symbol">=</a> <a id="27429" class="Keyword">record</a>  <a id="27437" class="Symbol">{</a> <a id="27439" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="27445" class="Symbol">=</a> <a id="27447" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27452" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                     <a id="27494" class="Symbol">;</a> <a id="27496" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="27502" class="Symbol">=</a> <a id="27504" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27509" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="27511" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="27515" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="27517" href="Level.html#470" class="Field">lower</a>
                                     <a id="27560" class="Symbol">;</a> <a id="27562" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="27568" class="Symbol">=</a> <a id="27570" class="Symbol">Î»</a> <a id="27572" href="Demos.HSP.html#27572" class="Bound">x</a> <a id="27574" href="Demos.HSP.html#27574" class="Bound">y</a> <a id="27576" class="Symbol">â†’</a> <a id="27578" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27583" class="Symbol">(</a><a id="27584" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="27590" class="Symbol">(</a><a id="27591" href="Level.html#470" class="Field">lower</a> <a id="27597" href="Demos.HSP.html#27572" class="Bound">x</a><a id="27598" class="Symbol">)(</a><a id="27600" href="Level.html#470" class="Field">lower</a> <a id="27606" href="Demos.HSP.html#27574" class="Bound">y</a><a id="27607" class="Symbol">))</a> <a id="27610" class="Symbol">}}</a>

 <a id="27615" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="27622" class="Symbol">(</a><a id="27623" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="27633" href="Demos.HSP.html#27633" class="Bound">â„“</a> <a id="27635" class="Symbol">)</a> <a id="27637" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="27641" class="Symbol">(</a><a id="27642" href="Demos.HSP.html#27642" class="Bound">f</a> <a id="27644" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27646" href="Demos.HSP.html#27646" class="Bound">la</a><a id="27648" class="Symbol">)</a> <a id="27650" class="Symbol">=</a> <a id="27652" class="Symbol">(</a><a id="27653" href="Demos.HSP.html#27642" class="Bound">f</a> <a id="27655" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="27657" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a><a id="27658" class="Symbol">)</a> <a id="27660" href="Demos.HSP.html#27646" class="Bound">la</a>
 <a id="27664" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="27669" class="Symbol">(</a><a id="27670" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="27677" class="Symbol">(</a><a id="27678" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="27688" href="Demos.HSP.html#27688" class="Bound">â„“</a><a id="27689" class="Symbol">))(</a><a id="27692" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="27699" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27701" href="Demos.HSP.html#27701" class="Bound">lab</a><a id="27704" class="Symbol">)</a> <a id="27706" class="Symbol">=</a> <a id="27708" href="Level.html#457" class="InductiveConstructor">lift</a><a id="27712" class="Symbol">(</a><a id="27713" href="Function.Bundles.html#1938" class="Field">cong</a><a id="27717" class="Symbol">(</a><a id="27718" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="27725" href="Demos.HSP.html#26755" class="Bound">ğ‘¨</a><a id="27726" class="Symbol">)(</a><a id="27728" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="27735" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27737" class="Symbol">Î»</a> <a id="27739" href="Demos.HSP.html#27739" class="Bound">i</a> <a id="27741" class="Symbol">â†’</a> <a id="27743" href="Level.html#470" class="Field">lower</a> <a id="27749" class="Symbol">(</a><a id="27750" href="Demos.HSP.html#27701" class="Bound">lab</a> <a id="27754" href="Demos.HSP.html#27739" class="Bound">i</a><a id="27755" class="Symbol">)))</a>
</pre>
\fi

<pre class="Agda">

<a id="Lift-Alg"></a><a id="27789" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="27798" class="Symbol">:</a> <a id="27800" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="27808" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="27810" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="27813" class="Symbol">â†’</a> <a id="27815" class="Symbol">(</a><a id="27816" href="Demos.HSP.html#27816" class="Bound">â„“â‚€</a> <a id="27819" href="Demos.HSP.html#27819" class="Bound">â„“â‚</a> <a id="27822" class="Symbol">:</a> <a id="27824" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="27829" class="Symbol">)</a> <a id="27831" class="Symbol">â†’</a> <a id="27833" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="27841" class="Symbol">(</a><a id="27842" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="27844" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27846" href="Demos.HSP.html#27816" class="Bound">â„“â‚€</a><a id="27848" class="Symbol">)</a> <a id="27850" class="Symbol">(</a><a id="27851" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="27854" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27856" href="Demos.HSP.html#27819" class="Bound">â„“â‚</a><a id="27858" class="Symbol">)</a>
</pre>
\ifshort
\vskip2mm
\else
<pre class="Agda">
<a id="27909" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="27918" href="Demos.HSP.html#27918" class="Bound">ğ‘¨</a> <a id="27920" href="Demos.HSP.html#27920" class="Bound">â„“â‚€</a> <a id="27923" href="Demos.HSP.html#27923" class="Bound">â„“â‚</a> <a id="27926" class="Symbol">=</a> <a id="27928" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="27938" class="Symbol">(</a><a id="27939" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="27949" href="Demos.HSP.html#27918" class="Bound">ğ‘¨</a> <a id="27951" href="Demos.HSP.html#27920" class="Bound">â„“â‚€</a><a id="27953" class="Symbol">)</a> <a id="27955" href="Demos.HSP.html#27923" class="Bound">â„“â‚</a>

</pre>
\fi
\noindent Recall that our \ar{Algebra} type has two universe level parameters, corresponding
to those of the domain setoid.
\ifshort\else
Concretely, an algebra of type \ar{Algebra} \ab{Î±} \ab{Ïáµƒ} has a
\afld{Domain} of type \ar{Setoid} \ab{Î±} \ab{Ïáµƒ}. This packages a ``carrier set''
(\afld{Carrier}), inhabiting \ap{Type} \ab{Î±}, with an equality on \afld{Carrier} of type
\af{Rel} \afld{Carrier} \ab{Ïáµƒ}.
\fi
\af{Lift-Alg} takes an algebra parametrized by levels \ab{a} and \ab{Ïáµƒ}
and constructs a new algebra whose
carrier inhabits \ap{Type} (\ab{Î±} \ap{âŠ”} \ab{â„“â‚€}) with equality of type \af{Rel}
\afld{Carrier} (\ab{Ïáµƒ} \ap{âŠ”} \ab{â„“â‚}). To be useful, this lifting operation should
result in an algebra with the same semantic properties as the input algebra, which is
indeed the case
\ifshort
(\qv).
\else
as we will see in Â§\ref{isomorphisms}.
\fi

\paragraph*{Product Algebras}
Recall the (informal) definition of the \defn{product} of a family of
\ab{ğ‘†}-algebras.
Let \ab{Î¹} be a universe and \ab I~:~\ap{Type}~\ab{Î¹} a type (the ``indexing type'').
Then \ab{ğ’œ}~:~\ab I~\as{â†’}~\ab{Algebra}~\ab{Î±}~\ab{Ïáµƒ} represents
an \defn{indexed family of algebras}.
Denote by \af{â¨…}~\ab{ğ’œ} the \defn{product of algebras} in \ab{ğ’œ} (or \defn{product
algebra}), by which we mean the algebra whose domain is the Cartesian product \af{Î }~\ab
i~ê‰~\ab I~\af{,}~\aof{ğ”»[~\ab{ğ’œ}~\ab i~]} of the domains of the algebras in \ab{ğ’œ}, and
whose operations are those arising by pointwise interpretation in the obvious way: if
\ab{f} is a \ab J-ary operation symbol and if
\ab a~:~\af{Î }~\ab i~ê‰~\ab I~\af{,}~\ab J~\as{â†’}~\aof{ğ”»[~\ab{ğ’œ}~\ab i~]} is, for each
\ab i~:~\ab I, a \ab J-tuple of elements of the domain \aof{ğ”»[~\ab{ğ’œ}~\ab i~]}, then
we define the interpretation of \ab f in \af{â¨…}~\ab{ğ’œ} by\\[-2mm]

(\ab{f}~\af{Ì‚}~\af{â¨…}~\ab{ğ’œ}) \ab a := \as{Î»}~(\ab i~:~\ab I)~\as{â†’}
(\ab{f}~\af{Ì‚}~\ab{ğ’œ}~\ab i)(\ab{a}~\ab i).\\[8pt]
Here is how we formalize the concept of product algebra in \agda.

<pre class="Agda">

<a id="29966" class="Keyword">module</a> <a id="29973" href="Demos.HSP.html#29973" class="Module">_</a> <a id="29975" class="Symbol">{</a><a id="29976" href="Demos.HSP.html#29976" class="Bound">Î¹</a> <a id="29978" class="Symbol">:</a> <a id="29980" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="29985" class="Symbol">}{</a><a id="29987" href="Demos.HSP.html#29987" class="Bound">I</a> <a id="29989" class="Symbol">:</a> <a id="29991" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="29996" href="Demos.HSP.html#29976" class="Bound">Î¹</a> <a id="29998" class="Symbol">}</a> <a id="30000" class="Keyword">where</a>
 <a id="30007" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="30009" class="Symbol">:</a> <a id="30011" class="Symbol">(</a><a id="30012" href="Demos.HSP.html#30012" class="Bound">ğ’œ</a> <a id="30014" class="Symbol">:</a> <a id="30016" href="Demos.HSP.html#29987" class="Bound">I</a> <a id="30018" class="Symbol">â†’</a> <a id="30020" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="30028" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="30030" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="30032" class="Symbol">)</a> <a id="30034" class="Symbol">â†’</a> <a id="30036" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="30044" class="Symbol">(</a><a id="30045" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="30047" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="30049" href="Demos.HSP.html#29976" class="Bound">Î¹</a><a id="30050" class="Symbol">)</a> <a id="30052" class="Symbol">(</a><a id="30053" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="30056" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="30058" href="Demos.HSP.html#29976" class="Bound">Î¹</a><a id="30059" class="Symbol">)</a>
 <a id="30062" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="30069" class="Symbol">(</a><a id="30070" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="30072" href="Demos.HSP.html#30072" class="Bound">ğ’œ</a><a id="30073" class="Symbol">)</a> <a id="30075" class="Symbol">=</a>
  <a id="30079" class="Keyword">record</a> <a id="30086" class="Symbol">{</a> <a id="30088" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="30096" class="Symbol">=</a> <a id="30098" class="Symbol">âˆ€</a> <a id="30100" href="Demos.HSP.html#30100" class="Bound">i</a> <a id="30102" class="Symbol">â†’</a> <a id="30104" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="30107" href="Demos.HSP.html#30072" class="Bound">ğ’œ</a> <a id="30109" href="Demos.HSP.html#30100" class="Bound">i</a> <a id="30111" href="Demos.HSP.html#23863" class="Function Operator">]</a>
         <a id="30122" class="Symbol">;</a> <a id="30124" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="30128" class="Symbol">=</a> <a id="30130" class="Symbol">Î»</a> <a id="30132" href="Demos.HSP.html#30132" class="Bound">a</a> <a id="30134" href="Demos.HSP.html#30134" class="Bound">b</a> <a id="30136" class="Symbol">â†’</a> <a id="30138" class="Symbol">âˆ€</a> <a id="30140" href="Demos.HSP.html#30140" class="Bound">i</a> <a id="30142" class="Symbol">â†’</a> <a id="30144" class="Symbol">(</a><a id="30145" href="Demos.HSP.html#8024" class="Field Operator">_â‰ˆË¢_</a> <a id="30150" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="30153" href="Demos.HSP.html#30072" class="Bound">ğ’œ</a> <a id="30155" href="Demos.HSP.html#30140" class="Bound">i</a> <a id="30157" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="30158" class="Symbol">)</a> <a id="30160" class="Symbol">(</a><a id="30161" href="Demos.HSP.html#30132" class="Bound">a</a> <a id="30163" href="Demos.HSP.html#30140" class="Bound">i</a><a id="30164" class="Symbol">)(</a><a id="30166" href="Demos.HSP.html#30134" class="Bound">b</a> <a id="30168" href="Demos.HSP.html#30140" class="Bound">i</a><a id="30169" class="Symbol">)</a>
         <a id="30180" class="Symbol">;</a> <a id="30182" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30196" class="Symbol">=</a>
            <a id="30210" class="Keyword">record</a>  <a id="30218" class="Symbol">{</a> <a id="30220" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="30227" class="Symbol">=</a> <a id="30229" class="Symbol">Î»</a> <a id="30231" href="Demos.HSP.html#30231" class="Bound">i</a> <a id="30233" class="Symbol">â†’</a>      <a id="30240" href="Demos.HSP.html#7861" class="Field">refláµ‰</a>   <a id="30248" class="Symbol">(</a><a id="30249" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30263" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="30266" href="Demos.HSP.html#30072" class="Bound">ğ’œ</a> <a id="30268" href="Demos.HSP.html#30231" class="Bound">i</a> <a id="30270" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="30271" class="Symbol">)</a>
                    <a id="30293" class="Symbol">;</a> <a id="30295" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="30302" class="Symbol">=</a> <a id="30304" class="Symbol">Î»</a> <a id="30306" href="Demos.HSP.html#30306" class="Bound">x</a> <a id="30308" href="Demos.HSP.html#30308" class="Bound">i</a> <a id="30310" class="Symbol">â†’</a>    <a id="30315" href="Demos.HSP.html#7877" class="Field">symáµ‰</a>    <a id="30323" class="Symbol">(</a><a id="30324" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30338" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="30341" href="Demos.HSP.html#30072" class="Bound">ğ’œ</a> <a id="30343" href="Demos.HSP.html#30308" class="Bound">i</a> <a id="30345" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="30346" class="Symbol">)(</a><a id="30348" href="Demos.HSP.html#30306" class="Bound">x</a> <a id="30350" href="Demos.HSP.html#30308" class="Bound">i</a><a id="30351" class="Symbol">)</a>
                    <a id="30373" class="Symbol">;</a> <a id="30375" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="30382" class="Symbol">=</a> <a id="30384" class="Symbol">Î»</a> <a id="30386" href="Demos.HSP.html#30386" class="Bound">x</a> <a id="30388" href="Demos.HSP.html#30388" class="Bound">y</a> <a id="30390" href="Demos.HSP.html#30390" class="Bound">i</a> <a id="30392" class="Symbol">â†’</a>  <a id="30395" href="Demos.HSP.html#7895" class="Field">transáµ‰</a>  <a id="30403" class="Symbol">(</a><a id="30404" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30418" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="30421" href="Demos.HSP.html#30072" class="Bound">ğ’œ</a> <a id="30423" href="Demos.HSP.html#30390" class="Bound">i</a> <a id="30425" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="30426" class="Symbol">)(</a><a id="30428" href="Demos.HSP.html#30386" class="Bound">x</a> <a id="30430" href="Demos.HSP.html#30390" class="Bound">i</a><a id="30431" class="Symbol">)(</a><a id="30433" href="Demos.HSP.html#30388" class="Bound">y</a> <a id="30435" href="Demos.HSP.html#30390" class="Bound">i</a><a id="30436" class="Symbol">)</a> <a id="30438" class="Symbol">}}</a>
 <a id="30442" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="30449" class="Symbol">(</a><a id="30450" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="30452" href="Demos.HSP.html#30452" class="Bound">ğ’œ</a><a id="30453" class="Symbol">)</a> <a id="30455" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="30459" class="Symbol">(</a><a id="30460" href="Demos.HSP.html#30460" class="Bound">f</a> <a id="30462" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30464" href="Demos.HSP.html#30464" class="Bound">a</a><a id="30465" class="Symbol">)</a> <a id="30467" class="Symbol">=</a> <a id="30469" class="Symbol">Î»</a> <a id="30471" href="Demos.HSP.html#30471" class="Bound">i</a> <a id="30473" class="Symbol">â†’</a> <a id="30475" class="Symbol">(</a><a id="30476" href="Demos.HSP.html#30460" class="Bound">f</a> <a id="30478" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="30480" class="Symbol">(</a><a id="30481" href="Demos.HSP.html#30452" class="Bound">ğ’œ</a> <a id="30483" href="Demos.HSP.html#30471" class="Bound">i</a><a id="30484" class="Symbol">))</a> <a id="30487" class="Symbol">(</a><a id="30488" href="Function.Base.html#1554" class="Function">flip</a> <a id="30493" href="Demos.HSP.html#30464" class="Bound">a</a> <a id="30495" href="Demos.HSP.html#30471" class="Bound">i</a><a id="30496" class="Symbol">)</a>
 <a id="30499" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30504" class="Symbol">(</a><a id="30505" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="30512" class="Symbol">(</a><a id="30513" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="30515" href="Demos.HSP.html#30515" class="Bound">ğ’œ</a><a id="30516" class="Symbol">))</a> <a id="30519" class="Symbol">(</a><a id="30520" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="30527" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30529" href="Demos.HSP.html#30529" class="Bound">f=g</a> <a id="30533" class="Symbol">)</a> <a id="30535" class="Symbol">=</a> <a id="30537" class="Symbol">Î»</a> <a id="30539" href="Demos.HSP.html#30539" class="Bound">i</a> <a id="30541" class="Symbol">â†’</a> <a id="30543" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30548" class="Symbol">(</a><a id="30549" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="30556" class="Symbol">(</a><a id="30557" href="Demos.HSP.html#30515" class="Bound">ğ’œ</a> <a id="30559" href="Demos.HSP.html#30539" class="Bound">i</a><a id="30560" class="Symbol">))</a> <a id="30563" class="Symbol">(</a><a id="30564" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="30571" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30573" href="Function.Base.html#1554" class="Function">flip</a> <a id="30578" href="Demos.HSP.html#30529" class="Bound">f=g</a> <a id="30582" href="Demos.HSP.html#30539" class="Bound">i</a> <a id="30584" class="Symbol">)</a>

</pre>
\noindent Evidently, the \afld{Carrier} of the product algebra type is indeed the (dependent)
product of the carriers in the indexed family. The rest of the definitions are the ``pointwise''
versions of the underlying ones.

%% -------------------------------------------------------------------------------------
\subsection{Homomorphisms}\label{homomorphisms}
Throughout the rest of the paper, unless stated otherwise, \ab{ğ‘¨} and \ab{ğ‘©}
will denote \ab{ğ‘†}-algebras inhabiting the types \af{Algebra} \ab{Î±} \ab{Ïáµƒ} and
\af{Algebra} \ab{Î²} \ab{Ïáµ‡}, respectively.

A \defn{homomorphism} (or ``hom'') from
\ab{ğ‘¨} to \ab{ğ‘©} is a setoid function \ab{h}~:~\aof{ğ”»[~\ab{ğ‘¨}~]} \aor{âŸ¶} \aof{ğ”»[~\ab{ğ‘©}~]}
that is \defn{compatible} with all basic operations; that is, for
every operation symbol \ab{f} : \af{âˆ£~\ab{ğ‘†}~âˆ£} and all tuples
\ab{a} : \af{âˆ¥~\ab{ğ‘†}~âˆ¥}~\ab{f} \as{â†’} \aof{ğ•Œ[~\ab{ğ‘¨}~]}, we have \ab{h} \aofld{âŸ¨\$âŸ©}
(\ab{f}~\af{Ì‚}~\ab{ğ‘¨}) \ab{a} \af{â‰ˆ}
(\ab{f}~\af{Ì‚}~\ab{ğ‘©}) \ab{h} \aofld{âŸ¨\$âŸ©} (\ab{a} \au{}).\footnote{Here we use
\ab{h} \aofld{âŸ¨\$âŸ©} (\ab{a} \au{}) as a shorthand for
\as{Î»} \ab x \as{â†’} \ab h \AgdaOperator{\AgdaField{âŸ¨\$âŸ©}} (\ab a \ab x).}

It is convenient to first formalize ``compatible'' (\af{compatible-map-op}),
representing the assertion that a given setoid function
\ab{h}~:~\aof{ğ”»[~\ab{ğ‘¨}~]} \aor{âŸ¶} \aof{ğ”»[~\ab{ğ‘©}~]} commutes with a given
operation symbol \ab{f}, and then generalize over operation symbols (\af{compatible-map}),
to yield the type of compatible maps from (the domain of) \ab{ğ‘¨} to (the domain of) \ab{ğ‘©}.

\ifshort\else
<pre class="Agda">

<a id="32174" class="Keyword">module</a> <a id="32181" href="Demos.HSP.html#32181" class="Module">_</a> <a id="32183" class="Symbol">(</a><a id="32184" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="32186" class="Symbol">:</a> <a id="32188" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="32196" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="32198" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="32200" class="Symbol">)(</a><a id="32202" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="32204" class="Symbol">:</a> <a id="32206" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="32214" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="32216" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="32218" class="Symbol">)</a> <a id="32220" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="32256" href="Demos.HSP.html#32256" class="Function">compatible-map-op</a> <a id="32274" class="Symbol">:</a> <a id="32276" class="Symbol">(</a><a id="32277" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32280" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="32282" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="32284" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="32286" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32289" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="32291" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="32292" class="Symbol">)</a> <a id="32294" class="Symbol">â†’</a> <a id="32296" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="32298" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="32300" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="32302" class="Symbol">â†’</a> <a id="32304" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="32309" class="Symbol">_</a>
 <a id="32312" href="Demos.HSP.html#32256" class="Function">compatible-map-op</a> <a id="32330" href="Demos.HSP.html#32330" class="Bound">h</a> <a id="32332" href="Demos.HSP.html#32332" class="Bound">f</a> <a id="32334" class="Symbol">=</a> <a id="32336" class="Symbol">âˆ€</a> <a id="32338" class="Symbol">{</a><a id="32339" href="Demos.HSP.html#32339" class="Bound">a</a><a id="32340" class="Symbol">}</a> <a id="32342" class="Symbol">â†’</a> <a id="32344" href="Demos.HSP.html#32330" class="Bound">h</a> <a id="32346" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="32350" class="Symbol">(</a><a id="32351" href="Demos.HSP.html#32332" class="Bound">f</a> <a id="32353" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="32355" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a><a id="32356" class="Symbol">)</a> <a id="32358" href="Demos.HSP.html#32339" class="Bound">a</a> <a id="32360" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="32362" class="Symbol">(</a><a id="32363" href="Demos.HSP.html#32332" class="Bound">f</a> <a id="32365" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="32367" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a><a id="32368" class="Symbol">)</a> <a id="32370" class="Symbol">Î»</a> <a id="32372" href="Demos.HSP.html#32372" class="Bound">x</a> <a id="32374" class="Symbol">â†’</a> <a id="32376" href="Demos.HSP.html#32330" class="Bound">h</a> <a id="32378" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="32382" class="Symbol">(</a><a id="32383" href="Demos.HSP.html#32339" class="Bound">a</a> <a id="32385" href="Demos.HSP.html#32372" class="Bound">x</a><a id="32386" class="Symbol">)</a>
  <a id="32390" class="Keyword">where</a> <a id="32396" class="Keyword">open</a> <a id="32401" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32408" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32411" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="32413" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="32415" class="Keyword">using</a> <a id="32421" class="Symbol">(</a> <a id="32423" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="32427" class="Symbol">)</a>

 <a id="32431" href="Demos.HSP.html#32431" class="Function">compatible-map</a> <a id="32446" class="Symbol">:</a> <a id="32448" class="Symbol">(</a><a id="32449" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32452" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="32454" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="32456" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="32458" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32461" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="32463" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="32464" class="Symbol">)</a> <a id="32466" class="Symbol">â†’</a> <a id="32468" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="32473" class="Symbol">_</a>
 <a id="32476" href="Demos.HSP.html#32431" class="Function">compatible-map</a> <a id="32491" href="Demos.HSP.html#32491" class="Bound">h</a> <a id="32493" class="Symbol">=</a> <a id="32495" class="Symbol">âˆ€</a> <a id="32497" class="Symbol">{</a><a id="32498" href="Demos.HSP.html#32498" class="Bound">f</a><a id="32499" class="Symbol">}</a> <a id="32501" class="Symbol">â†’</a> <a id="32503" href="Demos.HSP.html#32256" class="Function">compatible-map-op</a> <a id="32521" href="Demos.HSP.html#32491" class="Bound">h</a> <a id="32523" href="Demos.HSP.html#32498" class="Bound">f</a>

</pre>
Using these we define the property (\ar{IsHom}) of being a homomorphism, and
finally the type \af{hom} of homomorphisms from \ab{ğ‘¨} to \ab{ğµ}.

<pre class="Agda">

 <a id="32696" class="Keyword">record</a> <a id="32703" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="32709" class="Symbol">(</a><a id="32710" href="Demos.HSP.html#32710" class="Bound">h</a> <a id="32712" class="Symbol">:</a> <a id="32714" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32717" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="32719" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="32721" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="32723" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32726" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="32728" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="32729" class="Symbol">)</a> <a id="32731" class="Symbol">:</a> <a id="32733" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="32738" class="Symbol">(</a><a id="32739" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="32741" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="32743" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="32745" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="32747" href="Demos.HSP.html#32196" class="Bound">Î±</a> <a id="32749" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="32751" href="Demos.HSP.html#32216" class="Bound">Ïáµ‡</a><a id="32753" class="Symbol">)</a> <a id="32755" class="Keyword">where</a>
  <a id="32763" class="Keyword">constructor</a> <a id="32775" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="32781" class="Symbol">;</a> <a id="32783" class="Keyword">field</a> <a id="32789" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="32800" class="Symbol">:</a> <a id="32802" href="Demos.HSP.html#32431" class="Function">compatible-map</a> <a id="32817" href="Demos.HSP.html#32710" class="Bound">h</a>

 <a id="32821" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="32825" class="Symbol">:</a> <a id="32827" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="32832" class="Symbol">_</a>
 <a id="32835" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="32839" class="Symbol">=</a> <a id="32841" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="32843" class="Symbol">(</a><a id="32844" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a>Â <a id="32847" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="32849" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="32851" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="32853" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="32856" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="32858" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="32859" class="Symbol">)</a> <a id="32861" href="Demos.HSP.html#32703" class="Record">IsHom</a>

</pre>
Thus, an inhabitant of \af{hom} is a pair (\ab h , \ab p) consisting of
a setoid function \ab h, from the domain of \ab{ğ‘¨} to that of \ab{ğ‘©}, along with
a proof \ab p that \ab h is a homomorphism.

A \defn{monomorphism} (resp. \defn{epimorphism}) is an injective (resp. surjective)
homomorphism. We define predicates \ar{IsMon} and \ar{IsEpi} for these,
 well as \af{mon} and \af{epi} for the corresponding types.
\ifshort %%% BEGIN SHORT VERSION ONLY
\else    %%% BEGIN LONG VERSION ONLY

<pre class="Agda">

 <a id="33384" class="Keyword">record</a> <a id="33391" href="Demos.HSP.html#33391" class="Record">IsMon</a> <a id="33397" class="Symbol">(</a><a id="33398" href="Demos.HSP.html#33398" class="Bound">h</a> <a id="33400" class="Symbol">:</a> <a id="33402" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="33405" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="33407" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="33409" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="33411" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="33414" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="33416" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="33417" class="Symbol">)</a> <a id="33419" class="Symbol">:</a> <a id="33421" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="33426" class="Symbol">(</a><a id="33427" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="33429" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33431" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="33433" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33435" href="Demos.HSP.html#32196" class="Bound">Î±</a> <a id="33437" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33439" href="Demos.HSP.html#32198" class="Bound">Ïáµƒ</a> <a id="33442" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33444" href="Demos.HSP.html#32216" class="Bound">Ïáµ‡</a><a id="33446" class="Symbol">)</a> <a id="33448" class="Keyword">where</a>
  <a id="33456" class="Keyword">field</a>  <a id="33463" href="Demos.HSP.html#33463" class="Field">isHom</a> <a id="33469" class="Symbol">:</a> <a id="33471" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="33477" href="Demos.HSP.html#33398" class="Bound">h</a>
         <a id="33488" href="Demos.HSP.html#33488" class="Field">isInjective</a> <a id="33500" class="Symbol">:</a> <a id="33502" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="33514" href="Demos.HSP.html#33398" class="Bound">h</a>

  <a id="33519" href="Demos.HSP.html#33519" class="Function">HomReduct</a> <a id="33529" class="Symbol">:</a> <a id="33531" href="Demos.HSP.html#32821" class="Function">hom</a>
  <a id="33537" href="Demos.HSP.html#33519" class="Function">HomReduct</a> <a id="33547" class="Symbol">=</a> <a id="33549" href="Demos.HSP.html#33398" class="Bound">h</a> <a id="33551" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="33553" href="Demos.HSP.html#33463" class="Field">isHom</a>

 <a id="33561" href="Demos.HSP.html#33561" class="Function">mon</a> <a id="33565" class="Symbol">:</a> <a id="33567" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="33572" class="Symbol">_</a>
 <a id="33575" href="Demos.HSP.html#33561" class="Function">mon</a> <a id="33579" class="Symbol">=</a> <a id="33581" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="33583" class="Symbol">(</a><a id="33584" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="33587" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="33589" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="33591" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="33593" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="33596" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="33598" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="33599" class="Symbol">)</a> <a id="33601" href="Demos.HSP.html#33391" class="Record">IsMon</a>

</pre>
As with \af{hom}, the type \af{mon} is a dependent product type; each inhabitant is a pair
consisting of a setoid function, say, \ab h, along with a proof that \ab h is a
monomorphism.

<pre class="Agda">

 <a id="33820" class="Keyword">record</a> <a id="33827" href="Demos.HSP.html#33827" class="Record">IsEpi</a> <a id="33833" class="Symbol">(</a><a id="33834" href="Demos.HSP.html#33834" class="Bound">h</a> <a id="33836" class="Symbol">:</a> <a id="33838" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="33841" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="33843" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="33845" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="33847" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="33850" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="33852" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="33853" class="Symbol">)</a> <a id="33855" class="Symbol">:</a> <a id="33857" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="33862" class="Symbol">(</a><a id="33863" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="33865" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33867" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="33869" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33871" href="Demos.HSP.html#32196" class="Bound">Î±</a> <a id="33873" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33875" href="Demos.HSP.html#32214" class="Bound">Î²</a> <a id="33877" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33879" href="Demos.HSP.html#32216" class="Bound">Ïáµ‡</a><a id="33881" class="Symbol">)</a> <a id="33883" class="Keyword">where</a>
  <a id="33891" class="Keyword">field</a>  <a id="33898" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="33904" class="Symbol">:</a> <a id="33906" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="33912" href="Demos.HSP.html#33834" class="Bound">h</a>
         <a id="33923" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="33936" class="Symbol">:</a> <a id="33938" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="33951" href="Demos.HSP.html#33834" class="Bound">h</a>

  <a id="33956" href="Demos.HSP.html#33956" class="Function">HomReduct</a> <a id="33966" class="Symbol">:</a> <a id="33968" href="Demos.HSP.html#32821" class="Function">hom</a>
  <a id="33974" href="Demos.HSP.html#33956" class="Function">HomReduct</a> <a id="33984" class="Symbol">=</a> <a id="33986" href="Demos.HSP.html#33834" class="Bound">h</a> <a id="33988" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="33990" href="Demos.HSP.html#33898" class="Field">isHom</a>

 <a id="33998" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="34002" class="Symbol">:</a> <a id="34004" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="34009" class="Symbol">_</a>
 <a id="34012" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="34016" class="Symbol">=</a> <a id="34018" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="34020" class="Symbol">(</a><a id="34021" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="34024" href="Demos.HSP.html#32184" class="Bound">ğ‘¨</a> <a id="34026" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="34028" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="34030" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="34033" href="Demos.HSP.html#32202" class="Bound">ğ‘©</a> <a id="34035" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="34036" class="Symbol">)</a> <a id="34038" href="Demos.HSP.html#33827" class="Record">IsEpi</a>
</pre>

Here are two utilities that are useful for translating between types.

<pre class="Agda">
<a id="34140" class="Keyword">open</a> <a id="34145" href="Demos.HSP.html#32703" class="Module">IsHom</a> <a id="34151" class="Symbol">;</a> <a id="34153" class="Keyword">open</a> <a id="34158" href="Demos.HSP.html#33391" class="Module">IsMon</a> <a id="34164" class="Symbol">;</a> <a id="34166" class="Keyword">open</a> <a id="34171" href="Demos.HSP.html#33827" class="Module">IsEpi</a>

<a id="34178" class="Keyword">module</a> <a id="34185" href="Demos.HSP.html#34185" class="Module">_</a> <a id="34187" class="Symbol">(</a><a id="34188" href="Demos.HSP.html#34188" class="Bound">ğ‘¨</a> <a id="34190" class="Symbol">:</a> <a id="34192" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="34200" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="34202" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="34204" class="Symbol">)(</a><a id="34206" href="Demos.HSP.html#34206" class="Bound">ğ‘©</a> <a id="34208" class="Symbol">:</a> <a id="34210" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="34218" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="34220" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="34222" class="Symbol">)</a> <a id="34224" class="Keyword">where</a>

 <a id="34232" href="Demos.HSP.html#34232" class="Function">monâ†’intohom</a> <a id="34244" class="Symbol">:</a> <a id="34246" href="Demos.HSP.html#33561" class="Function">mon</a> <a id="34250" href="Demos.HSP.html#34188" class="Bound">ğ‘¨</a> <a id="34252" href="Demos.HSP.html#34206" class="Bound">ğ‘©</a> <a id="34254" class="Symbol">â†’</a> <a id="34256" href="Data.Product.html#916" class="Function">Î£[</a> <a id="34259" href="Demos.HSP.html#34259" class="Bound">h</a> <a id="34261" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="34263" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="34267" href="Demos.HSP.html#34188" class="Bound">ğ‘¨</a> <a id="34269" href="Demos.HSP.html#34206" class="Bound">ğ‘©</a> <a id="34271" href="Data.Product.html#916" class="Function">]</a> <a id="34273" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="34285" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="34287" href="Demos.HSP.html#34259" class="Bound">h</a> <a id="34289" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
 <a id="34292" href="Demos.HSP.html#34232" class="Function">monâ†’intohom</a> <a id="34304" class="Symbol">(</a><a id="34305" href="Demos.HSP.html#34305" class="Bound">hh</a> <a id="34308" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34310" href="Demos.HSP.html#34310" class="Bound">hhM</a><a id="34313" class="Symbol">)</a> <a id="34315" class="Symbol">=</a> <a id="34317" class="Symbol">(</a><a id="34318" href="Demos.HSP.html#34305" class="Bound">hh</a> <a id="34321" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34323" href="Demos.HSP.html#33463" class="Field">isHom</a> <a id="34329" href="Demos.HSP.html#34310" class="Bound">hhM</a><a id="34332" class="Symbol">)</a> <a id="34334" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34336" href="Demos.HSP.html#33488" class="Field">isInjective</a> <a id="34348" href="Demos.HSP.html#34310" class="Bound">hhM</a>

 <a id="34354" href="Demos.HSP.html#34354" class="Function">epiâ†’ontohom</a> <a id="34366" class="Symbol">:</a> <a id="34368" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="34372" href="Demos.HSP.html#34188" class="Bound">ğ‘¨</a> <a id="34374" href="Demos.HSP.html#34206" class="Bound">ğ‘©</a> <a id="34376" class="Symbol">â†’</a> <a id="34378" href="Data.Product.html#916" class="Function">Î£[</a> <a id="34381" href="Demos.HSP.html#34381" class="Bound">h</a> <a id="34383" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="34385" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="34389" href="Demos.HSP.html#34188" class="Bound">ğ‘¨</a> <a id="34391" href="Demos.HSP.html#34206" class="Bound">ğ‘©</a> <a id="34393" href="Data.Product.html#916" class="Function">]</a> <a id="34395" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="34408" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="34410" href="Demos.HSP.html#34381" class="Bound">h</a> <a id="34412" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
 <a id="34415" href="Demos.HSP.html#34354" class="Function">epiâ†’ontohom</a> <a id="34427" class="Symbol">(</a><a id="34428" href="Demos.HSP.html#34428" class="Bound">hh</a> <a id="34431" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34433" href="Demos.HSP.html#34433" class="Bound">hhE</a><a id="34436" class="Symbol">)</a> <a id="34438" class="Symbol">=</a> <a id="34440" class="Symbol">(</a><a id="34441" href="Demos.HSP.html#34428" class="Bound">hh</a> <a id="34444" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34446" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="34452" href="Demos.HSP.html#34433" class="Bound">hhE</a><a id="34455" class="Symbol">)</a> <a id="34457" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34459" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="34472" href="Demos.HSP.html#34433" class="Bound">hhE</a>
</pre>

\paragraph*{Composition of homomorphisms}
\fi      %%% END LONG VERSION ONLY SECTION
The composition of homomorphisms is again a homomorphism, and similarly for epimorphisms and monomorphisms.
\ifshort
The proofs of these facts are straightforward so we omit them, but give them the names
\af{âˆ˜-hom} and \af{âˆ˜-epi} so we can refer to them below.
\else

<pre class="Agda">

<a id="34855" class="Keyword">module</a> <a id="34862" href="Demos.HSP.html#34862" class="Module">_</a>  <a id="34865" class="Symbol">{</a><a id="34866" href="Demos.HSP.html#34866" class="Bound">ğ‘¨</a> <a id="34868" class="Symbol">:</a> <a id="34870" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="34878" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="34880" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="34882" class="Symbol">}</a> <a id="34884" class="Symbol">{</a><a id="34885" href="Demos.HSP.html#34885" class="Bound">ğ‘©</a> <a id="34887" class="Symbol">:</a> <a id="34889" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="34897" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="34899" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="34901" class="Symbol">}</a> <a id="34903" class="Symbol">{</a><a id="34904" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="34906" class="Symbol">:</a> <a id="34908" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="34916" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="34918" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="34920" class="Symbol">}</a>
          <a id="34932" class="Symbol">{</a><a id="34933" href="Demos.HSP.html#34933" class="Bound">g</a> <a id="34935" class="Symbol">:</a> <a id="34937" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="34940" href="Demos.HSP.html#34866" class="Bound">ğ‘¨</a> <a id="34942" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="34944" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="34946" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="34949" href="Demos.HSP.html#34885" class="Bound">ğ‘©</a> <a id="34951" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="34952" class="Symbol">}{</a><a id="34954" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="34956" class="Symbol">:</a> <a id="34958" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="34961" href="Demos.HSP.html#34885" class="Bound">ğ‘©</a> <a id="34963" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="34965" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="34967" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="34970" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="34972" href="Demos.HSP.html#23810" class="Function Operator">]</a><a id="34973" class="Symbol">}</a> <a id="34975" class="Keyword">where</a>

  <a id="34984" class="Keyword">open</a> <a id="34989" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34996" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="34999" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="35001" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="35003" class="Keyword">using</a> <a id="35009" class="Symbol">(</a> <a id="35011" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="35017" class="Symbol">)</a>

  <a id="35022" href="Demos.HSP.html#35022" class="Function">âˆ˜-is-hom</a> <a id="35031" class="Symbol">:</a> <a id="35033" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="35039" href="Demos.HSP.html#34866" class="Bound">ğ‘¨</a> <a id="35041" href="Demos.HSP.html#34885" class="Bound">ğ‘©</a> <a id="35043" href="Demos.HSP.html#34933" class="Bound">g</a> <a id="35045" class="Symbol">â†’</a> <a id="35047" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="35053" href="Demos.HSP.html#34885" class="Bound">ğ‘©</a> <a id="35055" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="35057" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="35059" class="Symbol">â†’</a> <a id="35061" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="35067" href="Demos.HSP.html#34866" class="Bound">ğ‘¨</a> <a id="35069" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="35071" class="Symbol">(</a><a id="35072" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="35074" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="35078" href="Demos.HSP.html#34933" class="Bound">g</a><a id="35079" class="Symbol">)</a>
  <a id="35083" href="Demos.HSP.html#35022" class="Function">âˆ˜-is-hom</a> <a id="35092" href="Demos.HSP.html#35092" class="Bound">ghom</a> <a id="35097" href="Demos.HSP.html#35097" class="Bound">hhom</a> <a id="35102" class="Symbol">=</a> <a id="35104" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="35110" href="Demos.HSP.html#35124" class="Function">c</a>
   <a id="35115" class="Keyword">where</a>
   <a id="35124" href="Demos.HSP.html#35124" class="Function">c</a> <a id="35126" class="Symbol">:</a> <a id="35128" href="Demos.HSP.html#32431" class="Function">compatible-map</a> <a id="35143" href="Demos.HSP.html#34866" class="Bound">ğ‘¨</a> <a id="35145" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="35147" class="Symbol">(</a><a id="35148" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="35150" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="35154" href="Demos.HSP.html#34933" class="Bound">g</a><a id="35155" class="Symbol">)</a>
   <a id="35160" href="Demos.HSP.html#35124" class="Function">c</a> <a id="35162" class="Symbol">=</a> <a id="35164" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="35170" class="Symbol">(</a><a id="35171" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="35176" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="35178" class="Symbol">(</a><a id="35179" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="35190" href="Demos.HSP.html#35092" class="Bound">ghom</a><a id="35194" class="Symbol">))</a> <a id="35197" class="Symbol">(</a><a id="35198" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="35209" href="Demos.HSP.html#35097" class="Bound">hhom</a><a id="35213" class="Symbol">)</a>

  <a id="35218" href="Demos.HSP.html#35218" class="Function">âˆ˜-is-epi</a> <a id="35227" class="Symbol">:</a> <a id="35229" href="Demos.HSP.html#33827" class="Record">IsEpi</a> <a id="35235" href="Demos.HSP.html#34866" class="Bound">ğ‘¨</a> <a id="35237" href="Demos.HSP.html#34885" class="Bound">ğ‘©</a> <a id="35239" href="Demos.HSP.html#34933" class="Bound">g</a> <a id="35241" class="Symbol">â†’</a> <a id="35243" href="Demos.HSP.html#33827" class="Record">IsEpi</a> <a id="35249" href="Demos.HSP.html#34885" class="Bound">ğ‘©</a> <a id="35251" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="35253" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="35255" class="Symbol">â†’</a> <a id="35257" href="Demos.HSP.html#33827" class="Record">IsEpi</a> <a id="35263" href="Demos.HSP.html#34866" class="Bound">ğ‘¨</a> <a id="35265" href="Demos.HSP.html#34904" class="Bound">ğ‘ª</a> <a id="35267" class="Symbol">(</a><a id="35268" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="35270" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="35274" href="Demos.HSP.html#34933" class="Bound">g</a><a id="35275" class="Symbol">)</a>
  <a id="35279" href="Demos.HSP.html#35218" class="Function">âˆ˜-is-epi</a> <a id="35288" href="Demos.HSP.html#35288" class="Bound">gE</a> <a id="35291" href="Demos.HSP.html#35291" class="Bound">hE</a> <a id="35294" class="Symbol">=</a> <a id="35296" class="Keyword">record</a>  <a id="35304" class="Symbol">{</a> <a id="35306" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="35312" class="Symbol">=</a> <a id="35314" href="Demos.HSP.html#35022" class="Function">âˆ˜-is-hom</a> <a id="35323" class="Symbol">(</a><a id="35324" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="35330" href="Demos.HSP.html#35288" class="Bound">gE</a><a id="35332" class="Symbol">)</a> <a id="35334" class="Symbol">(</a><a id="35335" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="35341" href="Demos.HSP.html#35291" class="Bound">hE</a><a id="35343" class="Symbol">)</a>
                           <a id="35372" class="Symbol">;</a> <a id="35374" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="35387" class="Symbol">=</a> <a id="35389" href="Demos.HSP.html#14932" class="Function">âˆ˜-IsSurjective</a> <a id="35404" href="Demos.HSP.html#34933" class="Bound">g</a> <a id="35406" href="Demos.HSP.html#34954" class="Bound">h</a> <a id="35408" class="Symbol">(</a><a id="35409" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="35422" href="Demos.HSP.html#35288" class="Bound">gE</a><a id="35424" class="Symbol">)</a> <a id="35426" class="Symbol">(</a><a id="35427" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="35440" href="Demos.HSP.html#35291" class="Bound">hE</a><a id="35442" class="Symbol">)</a> <a id="35444" class="Symbol">}</a>

<a id="35447" class="Keyword">module</a> <a id="35454" href="Demos.HSP.html#35454" class="Module">_</a> <a id="35456" class="Symbol">{</a><a id="35457" href="Demos.HSP.html#35457" class="Bound">ğ‘¨</a> <a id="35459" class="Symbol">:</a> <a id="35461" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="35469" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="35471" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="35473" class="Symbol">}</a> <a id="35475" class="Symbol">{</a><a id="35476" href="Demos.HSP.html#35476" class="Bound">ğ‘©</a> <a id="35478" class="Symbol">:</a> <a id="35480" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="35488" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="35490" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="35492" class="Symbol">}</a> <a id="35494" class="Symbol">{</a><a id="35495" href="Demos.HSP.html#35495" class="Bound">ğ‘ª</a> <a id="35497" class="Symbol">:</a> <a id="35499" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="35507" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="35509" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="35511" class="Symbol">}</a> <a id="35513" class="Keyword">where</a>

  <a id="35522" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="35528" class="Symbol">:</a> <a id="35530" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="35534" href="Demos.HSP.html#35457" class="Bound">ğ‘¨</a> <a id="35536" href="Demos.HSP.html#35476" class="Bound">ğ‘©</a> <a id="35538" class="Symbol">â†’</a> <a id="35540" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="35544" href="Demos.HSP.html#35476" class="Bound">ğ‘©</a> <a id="35546" href="Demos.HSP.html#35495" class="Bound">ğ‘ª</a>  <a id="35549" class="Symbol">â†’</a> <a id="35551" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="35555" href="Demos.HSP.html#35457" class="Bound">ğ‘¨</a> <a id="35557" href="Demos.HSP.html#35495" class="Bound">ğ‘ª</a>
  <a id="35561" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="35567" class="Symbol">(</a><a id="35568" href="Demos.HSP.html#35568" class="Bound">h</a> <a id="35570" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35572" href="Demos.HSP.html#35572" class="Bound">hhom</a><a id="35576" class="Symbol">)</a> <a id="35578" class="Symbol">(</a><a id="35579" href="Demos.HSP.html#35579" class="Bound">g</a> <a id="35581" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35583" href="Demos.HSP.html#35583" class="Bound">ghom</a><a id="35587" class="Symbol">)</a> <a id="35589" class="Symbol">=</a> <a id="35591" class="Symbol">(</a><a id="35592" href="Demos.HSP.html#35579" class="Bound">g</a> <a id="35594" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="35598" href="Demos.HSP.html#35568" class="Bound">h</a><a id="35599" class="Symbol">)</a> <a id="35601" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35603" href="Demos.HSP.html#35022" class="Function">âˆ˜-is-hom</a> <a id="35612" href="Demos.HSP.html#35572" class="Bound">hhom</a> <a id="35617" href="Demos.HSP.html#35583" class="Bound">ghom</a>

  <a id="35625" href="Demos.HSP.html#35625" class="Function">âˆ˜-epi</a> <a id="35631" class="Symbol">:</a> <a id="35633" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="35637" href="Demos.HSP.html#35457" class="Bound">ğ‘¨</a> <a id="35639" href="Demos.HSP.html#35476" class="Bound">ğ‘©</a> <a id="35641" class="Symbol">â†’</a> <a id="35643" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="35647" href="Demos.HSP.html#35476" class="Bound">ğ‘©</a> <a id="35649" href="Demos.HSP.html#35495" class="Bound">ğ‘ª</a>  <a id="35652" class="Symbol">â†’</a> <a id="35654" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="35658" href="Demos.HSP.html#35457" class="Bound">ğ‘¨</a> <a id="35660" href="Demos.HSP.html#35495" class="Bound">ğ‘ª</a>
  <a id="35664" href="Demos.HSP.html#35625" class="Function">âˆ˜-epi</a> <a id="35670" class="Symbol">(</a><a id="35671" href="Demos.HSP.html#35671" class="Bound">h</a> <a id="35673" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35675" href="Demos.HSP.html#35675" class="Bound">hepi</a><a id="35679" class="Symbol">)</a> <a id="35681" class="Symbol">(</a><a id="35682" href="Demos.HSP.html#35682" class="Bound">g</a> <a id="35684" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35686" href="Demos.HSP.html#35686" class="Bound">gepi</a><a id="35690" class="Symbol">)</a> <a id="35692" class="Symbol">=</a> <a id="35694" class="Symbol">(</a><a id="35695" href="Demos.HSP.html#35682" class="Bound">g</a> <a id="35697" href="Demos.HSP.html#11599" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="35701" href="Demos.HSP.html#35671" class="Bound">h</a><a id="35702" class="Symbol">)</a> <a id="35704" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35706" href="Demos.HSP.html#35218" class="Function">âˆ˜-is-epi</a> <a id="35715" href="Demos.HSP.html#35675" class="Bound">hepi</a> <a id="35720" href="Demos.HSP.html#35686" class="Bound">gepi</a>
</pre>

\paragraph*{Universe lifting of homomorphisms}
Here we define the identity homomorphism for setoid algebras. Then we prove that the
operations of lifting and lowering of a setoid algebra are homomorphisms.

<pre class="Agda">

<a id="ğ’¾ğ’¹"></a><a id="35958" href="Demos.HSP.html#35958" class="Function">ğ’¾ğ’¹</a> <a id="35961" class="Symbol">:</a> <a id="35963" class="Symbol">{</a><a id="35964" href="Demos.HSP.html#35964" class="Bound">ğ‘¨</a> <a id="35966" class="Symbol">:</a> <a id="35968" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="35976" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="35978" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="35980" class="Symbol">}</a> <a id="35982" class="Symbol">â†’</a> <a id="35984" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="35988" href="Demos.HSP.html#35964" class="Bound">ğ‘¨</a> <a id="35990" href="Demos.HSP.html#35964" class="Bound">ğ‘¨</a>
<a id="35992" href="Demos.HSP.html#35958" class="Function">ğ’¾ğ’¹</a> <a id="35995" class="Symbol">{</a><a id="35996" class="Argument">ğ‘¨</a> <a id="35998" class="Symbol">=</a> <a id="36000" href="Demos.HSP.html#36000" class="Bound">ğ‘¨</a><a id="36001" class="Symbol">}</a> <a id="36003" class="Symbol">=</a> <a id="36005" href="Demos.HSP.html#11528" class="Function">ğ‘–ğ‘‘</a> <a id="36008" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36010" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="36016" class="Symbol">(</a><a id="36017" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36027" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="36033" class="Symbol">)</a> <a id="36035" class="Keyword">where</a> <a id="36041" class="Keyword">open</a> <a id="36046" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36053" class="Symbol">(</a> <a id="36055" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="36062" href="Demos.HSP.html#36000" class="Bound">ğ‘¨</a> <a id="36064" class="Symbol">)</a> <a id="36066" class="Keyword">using</a> <a id="36072" class="Symbol">(</a> <a id="36074" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36084" class="Symbol">)</a>

<a id="36087" class="Keyword">module</a> <a id="36094" href="Demos.HSP.html#36094" class="Module">_</a> <a id="36096" class="Symbol">{</a><a id="36097" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36099" class="Symbol">:</a> <a id="36101" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="36109" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="36111" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="36113" class="Symbol">}{</a><a id="36115" href="Demos.HSP.html#36115" class="Bound">â„“</a> <a id="36117" class="Symbol">:</a> <a id="36119" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="36124" class="Symbol">}</a> <a id="36126" class="Keyword">where</a>
 <a id="36133" class="Keyword">open</a> <a id="36138" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36145" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="36148" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36150" href="Demos.HSP.html#23810" class="Function Operator">]</a>              <a id="36165" class="Keyword">using</a> <a id="36171" class="Symbol">(</a> <a id="36173" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36183" class="Symbol">)</a>  <a id="36186" class="Keyword">renaming</a> <a id="36195" class="Symbol">(</a> <a id="36197" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="36201" class="Symbol">to</a> <a id="36204" class="Field Operator">_â‰ˆâ‚_</a> <a id="36209" class="Symbol">;</a> <a id="36211" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="36216" class="Symbol">to</a> <a id="36219" class="Function">reflâ‚</a> <a id="36225" class="Symbol">)</a>
 <a id="36228" class="Keyword">open</a> <a id="36233" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36240" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="36243" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="36253" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36255" href="Demos.HSP.html#36115" class="Bound">â„“</a> <a id="36257" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="36260" class="Keyword">using</a> <a id="36266" class="Symbol">()</a>             <a id="36281" class="Keyword">renaming</a> <a id="36290" class="Symbol">(</a> <a id="36292" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="36296" class="Symbol">to</a> <a id="36299" class="Field Operator">_â‰ˆË¡_</a> <a id="36304" class="Symbol">;</a> <a id="36306" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="36311" class="Symbol">to</a> <a id="36314" class="Function">reflË¡</a><a id="36319" class="Symbol">)</a>
 <a id="36322" class="Keyword">open</a> <a id="36327" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36334" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="36337" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="36347" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36349" href="Demos.HSP.html#36115" class="Bound">â„“</a> <a id="36351" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="36354" class="Keyword">using</a> <a id="36360" class="Symbol">()</a>             <a id="36375" class="Keyword">renaming</a> <a id="36384" class="Symbol">(</a> <a id="36386" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="36390" class="Symbol">to</a> <a id="36393" class="Field Operator">_â‰ˆÊ³_</a> <a id="36398" class="Symbol">;</a> <a id="36400" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="36405" class="Symbol">to</a> <a id="36408" class="Function">reflÊ³</a><a id="36413" class="Symbol">)</a>
 <a id="36416" class="Keyword">open</a> <a id="36421" href="Level.html" class="Module">Level</a>

 <a id="36429" href="Demos.HSP.html#36429" class="Function">ToLiftË¡</a> <a id="36437" class="Symbol">:</a> <a id="36439" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="36443" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36445" class="Symbol">(</a><a id="36446" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="36456" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36458" href="Demos.HSP.html#36115" class="Bound">â„“</a><a id="36459" class="Symbol">)</a>
 <a id="36462" href="Demos.HSP.html#36429" class="Function">ToLiftË¡</a> <a id="36470" class="Symbol">=</a> <a id="36472" class="Keyword">record</a> <a id="36479" class="Symbol">{</a> <a id="36481" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36483" class="Symbol">=</a> <a id="36485" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="36490" class="Symbol">;</a> <a id="36492" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36497" class="Symbol">=</a> <a id="36499" href="Function.Base.html#615" class="Function">id</a> <a id="36502" class="Symbol">}</a> <a id="36504" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36506" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="36512" class="Symbol">(</a><a id="36513" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36523" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="36529" class="Symbol">)</a>

 <a id="36533" href="Demos.HSP.html#36533" class="Function">FromLiftË¡</a> <a id="36543" class="Symbol">:</a> <a id="36545" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="36549" class="Symbol">(</a><a id="36550" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="36560" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36562" href="Demos.HSP.html#36115" class="Bound">â„“</a><a id="36563" class="Symbol">)</a> <a id="36565" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a>
 <a id="36568" href="Demos.HSP.html#36533" class="Function">FromLiftË¡</a> <a id="36578" class="Symbol">=</a> <a id="36580" class="Keyword">record</a> <a id="36587" class="Symbol">{</a> <a id="36589" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36591" class="Symbol">=</a> <a id="36593" href="Level.html#470" class="Field">lower</a> <a id="36599" class="Symbol">;</a> <a id="36601" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36606" class="Symbol">=</a> <a id="36608" href="Function.Base.html#615" class="Function">id</a> <a id="36611" class="Symbol">}</a> <a id="36613" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36615" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="36621" href="Demos.HSP.html#36314" class="Function">reflË¡</a>

 <a id="36629" href="Demos.HSP.html#36629" class="Function">ToFromLiftË¡</a> <a id="36641" class="Symbol">:</a> <a id="36643" class="Symbol">âˆ€</a> <a id="36645" href="Demos.HSP.html#36645" class="Bound">b</a> <a id="36647" class="Symbol">â†’</a>  <a id="36650" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36652" href="Demos.HSP.html#36429" class="Function">ToLiftË¡</a> <a id="36660" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36662" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="36666" class="Symbol">(</a><a id="36667" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36669" href="Demos.HSP.html#36533" class="Function">FromLiftË¡</a> <a id="36679" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36681" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="36685" href="Demos.HSP.html#36645" class="Bound">b</a><a id="36686" class="Symbol">)</a> <a id="36688" href="Demos.HSP.html#36299" class="Function Operator">â‰ˆË¡</a> <a id="36691" href="Demos.HSP.html#36645" class="Bound">b</a>
 <a id="36694" href="Demos.HSP.html#36629" class="Function">ToFromLiftË¡</a> <a id="36706" href="Demos.HSP.html#36706" class="Bound">b</a> <a id="36708" class="Symbol">=</a> <a id="36710" href="Demos.HSP.html#36219" class="Function">reflâ‚</a>

 <a id="36718" href="Demos.HSP.html#36718" class="Function">FromToLiftË¡</a> <a id="36730" class="Symbol">:</a> <a id="36732" class="Symbol">âˆ€</a> <a id="36734" href="Demos.HSP.html#36734" class="Bound">a</a> <a id="36736" class="Symbol">â†’</a> <a id="36738" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36740" href="Demos.HSP.html#36533" class="Function">FromLiftË¡</a> <a id="36750" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36752" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="36756" class="Symbol">(</a><a id="36757" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36759" href="Demos.HSP.html#36429" class="Function">ToLiftË¡</a> <a id="36767" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="36769" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="36773" href="Demos.HSP.html#36734" class="Bound">a</a><a id="36774" class="Symbol">)</a> <a id="36776" href="Demos.HSP.html#36204" class="Function Operator">â‰ˆâ‚</a> <a id="36779" href="Demos.HSP.html#36734" class="Bound">a</a>
 <a id="36782" href="Demos.HSP.html#36718" class="Function">FromToLiftË¡</a> <a id="36794" href="Demos.HSP.html#36794" class="Bound">a</a> <a id="36796" class="Symbol">=</a> <a id="36798" href="Demos.HSP.html#36219" class="Function">reflâ‚</a>

 <a id="36806" href="Demos.HSP.html#36806" class="Function">ToLiftÊ³</a> <a id="36814" class="Symbol">:</a> <a id="36816" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="36820" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36822" class="Symbol">(</a><a id="36823" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="36833" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36835" href="Demos.HSP.html#36115" class="Bound">â„“</a><a id="36836" class="Symbol">)</a>
 <a id="36839" href="Demos.HSP.html#36806" class="Function">ToLiftÊ³</a> <a id="36847" class="Symbol">=</a> <a id="36849" class="Keyword">record</a> <a id="36856" class="Symbol">{</a> <a id="36858" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36860" class="Symbol">=</a> <a id="36862" href="Function.Base.html#615" class="Function">id</a> <a id="36865" class="Symbol">;</a> <a id="36867" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36872" class="Symbol">=</a> <a id="36874" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="36879" class="Symbol">}</a> <a id="36881" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36883" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="36889" class="Symbol">(</a><a id="36890" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="36895" class="Symbol">(</a><a id="36896" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36906" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="36912" class="Symbol">))</a>

 <a id="36917" href="Demos.HSP.html#36917" class="Function">FromLiftÊ³</a> <a id="36927" class="Symbol">:</a> <a id="36929" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="36933" class="Symbol">(</a><a id="36934" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="36944" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a> <a id="36946" href="Demos.HSP.html#36115" class="Bound">â„“</a><a id="36947" class="Symbol">)</a> <a id="36949" href="Demos.HSP.html#36097" class="Bound">ğ‘¨</a>
 <a id="36952" href="Demos.HSP.html#36917" class="Function">FromLiftÊ³</a> <a id="36962" class="Symbol">=</a> <a id="36964" class="Keyword">record</a> <a id="36971" class="Symbol">{</a> <a id="36973" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36975" class="Symbol">=</a> <a id="36977" href="Function.Base.html#615" class="Function">id</a> <a id="36980" class="Symbol">;</a> <a id="36982" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36987" class="Symbol">=</a> <a id="36989" href="Level.html#470" class="Field">lower</a> <a id="36995" class="Symbol">}</a> <a id="36997" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36999" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="37005" href="Demos.HSP.html#36314" class="Function">reflË¡</a>

 <a id="37013" href="Demos.HSP.html#37013" class="Function">ToFromLiftÊ³</a> <a id="37025" class="Symbol">:</a> <a id="37027" class="Symbol">âˆ€</a> <a id="37029" href="Demos.HSP.html#37029" class="Bound">b</a> <a id="37031" class="Symbol">â†’</a> <a id="37033" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37035" href="Demos.HSP.html#36806" class="Function">ToLiftÊ³</a> <a id="37043" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37045" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="37049" class="Symbol">(</a><a id="37050" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37052" href="Demos.HSP.html#36917" class="Function">FromLiftÊ³</a> <a id="37062" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37064" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="37068" href="Demos.HSP.html#37029" class="Bound">b</a><a id="37069" class="Symbol">)</a> <a id="37071" href="Demos.HSP.html#36393" class="Function Operator">â‰ˆÊ³</a> <a id="37074" href="Demos.HSP.html#37029" class="Bound">b</a>
 <a id="37077" href="Demos.HSP.html#37013" class="Function">ToFromLiftÊ³</a> <a id="37089" href="Demos.HSP.html#37089" class="Bound">b</a> <a id="37091" class="Symbol">=</a> <a id="37093" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="37098" href="Demos.HSP.html#36219" class="Function">reflâ‚</a>

 <a id="37106" href="Demos.HSP.html#37106" class="Function">FromToLiftÊ³</a> <a id="37118" class="Symbol">:</a> <a id="37120" class="Symbol">âˆ€</a> <a id="37122" href="Demos.HSP.html#37122" class="Bound">a</a> <a id="37124" class="Symbol">â†’</a> <a id="37126" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37128" href="Demos.HSP.html#36917" class="Function">FromLiftÊ³</a> <a id="37138" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37140" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="37144" class="Symbol">(</a><a id="37145" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37147" href="Demos.HSP.html#36806" class="Function">ToLiftÊ³</a> <a id="37155" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37157" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="37161" href="Demos.HSP.html#37122" class="Bound">a</a><a id="37162" class="Symbol">)</a> <a id="37164" href="Demos.HSP.html#36204" class="Function Operator">â‰ˆâ‚</a> <a id="37167" href="Demos.HSP.html#37122" class="Bound">a</a>
 <a id="37170" href="Demos.HSP.html#37106" class="Function">FromToLiftÊ³</a> <a id="37182" href="Demos.HSP.html#37182" class="Bound">a</a> <a id="37184" class="Symbol">=</a> <a id="37186" href="Demos.HSP.html#36219" class="Function">reflâ‚</a>


<a id="37194" class="Keyword">module</a> <a id="37201" href="Demos.HSP.html#37201" class="Module">_</a> <a id="37203" class="Symbol">{</a><a id="37204" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37206" class="Symbol">:</a> <a id="37208" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="37216" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="37218" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="37220" class="Symbol">}{</a><a id="37222" href="Demos.HSP.html#37222" class="Bound">â„“</a> <a id="37224" href="Demos.HSP.html#37224" class="Bound">r</a> <a id="37226" class="Symbol">:</a> <a id="37228" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37233" class="Symbol">}</a> <a id="37235" class="Keyword">where</a>
 <a id="37242" class="Keyword">open</a>  <a id="37248" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="37255" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="37258" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37260" href="Demos.HSP.html#23810" class="Function Operator">]</a>               <a id="37276" class="Keyword">using</a> <a id="37282" class="Symbol">(</a> <a id="37284" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="37289" class="Symbol">)</a>
 <a id="37292" class="Keyword">open</a>  <a id="37298" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="37305" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="37308" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="37317" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37319" href="Demos.HSP.html#37222" class="Bound">â„“</a> <a id="37321" href="Demos.HSP.html#37224" class="Bound">r</a> <a id="37323" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="37326" class="Keyword">using</a> <a id="37332" class="Symbol">(</a> <a id="37334" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="37338" class="Symbol">)</a>
 <a id="37341" class="Keyword">open</a>  <a id="37347" href="Level.html" class="Module">Level</a>

 <a id="37355" href="Demos.HSP.html#37355" class="Function">ToLift</a> <a id="37362" class="Symbol">:</a> <a id="37364" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="37368" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37370" class="Symbol">(</a><a id="37371" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="37380" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37382" href="Demos.HSP.html#37222" class="Bound">â„“</a> <a id="37384" href="Demos.HSP.html#37224" class="Bound">r</a><a id="37385" class="Symbol">)</a>
 <a id="37388" href="Demos.HSP.html#37355" class="Function">ToLift</a> <a id="37395" class="Symbol">=</a> <a id="37397" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="37403" href="Demos.HSP.html#36429" class="Function">ToLiftË¡</a> <a id="37411" href="Demos.HSP.html#36806" class="Function">ToLiftÊ³</a>

 <a id="37421" href="Demos.HSP.html#37421" class="Function">FromLift</a> <a id="37430" class="Symbol">:</a> <a id="37432" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="37436" class="Symbol">(</a><a id="37437" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="37446" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37448" href="Demos.HSP.html#37222" class="Bound">â„“</a> <a id="37450" href="Demos.HSP.html#37224" class="Bound">r</a><a id="37451" class="Symbol">)</a> <a id="37453" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a>
 <a id="37456" href="Demos.HSP.html#37421" class="Function">FromLift</a> <a id="37465" class="Symbol">=</a> <a id="37467" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="37473" href="Demos.HSP.html#36917" class="Function">FromLiftÊ³</a> <a id="37483" href="Demos.HSP.html#36533" class="Function">FromLiftË¡</a>

 <a id="37495" href="Demos.HSP.html#37495" class="Function">ToFromLift</a> <a id="37506" class="Symbol">:</a> <a id="37508" class="Symbol">âˆ€</a> <a id="37510" href="Demos.HSP.html#37510" class="Bound">b</a> <a id="37512" class="Symbol">â†’</a> <a id="37514" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37516" href="Demos.HSP.html#37355" class="Function">ToLift</a> <a id="37523" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37525" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="37529" class="Symbol">(</a><a id="37530" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37532" href="Demos.HSP.html#37421" class="Function">FromLift</a> <a id="37541" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37543" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="37547" href="Demos.HSP.html#37510" class="Bound">b</a><a id="37548" class="Symbol">)</a> <a id="37550" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="37552" href="Demos.HSP.html#37510" class="Bound">b</a>
 <a id="37555" href="Demos.HSP.html#37495" class="Function">ToFromLift</a> <a id="37566" href="Demos.HSP.html#37566" class="Bound">b</a> <a id="37568" class="Symbol">=</a> <a id="37570" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="37575" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="37582" href="Demos.HSP.html#37582" class="Function">ToLift-epi</a> <a id="37593" class="Symbol">:</a> <a id="37595" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="37599" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37601" class="Symbol">(</a><a id="37602" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="37611" href="Demos.HSP.html#37204" class="Bound">ğ‘¨</a> <a id="37613" href="Demos.HSP.html#37222" class="Bound">â„“</a> <a id="37615" href="Demos.HSP.html#37224" class="Bound">r</a><a id="37616" class="Symbol">)</a>
 <a id="37619" href="Demos.HSP.html#37582" class="Function">ToLift-epi</a> <a id="37630" class="Symbol">=</a> <a id="37632" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37634" href="Demos.HSP.html#37355" class="Function">ToLift</a> <a id="37641" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37643" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="37646" class="Keyword">record</a> <a id="37653" class="Symbol">{</a> <a id="37655" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="37661" class="Symbol">=</a> <a id="37663" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="37665" href="Demos.HSP.html#37355" class="Function">ToLift</a> <a id="37672" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
                            <a id="37702" class="Symbol">;</a> <a id="37704" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="37717" class="Symbol">=</a> <a id="37719" class="Symbol">Î»</a> <a id="37721" class="Symbol">{</a><a id="37722" href="Demos.HSP.html#37722" class="Bound">y</a><a id="37723" class="Symbol">}</a> <a id="37725" class="Symbol">â†’</a> <a id="37727" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="37730" class="Symbol">(</a><a id="37731" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37733" href="Demos.HSP.html#37421" class="Function">FromLift</a> <a id="37742" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="37744" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="37748" href="Demos.HSP.html#37722" class="Bound">y</a><a id="37749" class="Symbol">)</a> <a id="37751" class="Symbol">(</a><a id="37752" href="Demos.HSP.html#37495" class="Function">ToFromLift</a> <a id="37763" href="Demos.HSP.html#37722" class="Bound">y</a><a id="37764" class="Symbol">)</a> <a id="37766" class="Symbol">}</a>
</pre>

\paragraph*{Homomorphisms of product algebras}
Suppose we have an algebra \ab{ğ‘¨}, a type \ab I : \ap{Type} \ab{ğ“˜}, and a family \ab{â„¬} :
\ab I \as{â†’} \ar{Algebra} \ab{Î²} \ab{Ïáµ‡} of algebras.
We sometimes refer to the inhabitants of \ab{I} as \emph{indices}, and call \ab{â„¬} an
\defn{indexed family of algebras}. If in addition we have a family \ab{ğ’½} : (\ab i : \ab
I) â†’ \af{hom} \ab{ğ‘¨} (\ab{â„¬} \ab i) of homomorphisms, then we can construct a homomorphism
from \ab{ğ‘¨} to the product \af{â¨…} \ab{â„¬} in the natural way.  We codify the latter in
dependent type theory as follows.

<pre class="Agda">

<a id="38372" class="Keyword">module</a> <a id="38379" href="Demos.HSP.html#38379" class="Module">_</a> <a id="38381" class="Symbol">{</a><a id="38382" href="Demos.HSP.html#38382" class="Bound">Î¹</a> <a id="38384" class="Symbol">:</a> <a id="38386" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="38391" class="Symbol">}{</a><a id="38393" href="Demos.HSP.html#38393" class="Bound">I</a> <a id="38395" class="Symbol">:</a> <a id="38397" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="38402" href="Demos.HSP.html#38382" class="Bound">Î¹</a><a id="38403" class="Symbol">}{</a><a id="38405" href="Demos.HSP.html#38405" class="Bound">ğ‘¨</a> <a id="38407" class="Symbol">:</a> <a id="38409" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="38417" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="38419" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="38421" class="Symbol">}(</a><a id="38423" href="Demos.HSP.html#38423" class="Bound">â„¬</a> <a id="38425" class="Symbol">:</a> <a id="38427" href="Demos.HSP.html#38393" class="Bound">I</a> <a id="38429" class="Symbol">â†’</a> <a id="38431" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="38439" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="38441" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="38443" class="Symbol">)</a>  <a id="38446" class="Keyword">where</a>
 <a id="38453" href="Demos.HSP.html#38453" class="Function">â¨…-hom-co</a> <a id="38462" class="Symbol">:</a> <a id="38464" class="Symbol">(âˆ€(</a><a id="38467" href="Demos.HSP.html#38467" class="Bound">i</a> <a id="38469" class="Symbol">:</a> <a id="38471" href="Demos.HSP.html#38393" class="Bound">I</a><a id="38472" class="Symbol">)</a> <a id="38474" class="Symbol">â†’</a> <a id="38476" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="38480" href="Demos.HSP.html#38405" class="Bound">ğ‘¨</a> <a id="38482" class="Symbol">(</a><a id="38483" href="Demos.HSP.html#38423" class="Bound">â„¬</a> <a id="38485" href="Demos.HSP.html#38467" class="Bound">i</a><a id="38486" class="Symbol">))</a> <a id="38489" class="Symbol">â†’</a> <a id="38491" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="38495" href="Demos.HSP.html#38405" class="Bound">ğ‘¨</a> <a id="38497" class="Symbol">(</a><a id="38498" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="38500" href="Demos.HSP.html#38423" class="Bound">â„¬</a><a id="38501" class="Symbol">)</a>
 <a id="38504" href="Demos.HSP.html#38453" class="Function">â¨…-hom-co</a> <a id="38513" href="Demos.HSP.html#38513" class="Bound">ğ’½</a> <a id="38515" class="Symbol">=</a> <a id="38517" href="Demos.HSP.html#38536" class="Function">h</a> <a id="38519" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="38521" href="Demos.HSP.html#38624" class="Function">hhom</a>
  <a id="38528" class="Keyword">where</a>
  <a id="38536" href="Demos.HSP.html#38536" class="Function">h</a> <a id="38538" class="Symbol">:</a> <a id="38540" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="38543" href="Demos.HSP.html#38405" class="Bound">ğ‘¨</a> <a id="38545" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="38547" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="38549" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="38552" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="38554" href="Demos.HSP.html#38423" class="Bound">â„¬</a> <a id="38556" href="Demos.HSP.html#23810" class="Function Operator">]</a>
  <a id="38560" href="Demos.HSP.html#38536" class="Function">h</a> <a id="38562" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="38566" href="Demos.HSP.html#38566" class="Bound">a</a> <a id="38568" class="Symbol">=</a> <a id="38570" class="Symbol">Î»</a> <a id="38572" href="Demos.HSP.html#38572" class="Bound">i</a> <a id="38574" class="Symbol">â†’</a> <a id="38576" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="38578" href="Demos.HSP.html#38513" class="Bound">ğ’½</a> <a id="38580" href="Demos.HSP.html#38572" class="Bound">i</a> <a id="38582" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="38584" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="38588" href="Demos.HSP.html#38566" class="Bound">a</a>
  <a id="38592" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="38597" href="Demos.HSP.html#38536" class="Function">h</a> <a id="38599" href="Demos.HSP.html#38599" class="Bound">xy</a> <a id="38602" href="Demos.HSP.html#38602" class="Bound">i</a> <a id="38604" class="Symbol">=</a> <a id="38606" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="38611" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="38613" href="Demos.HSP.html#38513" class="Bound">ğ’½</a> <a id="38615" href="Demos.HSP.html#38602" class="Bound">i</a> <a id="38617" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="38619" href="Demos.HSP.html#38599" class="Bound">xy</a>
  <a id="38624" href="Demos.HSP.html#38624" class="Function">hhom</a> <a id="38629" class="Symbol">:</a> <a id="38631" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="38637" href="Demos.HSP.html#38405" class="Bound">ğ‘¨</a> <a id="38639" class="Symbol">(</a><a id="38640" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="38642" href="Demos.HSP.html#38423" class="Bound">â„¬</a><a id="38643" class="Symbol">)</a> <a id="38645" href="Demos.HSP.html#38536" class="Function">h</a>
  <a id="38649" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="38660" href="Demos.HSP.html#38624" class="Function">hhom</a> <a id="38665" class="Symbol">=</a> <a id="38667" class="Symbol">Î»</a> <a id="38669" href="Demos.HSP.html#38669" class="Bound">i</a> <a id="38671" class="Symbol">â†’</a> <a id="38673" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="38684" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="38686" href="Demos.HSP.html#38513" class="Bound">ğ’½</a> <a id="38688" href="Demos.HSP.html#38669" class="Bound">i</a> <a id="38690" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
</pre>

\paragraph*{Factorization of homomorphisms}
\fi      %%% END LONG VERSION ONLY SECTION
We also formalize (as \af{HomFactor}) the following factorization theorem: if \ab g : \af{hom}
\ab{ğ‘¨} \ab{ğ‘©}, \ab h : \af{hom} \ab{ğ‘¨} \ab{ğ‘ª}, \ab h is surjective, and \af{ker} \ab h
\aof{âŠ†} \af{ker} \ab g, then there exists \ab{Ï†} : \af{hom} \ab{ğ‘ª} \ab{ğ‘©} such that \ab g
= \ab{Ï†} \aof{âˆ˜} \ab h.
\ifshort\else

<pre class="Agda">

<a id="39116" class="Keyword">module</a> <a id="39123" href="Demos.HSP.html#39123" class="Module">_</a> <a id="39125" class="Symbol">{</a><a id="39126" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a> <a id="39128" class="Symbol">:</a> <a id="39130" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="39138" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="39140" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="39142" class="Symbol">}(</a><a id="39144" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a> <a id="39146" class="Symbol">:</a> <a id="39148" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="39156" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="39158" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="39160" class="Symbol">){</a><a id="39162" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="39164" class="Symbol">:</a> <a id="39166" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="39174" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="39176" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="39178" class="Symbol">}</a>
         <a id="39189" class="Symbol">(</a><a id="39190" href="Demos.HSP.html#39190" class="Bound">gh</a> <a id="39193" class="Symbol">:</a> <a id="39195" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="39199" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a> <a id="39201" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a><a id="39202" class="Symbol">)(</a><a id="39204" href="Demos.HSP.html#39204" class="Bound">hh</a> <a id="39207" class="Symbol">:</a> <a id="39209" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="39213" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a> <a id="39215" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a><a id="39216" class="Symbol">)</a> <a id="39218" class="Keyword">where</a>
 <a id="39225" class="Keyword">open</a> <a id="39230" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="39237" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="39240" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a> <a id="39242" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="39244" class="Keyword">using</a> <a id="39250" class="Symbol">()</a> <a id="39253" class="Keyword">renaming</a> <a id="39262" class="Symbol">(</a> <a id="39264" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="39268" class="Symbol">to</a> <a id="39271" class="Field Operator">_â‰ˆâ‚‚_</a> <a id="39276" class="Symbol">)</a>
 <a id="39279" class="Keyword">open</a> <a id="39284" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="39291" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="39294" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="39296" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="39298" class="Keyword">using</a> <a id="39304" class="Symbol">()</a> <a id="39307" class="Keyword">renaming</a> <a id="39316" class="Symbol">(</a> <a id="39318" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="39322" class="Symbol">to</a> <a id="39325" class="Field Operator">_â‰ˆâ‚ƒ_</a> <a id="39330" class="Symbol">)</a>
 <a id="39333" class="Keyword">private</a> <a id="39341" href="Demos.HSP.html#39341" class="Function">gfunc</a> <a id="39347" class="Symbol">=</a> <a id="39349" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="39351" href="Demos.HSP.html#39190" class="Bound">gh</a> <a id="39354" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="39356" class="Symbol">;</a> <a id="39358" href="Demos.HSP.html#39358" class="Function">g</a> <a id="39360" class="Symbol">=</a> <a id="39362" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="39368" href="Demos.HSP.html#39341" class="Function">gfunc</a> <a id="39374" class="Symbol">;</a> <a id="39376" href="Demos.HSP.html#39376" class="Function">hfunc</a> <a id="39382" class="Symbol">=</a> <a id="39384" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="39386" href="Demos.HSP.html#39204" class="Bound">hh</a> <a id="39389" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="39391" class="Symbol">;</a> <a id="39393" href="Demos.HSP.html#39393" class="Function">h</a> <a id="39395" class="Symbol">=</a> <a id="39397" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="39403" href="Demos.HSP.html#39376" class="Function">hfunc</a>

 <a id="39411" href="Demos.HSP.html#39411" class="Function">HomFactor</a> <a id="39421" class="Symbol">:</a>  <a id="39424" href="Demos.HSP.html#15702" class="Function">kernel</a> <a id="39431" href="Demos.HSP.html#39325" class="Function Operator">_â‰ˆâ‚ƒ_</a> <a id="39436" href="Demos.HSP.html#39393" class="Function">h</a> <a id="39438" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="39440" href="Demos.HSP.html#15702" class="Function">kernel</a> <a id="39447" href="Demos.HSP.html#39271" class="Function Operator">_â‰ˆâ‚‚_</a> <a id="39452" href="Demos.HSP.html#39358" class="Function">g</a>
  <a id="39456" class="Symbol">â†’</a>           <a id="39468" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="39481" href="Demos.HSP.html#39376" class="Function">hfunc</a>
  <a id="39489" class="Symbol">â†’</a>           <a id="39501" href="Data.Product.html#916" class="Function">Î£[</a> <a id="39504" href="Demos.HSP.html#39504" class="Bound">Ï†</a> <a id="39506" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="39508" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="39512" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="39514" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a> <a id="39516" href="Data.Product.html#916" class="Function">]</a> <a id="39518" class="Symbol">âˆ€</a> <a id="39520" href="Demos.HSP.html#39520" class="Bound">a</a> <a id="39522" class="Symbol">â†’</a> <a id="39524" href="Demos.HSP.html#39358" class="Function">g</a> <a id="39526" href="Demos.HSP.html#39520" class="Bound">a</a> <a id="39528" href="Demos.HSP.html#39271" class="Function Operator">â‰ˆâ‚‚</a> <a id="39531" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="39533" href="Demos.HSP.html#39504" class="Bound">Ï†</a> <a id="39535" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="39537" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="39541" href="Demos.HSP.html#39393" class="Function">h</a> <a id="39543" href="Demos.HSP.html#39520" class="Bound">a</a>
 <a id="39546" href="Demos.HSP.html#39411" class="Function">HomFactor</a> <a id="39556" href="Demos.HSP.html#39556" class="Bound">Khg</a> <a id="39560" href="Demos.HSP.html#39560" class="Bound">hE</a> <a id="39563" class="Symbol">=</a> <a id="39565" class="Symbol">(</a><a id="39566" href="Demos.HSP.html#39825" class="Function">Ï†map</a> <a id="39571" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="39573" href="Demos.HSP.html#40554" class="Function">Ï†hom</a><a id="39577" class="Symbol">)</a> <a id="39579" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="39581" href="Demos.HSP.html#39947" class="Function">gÏ†h</a>
  <a id="39587" class="Keyword">where</a>
  <a id="39595" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a> <a id="39599" class="Symbol">:</a> <a id="39601" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="39604" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="39606" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="39608" class="Symbol">â†’</a> <a id="39610" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="39613" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a> <a id="39615" href="Demos.HSP.html#23863" class="Function Operator">]</a>
  <a id="39619" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a> <a id="39623" class="Symbol">=</a> <a id="39625" href="Demos.HSP.html#14347" class="Function">SurjInv</a> <a id="39633" href="Demos.HSP.html#39376" class="Function">hfunc</a> <a id="39639" href="Demos.HSP.html#39560" class="Bound">hE</a>

  <a id="39645" href="Demos.HSP.html#39645" class="Function">Î·</a> <a id="39647" class="Symbol">:</a> <a id="39649" class="Symbol">âˆ€</a> <a id="39651" class="Symbol">{</a><a id="39652" href="Demos.HSP.html#39652" class="Bound">c</a><a id="39653" class="Symbol">}</a> <a id="39655" class="Symbol">â†’</a> <a id="39657" href="Demos.HSP.html#39393" class="Function">h</a> <a id="39659" class="Symbol">(</a><a id="39660" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a> <a id="39664" href="Demos.HSP.html#39652" class="Bound">c</a><a id="39665" class="Symbol">)</a> <a id="39667" href="Demos.HSP.html#39325" class="Function Operator">â‰ˆâ‚ƒ</a> <a id="39670" href="Demos.HSP.html#39652" class="Bound">c</a>
  <a id="39674" href="Demos.HSP.html#39645" class="Function">Î·</a> <a id="39676" class="Symbol">=</a> <a id="39678" href="Demos.HSP.html#12769" class="Function">InvIsInverseÊ³</a> <a id="39692" href="Demos.HSP.html#39560" class="Bound">hE</a>

  <a id="39698" class="Keyword">open</a> <a id="39703" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="39710" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="39713" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="39715" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="39717" class="Keyword">using</a> <a id="39723" class="Symbol">(</a> <a id="39725" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="39729" class="Symbol">;</a> <a id="39731" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="39737" class="Symbol">)</a>
  <a id="39741" href="Demos.HSP.html#39741" class="Function">Î¶</a> <a id="39743" class="Symbol">:</a> <a id="39745" class="Symbol">âˆ€{</a><a id="39747" href="Demos.HSP.html#39747" class="Bound">x</a> <a id="39749" href="Demos.HSP.html#39749" class="Bound">y</a><a id="39750" class="Symbol">}</a> <a id="39752" class="Symbol">â†’</a> <a id="39754" href="Demos.HSP.html#39747" class="Bound">x</a> <a id="39756" href="Demos.HSP.html#39325" class="Function Operator">â‰ˆâ‚ƒ</a> <a id="39759" href="Demos.HSP.html#39749" class="Bound">y</a> <a id="39761" class="Symbol">â†’</a> <a id="39763" href="Demos.HSP.html#39393" class="Function">h</a> <a id="39765" class="Symbol">(</a><a id="39766" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a> <a id="39770" href="Demos.HSP.html#39747" class="Bound">x</a><a id="39771" class="Symbol">)</a> <a id="39773" href="Demos.HSP.html#39325" class="Function Operator">â‰ˆâ‚ƒ</a> <a id="39776" href="Demos.HSP.html#39393" class="Function">h</a> <a id="39778" class="Symbol">(</a><a id="39779" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a> <a id="39783" href="Demos.HSP.html#39749" class="Bound">y</a><a id="39784" class="Symbol">)</a>
  <a id="39788" href="Demos.HSP.html#39741" class="Function">Î¶</a> <a id="39790" href="Demos.HSP.html#39790" class="Bound">xy</a> <a id="39793" class="Symbol">=</a> <a id="39795" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="39801" href="Demos.HSP.html#39645" class="Function">Î·</a> <a id="39803" class="Symbol">(</a><a id="39804" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="39810" href="Demos.HSP.html#39790" class="Bound">xy</a> <a id="39813" class="Symbol">(</a><a id="39814" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="39818" href="Demos.HSP.html#39645" class="Function">Î·</a><a id="39819" class="Symbol">))</a>

  <a id="39825" href="Demos.HSP.html#39825" class="Function">Ï†map</a> <a id="39830" class="Symbol">:</a> <a id="39832" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="39835" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="39837" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="39839" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="39841" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="39844" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a> <a id="39846" href="Demos.HSP.html#23810" class="Function Operator">]</a>
  <a id="39850" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="39856" href="Demos.HSP.html#39825" class="Function">Ï†map</a> <a id="39861" class="Symbol">=</a> <a id="39863" href="Demos.HSP.html#39358" class="Function">g</a> <a id="39865" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="39867" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a>
  <a id="39873" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="39878" href="Demos.HSP.html#39825" class="Function">Ï†map</a> <a id="39883" class="Symbol">=</a> <a id="39885" href="Demos.HSP.html#39556" class="Bound">Khg</a> <a id="39889" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="39891" href="Demos.HSP.html#39741" class="Function">Î¶</a>

  <a id="39896" class="Keyword">open</a> <a id="39901" href="Demos.HSP.html#7635" class="Module">_âŸ¶_</a> <a id="39905" href="Demos.HSP.html#39825" class="Function">Ï†map</a> <a id="39910" class="Keyword">using</a> <a id="39916" class="Symbol">()</a> <a id="39919" class="Keyword">renaming</a> <a id="39928" class="Symbol">(</a><a id="39929" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="39934" class="Symbol">to</a> <a id="39937" class="Field">Ï†cong</a><a id="39942" class="Symbol">)</a>

  <a id="39947" href="Demos.HSP.html#39947" class="Function">gÏ†h</a> <a id="39951" class="Symbol">:</a> <a id="39953" class="Symbol">(</a><a id="39954" href="Demos.HSP.html#39954" class="Bound">a</a> <a id="39956" class="Symbol">:</a> <a id="39958" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="39961" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a> <a id="39963" href="Demos.HSP.html#23863" class="Function Operator">]</a><a id="39964" class="Symbol">)</a> <a id="39966" class="Symbol">â†’</a> <a id="39968" href="Demos.HSP.html#39358" class="Function">g</a> <a id="39970" href="Demos.HSP.html#39954" class="Bound">a</a> <a id="39972" href="Demos.HSP.html#39271" class="Function Operator">â‰ˆâ‚‚</a> <a id="39975" href="Demos.HSP.html#39825" class="Function">Ï†map</a> <a id="39980" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="39984" href="Demos.HSP.html#39393" class="Function">h</a> <a id="39986" href="Demos.HSP.html#39954" class="Bound">a</a>
  <a id="39990" href="Demos.HSP.html#39947" class="Function">gÏ†h</a> <a id="39994" href="Demos.HSP.html#39994" class="Bound">a</a> <a id="39996" class="Symbol">=</a> <a id="39998" href="Demos.HSP.html#39556" class="Bound">Khg</a> <a id="40002" class="Symbol">(</a><a id="40003" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="40007" href="Demos.HSP.html#39645" class="Function">Î·</a><a id="40008" class="Symbol">)</a>

  <a id="40013" href="Demos.HSP.html#40013" class="Function">Ï†comp</a> <a id="40019" class="Symbol">:</a> <a id="40021" href="Demos.HSP.html#32431" class="Function">compatible-map</a> <a id="40036" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="40038" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a> <a id="40040" href="Demos.HSP.html#39825" class="Function">Ï†map</a>
  <a id="40047" href="Demos.HSP.html#40013" class="Function">Ï†comp</a> <a id="40053" class="Symbol">{</a><a id="40054" href="Demos.HSP.html#40054" class="Bound">f</a><a id="40055" class="Symbol">}{</a><a id="40057" href="Demos.HSP.html#40057" class="Bound">c</a><a id="40058" class="Symbol">}</a> <a id="40060" class="Symbol">=</a>
   <a id="40065" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="40075" href="Demos.HSP.html#39825" class="Function">Ï†map</a> <a id="40080" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>  <a id="40085" class="Symbol">(</a><a id="40086" href="Demos.HSP.html#40054" class="Bound">f</a> <a id="40088" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="40090" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a><a id="40091" class="Symbol">)</a>                   <a id="40111" href="Demos.HSP.html#40057" class="Bound">c</a>       <a id="40119" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="40124" href="Demos.HSP.html#39937" class="Function">Ï†cong</a> <a id="40130" class="Symbol">(</a><a id="40131" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="40136" class="Symbol">(</a><a id="40137" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="40144" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a><a id="40145" class="Symbol">)</a> <a id="40147" class="Symbol">(</a><a id="40148" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="40155" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="40157" class="Symbol">Î»</a> <a id="40159" href="Demos.HSP.html#40159" class="Bound">_</a> <a id="40161" class="Symbol">â†’</a> <a id="40163" href="Demos.HSP.html#39645" class="Function">Î·</a><a id="40164" class="Symbol">))</a>  <a id="40168" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
    <a id="40174" href="Demos.HSP.html#39358" class="Function">g</a><a id="40175" class="Symbol">(</a><a id="40176" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a><a id="40179" class="Symbol">(</a>    <a id="40184" class="Symbol">(</a><a id="40185" href="Demos.HSP.html#40054" class="Bound">f</a> <a id="40187" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="40189" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a><a id="40190" class="Symbol">)</a>  <a id="40193" class="Symbol">(</a><a id="40194" href="Demos.HSP.html#39393" class="Function">h</a> <a id="40196" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>    <a id="40201" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a>  <a id="40206" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="40209" href="Demos.HSP.html#40057" class="Bound">c</a>  <a id="40212" class="Symbol">)))</a>   <a id="40218" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="40223" href="Demos.HSP.html#39937" class="Function">Ï†cong</a> <a id="40229" class="Symbol">(</a><a id="40230" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="40241" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="40243" href="Demos.HSP.html#39204" class="Bound">hh</a> <a id="40246" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a><a id="40247" class="Symbol">)</a>                   <a id="40267" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
    <a id="40273" href="Demos.HSP.html#39358" class="Function">g</a><a id="40274" class="Symbol">(</a><a id="40275" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a><a id="40278" class="Symbol">(</a><a id="40279" href="Demos.HSP.html#39393" class="Function">h</a><a id="40280" class="Symbol">(</a>  <a id="40283" class="Symbol">(</a><a id="40284" href="Demos.HSP.html#40054" class="Bound">f</a> <a id="40286" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="40288" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a><a id="40289" class="Symbol">)</a>  <a id="40292" class="Symbol">(</a>       <a id="40300" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a>  <a id="40305" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="40308" href="Demos.HSP.html#40057" class="Bound">c</a>  <a id="40311" class="Symbol">))))</a>  <a id="40317" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="40322" href="Demos.HSP.html#39947" class="Function">gÏ†h</a> <a id="40326" class="Symbol">((</a><a id="40328" href="Demos.HSP.html#40054" class="Bound">f</a> <a id="40330" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="40332" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a><a id="40333" class="Symbol">)(</a><a id="40335" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a> <a id="40339" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="40341" href="Demos.HSP.html#40057" class="Bound">c</a><a id="40342" class="Symbol">))</a>                      <a id="40366" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
    <a id="40372" href="Demos.HSP.html#39358" class="Function">g</a><a id="40373" class="Symbol">(</a>        <a id="40382" class="Symbol">(</a><a id="40383" href="Demos.HSP.html#40054" class="Bound">f</a> <a id="40385" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="40387" href="Demos.HSP.html#39126" class="Bound">ğ‘¨</a><a id="40388" class="Symbol">)</a>  <a id="40391" class="Symbol">(</a>       <a id="40399" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a>  <a id="40404" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="40407" href="Demos.HSP.html#40057" class="Bound">c</a>  <a id="40410" class="Symbol">))</a>    <a id="40416" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="40421" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="40432" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="40434" href="Demos.HSP.html#39190" class="Bound">gh</a> <a id="40437" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>                           <a id="40465" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
              <a id="40481" class="Symbol">(</a><a id="40482" href="Demos.HSP.html#40054" class="Bound">f</a> <a id="40484" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="40486" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a><a id="40487" class="Symbol">)</a>  <a id="40490" class="Symbol">(</a><a id="40491" href="Demos.HSP.html#39358" class="Function">g</a> <a id="40493" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="40495" class="Symbol">(</a>  <a id="40498" href="Demos.HSP.html#39595" class="Function">hâ»Â¹</a>  <a id="40503" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="40506" href="Demos.HSP.html#40057" class="Bound">c</a>  <a id="40509" class="Symbol">))</a>    <a id="40515" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a> <a id="40517" class="Keyword">where</a> <a id="40523" class="Keyword">open</a> <a id="40528" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="40544" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="40547" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a> <a id="40549" href="Demos.HSP.html#23810" class="Function Operator">]</a>

  <a id="40554" href="Demos.HSP.html#40554" class="Function">Ï†hom</a> <a id="40559" class="Symbol">:</a> <a id="40561" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="40567" href="Demos.HSP.html#39162" class="Bound">ğ‘ª</a> <a id="40569" href="Demos.HSP.html#39144" class="Bound">ğ‘©</a> <a id="40571" href="Demos.HSP.html#39825" class="Function">Ï†map</a>
  <a id="40578" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="40589" href="Demos.HSP.html#40554" class="Function">Ï†hom</a> <a id="40594" class="Symbol">=</a> <a id="40596" href="Demos.HSP.html#40013" class="Function">Ï†comp</a>
</pre>

\subsection{Isomorphisms}
\label{isomorphisms}
\fi      %%% END LONG VERSION ONLY SECTION

Two structures are \defn{isomorphic} provided there are homomorphisms from each to the
other that compose to the identity. We codify this notion, as
well as some of its obvious consequences, as the type \ar{\au{}â‰…\au{}}.
\ifshort
\else
Note that the definition, shown below, includes a proof of the fact that the maps \afld{to} and
\afld{from} are bijective, which makes this fact more accessible.

<pre class="Agda">

<a id="41118" class="Keyword">module</a> <a id="41125" href="Demos.HSP.html#41125" class="Module">_</a> <a id="41127" class="Symbol">(</a><a id="41128" href="Demos.HSP.html#41128" class="Bound">ğ‘¨</a> <a id="41130" class="Symbol">:</a> <a id="41132" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="41140" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="41142" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="41144" class="Symbol">)</a> <a id="41146" class="Symbol">(</a><a id="41147" href="Demos.HSP.html#41147" class="Bound">ğ‘©</a> <a id="41149" class="Symbol">:</a> <a id="41151" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="41159" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="41161" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="41163" class="Symbol">)</a> <a id="41165" class="Keyword">where</a>
 <a id="41172" class="Keyword">open</a> <a id="41177" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41184" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="41187" href="Demos.HSP.html#41128" class="Bound">ğ‘¨</a> <a id="41189" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="41191" class="Keyword">using</a> <a id="41197" class="Symbol">()</a> <a id="41200" class="Keyword">renaming</a> <a id="41209" class="Symbol">(</a> <a id="41211" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="41215" class="Symbol">to</a> <a id="41218" class="Field Operator">_â‰ˆá´¬_</a> <a id="41223" class="Symbol">)</a>
 <a id="41226" class="Keyword">open</a> <a id="41231" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41238" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="41241" href="Demos.HSP.html#41147" class="Bound">ğ‘©</a> <a id="41243" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="41245" class="Keyword">using</a> <a id="41251" class="Symbol">()</a> <a id="41254" class="Keyword">renaming</a> <a id="41263" class="Symbol">(</a> <a id="41265" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="41269" class="Symbol">to</a> <a id="41272" class="Field Operator">_â‰ˆá´®_</a> <a id="41277" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="41309" class="Keyword">record</a> <a id="41316" href="Demos.HSP.html#41316" class="Record Operator">_â‰…_</a> <a id="41320" class="Symbol">:</a> <a id="41322" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="41327" class="Symbol">(</a><a id="41328" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="41330" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="41332" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="41334" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="41336" href="Demos.HSP.html#41140" class="Bound">Î±</a> <a id="41338" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="41340" href="Demos.HSP.html#41142" class="Bound">Ïáµƒ</a> <a id="41343" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="41345" href="Demos.HSP.html#41159" class="Bound">Î²</a> <a id="41347" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="41349" href="Demos.HSP.html#41161" class="Bound">Ïáµ‡</a> <a id="41352" class="Symbol">)</a> <a id="41354" class="Keyword">where</a>
  <a id="41362" class="Keyword">constructor</a>  <a id="41375" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a>
  <a id="41383" class="Keyword">field</a>        <a id="41396" href="Demos.HSP.html#41396" class="Field">to</a> <a id="41399" class="Symbol">:</a> <a id="41401" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="41405" href="Demos.HSP.html#41128" class="Bound">ğ‘¨</a> <a id="41407" href="Demos.HSP.html#41147" class="Bound">ğ‘©</a>
               <a id="41424" href="Demos.HSP.html#41424" class="Field">from</a> <a id="41429" class="Symbol">:</a> <a id="41431" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="41435" href="Demos.HSP.html#41147" class="Bound">ğ‘©</a> <a id="41437" href="Demos.HSP.html#41128" class="Bound">ğ‘¨</a>
               <a id="41454" href="Demos.HSP.html#41454" class="Field">toâˆ¼from</a> <a id="41462" class="Symbol">:</a> <a id="41464" class="Symbol">âˆ€</a> <a id="41466" href="Demos.HSP.html#41466" class="Bound">b</a> <a id="41468" class="Symbol">â†’</a> <a id="41470" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41472" href="Demos.HSP.html#41396" class="Field">to</a> <a id="41475" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>    <a id="41480" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="41484" class="Symbol">(</a><a id="41485" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41487" href="Demos.HSP.html#41424" class="Field">from</a> <a id="41492" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>  <a id="41495" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="41499" href="Demos.HSP.html#41466" class="Bound">b</a><a id="41500" class="Symbol">)</a>  <a id="41503" href="Demos.HSP.html#41272" class="Function Operator">â‰ˆá´®</a> <a id="41506" href="Demos.HSP.html#41466" class="Bound">b</a>
               <a id="41523" href="Demos.HSP.html#41523" class="Field">fromâˆ¼to</a> <a id="41531" class="Symbol">:</a> <a id="41533" class="Symbol">âˆ€</a> <a id="41535" href="Demos.HSP.html#41535" class="Bound">a</a> <a id="41537" class="Symbol">â†’</a> <a id="41539" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41541" href="Demos.HSP.html#41424" class="Field">from</a> <a id="41546" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>  <a id="41549" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="41553" class="Symbol">(</a><a id="41554" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41556" href="Demos.HSP.html#41396" class="Field">to</a> <a id="41559" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>    <a id="41564" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="41568" href="Demos.HSP.html#41535" class="Bound">a</a><a id="41569" class="Symbol">)</a>  <a id="41572" href="Demos.HSP.html#41218" class="Function Operator">â‰ˆá´¬</a> <a id="41575" href="Demos.HSP.html#41535" class="Bound">a</a>
</pre>
\ifshort
Moreover, \afld{to} and \afld{from} are bijections
and \ar{\au{}â‰…\au{}} is an equivalence relation (\seemedium).
\else
<pre class="Agda">

  <a id="41732" href="Demos.HSP.html#41732" class="Function">toIsSurjective</a> <a id="41747" class="Symbol">:</a> <a id="41749" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="41762" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41764" href="Demos.HSP.html#41396" class="Field">to</a> <a id="41767" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
  <a id="41771" href="Demos.HSP.html#41732" class="Function">toIsSurjective</a> <a id="41786" class="Symbol">{</a><a id="41787" href="Demos.HSP.html#41787" class="Bound">y</a><a id="41788" class="Symbol">}</a> <a id="41790" class="Symbol">=</a> <a id="41792" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="41795" class="Symbol">(</a><a id="41796" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41798" href="Demos.HSP.html#41424" class="Field">from</a> <a id="41803" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41805" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="41809" href="Demos.HSP.html#41787" class="Bound">y</a><a id="41810" class="Symbol">)</a> <a id="41812" class="Symbol">(</a><a id="41813" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41817" class="Symbol">(</a><a id="41818" href="Demos.HSP.html#41454" class="Field">toâˆ¼from</a> <a id="41826" href="Demos.HSP.html#41787" class="Bound">y</a><a id="41827" class="Symbol">))</a>
   <a id="41833" class="Keyword">where</a> <a id="41839" class="Keyword">open</a> <a id="41844" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41851" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="41854" href="Demos.HSP.html#41147" class="Bound">ğ‘©</a> <a id="41856" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="41858" class="Keyword">using</a> <a id="41864" class="Symbol">(</a> <a id="41866" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41870" class="Symbol">)</a>

  <a id="41875" href="Demos.HSP.html#41875" class="Function">toIsInjective</a> <a id="41889" class="Symbol">:</a> <a id="41891" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="41903" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="41905" href="Demos.HSP.html#41396" class="Field">to</a> <a id="41908" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
  <a id="41912" href="Demos.HSP.html#41875" class="Function">toIsInjective</a> <a id="41926" class="Symbol">{</a><a id="41927" href="Demos.HSP.html#41927" class="Bound">x</a><a id="41928" class="Symbol">}{</a><a id="41930" href="Demos.HSP.html#41930" class="Bound">y</a><a id="41931" class="Symbol">}</a> <a id="41933" href="Demos.HSP.html#41933" class="Bound">xy</a> <a id="41936" class="Symbol">=</a> <a id="41938" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="41944" class="Symbol">(</a><a id="41945" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41949" class="Symbol">(</a><a id="41950" href="Demos.HSP.html#41523" class="Field">fromâˆ¼to</a> <a id="41958" href="Demos.HSP.html#41927" class="Bound">x</a><a id="41959" class="Symbol">))</a> <a id="41962" class="Symbol">(</a><a id="41963" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="41969" href="Demos.HSP.html#42040" class="Function">Î¾</a> <a id="41971" class="Symbol">(</a><a id="41972" href="Demos.HSP.html#41523" class="Field">fromâˆ¼to</a> <a id="41980" href="Demos.HSP.html#41930" class="Bound">y</a><a id="41981" class="Symbol">))</a>
   <a id="41987" class="Keyword">where</a>
   <a id="41996" class="Keyword">open</a> <a id="42001" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42008" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="42011" href="Demos.HSP.html#41128" class="Bound">ğ‘¨</a> <a id="42013" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="42015" class="Keyword">using</a> <a id="42021" class="Symbol">(</a> <a id="42023" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42027" class="Symbol">;</a> <a id="42029" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42035" class="Symbol">)</a>
   <a id="42040" href="Demos.HSP.html#42040" class="Function">Î¾</a> <a id="42042" class="Symbol">:</a> <a id="42044" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42046" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42051" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42053" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42057" class="Symbol">(</a><a id="42058" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42060" href="Demos.HSP.html#41396" class="Field">to</a> <a id="42063" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42065" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42069" href="Demos.HSP.html#41927" class="Bound">x</a><a id="42070" class="Symbol">)</a> <a id="42072" href="Demos.HSP.html#41218" class="Function Operator">â‰ˆá´¬</a> <a id="42075" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42077" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42082" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42084" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42088" class="Symbol">(</a><a id="42089" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42091" href="Demos.HSP.html#41396" class="Field">to</a> <a id="42094" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42096" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42100" href="Demos.HSP.html#41930" class="Bound">y</a><a id="42101" class="Symbol">)</a>
   <a id="42106" href="Demos.HSP.html#42040" class="Function">Î¾</a> <a id="42108" class="Symbol">=</a> <a id="42110" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42115" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42117" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42122" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42124" href="Demos.HSP.html#41933" class="Bound">xy</a>

  <a id="42130" href="Demos.HSP.html#42130" class="Function">fromIsSurjective</a> <a id="42147" class="Symbol">:</a> <a id="42149" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="42162" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42164" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42169" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
  <a id="42173" href="Demos.HSP.html#42130" class="Function">fromIsSurjective</a> <a id="42190" class="Symbol">{</a><a id="42191" href="Demos.HSP.html#42191" class="Bound">x</a><a id="42192" class="Symbol">}</a> <a id="42194" class="Symbol">=</a> <a id="42196" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="42199" class="Symbol">(</a><a id="42200" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42202" href="Demos.HSP.html#41396" class="Field">to</a> <a id="42205" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42207" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42211" href="Demos.HSP.html#42191" class="Bound">x</a><a id="42212" class="Symbol">)</a> <a id="42214" class="Symbol">(</a><a id="42215" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42219" class="Symbol">(</a><a id="42220" href="Demos.HSP.html#41523" class="Field">fromâˆ¼to</a> <a id="42228" href="Demos.HSP.html#42191" class="Bound">x</a><a id="42229" class="Symbol">))</a>
   <a id="42235" class="Keyword">where</a> <a id="42241" class="Keyword">open</a> <a id="42246" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42253" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="42256" href="Demos.HSP.html#41128" class="Bound">ğ‘¨</a> <a id="42258" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="42260" class="Keyword">using</a> <a id="42266" class="Symbol">(</a> <a id="42268" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42272" class="Symbol">)</a>

  <a id="42277" href="Demos.HSP.html#42277" class="Function">fromIsInjective</a> <a id="42293" class="Symbol">:</a> <a id="42295" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="42307" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42309" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42314" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
  <a id="42318" href="Demos.HSP.html#42277" class="Function">fromIsInjective</a> <a id="42334" class="Symbol">{</a><a id="42335" href="Demos.HSP.html#42335" class="Bound">x</a><a id="42336" class="Symbol">}{</a><a id="42338" href="Demos.HSP.html#42338" class="Bound">y</a><a id="42339" class="Symbol">}</a> <a id="42341" href="Demos.HSP.html#42341" class="Bound">xy</a> <a id="42344" class="Symbol">=</a> <a id="42346" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42352" class="Symbol">(</a><a id="42353" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42357" class="Symbol">(</a><a id="42358" href="Demos.HSP.html#41454" class="Field">toâˆ¼from</a> <a id="42366" href="Demos.HSP.html#42335" class="Bound">x</a><a id="42367" class="Symbol">))</a> <a id="42370" class="Symbol">(</a><a id="42371" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42377" href="Demos.HSP.html#42448" class="Function">Î¾</a> <a id="42379" class="Symbol">(</a><a id="42380" href="Demos.HSP.html#41454" class="Field">toâˆ¼from</a> <a id="42388" href="Demos.HSP.html#42338" class="Bound">y</a><a id="42389" class="Symbol">))</a>
   <a id="42395" class="Keyword">where</a>
   <a id="42404" class="Keyword">open</a> <a id="42409" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42416" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="42419" href="Demos.HSP.html#41147" class="Bound">ğ‘©</a> <a id="42421" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="42423" class="Keyword">using</a> <a id="42429" class="Symbol">(</a> <a id="42431" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42435" class="Symbol">;</a> <a id="42437" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42443" class="Symbol">)</a>
   <a id="42448" href="Demos.HSP.html#42448" class="Function">Î¾</a> <a id="42450" class="Symbol">:</a> <a id="42452" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42454" href="Demos.HSP.html#41396" class="Field">to</a> <a id="42457" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42459" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42463" class="Symbol">(</a><a id="42464" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42466" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42471" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42473" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42477" href="Demos.HSP.html#42335" class="Bound">x</a><a id="42478" class="Symbol">)</a> <a id="42480" href="Demos.HSP.html#41272" class="Function Operator">â‰ˆá´®</a> <a id="42483" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42485" href="Demos.HSP.html#41396" class="Field">to</a> <a id="42488" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42490" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42494" class="Symbol">(</a><a id="42495" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42497" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42502" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42504" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="42508" href="Demos.HSP.html#42338" class="Bound">y</a><a id="42509" class="Symbol">)</a>
   <a id="42514" href="Demos.HSP.html#42448" class="Function">Î¾</a> <a id="42516" class="Symbol">=</a> <a id="42518" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42523" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42525" href="Demos.HSP.html#41396" class="Field">to</a> <a id="42528" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="42530" href="Demos.HSP.html#42341" class="Bound">xy</a>

<a id="42534" class="Keyword">open</a> <a id="42539" href="Demos.HSP.html#41316" class="Module Operator">_â‰…_</a>

</pre>

It is easy to prove that \ar{\au{}â‰…\au{}} is an equivalence relation, as follows.

<pre class="Agda">

<a id="â‰…-refl"></a><a id="42653" href="Demos.HSP.html#42653" class="Function">â‰…-refl</a> <a id="42660" class="Symbol">:</a> <a id="42662" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="42672" class="Symbol">(</a><a id="42673" href="Demos.HSP.html#41316" class="Record Operator">_â‰…_</a> <a id="42677" class="Symbol">{</a><a id="42678" href="Demos.HSP.html#8423" class="Generalizable">Î±</a><a id="42679" class="Symbol">}{</a><a id="42681" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="42683" class="Symbol">})</a>
<a id="42686" href="Demos.HSP.html#42653" class="Function">â‰…-refl</a> <a id="42693" class="Symbol">{</a><a id="42694" href="Demos.HSP.html#42694" class="Bound">Î±</a><a id="42695" class="Symbol">}{</a><a id="42697" href="Demos.HSP.html#42697" class="Bound">Ïáµƒ</a><a id="42699" class="Symbol">}{</a><a id="42701" href="Demos.HSP.html#42701" class="Bound">ğ‘¨</a><a id="42702" class="Symbol">}</a> <a id="42704" class="Symbol">=</a> <a id="42706" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a> <a id="42712" href="Demos.HSP.html#35958" class="Function">ğ’¾ğ’¹</a> <a id="42715" href="Demos.HSP.html#35958" class="Function">ğ’¾ğ’¹</a> <a id="42718" class="Symbol">(Î»</a> <a id="42721" href="Demos.HSP.html#42721" class="Bound">b</a> <a id="42723" class="Symbol">â†’</a> <a id="42725" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="42729" class="Symbol">)</a> <a id="42731" class="Symbol">Î»</a> <a id="42733" href="Demos.HSP.html#42733" class="Bound">a</a> <a id="42735" class="Symbol">â†’</a> <a id="42737" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="42742" class="Keyword">where</a> <a id="42748" class="Keyword">open</a> <a id="42753" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42760" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="42763" href="Demos.HSP.html#42701" class="Bound">ğ‘¨</a> <a id="42765" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="42767" class="Keyword">using</a> <a id="42773" class="Symbol">(</a> <a id="42775" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="42780" class="Symbol">)</a>
<a id="â‰…-sym"></a><a id="42782" href="Demos.HSP.html#42782" class="Function">â‰…-sym</a> <a id="42788" class="Symbol">:</a> <a id="42790" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="42794" class="Symbol">(</a><a id="42795" href="Demos.HSP.html#41316" class="Record Operator">_â‰…_</a><a id="42798" class="Symbol">{</a><a id="42799" href="Demos.HSP.html#8428" class="Generalizable">Î²</a><a id="42800" class="Symbol">}{</a><a id="42802" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="42804" class="Symbol">})</a> <a id="42807" class="Symbol">(</a><a id="42808" href="Demos.HSP.html#41316" class="Record Operator">_â‰…_</a><a id="42811" class="Symbol">{</a><a id="42812" href="Demos.HSP.html#8423" class="Generalizable">Î±</a><a id="42813" class="Symbol">}{</a><a id="42815" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="42817" class="Symbol">})</a>
<a id="42820" href="Demos.HSP.html#42782" class="Function">â‰…-sym</a> <a id="42826" href="Demos.HSP.html#42826" class="Bound">Ï†</a> <a id="42828" class="Symbol">=</a> <a id="42830" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a> <a id="42836" class="Symbol">(</a><a id="42837" href="Demos.HSP.html#41424" class="Field">from</a> <a id="42842" href="Demos.HSP.html#42826" class="Bound">Ï†</a><a id="42843" class="Symbol">)</a> <a id="42845" class="Symbol">(</a><a id="42846" href="Demos.HSP.html#41396" class="Field">to</a> <a id="42849" href="Demos.HSP.html#42826" class="Bound">Ï†</a><a id="42850" class="Symbol">)</a> <a id="42852" class="Symbol">(</a><a id="42853" href="Demos.HSP.html#41523" class="Field">fromâˆ¼to</a> <a id="42861" href="Demos.HSP.html#42826" class="Bound">Ï†</a><a id="42862" class="Symbol">)</a> <a id="42864" class="Symbol">(</a><a id="42865" href="Demos.HSP.html#41454" class="Field">toâˆ¼from</a> <a id="42873" href="Demos.HSP.html#42826" class="Bound">Ï†</a><a id="42874" class="Symbol">)</a>

<a id="â‰…-trans"></a><a id="42877" href="Demos.HSP.html#42877" class="Function">â‰…-trans</a> <a id="42885" class="Symbol">:</a> <a id="42887" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a> <a id="42893" class="Symbol">(</a><a id="42894" href="Demos.HSP.html#41316" class="Record Operator">_â‰…_</a> <a id="42898" class="Symbol">{</a><a id="42899" href="Demos.HSP.html#8423" class="Generalizable">Î±</a><a id="42900" class="Symbol">}{</a><a id="42902" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="42904" class="Symbol">})</a> <a id="42907" class="Symbol">(</a><a id="42908" href="Demos.HSP.html#41316" class="Record Operator">_â‰…_</a><a id="42911" class="Symbol">{</a><a id="42912" href="Demos.HSP.html#8428" class="Generalizable">Î²</a><a id="42913" class="Symbol">}{</a><a id="42915" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="42917" class="Symbol">})</a> <a id="42920" class="Symbol">(</a><a id="42921" href="Demos.HSP.html#41316" class="Record Operator">_â‰…_</a><a id="42924" class="Symbol">{</a><a id="42925" href="Demos.HSP.html#8423" class="Generalizable">Î±</a><a id="42926" class="Symbol">}{</a><a id="42928" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="42930" class="Symbol">}{</a><a id="42932" href="Demos.HSP.html#8433" class="Generalizable">Î³</a><a id="42933" class="Symbol">}{</a><a id="42935" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="42937" class="Symbol">})</a>
<a id="42940" href="Demos.HSP.html#42877" class="Function">â‰…-trans</a> <a id="42948" class="Symbol">{</a><a id="42949" class="Argument">Ïá¶œ</a> <a id="42952" class="Symbol">=</a> <a id="42954" href="Demos.HSP.html#42954" class="Bound">Ïá¶œ</a><a id="42956" class="Symbol">}{</a><a id="42958" href="Demos.HSP.html#42958" class="Bound">ğ‘¨</a><a id="42959" class="Symbol">}{</a><a id="42961" href="Demos.HSP.html#42961" class="Bound">ğ‘©</a><a id="42962" class="Symbol">}{</a><a id="42964" href="Demos.HSP.html#42964" class="Bound">ğ‘ª</a><a id="42965" class="Symbol">}</a> <a id="42967" href="Demos.HSP.html#42967" class="Bound">ab</a> <a id="42970" href="Demos.HSP.html#42970" class="Bound">bc</a> <a id="42973" class="Symbol">=</a> <a id="42975" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a> <a id="42981" href="Demos.HSP.html#42998" class="Function">f</a> <a id="42983" href="Demos.HSP.html#43028" class="Function">g</a> <a id="42985" href="Demos.HSP.html#43222" class="Function">Ï„</a> <a id="42987" href="Demos.HSP.html#43344" class="Function">Î½</a>
 <a id="42990" class="Keyword">where</a>
  <a id="42998" href="Demos.HSP.html#42998" class="Function">f</a> <a id="43000" class="Symbol">:</a> <a id="43002" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="43006" href="Demos.HSP.html#42958" class="Bound">ğ‘¨</a> <a id="43008" href="Demos.HSP.html#42964" class="Bound">ğ‘ª</a>                <a id="43025" class="Symbol">;</a>  <a id="43028" href="Demos.HSP.html#43028" class="Function">g</a> <a id="43030" class="Symbol">:</a> <a id="43032" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="43036" href="Demos.HSP.html#42964" class="Bound">ğ‘ª</a> <a id="43038" href="Demos.HSP.html#42958" class="Bound">ğ‘¨</a>
  <a id="43042" href="Demos.HSP.html#42998" class="Function">f</a> <a id="43044" class="Symbol">=</a> <a id="43046" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="43052" class="Symbol">(</a><a id="43053" href="Demos.HSP.html#41396" class="Field">to</a> <a id="43056" href="Demos.HSP.html#42967" class="Bound">ab</a><a id="43058" class="Symbol">)</a> <a id="43060" class="Symbol">(</a><a id="43061" href="Demos.HSP.html#41396" class="Field">to</a> <a id="43064" href="Demos.HSP.html#42970" class="Bound">bc</a><a id="43066" class="Symbol">)</a>  <a id="43069" class="Symbol">;</a>  <a id="43072" href="Demos.HSP.html#43028" class="Function">g</a> <a id="43074" class="Symbol">=</a> <a id="43076" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="43082" class="Symbol">(</a><a id="43083" href="Demos.HSP.html#41424" class="Field">from</a> <a id="43088" href="Demos.HSP.html#42970" class="Bound">bc</a><a id="43090" class="Symbol">)</a> <a id="43092" class="Symbol">(</a><a id="43093" href="Demos.HSP.html#41424" class="Field">from</a> <a id="43098" href="Demos.HSP.html#42967" class="Bound">ab</a><a id="43100" class="Symbol">)</a>

  <a id="43105" class="Keyword">open</a> <a id="43110" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="43117" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="43120" href="Demos.HSP.html#42958" class="Bound">ğ‘¨</a> <a id="43122" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="43124" class="Keyword">using</a> <a id="43130" class="Symbol">(</a> <a id="43132" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="43136" class="Symbol">;</a> <a id="43138" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43144" class="Symbol">)</a>
  <a id="43148" class="Keyword">open</a> <a id="43153" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="43160" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="43163" href="Demos.HSP.html#42964" class="Bound">ğ‘ª</a> <a id="43165" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="43167" class="Keyword">using</a> <a id="43173" class="Symbol">()</a> <a id="43176" class="Keyword">renaming</a> <a id="43185" class="Symbol">(</a> <a id="43187" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="43191" class="Symbol">to</a> <a id="43194" class="Field Operator">_â‰ˆá¶œ_</a> <a id="43199" class="Symbol">;</a> <a id="43201" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43207" class="Symbol">to</a> <a id="43210" class="Function">transá¶œ</a> <a id="43217" class="Symbol">)</a>

  <a id="43222" href="Demos.HSP.html#43222" class="Function">Ï„</a> <a id="43224" class="Symbol">:</a> <a id="43226" class="Symbol">âˆ€</a> <a id="43228" href="Demos.HSP.html#43228" class="Bound">b</a> <a id="43230" class="Symbol">â†’</a> <a id="43232" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43234" href="Demos.HSP.html#42998" class="Function">f</a> <a id="43236" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43238" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="43242" class="Symbol">(</a><a id="43243" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43245" href="Demos.HSP.html#43028" class="Function">g</a> <a id="43247" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43249" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="43253" href="Demos.HSP.html#43228" class="Bound">b</a><a id="43254" class="Symbol">)</a> <a id="43256" href="Demos.HSP.html#43194" class="Function Operator">â‰ˆá¶œ</a> <a id="43259" href="Demos.HSP.html#43228" class="Bound">b</a>
  <a id="43263" href="Demos.HSP.html#43222" class="Function">Ï„</a> <a id="43265" href="Demos.HSP.html#43265" class="Bound">b</a> <a id="43267" class="Symbol">=</a> <a id="43269" href="Demos.HSP.html#43210" class="Function">transá¶œ</a> <a id="43276" class="Symbol">(</a><a id="43277" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43282" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43284" href="Demos.HSP.html#41396" class="Field">to</a> <a id="43287" href="Demos.HSP.html#42970" class="Bound">bc</a> <a id="43290" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43292" class="Symbol">(</a><a id="43293" href="Demos.HSP.html#41454" class="Field">toâˆ¼from</a> <a id="43301" href="Demos.HSP.html#42967" class="Bound">ab</a> <a id="43304" class="Symbol">(</a><a id="43305" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43307" href="Demos.HSP.html#41424" class="Field">from</a> <a id="43312" href="Demos.HSP.html#42970" class="Bound">bc</a> <a id="43315" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43317" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="43321" href="Demos.HSP.html#43265" class="Bound">b</a><a id="43322" class="Symbol">)))</a> <a id="43326" class="Symbol">(</a><a id="43327" href="Demos.HSP.html#41454" class="Field">toâˆ¼from</a> <a id="43335" href="Demos.HSP.html#42970" class="Bound">bc</a> <a id="43338" href="Demos.HSP.html#43265" class="Bound">b</a><a id="43339" class="Symbol">)</a>

  <a id="43344" href="Demos.HSP.html#43344" class="Function">Î½</a> <a id="43346" class="Symbol">:</a> <a id="43348" class="Symbol">âˆ€</a> <a id="43350" href="Demos.HSP.html#43350" class="Bound">a</a> <a id="43352" class="Symbol">â†’</a> <a id="43354" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43356" href="Demos.HSP.html#43028" class="Function">g</a> <a id="43358" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43360" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="43364" class="Symbol">(</a><a id="43365" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43367" href="Demos.HSP.html#42998" class="Function">f</a> <a id="43369" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43371" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="43375" href="Demos.HSP.html#43350" class="Bound">a</a><a id="43376" class="Symbol">)</a> <a id="43378" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="43380" href="Demos.HSP.html#43350" class="Bound">a</a>
  <a id="43384" href="Demos.HSP.html#43344" class="Function">Î½</a> <a id="43386" href="Demos.HSP.html#43386" class="Bound">a</a> <a id="43388" class="Symbol">=</a> <a id="43390" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43396" class="Symbol">(</a><a id="43397" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43402" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43404" href="Demos.HSP.html#41424" class="Field">from</a> <a id="43409" href="Demos.HSP.html#42967" class="Bound">ab</a> <a id="43412" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43414" class="Symbol">(</a><a id="43415" href="Demos.HSP.html#41523" class="Field">fromâˆ¼to</a> <a id="43423" href="Demos.HSP.html#42970" class="Bound">bc</a> <a id="43426" class="Symbol">(</a><a id="43427" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43429" href="Demos.HSP.html#41396" class="Field">to</a> <a id="43432" href="Demos.HSP.html#42967" class="Bound">ab</a> <a id="43435" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="43437" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="43441" href="Demos.HSP.html#43386" class="Bound">a</a><a id="43442" class="Symbol">)))</a> <a id="43446" class="Symbol">(</a><a id="43447" href="Demos.HSP.html#41523" class="Field">fromâˆ¼to</a> <a id="43455" href="Demos.HSP.html#42967" class="Bound">ab</a> <a id="43458" href="Demos.HSP.html#43386" class="Bound">a</a><a id="43459" class="Symbol">)</a>
</pre>
\fi
\paragraph*{Lift-Alg is an algebraic invariant}
The \af{Lift-Alg} operation neatly resolves the technical problem of
universe non-cumulativity because isomorphism classes of algebras are closed under \af{Lift-Alg}; that is,
\ifshort\else

<pre class="Agda">

<a id="43729" class="Keyword">module</a> <a id="43736" href="Demos.HSP.html#43736" class="Module">_</a> <a id="43738" class="Symbol">{</a><a id="43739" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a> <a id="43741" class="Symbol">:</a> <a id="43743" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="43751" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="43753" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="43755" class="Symbol">}{</a><a id="43757" href="Demos.HSP.html#43757" class="Bound">â„“</a> <a id="43759" class="Symbol">:</a> <a id="43761" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="43766" class="Symbol">}</a> <a id="43768" class="Keyword">where</a>
 <a id="43775" href="Demos.HSP.html#43775" class="Function">Lift-â‰…Ë¡</a> <a id="43783" class="Symbol">:</a> <a id="43785" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a> <a id="43787" href="Demos.HSP.html#41316" class="Record Operator">â‰…</a> <a id="43789" class="Symbol">(</a><a id="43790" href="Demos.HSP.html#26848" class="Function">Lift-AlgË¡</a> <a id="43800" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a> <a id="43802" href="Demos.HSP.html#43757" class="Bound">â„“</a><a id="43803" class="Symbol">)</a>
 <a id="43806" href="Demos.HSP.html#43775" class="Function">Lift-â‰…Ë¡</a> <a id="43814" class="Symbol">=</a> <a id="43816" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a> <a id="43822" href="Demos.HSP.html#36429" class="Function">ToLiftË¡</a> <a id="43830" href="Demos.HSP.html#36533" class="Function">FromLiftË¡</a> <a id="43840" class="Symbol">(</a><a id="43841" href="Demos.HSP.html#36629" class="Function">ToFromLiftË¡</a><a id="43852" class="Symbol">{</a><a id="43853" class="Argument">ğ‘¨</a> <a id="43855" class="Symbol">=</a> <a id="43857" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a><a id="43858" class="Symbol">})</a> <a id="43861" class="Symbol">(</a><a id="43862" href="Demos.HSP.html#36718" class="Function">FromToLiftË¡</a><a id="43873" class="Symbol">{</a><a id="43874" class="Argument">ğ‘¨</a> <a id="43876" class="Symbol">=</a> <a id="43878" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a><a id="43879" class="Symbol">}{</a><a id="43881" href="Demos.HSP.html#43757" class="Bound">â„“</a><a id="43882" class="Symbol">})</a>
 <a id="43886" href="Demos.HSP.html#43886" class="Function">Lift-â‰…Ê³</a> <a id="43894" class="Symbol">:</a> <a id="43896" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a> <a id="43898" href="Demos.HSP.html#41316" class="Record Operator">â‰…</a> <a id="43900" class="Symbol">(</a><a id="43901" href="Demos.HSP.html#27243" class="Function">Lift-AlgÊ³</a> <a id="43911" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a> <a id="43913" href="Demos.HSP.html#43757" class="Bound">â„“</a><a id="43914" class="Symbol">)</a>
 <a id="43917" href="Demos.HSP.html#43886" class="Function">Lift-â‰…Ê³</a> <a id="43925" class="Symbol">=</a> <a id="43927" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a> <a id="43933" href="Demos.HSP.html#36806" class="Function">ToLiftÊ³</a> <a id="43941" href="Demos.HSP.html#36917" class="Function">FromLiftÊ³</a> <a id="43951" class="Symbol">(</a><a id="43952" href="Demos.HSP.html#37013" class="Function">ToFromLiftÊ³</a><a id="43963" class="Symbol">{</a><a id="43964" class="Argument">ğ‘¨</a> <a id="43966" class="Symbol">=</a> <a id="43968" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a><a id="43969" class="Symbol">})</a> <a id="43972" class="Symbol">(</a><a id="43973" href="Demos.HSP.html#37106" class="Function">FromToLiftÊ³</a><a id="43984" class="Symbol">{</a><a id="43985" class="Argument">ğ‘¨</a> <a id="43987" class="Symbol">=</a> <a id="43989" href="Demos.HSP.html#43739" class="Bound">ğ‘¨</a><a id="43990" class="Symbol">}{</a><a id="43992" href="Demos.HSP.html#43757" class="Bound">â„“</a><a id="43993" class="Symbol">})</a>

</pre>
\fi
<pre class="Agda">
<a id="Lift-â‰…"></a><a id="44025" href="Demos.HSP.html#44025" class="Function">Lift-â‰…</a> <a id="44032" class="Symbol">:</a> <a id="44034" class="Symbol">{</a><a id="44035" href="Demos.HSP.html#44035" class="Bound">ğ‘¨</a> <a id="44037" class="Symbol">:</a> <a id="44039" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="44047" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="44049" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="44051" class="Symbol">}{</a><a id="44053" href="Demos.HSP.html#44053" class="Bound">â„“</a> <a id="44055" href="Demos.HSP.html#44055" class="Bound">Ï</a> <a id="44057" class="Symbol">:</a> <a id="44059" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="44064" class="Symbol">}</a> <a id="44066" class="Symbol">â†’</a> <a id="44068" href="Demos.HSP.html#44035" class="Bound">ğ‘¨</a> <a id="44070" href="Demos.HSP.html#41316" class="Record Operator">â‰…</a> <a id="44072" class="Symbol">(</a><a id="44073" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="44082" href="Demos.HSP.html#44035" class="Bound">ğ‘¨</a> <a id="44084" href="Demos.HSP.html#44053" class="Bound">â„“</a> <a id="44086" href="Demos.HSP.html#44055" class="Bound">Ï</a><a id="44087" class="Symbol">)</a>
</pre>
\ifshort\else
<pre class="Agda">
<a id="44127" href="Demos.HSP.html#44025" class="Function">Lift-â‰…</a> <a id="44134" class="Symbol">=</a> <a id="44136" href="Demos.HSP.html#42877" class="Function">â‰…-trans</a> <a id="44144" href="Demos.HSP.html#43775" class="Function">Lift-â‰…Ë¡</a> <a id="44152" href="Demos.HSP.html#43886" class="Function">Lift-â‰…Ê³</a>
</pre>
\fi

\paragraph*{Homomorphic images}
We have found that the most useful way to encode the concept of \emph{homomorphic image}
is to produce a witness, that is, a surjective hom.  Thus we define the type of surjective homs
and also record the fact that an algebra is its own homomorphic image via the identity
hom.\footnote{Here and elsewhere we use the shorthand \af{ov}~\ab{Î±} := \ab{ğ’ª}
\ap{âŠ”} \ab{ğ’±} \ap{âŠ”} \ab{Î±}, for any level \ab{Î±}.}

\ifshort\else
<pre class="Agda">

<a id="ov"></a><a id="44640" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="44643" class="Symbol">:</a> <a id="44645" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="44651" class="Symbol">â†’</a> <a id="44653" href="Agda.Primitive.html#597" class="Postulate">Level</a>
<a id="44659" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="44662" href="Demos.HSP.html#44662" class="Bound">Î±</a> <a id="44664" class="Symbol">=</a> <a id="44666" href="Demos.HSP.html#6392" class="Bound">ğ“</a> <a id="44668" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="44670" href="Demos.HSP.html#6394" class="Bound">ğ“¥</a> <a id="44672" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="44674" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="44679" href="Demos.HSP.html#44662" class="Bound">Î±</a>
</pre>
\fi
<pre class="Agda">

<a id="_IsHomImageOf_"></a><a id="44710" href="Demos.HSP.html#44710" class="Function Operator">_IsHomImageOf_</a> <a id="44725" class="Symbol">:</a> <a id="44727" class="Symbol">(</a><a id="44728" href="Demos.HSP.html#44728" class="Bound">ğ‘©</a> <a id="44730" class="Symbol">:</a> <a id="44732" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="44740" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="44742" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="44744" class="Symbol">)(</a><a id="44746" href="Demos.HSP.html#44746" class="Bound">ğ‘¨</a> <a id="44748" class="Symbol">:</a> <a id="44750" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="44758" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="44760" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="44762" class="Symbol">)</a> <a id="44764" class="Symbol">â†’</a> <a id="44766" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="44771" class="Symbol">_</a>
<a id="44773" href="Demos.HSP.html#44773" class="Bound">ğ‘©</a> <a id="44775" href="Demos.HSP.html#44710" class="Function Operator">IsHomImageOf</a> <a id="44788" href="Demos.HSP.html#44788" class="Bound">ğ‘¨</a> <a id="44790" class="Symbol">=</a> <a id="44792" href="Data.Product.html#916" class="Function">Î£[</a> <a id="44795" href="Demos.HSP.html#44795" class="Bound">Ï†</a> <a id="44797" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="44799" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="44803" href="Demos.HSP.html#44788" class="Bound">ğ‘¨</a> <a id="44805" href="Demos.HSP.html#44773" class="Bound">ğ‘©</a> <a id="44807" href="Data.Product.html#916" class="Function">]</a> <a id="44809" href="Demos.HSP.html#14263" class="Function">IsSurjective</a> <a id="44822" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="44824" href="Demos.HSP.html#44795" class="Bound">Ï†</a> <a id="44826" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>

<a id="HomImages"></a><a id="44829" href="Demos.HSP.html#44829" class="Function">HomImages</a> <a id="44839" class="Symbol">:</a> <a id="44841" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="44849" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="44851" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="44854" class="Symbol">â†’</a> <a id="44856" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="44861" class="Symbol">(</a><a id="44862" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="44864" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="44866" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="44869" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="44871" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="44874" class="Symbol">(</a><a id="44875" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="44877" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="44879" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="44881" class="Symbol">))</a>
<a id="44884" href="Demos.HSP.html#44829" class="Function">HomImages</a> <a id="44894" class="Symbol">{</a><a id="44895" class="Argument">Î²</a> <a id="44897" class="Symbol">=</a> <a id="44899" href="Demos.HSP.html#44899" class="Bound">Î²</a><a id="44900" class="Symbol">}{</a><a id="44902" class="Argument">Ïáµ‡</a> <a id="44905" class="Symbol">=</a> <a id="44907" href="Demos.HSP.html#44907" class="Bound">Ïáµ‡</a><a id="44909" class="Symbol">}</a> <a id="44911" href="Demos.HSP.html#44911" class="Bound">ğ‘¨</a> <a id="44913" class="Symbol">=</a> <a id="44915" href="Data.Product.html#916" class="Function">Î£[</a> <a id="44918" href="Demos.HSP.html#44918" class="Bound">ğ‘©</a> <a id="44920" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="44922" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="44930" href="Demos.HSP.html#44899" class="Bound">Î²</a> <a id="44932" href="Demos.HSP.html#44907" class="Bound">Ïáµ‡</a> <a id="44935" href="Data.Product.html#916" class="Function">]</a> <a id="44937" href="Demos.HSP.html#44918" class="Bound">ğ‘©</a> <a id="44939" href="Demos.HSP.html#44710" class="Function Operator">IsHomImageOf</a> <a id="44952" href="Demos.HSP.html#44911" class="Bound">ğ‘¨</a>

<a id="IdHomImage"></a><a id="44955" href="Demos.HSP.html#44955" class="Function">IdHomImage</a> <a id="44966" class="Symbol">:</a> <a id="44968" class="Symbol">{</a><a id="44969" href="Demos.HSP.html#44969" class="Bound">ğ‘¨</a> <a id="44971" class="Symbol">:</a> <a id="44973" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="44981" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="44983" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="44985" class="Symbol">}</a> <a id="44987" class="Symbol">â†’</a> <a id="44989" href="Demos.HSP.html#44969" class="Bound">ğ‘¨</a> <a id="44991" href="Demos.HSP.html#44710" class="Function Operator">IsHomImageOf</a> <a id="45004" href="Demos.HSP.html#44969" class="Bound">ğ‘¨</a>
<a id="45006" href="Demos.HSP.html#44955" class="Function">IdHomImage</a> <a id="45017" class="Symbol">{</a><a id="45018" class="Argument">Î±</a> <a id="45020" class="Symbol">=</a> <a id="45022" href="Demos.HSP.html#45022" class="Bound">Î±</a><a id="45023" class="Symbol">}{</a><a id="45025" class="Argument">ğ‘¨</a> <a id="45027" class="Symbol">=</a> <a id="45029" href="Demos.HSP.html#45029" class="Bound">ğ‘¨</a><a id="45030" class="Symbol">}</a> <a id="45032" class="Symbol">=</a> <a id="45034" href="Demos.HSP.html#35958" class="Function">ğ’¾ğ’¹</a> <a id="45037" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="45039" class="Symbol">Î»</a> <a id="45041" class="Symbol">{</a><a id="45042" href="Demos.HSP.html#45042" class="Bound">y</a><a id="45043" class="Symbol">}</a> <a id="45045" class="Symbol">â†’</a> <a id="45047" href="Demos.HSP.html#12178" class="InductiveConstructor">Image_âˆ‹_.eq</a> <a id="45059" href="Demos.HSP.html#45042" class="Bound">y</a> <a id="45061" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="45067" class="Keyword">where</a> <a id="45073" class="Keyword">open</a> <a id="45078" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="45085" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="45088" href="Demos.HSP.html#45029" class="Bound">ğ‘¨</a> <a id="45090" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="45092" class="Keyword">using</a> <a id="45098" class="Symbol">(</a> <a id="45100" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="45105" class="Symbol">)</a>
</pre>
\ifshort\else    %%% BEGIN LONG VERSION ONLY

\medskip

\noindent These types should be self-explanatory, but just to be sure, we pause
to describe the semantics of the Sigma type appearing in the definition of \af{HomImages}.
If \ab{ğ‘¨} : \af{Algebra} \ab{Î±} \ab{Ïáµƒ} is an \ab{ğ‘†}-algebra, then \af{HomImages} \ab{ğ‘¨}
denotes the type of pairs (\ab{ğ‘©} \aic{,} \ab p) such that \ab{ğ‘©} : \ar{Algebra} \ab{Î²} \ab{Ïáµ‡}
and \ab p is a proof that there exists a hom from \ab{ğ‘¨} onto \ab{ğ‘©}.
\fi      %%% END LONG VERSION ONLY SECTION

%% -------------------------------------------------------------------------------------
\subsection{Subalgebras}
\label{subalgebras}
Given \ab{ğ‘†}-algebras \ab{ğ‘¨} and \ab{ğ‘©}, we say that \ab{ğ‘¨} is a \defn{subalgebra} of
\ab{ğ‘¨}, and we write \ab{ğ‘¨}~\aof{â‰¤}~\ab{ğ‘©}, just in case \ab{ğ‘¨} can be \emph{homomorphically
embedded} in \ab{ğ‘©}; in other terms, \ab{ğ‘¨}~\aof{â‰¤}~\ab{ğ‘©} if and only if there exists an injective
hom from \ab{ğ‘¨} to \ab{ğ‘©}.

<pre class="Agda">

<a id="_â‰¤_"></a><a id="46099" href="Demos.HSP.html#46099" class="Function Operator">_â‰¤_</a> <a id="46103" class="Symbol">:</a> <a id="46105" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="46113" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="46115" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="46118" class="Symbol">â†’</a> <a id="46120" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="46128" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="46130" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a> <a id="46133" class="Symbol">â†’</a> <a id="46135" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="46140" class="Symbol">_</a>
<a id="46142" href="Demos.HSP.html#46142" class="Bound">ğ‘¨</a> <a id="46144" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="46146" href="Demos.HSP.html#46146" class="Bound">ğ‘©</a> <a id="46148" class="Symbol">=</a> <a id="46150" href="Data.Product.html#916" class="Function">Î£[</a> <a id="46153" href="Demos.HSP.html#46153" class="Bound">h</a> <a id="46155" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="46157" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="46161" href="Demos.HSP.html#46142" class="Bound">ğ‘¨</a> <a id="46163" href="Demos.HSP.html#46146" class="Bound">ğ‘©</a> <a id="46165" href="Data.Product.html#916" class="Function">]</a> <a id="46167" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="46179" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="46181" href="Demos.HSP.html#46153" class="Bound">h</a> <a id="46183" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>

</pre>
The subalgebra relation is a \defn{preorder}, that is, a reflexive (by the identity monomorphism), and
transitive (by composition of monomorphisms) relation.
<pre class="Agda">

<a id="â‰¤-reflexive"></a><a id="46369" href="Demos.HSP.html#46369" class="Function">â‰¤-reflexive</a>   <a id="46383" class="Symbol">:</a>  <a id="46386" class="Symbol">{</a><a id="46387" href="Demos.HSP.html#46387" class="Bound">ğ‘¨</a> <a id="46389" class="Symbol">:</a> <a id="46391" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="46399" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="46401" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="46403" class="Symbol">}</a> <a id="46405" class="Symbol">â†’</a> <a id="46407" href="Demos.HSP.html#46387" class="Bound">ğ‘¨</a> <a id="46409" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="46411" href="Demos.HSP.html#46387" class="Bound">ğ‘¨</a>
<a id="46413" href="Demos.HSP.html#46369" class="Function">â‰¤-reflexive</a> <a id="46425" class="Symbol">=</a> <a id="46427" href="Demos.HSP.html#35958" class="Function">ğ’¾ğ’¹</a> <a id="46430" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46432" href="Function.Base.html#615" class="Function">id</a>

<a id="â‰¤-transitive"></a><a id="46436" href="Demos.HSP.html#46436" class="Function">â‰¤-transitive</a>  <a id="46450" class="Symbol">:</a>  <a id="46453" class="Symbol">{</a><a id="46454" href="Demos.HSP.html#46454" class="Bound">ğ‘¨</a> <a id="46456" class="Symbol">:</a> <a id="46458" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="46466" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="46468" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="46470" class="Symbol">}{</a><a id="46472" href="Demos.HSP.html#46472" class="Bound">ğ‘©</a> <a id="46474" class="Symbol">:</a> <a id="46476" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="46484" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="46486" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="46488" class="Symbol">}{</a><a id="46490" href="Demos.HSP.html#46490" class="Bound">ğ‘ª</a> <a id="46492" class="Symbol">:</a> <a id="46494" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="46502" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="46504" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="46506" class="Symbol">}</a>
 <a id="46509" class="Symbol">â†’</a>               <a id="46525" href="Demos.HSP.html#46454" class="Bound">ğ‘¨</a> <a id="46527" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="46529" href="Demos.HSP.html#46472" class="Bound">ğ‘©</a> <a id="46531" class="Symbol">â†’</a> <a id="46533" href="Demos.HSP.html#46472" class="Bound">ğ‘©</a> <a id="46535" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="46537" href="Demos.HSP.html#46490" class="Bound">ğ‘ª</a> <a id="46539" class="Symbol">â†’</a> <a id="46541" href="Demos.HSP.html#46454" class="Bound">ğ‘¨</a> <a id="46543" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="46545" href="Demos.HSP.html#46490" class="Bound">ğ‘ª</a>
<a id="46547" href="Demos.HSP.html#46436" class="Function">â‰¤-transitive</a> <a id="46560" class="Symbol">(</a> <a id="46562" href="Demos.HSP.html#46562" class="Bound">f</a> <a id="46564" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46566" href="Demos.HSP.html#46566" class="Bound">finj</a> <a id="46571" class="Symbol">)</a> <a id="46573" class="Symbol">(</a> <a id="46575" href="Demos.HSP.html#46575" class="Bound">g</a> <a id="46577" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46579" href="Demos.HSP.html#46579" class="Bound">ginj</a> <a id="46584" class="Symbol">)</a> <a id="46586" class="Symbol">=</a> <a id="46588" class="Symbol">(</a><a id="46589" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="46595" href="Demos.HSP.html#46562" class="Bound">f</a> <a id="46597" href="Demos.HSP.html#46575" class="Bound">g</a> <a id="46599" class="Symbol">)</a> <a id="46601" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46603" href="Demos.HSP.html#14821" class="Function">âˆ˜-IsInjective</a> <a id="46617" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="46619" href="Demos.HSP.html#46562" class="Bound">f</a> <a id="46621" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="46623" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="46625" href="Demos.HSP.html#46575" class="Bound">g</a> <a id="46627" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="46629" href="Demos.HSP.html#46566" class="Bound">finj</a> <a id="46634" href="Demos.HSP.html#46579" class="Bound">ginj</a>

</pre>
\noindent If
\ab{ğ’œ} : \ab I â†’ \af{Algebra} \ab{Î±} \ab{Ïáµƒ},
\ab{â„¬} : \ab I â†’ \af{Algebra} \ab{Î²} \ab{Ïáµ‡} (families of \ab{ğ‘†}-algebras) and
\ab{â„¬} \ab i \af{â‰¤} \ab{ğ’œ} \ab i for all \ab i~:~\ab I, then \af{â¨…} \ab{â„¬} is a subalgebra
of \af{â¨…} \ab{ğ’œ}.
\ifshort
Below we use \af{â¨…-â‰¤} to denote this fact.
\else

<pre class="Agda">
<a id="46970" class="Keyword">module</a> <a id="46977" href="Demos.HSP.html#46977" class="Module">_</a> <a id="46979" class="Symbol">{</a><a id="46980" href="Demos.HSP.html#46980" class="Bound">Î¹</a> <a id="46982" class="Symbol">:</a> <a id="46984" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="46989" class="Symbol">}</a> <a id="46991" class="Symbol">{</a><a id="46992" href="Demos.HSP.html#46992" class="Bound">I</a> <a id="46994" class="Symbol">:</a> <a id="46996" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="47001" href="Demos.HSP.html#46980" class="Bound">Î¹</a><a id="47002" class="Symbol">}{</a><a id="47004" href="Demos.HSP.html#47004" class="Bound">ğ’œ</a> <a id="47006" class="Symbol">:</a> <a id="47008" href="Demos.HSP.html#46992" class="Bound">I</a> <a id="47010" class="Symbol">â†’</a> <a id="47012" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="47020" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="47022" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="47024" class="Symbol">}{</a><a id="47026" href="Demos.HSP.html#47026" class="Bound">â„¬</a> <a id="47028" class="Symbol">:</a> <a id="47030" href="Demos.HSP.html#46992" class="Bound">I</a> <a id="47032" class="Symbol">â†’</a> <a id="47034" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="47042" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="47044" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="47046" class="Symbol">}</a> <a id="47048" class="Keyword">where</a>
 <a id="47055" href="Demos.HSP.html#47055" class="Function">â¨…-â‰¤</a> <a id="47059" class="Symbol">:</a> <a id="47061" class="Symbol">(âˆ€</a> <a id="47064" href="Demos.HSP.html#47064" class="Bound">i</a> <a id="47066" class="Symbol">â†’</a> <a id="47068" href="Demos.HSP.html#47026" class="Bound">â„¬</a> <a id="47070" href="Demos.HSP.html#47064" class="Bound">i</a> <a id="47072" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="47074" href="Demos.HSP.html#47004" class="Bound">ğ’œ</a> <a id="47076" href="Demos.HSP.html#47064" class="Bound">i</a><a id="47077" class="Symbol">)</a> <a id="47079" class="Symbol">â†’</a> <a id="47081" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="47083" href="Demos.HSP.html#47026" class="Bound">â„¬</a> <a id="47085" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="47087" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="47089" href="Demos.HSP.html#47004" class="Bound">ğ’œ</a>
 <a id="47092" href="Demos.HSP.html#47055" class="Function">â¨…-â‰¤</a> <a id="47096" href="Demos.HSP.html#47096" class="Bound">Bâ‰¤A</a> <a id="47100" class="Symbol">=</a> <a id="47102" class="Symbol">(</a><a id="47103" href="Demos.HSP.html#47191" class="Function">hfunc</a> <a id="47109" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="47111" href="Demos.HSP.html#47324" class="Function">hhom</a><a id="47115" class="Symbol">)</a> <a id="47117" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="47119" href="Demos.HSP.html#47417" class="Function">hM</a>
  <a id="47124" class="Keyword">where</a>  <a id="47131" href="Demos.HSP.html#47131" class="Function">hi</a> <a id="47134" class="Symbol">:</a> <a id="47136" class="Symbol">âˆ€</a> <a id="47138" href="Demos.HSP.html#47138" class="Bound">i</a> <a id="47140" class="Symbol">â†’</a> <a id="47142" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="47146" class="Symbol">(</a><a id="47147" href="Demos.HSP.html#47026" class="Bound">â„¬</a> <a id="47149" href="Demos.HSP.html#47138" class="Bound">i</a><a id="47150" class="Symbol">)</a> <a id="47152" class="Symbol">(</a><a id="47153" href="Demos.HSP.html#47004" class="Bound">ğ’œ</a> <a id="47155" href="Demos.HSP.html#47138" class="Bound">i</a><a id="47156" class="Symbol">)</a>
         <a id="47167" href="Demos.HSP.html#47131" class="Function">hi</a> <a id="47170" class="Symbol">=</a> <a id="47172" href="Demos.HSP.html#7523" class="Field">fst</a> <a id="47176" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="47178" href="Demos.HSP.html#47096" class="Bound">Bâ‰¤A</a>
         <a id="47191" href="Demos.HSP.html#47191" class="Function">hfunc</a> <a id="47197" class="Symbol">:</a> <a id="47199" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="47202" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="47204" href="Demos.HSP.html#47026" class="Bound">â„¬</a> <a id="47206" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="47208" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="47210" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="47213" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="47215" href="Demos.HSP.html#47004" class="Bound">ğ’œ</a> <a id="47217" href="Demos.HSP.html#23810" class="Function Operator">]</a>
         <a id="47228" class="Symbol">(</a><a id="47229" href="Demos.HSP.html#47191" class="Function">hfunc</a> <a id="47235" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="47239" href="Demos.HSP.html#47239" class="Bound">x</a><a id="47240" class="Symbol">)</a> <a id="47242" href="Demos.HSP.html#47242" class="Bound">i</a> <a id="47244" class="Symbol">=</a> <a id="47246" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47248" href="Demos.HSP.html#47131" class="Function">hi</a> <a id="47251" href="Demos.HSP.html#47242" class="Bound">i</a> <a id="47253" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47255" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="47259" href="Demos.HSP.html#47239" class="Bound">x</a> <a id="47261" href="Demos.HSP.html#47242" class="Bound">i</a>
         <a id="47272" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47277" href="Demos.HSP.html#47191" class="Function">hfunc</a> <a id="47283" class="Symbol">=</a> <a id="47285" class="Symbol">Î»</a> <a id="47287" href="Demos.HSP.html#47287" class="Bound">xy</a> <a id="47290" href="Demos.HSP.html#47290" class="Bound">i</a> <a id="47292" class="Symbol">â†’</a> <a id="47294" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47299" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47301" href="Demos.HSP.html#47131" class="Function">hi</a> <a id="47304" href="Demos.HSP.html#47290" class="Bound">i</a> <a id="47306" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47308" class="Symbol">(</a><a id="47309" href="Demos.HSP.html#47287" class="Bound">xy</a> <a id="47312" href="Demos.HSP.html#47290" class="Bound">i</a><a id="47313" class="Symbol">)</a>
         <a id="47324" href="Demos.HSP.html#47324" class="Function">hhom</a> <a id="47329" class="Symbol">:</a> <a id="47331" href="Demos.HSP.html#32703" class="Record">IsHom</a> <a id="47337" class="Symbol">(</a><a id="47338" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="47340" href="Demos.HSP.html#47026" class="Bound">â„¬</a><a id="47341" class="Symbol">)</a> <a id="47343" class="Symbol">(</a><a id="47344" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="47346" href="Demos.HSP.html#47004" class="Bound">ğ’œ</a><a id="47347" class="Symbol">)</a> <a id="47349" href="Demos.HSP.html#47191" class="Function">hfunc</a>
         <a id="47364" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="47375" href="Demos.HSP.html#47324" class="Function">hhom</a> <a id="47380" class="Symbol">=</a> <a id="47382" class="Symbol">Î»</a> <a id="47384" href="Demos.HSP.html#47384" class="Bound">i</a> <a id="47386" class="Symbol">â†’</a> <a id="47388" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="47399" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="47401" href="Demos.HSP.html#47131" class="Function">hi</a> <a id="47404" href="Demos.HSP.html#47384" class="Bound">i</a> <a id="47406" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
         <a id="47417" href="Demos.HSP.html#47417" class="Function">hM</a> <a id="47420" class="Symbol">:</a> <a id="47422" href="Demos.HSP.html#14180" class="Function">IsInjective</a> <a id="47434" href="Demos.HSP.html#47191" class="Function">hfunc</a>
         <a id="47449" href="Demos.HSP.html#47417" class="Function">hM</a> <a id="47452" class="Symbol">=</a> <a id="47454" class="Symbol">Î»</a> <a id="47456" href="Demos.HSP.html#47456" class="Bound">xy</a> <a id="47459" href="Demos.HSP.html#47459" class="Bound">i</a> <a id="47461" class="Symbol">â†’</a> <a id="47463" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="47465" href="Demos.HSP.html#47096" class="Bound">Bâ‰¤A</a> <a id="47469" href="Demos.HSP.html#47459" class="Bound">i</a> <a id="47471" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="47473" class="Symbol">(</a><a id="47474" href="Demos.HSP.html#47456" class="Bound">xy</a> <a id="47477" href="Demos.HSP.html#47459" class="Bound">i</a><a id="47478" class="Symbol">)</a>

</pre>

We conclude this section with two easy facts that will be useful later. The first converts a monomorphism
to a subalgebra witness while the second is an algebraic invariance property of \aof{â‰¤}.

<pre class="Agda">

<a id="monâ†’â‰¤"></a><a id="47703" href="Demos.HSP.html#47703" class="Function">monâ†’â‰¤</a> <a id="47709" class="Symbol">:</a> <a id="47711" class="Symbol">{</a><a id="47712" href="Demos.HSP.html#47712" class="Bound">ğ‘¨</a> <a id="47714" class="Symbol">:</a> <a id="47716" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="47724" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="47726" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="47728" class="Symbol">}{</a><a id="47730" href="Demos.HSP.html#47730" class="Bound">ğ‘©</a> <a id="47732" class="Symbol">:</a> <a id="47734" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="47742" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="47744" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="47746" class="Symbol">}</a> <a id="47748" class="Symbol">â†’</a> <a id="47750" href="Demos.HSP.html#33561" class="Function">mon</a> <a id="47754" href="Demos.HSP.html#47712" class="Bound">ğ‘¨</a> <a id="47756" href="Demos.HSP.html#47730" class="Bound">ğ‘©</a> <a id="47758" class="Symbol">â†’</a> <a id="47760" href="Demos.HSP.html#47712" class="Bound">ğ‘¨</a> <a id="47762" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="47764" href="Demos.HSP.html#47730" class="Bound">ğ‘©</a>
<a id="47766" href="Demos.HSP.html#47703" class="Function">monâ†’â‰¤</a> <a id="47772" class="Symbol">{</a><a id="47773" class="Argument">ğ‘¨</a> <a id="47775" class="Symbol">=</a> <a id="47777" href="Demos.HSP.html#47777" class="Bound">ğ‘¨</a><a id="47778" class="Symbol">}{</a><a id="47780" href="Demos.HSP.html#47780" class="Bound">ğ‘©</a><a id="47781" class="Symbol">}</a> <a id="47783" href="Demos.HSP.html#47783" class="Bound">x</a> <a id="47785" class="Symbol">=</a> <a id="47787" href="Demos.HSP.html#34232" class="Function">monâ†’intohom</a> <a id="47799" href="Demos.HSP.html#47777" class="Bound">ğ‘¨</a> <a id="47801" href="Demos.HSP.html#47780" class="Bound">ğ‘©</a> <a id="47803" href="Demos.HSP.html#47783" class="Bound">x</a>

<a id="â‰…-trans-â‰¤"></a><a id="47806" href="Demos.HSP.html#47806" class="Function">â‰…-trans-â‰¤</a> <a id="47816" class="Symbol">:</a>  <a id="47819" class="Symbol">{</a><a id="47820" href="Demos.HSP.html#47820" class="Bound">ğ‘¨</a> <a id="47822" class="Symbol">:</a> <a id="47824" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="47832" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="47834" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="47836" class="Symbol">}{</a><a id="47838" href="Demos.HSP.html#47838" class="Bound">ğ‘©</a> <a id="47840" class="Symbol">:</a> <a id="47842" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="47850" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="47852" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="47854" class="Symbol">}{</a><a id="47856" href="Demos.HSP.html#47856" class="Bound">ğ‘ª</a> <a id="47858" class="Symbol">:</a> <a id="47860" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="47868" href="Demos.HSP.html#8433" class="Generalizable">Î³</a> <a id="47870" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="47872" class="Symbol">}</a>
 <a id="47875" class="Symbol">â†’</a>           <a id="47887" href="Demos.HSP.html#47820" class="Bound">ğ‘¨</a> <a id="47889" href="Demos.HSP.html#41316" class="Record Operator">â‰…</a> <a id="47891" href="Demos.HSP.html#47838" class="Bound">ğ‘©</a> <a id="47893" class="Symbol">â†’</a> <a id="47895" href="Demos.HSP.html#47838" class="Bound">ğ‘©</a> <a id="47897" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="47899" href="Demos.HSP.html#47856" class="Bound">ğ‘ª</a> <a id="47901" class="Symbol">â†’</a> <a id="47903" href="Demos.HSP.html#47820" class="Bound">ğ‘¨</a> <a id="47905" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="47907" href="Demos.HSP.html#47856" class="Bound">ğ‘ª</a>
<a id="47909" href="Demos.HSP.html#47806" class="Function">â‰…-trans-â‰¤</a> <a id="47919" href="Demos.HSP.html#47919" class="Bound">Aâ‰…B</a> <a id="47923" class="Symbol">(</a><a id="47924" href="Demos.HSP.html#47924" class="Bound">h</a> <a id="47926" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="47928" href="Demos.HSP.html#47928" class="Bound">hinj</a><a id="47932" class="Symbol">)</a> <a id="47934" class="Symbol">=</a> <a id="47936" class="Symbol">(</a><a id="47937" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="47943" class="Symbol">(</a><a id="47944" href="Demos.HSP.html#41396" class="Field">to</a> <a id="47947" href="Demos.HSP.html#47919" class="Bound">Aâ‰…B</a><a id="47950" class="Symbol">)</a> <a id="47952" href="Demos.HSP.html#47924" class="Bound">h</a><a id="47953" class="Symbol">)</a> <a id="47955" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="47957" class="Symbol">(</a><a id="47958" href="Demos.HSP.html#14821" class="Function">âˆ˜-IsInjective</a> <a id="47972" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47974" href="Demos.HSP.html#41396" class="Field">to</a> <a id="47977" href="Demos.HSP.html#47919" class="Bound">Aâ‰…B</a> <a id="47981" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47983" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47985" href="Demos.HSP.html#47924" class="Bound">h</a> <a id="47987" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="47989" class="Symbol">(</a><a id="47990" href="Demos.HSP.html#41875" class="Function">toIsInjective</a> <a id="48004" href="Demos.HSP.html#47919" class="Bound">Aâ‰…B</a><a id="48007" class="Symbol">)</a> <a id="48009" href="Demos.HSP.html#47928" class="Bound">hinj</a><a id="48013" class="Symbol">)</a>
</pre>
\fi

%% -------------------------------------------------------------------------------------

\subsection{Terms}
\label{terms}
Fix a signature \ab{ğ‘†} and let \ab X denote an arbitrary nonempty collection of variable
symbols. Such a collection is called a \defn{context}.
Assume the symbols in \ab X are distinct from the operation symbols of
\ab{ğ‘†}, that is \ab X \aof{âˆ©} \aof{âˆ£} \ab{ğ‘†} \aof{âˆ£} = âˆ….
A \defn{word} in the language of \ab{ğ‘†} is a finite sequence of members of \ab X \aof{âˆª}
\aof{âˆ£~\ab{ğ‘†}~âˆ£}. We denote the concatenation of such sequences by simple juxtaposition.
Let \ab{Sâ‚€} denote the set of nullary operation symbols of \ab{ğ‘†}. We define by induction
on \textit{n} the sets \ab{ğ‘‡â‚™} of \emph{words} over \ab X \aof{âˆª} \aof{âˆ£~\ab{ğ‘†}~âˆ£} as
follows (cf.~\cite[Def. 4.19]{Bergman:2012}): \ab{ğ‘‡â‚€} := \ab X \aof{âˆª} \ab{Sâ‚€} and
\ab{ğ‘‡â‚™â‚Šâ‚} := \ab{ğ‘‡â‚™} \aof{âˆª} \ab{ğ’¯â‚™}, where \ab{ğ’¯â‚™} is the collection of all \ab f \ab t
such that \ab f : \aof{âˆ£~\ab{ğ‘†}~âˆ£} and \ab t : \aof{âˆ¥~\ab{ğ‘†}~âˆ¥} \ab f \as{â†’}
\ab{ğ‘‡â‚™}.
\ifshort\else
(Recall, \aof{âˆ¥~\ab{ğ‘†}~âˆ¥} \ab f is the arity of the operation symbol \ab f.)
\fi
An \ab{ğ‘†}-\defn{term} is a term in the language of \ab{ğ‘†} and the collection of all
\ab{ğ‘†}-\defn{terms} in the context \ab X is given by \Term{X} := \aof{â‹ƒâ‚™} \ab{ğ‘‡â‚™}.

In type theory, this translates to two cases: variable injection and applying an
operation symbol to a tuple of terms. This represents each term as a tree
with an operation symbol at each \aic{node} and a variable symbol at each leaf \aic{â„Š};
hence the constructor names (\aic{â„Š} for ``generator'' and \aic{node} for ``node'') in the
following inductively defined type.

<pre class="Agda">

<a id="49687" class="Keyword">data</a> <a id="Term"></a><a id="49692" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="49697" class="Symbol">(</a><a id="49698" href="Demos.HSP.html#49698" class="Bound">X</a> <a id="49700" class="Symbol">:</a> <a id="49702" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="49707" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a> <a id="49709" class="Symbol">)</a> <a id="49711" class="Symbol">:</a> <a id="49713" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="49718" class="Symbol">(</a><a id="49719" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="49722" href="Demos.HSP.html#49707" class="Bound">Ï‡</a><a id="49723" class="Symbol">)</a>  <a id="49726" class="Keyword">where</a>
 <a id="Term.â„Š"></a><a id="49733" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="49735" class="Symbol">:</a> <a id="49737" href="Demos.HSP.html#49698" class="Bound">X</a> <a id="49739" class="Symbol">â†’</a> <a id="49741" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="49746" href="Demos.HSP.html#49698" class="Bound">X</a>
 <a id="Term.node"></a><a id="49749" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="49754" class="Symbol">:</a> <a id="49756" class="Symbol">(</a><a id="49757" href="Demos.HSP.html#49757" class="Bound">f</a> <a id="49759" class="Symbol">:</a> <a id="49761" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="49763" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="49765" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a><a id="49766" class="Symbol">)(</a><a id="49768" href="Demos.HSP.html#49768" class="Bound">t</a> <a id="49770" class="Symbol">:</a> <a id="49772" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="49774" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="49776" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="49778" href="Demos.HSP.html#49757" class="Bound">f</a> <a id="49780" class="Symbol">â†’</a> <a id="49782" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="49787" href="Demos.HSP.html#49698" class="Bound">X</a><a id="49788" class="Symbol">)</a> <a id="49790" class="Symbol">â†’</a> <a id="49792" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="49797" href="Demos.HSP.html#49698" class="Bound">X</a>
</pre>

\paragraph*{The term algebra}
We enrich the \ad{Term} type to a setoid of  \ab{ğ‘†}-terms, which will ultimately
be used as the domain of an algebra, called the \emph{term algebra in the signature} \ab{ğ‘†}.
For this we need an equivalence relation on terms.

<pre class="Agda">

<a id="50081" class="Keyword">module</a> <a id="50088" href="Demos.HSP.html#50088" class="Module">_</a> <a id="50090" class="Symbol">{</a><a id="50091" href="Demos.HSP.html#50091" class="Bound">X</a> <a id="50093" class="Symbol">:</a> <a id="50095" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="50100" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a> <a id="50102" class="Symbol">}</a> <a id="50104" class="Keyword">where</a>
 <a id="50111" class="Keyword">data</a> <a id="50116" href="Demos.HSP.html#50116" class="Datatype Operator">_â‰ƒ_</a> <a id="50120" class="Symbol">:</a> <a id="50122" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="50127" href="Demos.HSP.html#50091" class="Bound">X</a> <a id="50129" class="Symbol">â†’</a> <a id="50131" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="50136" href="Demos.HSP.html#50091" class="Bound">X</a> <a id="50138" class="Symbol">â†’</a> <a id="50140" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="50145" class="Symbol">(</a><a id="50146" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="50149" href="Demos.HSP.html#50100" class="Bound">Ï‡</a><a id="50150" class="Symbol">)</a> <a id="50152" class="Keyword">where</a>
  <a id="50160" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="50164" class="Symbol">:</a> <a id="50166" class="Symbol">{</a><a id="50167" href="Demos.HSP.html#50167" class="Bound">x</a> <a id="50169" href="Demos.HSP.html#50169" class="Bound">y</a> <a id="50171" class="Symbol">:</a> <a id="50173" href="Demos.HSP.html#50091" class="Bound">X</a><a id="50174" class="Symbol">}</a> <a id="50176" class="Symbol">â†’</a> <a id="50178" href="Demos.HSP.html#50167" class="Bound">x</a> <a id="50180" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="50182" href="Demos.HSP.html#50169" class="Bound">y</a> <a id="50184" class="Symbol">â†’</a> <a id="50186" class="Symbol">(</a><a id="50187" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="50189" href="Demos.HSP.html#50167" class="Bound">x</a><a id="50190" class="Symbol">)</a> <a id="50192" href="Demos.HSP.html#50116" class="Datatype Operator">â‰ƒ</a> <a id="50194" class="Symbol">(</a><a id="50195" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="50197" href="Demos.HSP.html#50169" class="Bound">y</a><a id="50198" class="Symbol">)</a>
  <a id="50202" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="50206" class="Symbol">:</a> <a id="50208" class="Symbol">âˆ€</a> <a id="50210" class="Symbol">{</a><a id="50211" href="Demos.HSP.html#50211" class="Bound">f</a><a id="50212" class="Symbol">}{</a><a id="50214" href="Demos.HSP.html#50214" class="Bound">s</a> <a id="50216" href="Demos.HSP.html#50216" class="Bound">t</a> <a id="50218" class="Symbol">:</a> <a id="50220" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="50222" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="50224" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="50226" href="Demos.HSP.html#50211" class="Bound">f</a> <a id="50228" class="Symbol">â†’</a> <a id="50230" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="50235" href="Demos.HSP.html#50091" class="Bound">X</a><a id="50236" class="Symbol">}</a> <a id="50238" class="Symbol">â†’</a> <a id="50240" class="Symbol">(âˆ€</a> <a id="50243" href="Demos.HSP.html#50243" class="Bound">i</a> <a id="50245" class="Symbol">â†’</a> <a id="50247" class="Symbol">(</a><a id="50248" href="Demos.HSP.html#50214" class="Bound">s</a> <a id="50250" href="Demos.HSP.html#50243" class="Bound">i</a><a id="50251" class="Symbol">)</a> <a id="50253" href="Demos.HSP.html#50116" class="Datatype Operator">â‰ƒ</a> <a id="50255" class="Symbol">(</a><a id="50256" href="Demos.HSP.html#50216" class="Bound">t</a> <a id="50258" href="Demos.HSP.html#50243" class="Bound">i</a><a id="50259" class="Symbol">))</a> <a id="50262" class="Symbol">â†’</a> <a id="50264" class="Symbol">(</a><a id="50265" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="50270" href="Demos.HSP.html#50211" class="Bound">f</a> <a id="50272" href="Demos.HSP.html#50214" class="Bound">s</a><a id="50273" class="Symbol">)</a> <a id="50275" href="Demos.HSP.html#50116" class="Datatype Operator">â‰ƒ</a> <a id="50277" class="Symbol">(</a><a id="50278" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="50283" href="Demos.HSP.html#50211" class="Bound">f</a> <a id="50285" href="Demos.HSP.html#50216" class="Bound">t</a><a id="50286" class="Symbol">)</a>

</pre>
It is straightforward to show that \ad{\au{}â‰ƒ\au{}} is an equivalence relation,
\ifshort
and we refer to this fact as \af{â‰ƒ-isEquiv} below.
\else
as follows.

<pre class="Agda">

 <a id="50474" href="Demos.HSP.html#50474" class="Function">â‰ƒ-isRefl</a>   <a id="50485" class="Symbol">:</a> <a id="50487" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a>      <a id="50502" href="Demos.HSP.html#50116" class="Datatype Operator">_â‰ƒ_</a>
 <a id="50507" href="Demos.HSP.html#50474" class="Function">â‰ƒ-isRefl</a> <a id="50516" class="Symbol">{</a><a id="50517" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="50519" class="Symbol">_}</a> <a id="50522" class="Symbol">=</a> <a id="50524" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="50528" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a>
 <a id="50536" href="Demos.HSP.html#50474" class="Function">â‰ƒ-isRefl</a> <a id="50545" class="Symbol">{</a><a id="50546" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="50551" class="Symbol">_</a> <a id="50553" class="Symbol">_}</a> <a id="50556" class="Symbol">=</a> <a id="50558" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="50562" class="Symbol">(Î»</a> <a id="50565" href="Demos.HSP.html#50565" class="Bound">_</a> <a id="50567" class="Symbol">â†’</a> <a id="50569" href="Demos.HSP.html#50474" class="Function">â‰ƒ-isRefl</a><a id="50577" class="Symbol">)</a>

 <a id="50581" href="Demos.HSP.html#50581" class="Function">â‰ƒ-isSym</a>    <a id="50592" class="Symbol">:</a> <a id="50594" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a>      <a id="50609" href="Demos.HSP.html#50116" class="Datatype Operator">_â‰ƒ_</a>
 <a id="50614" href="Demos.HSP.html#50581" class="Function">â‰ƒ-isSym</a> <a id="50622" class="Symbol">(</a><a id="50623" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="50627" href="Demos.HSP.html#50627" class="Bound">x</a><a id="50628" class="Symbol">)</a> <a id="50630" class="Symbol">=</a> <a id="50632" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="50636" class="Symbol">(</a><a id="50637" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">â‰¡.sym</a> <a id="50643" href="Demos.HSP.html#50627" class="Bound">x</a><a id="50644" class="Symbol">)</a>
 <a id="50647" href="Demos.HSP.html#50581" class="Function">â‰ƒ-isSym</a> <a id="50655" class="Symbol">(</a><a id="50656" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="50660" href="Demos.HSP.html#50660" class="Bound">x</a><a id="50661" class="Symbol">)</a> <a id="50663" class="Symbol">=</a> <a id="50665" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="50669" class="Symbol">(Î»</a> <a id="50672" href="Demos.HSP.html#50672" class="Bound">i</a> <a id="50674" class="Symbol">â†’</a> <a id="50676" href="Demos.HSP.html#50581" class="Function">â‰ƒ-isSym</a> <a id="50684" class="Symbol">(</a><a id="50685" href="Demos.HSP.html#50660" class="Bound">x</a> <a id="50687" href="Demos.HSP.html#50672" class="Bound">i</a><a id="50688" class="Symbol">))</a>

 <a id="50693" href="Demos.HSP.html#50693" class="Function">â‰ƒ-isTrans</a>  <a id="50704" class="Symbol">:</a> <a id="50706" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a>     <a id="50721" href="Demos.HSP.html#50116" class="Datatype Operator">_â‰ƒ_</a>
 <a id="50726" href="Demos.HSP.html#50693" class="Function">â‰ƒ-isTrans</a> <a id="50736" class="Symbol">(</a><a id="50737" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="50741" href="Demos.HSP.html#50741" class="Bound">x</a><a id="50742" class="Symbol">)</a> <a id="50744" class="Symbol">(</a><a id="50745" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="50749" href="Demos.HSP.html#50749" class="Bound">y</a><a id="50750" class="Symbol">)</a> <a id="50752" class="Symbol">=</a> <a id="50754" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="50758" class="Symbol">(</a><a id="50759" href="Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">â‰¡.trans</a> <a id="50767" href="Demos.HSP.html#50741" class="Bound">x</a> <a id="50769" href="Demos.HSP.html#50749" class="Bound">y</a><a id="50770" class="Symbol">)</a>
 <a id="50773" href="Demos.HSP.html#50693" class="Function">â‰ƒ-isTrans</a> <a id="50783" class="Symbol">(</a><a id="50784" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="50788" href="Demos.HSP.html#50788" class="Bound">x</a><a id="50789" class="Symbol">)</a> <a id="50791" class="Symbol">(</a><a id="50792" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="50796" href="Demos.HSP.html#50796" class="Bound">y</a><a id="50797" class="Symbol">)</a> <a id="50799" class="Symbol">=</a> <a id="50801" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="50805" class="Symbol">(Î»</a> <a id="50808" href="Demos.HSP.html#50808" class="Bound">i</a> <a id="50810" class="Symbol">â†’</a> <a id="50812" href="Demos.HSP.html#50693" class="Function">â‰ƒ-isTrans</a> <a id="50822" class="Symbol">(</a><a id="50823" href="Demos.HSP.html#50788" class="Bound">x</a> <a id="50825" href="Demos.HSP.html#50808" class="Bound">i</a><a id="50826" class="Symbol">)</a> <a id="50828" class="Symbol">(</a><a id="50829" href="Demos.HSP.html#50796" class="Bound">y</a> <a id="50831" href="Demos.HSP.html#50808" class="Bound">i</a><a id="50832" class="Symbol">))</a>

 <a id="50837" href="Demos.HSP.html#50837" class="Function">â‰ƒ-isEquiv</a>  <a id="50848" class="Symbol">:</a> <a id="50850" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>  <a id="50865" href="Demos.HSP.html#50116" class="Datatype Operator">_â‰ƒ_</a>
 <a id="50870" href="Demos.HSP.html#50837" class="Function">â‰ƒ-isEquiv</a> <a id="50880" class="Symbol">=</a> <a id="50882" class="Keyword">record</a> <a id="50889" class="Symbol">{</a> <a id="50891" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="50896" class="Symbol">=</a> <a id="50898" href="Demos.HSP.html#50474" class="Function">â‰ƒ-isRefl</a> <a id="50907" class="Symbol">;</a> <a id="50909" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="50913" class="Symbol">=</a> <a id="50915" href="Demos.HSP.html#50581" class="Function">â‰ƒ-isSym</a> <a id="50923" class="Symbol">;</a> <a id="50925" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="50931" class="Symbol">=</a> <a id="50933" href="Demos.HSP.html#50693" class="Function">â‰ƒ-isTrans</a> <a id="50943" class="Symbol">}</a>
</pre>
\fi

We now define, for a given signature \ab{ğ‘†} and context \ab X,
%if the type \Term{X} is nonempty (equivalently, if \ab X or
%\aof{âˆ£~\ab{ğ‘†}~âˆ£} is nonempty), then
the algebraic structure \T{X}, known as the \defn{term algebra in} \ab{ğ‘†} \defn{over} \ab
X.  Terms are viewed as acting on other terms, so both the elements of the domain of \T{X}
and its basic operations are terms themselves. That is, for each operation symbol \ab
f : \aof{âˆ£~\ab{ğ‘†}~âˆ£}, we denote by \ab f~\aof{Ì‚}~\T{X} the operation on \Term{X} that maps
each tuple of terms, say, \ab t : \aof{âˆ¥~\ab{ğ‘†}~âˆ¥} \ab f \as{â†’} \Term{X}, to the formal
term \ab f \ab t.
%We let \T{X} denote the term algebra in \ab{ğ‘†} over \ab X; it has universe \Term{X} and
%operations \ab f \aof{Ì‚} (\T{X}), one for each symbol \ab f in \aof{âˆ£~\ab{ğ‘†}~âˆ£}.

<pre class="Agda">

<a id="TermSetoid"></a><a id="51772" href="Demos.HSP.html#51772" class="Function">TermSetoid</a> <a id="51783" class="Symbol">:</a> <a id="51785" class="Symbol">(</a><a id="51786" href="Demos.HSP.html#51786" class="Bound">X</a> <a id="51788" class="Symbol">:</a> <a id="51790" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="51795" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="51796" class="Symbol">)</a> <a id="51798" class="Symbol">â†’</a> <a id="51800" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="51807" class="Symbol">_</a> <a id="51809" class="Symbol">_</a>
<a id="51811" href="Demos.HSP.html#51772" class="Function">TermSetoid</a> <a id="51822" href="Demos.HSP.html#51822" class="Bound">X</a> <a id="51824" class="Symbol">=</a> <a id="51826" class="Keyword">record</a> <a id="51833" class="Symbol">{</a> <a id="51835" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="51843" class="Symbol">=</a> <a id="51845" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="51850" href="Demos.HSP.html#51822" class="Bound">X</a> <a id="51852" class="Symbol">;</a> <a id="51854" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="51858" class="Symbol">=</a> <a id="51860" href="Demos.HSP.html#50116" class="Datatype Operator">_â‰ƒ_</a> <a id="51864" class="Symbol">;</a> <a id="51866" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="51880" class="Symbol">=</a> <a id="51882" href="Demos.HSP.html#50837" class="Function">â‰ƒ-isEquiv</a> <a id="51892" class="Symbol">}</a>

<a id="ğ‘»"></a><a id="51895" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="51897" class="Symbol">:</a> <a id="51899" class="Symbol">(</a><a id="51900" href="Demos.HSP.html#51900" class="Bound">X</a> <a id="51902" class="Symbol">:</a> <a id="51904" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="51909" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="51910" class="Symbol">)</a> <a id="51912" class="Symbol">â†’</a> <a id="51914" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="51922" class="Symbol">(</a><a id="51923" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="51926" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="51927" class="Symbol">)</a> <a id="51929" class="Symbol">(</a><a id="51930" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="51933" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="51934" class="Symbol">)</a>
<a id="51936" href="Demos.HSP.html#22917" class="Field">Algebra.Domain</a> <a id="51951" class="Symbol">(</a><a id="51952" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="51954" href="Demos.HSP.html#51954" class="Bound">X</a><a id="51955" class="Symbol">)</a> <a id="51957" class="Symbol">=</a> <a id="51959" href="Demos.HSP.html#51772" class="Function">TermSetoid</a> <a id="51970" href="Demos.HSP.html#51954" class="Bound">X</a>
<a id="51972" href="Demos.HSP.html#22946" class="Field">Algebra.Interp</a> <a id="51987" class="Symbol">(</a><a id="51988" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="51990" href="Demos.HSP.html#51990" class="Bound">X</a><a id="51991" class="Symbol">)</a> <a id="51993" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="51997" class="Symbol">(</a><a id="51998" href="Demos.HSP.html#51998" class="Bound">f</a> <a id="52000" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="52002" href="Demos.HSP.html#52002" class="Bound">ts</a><a id="52004" class="Symbol">)</a> <a id="52006" class="Symbol">=</a> <a id="52008" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="52013" href="Demos.HSP.html#51998" class="Bound">f</a> <a id="52015" href="Demos.HSP.html#52002" class="Bound">ts</a>
<a id="52018" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="52023" class="Symbol">(</a><a id="52024" href="Demos.HSP.html#22946" class="Field">Algebra.Interp</a> <a id="52039" class="Symbol">(</a><a id="52040" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="52042" href="Demos.HSP.html#52042" class="Bound">X</a><a id="52043" class="Symbol">))</a> <a id="52046" class="Symbol">(</a><a id="52047" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="52054" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="52056" href="Demos.HSP.html#52056" class="Bound">ssâ‰ƒts</a><a id="52061" class="Symbol">)</a> <a id="52063" class="Symbol">=</a> <a id="52065" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="52069" href="Demos.HSP.html#52056" class="Bound">ssâ‰ƒts</a>
</pre>

\paragraph*{Substitution, environments and interpretation of terms}
The approach to formalizing these three concepts is based on similar code developed by
Andreas Abel to formalize Birkhoff's completeness theorem~\cite{Abel:2021}.
\ifshort\else

Recall that the domain of an algebra \ab{ğ‘¨} is a setoid, which we denote by
\af{ğ”»[~\ab{ğ‘¨}~]}, whose \afld{Carrier} is the carrier of the algebra, \af{ğ•Œ[~\ab{ğ‘¨}~]},
and whose equivalence relation represents equality of elements in \af{ğ•Œ[~\ab{ğ‘¨}~]}.
\fi
\af{Sub} performs substitution from one context to
another.  Specifically, if \ab X and \ab Y are contexts, then \af{Sub} \ab X \ab Y
assigns a term in \ab X to each symbol in \ab Y.
A substitution \ab{Ïƒ} applied to a term \ab t is denoted by \af{[~\ab{Ïƒ}~]} \ab t.

<pre class="Agda">

<a id="Sub"></a><a id="52866" href="Demos.HSP.html#52866" class="Function">Sub</a> <a id="52870" class="Symbol">:</a> <a id="52872" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="52877" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a> <a id="52879" class="Symbol">â†’</a> <a id="52881" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="52886" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a> <a id="52888" class="Symbol">â†’</a> <a id="52890" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="52895" class="Symbol">_</a>
<a id="52897" href="Demos.HSP.html#52866" class="Function">Sub</a> <a id="52901" href="Demos.HSP.html#52901" class="Bound">X</a> <a id="52903" href="Demos.HSP.html#52903" class="Bound">Y</a> <a id="52905" class="Symbol">=</a> <a id="52907" class="Symbol">(</a><a id="52908" href="Demos.HSP.html#52908" class="Bound">y</a> <a id="52910" class="Symbol">:</a> <a id="52912" href="Demos.HSP.html#52903" class="Bound">Y</a><a id="52913" class="Symbol">)</a> <a id="52915" class="Symbol">â†’</a> <a id="52917" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="52922" href="Demos.HSP.html#52901" class="Bound">X</a>

<a id="[_]_"></a><a id="52925" href="Demos.HSP.html#52925" class="Function Operator">[_]_</a> <a id="52930" class="Symbol">:</a> <a id="52932" class="Symbol">{</a><a id="52933" href="Demos.HSP.html#52933" class="Bound">X</a> <a id="52935" href="Demos.HSP.html#52935" class="Bound">Y</a> <a id="52937" class="Symbol">:</a> <a id="52939" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="52944" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="52945" class="Symbol">}</a> <a id="52947" class="Symbol">â†’</a> <a id="52949" href="Demos.HSP.html#52866" class="Function">Sub</a> <a id="52953" href="Demos.HSP.html#52933" class="Bound">X</a> <a id="52955" href="Demos.HSP.html#52935" class="Bound">Y</a> <a id="52957" class="Symbol">â†’</a> <a id="52959" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="52964" href="Demos.HSP.html#52935" class="Bound">Y</a> <a id="52966" class="Symbol">â†’</a> <a id="52968" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="52973" href="Demos.HSP.html#52933" class="Bound">X</a>
<a id="52975" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="52977" href="Demos.HSP.html#52977" class="Bound">Ïƒ</a> <a id="52979" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="52981" class="Symbol">(</a><a id="52982" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="52984" href="Demos.HSP.html#52984" class="Bound">x</a><a id="52985" class="Symbol">)</a> <a id="52987" class="Symbol">=</a> <a id="52989" href="Demos.HSP.html#52977" class="Bound">Ïƒ</a> <a id="52991" href="Demos.HSP.html#52984" class="Bound">x</a>
<a id="52993" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="52995" href="Demos.HSP.html#52995" class="Bound">Ïƒ</a> <a id="52997" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="52999" class="Symbol">(</a><a id="53000" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="53005" href="Demos.HSP.html#53005" class="Bound">f</a> <a id="53007" href="Demos.HSP.html#53007" class="Bound">ts</a><a id="53009" class="Symbol">)</a> <a id="53011" class="Symbol">=</a> <a id="53013" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="53018" href="Demos.HSP.html#53005" class="Bound">f</a> <a id="53020" class="Symbol">(Î»</a> <a id="53023" href="Demos.HSP.html#53023" class="Bound">i</a> <a id="53025" class="Symbol">â†’</a> <a id="53027" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="53029" href="Demos.HSP.html#52995" class="Bound">Ïƒ</a> <a id="53031" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="53033" class="Symbol">(</a><a id="53034" href="Demos.HSP.html#53007" class="Bound">ts</a> <a id="53037" href="Demos.HSP.html#53023" class="Bound">i</a><a id="53038" class="Symbol">))</a>

</pre>

Fix a signature \ab{ğ‘†}, a context \ab X, and an \ab{ğ‘†}-algebra \ab{ğ‘¨}.
An \defn{environment} \ab{ğ‘¨} for \ab X is an \ab X indexed family of setoids,
where the equivalence is taken pointwise.

<pre class="Agda">

<a id="53260" class="Keyword">module</a> <a id="Environment"></a><a id="53267" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="53279" class="Symbol">(</a><a id="53280" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a> <a id="53282" class="Symbol">:</a> <a id="53284" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="53292" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="53294" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="53295" class="Symbol">)</a> <a id="53297" class="Keyword">where</a>
 <a id="53304" class="Keyword">open</a> <a id="53309" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="53316" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="53319" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a> <a id="53321" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="53323" class="Keyword">using</a> <a id="53329" class="Symbol">(</a> <a id="53331" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="53335" class="Symbol">;</a> <a id="53337" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="53342" class="Symbol">;</a> <a id="53344" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="53348" class="Symbol">;</a> <a id="53350" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="53356" class="Symbol">)</a>
 <a id="Environment.Env"></a><a id="53359" href="Demos.HSP.html#53359" class="Function">Env</a> <a id="53363" class="Symbol">:</a> <a id="53365" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="53370" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a> <a id="53372" class="Symbol">â†’</a> <a id="53374" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="53381" class="Symbol">_</a> <a id="53383" class="Symbol">_</a>
 <a id="53386" href="Demos.HSP.html#53359" class="Function">Env</a> <a id="53390" href="Demos.HSP.html#53390" class="Bound">X</a> <a id="53392" class="Symbol">=</a> <a id="53394" class="Keyword">record</a>  <a id="53402" class="Symbol">{</a> <a id="53404" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="53412" class="Symbol">=</a> <a id="53414" href="Demos.HSP.html#53390" class="Bound">X</a> <a id="53416" class="Symbol">â†’</a> <a id="53418" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="53421" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a> <a id="53423" href="Demos.HSP.html#23863" class="Function Operator">]</a>
                 <a id="53442" class="Symbol">;</a> <a id="53444" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="53448" class="Symbol">=</a> <a id="53450" class="Symbol">Î»</a> <a id="53452" href="Demos.HSP.html#53452" class="Bound">Ï</a> <a id="53454" href="Demos.HSP.html#53454" class="Bound">Ï„</a> <a id="53456" class="Symbol">â†’</a> <a id="53458" class="Symbol">(</a><a id="53459" href="Demos.HSP.html#53459" class="Bound">x</a> <a id="53461" class="Symbol">:</a> <a id="53463" href="Demos.HSP.html#53390" class="Bound">X</a><a id="53464" class="Symbol">)</a> <a id="53466" class="Symbol">â†’</a> <a id="53468" href="Demos.HSP.html#53452" class="Bound">Ï</a> <a id="53470" href="Demos.HSP.html#53459" class="Bound">x</a> <a id="53472" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="53474" href="Demos.HSP.html#53454" class="Bound">Ï„</a> <a id="53476" href="Demos.HSP.html#53459" class="Bound">x</a>
                 <a id="53495" class="Symbol">;</a> <a id="53497" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="53511" class="Symbol">=</a> <a id="53513" class="Keyword">record</a>  <a id="53521" class="Symbol">{</a> <a id="53523" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="53530" class="Symbol">=</a> <a id="53532" class="Symbol">Î»</a> <a id="53534" href="Demos.HSP.html#53534" class="Bound">_</a>      <a id="53541" class="Symbol">â†’</a> <a id="53543" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                           <a id="53591" class="Symbol">;</a> <a id="53593" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="53600" class="Symbol">=</a> <a id="53602" class="Symbol">Î»</a> <a id="53604" href="Demos.HSP.html#53604" class="Bound">h</a> <a id="53606" href="Demos.HSP.html#53606" class="Bound">x</a>    <a id="53611" class="Symbol">â†’</a> <a id="53613" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="53617" class="Symbol">(</a><a id="53618" href="Demos.HSP.html#53604" class="Bound">h</a> <a id="53620" href="Demos.HSP.html#53606" class="Bound">x</a><a id="53621" class="Symbol">)</a>
                                           <a id="53666" class="Symbol">;</a> <a id="53668" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="53675" class="Symbol">=</a> <a id="53677" class="Symbol">Î»</a> <a id="53679" href="Demos.HSP.html#53679" class="Bound">g</a> <a id="53681" href="Demos.HSP.html#53681" class="Bound">h</a> <a id="53683" href="Demos.HSP.html#53683" class="Bound">x</a>  <a id="53686" class="Symbol">â†’</a> <a id="53688" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="53694" class="Symbol">(</a><a id="53695" href="Demos.HSP.html#53679" class="Bound">g</a> <a id="53697" href="Demos.HSP.html#53683" class="Bound">x</a><a id="53698" class="Symbol">)(</a><a id="53700" href="Demos.HSP.html#53681" class="Bound">h</a> <a id="53702" href="Demos.HSP.html#53683" class="Bound">x</a><a id="53703" class="Symbol">)</a> <a id="53705" class="Symbol">}}</a>

</pre>
As the above definition, as well as the next, are relative to a fixed algebra, we use
a submodule to succinctly capture this commonality in the definitions.
The function \af{âŸ¦\au{}âŸ§} then denotes the \defn{interpretation} of
a term in a given algebra, \emph{evaluated} in a given environment.

<pre class="Agda">

 <a id="Environment.âŸ¦_âŸ§"></a><a id="54029" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="54033" class="Symbol">:</a> <a id="54035" class="Symbol">{</a><a id="54036" href="Demos.HSP.html#54036" class="Bound">X</a> <a id="54038" class="Symbol">:</a> <a id="54040" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="54045" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="54046" class="Symbol">}(</a><a id="54048" href="Demos.HSP.html#54048" class="Bound">t</a> <a id="54050" class="Symbol">:</a> <a id="54052" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="54057" href="Demos.HSP.html#54036" class="Bound">X</a><a id="54058" class="Symbol">)</a> <a id="54060" class="Symbol">â†’</a> <a id="54062" class="Symbol">(</a><a id="54063" href="Demos.HSP.html#53359" class="Function">Env</a> <a id="54067" href="Demos.HSP.html#54036" class="Bound">X</a><a id="54068" class="Symbol">)</a> <a id="54070" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="54072" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="54075" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a> <a id="54077" href="Demos.HSP.html#23810" class="Function Operator">]</a>
 <a id="54080" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54082" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="54084" href="Demos.HSP.html#54084" class="Bound">x</a> <a id="54086" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>          <a id="54097" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="54101" href="Demos.HSP.html#54101" class="Bound">Ï</a>    <a id="54106" class="Symbol">=</a> <a id="54108" href="Demos.HSP.html#54101" class="Bound">Ï</a> <a id="54110" href="Demos.HSP.html#54084" class="Bound">x</a>
 <a id="54113" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54115" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="54120" href="Demos.HSP.html#54120" class="Bound">f</a> <a id="54122" href="Demos.HSP.html#54122" class="Bound">args</a> <a id="54127" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>  <a id="54130" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="54134" href="Demos.HSP.html#54134" class="Bound">Ï</a>    <a id="54139" class="Symbol">=</a> <a id="54141" class="Symbol">(</a><a id="54142" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="54149" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a><a id="54150" class="Symbol">)</a> <a id="54152" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="54156" class="Symbol">(</a><a id="54157" href="Demos.HSP.html#54120" class="Bound">f</a> <a id="54159" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54161" class="Symbol">Î»</a> <a id="54163" href="Demos.HSP.html#54163" class="Bound">i</a> <a id="54165" class="Symbol">â†’</a> <a id="54167" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54169" href="Demos.HSP.html#54122" class="Bound">args</a> <a id="54174" href="Demos.HSP.html#54163" class="Bound">i</a> <a id="54176" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="54178" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="54182" href="Demos.HSP.html#54134" class="Bound">Ï</a><a id="54183" class="Symbol">)</a>
 <a id="54186" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54191" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54193" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="54195" href="Demos.HSP.html#54195" class="Bound">x</a> <a id="54197" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="54199" href="Demos.HSP.html#54199" class="Bound">uâ‰ˆv</a>          <a id="54212" class="Symbol">=</a> <a id="54214" href="Demos.HSP.html#54199" class="Bound">uâ‰ˆv</a> <a id="54218" href="Demos.HSP.html#54195" class="Bound">x</a>
 <a id="54221" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54226" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54228" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="54233" href="Demos.HSP.html#54233" class="Bound">f</a> <a id="54235" href="Demos.HSP.html#54235" class="Bound">args</a> <a id="54240" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="54242" href="Demos.HSP.html#54242" class="Bound">xâ‰ˆy</a>  <a id="54247" class="Symbol">=</a> <a id="54249" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54254" class="Symbol">(</a><a id="54255" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="54262" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a><a id="54263" class="Symbol">)(</a><a id="54265" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="54272" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54274" class="Symbol">Î»</a> <a id="54276" href="Demos.HSP.html#54276" class="Bound">i</a> <a id="54278" class="Symbol">â†’</a> <a id="54280" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54285" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54287" href="Demos.HSP.html#54235" class="Bound">args</a> <a id="54292" href="Demos.HSP.html#54276" class="Bound">i</a> <a id="54294" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="54296" href="Demos.HSP.html#54242" class="Bound">xâ‰ˆy</a> <a id="54300" class="Symbol">)</a>

</pre>

Two terms are proclaimed \defn{equal} if they are equal for all
environments.  We represent this equivalence of terms
\ifshort\else
and proof that it is an equivalence relation,
\fi
as follows.

<pre class="Agda">

 <a id="Environment.Equal"></a><a id="54525" href="Demos.HSP.html#54525" class="Function">Equal</a> <a id="54531" class="Symbol">:</a> <a id="54533" class="Symbol">{</a><a id="54534" href="Demos.HSP.html#54534" class="Bound">X</a> <a id="54536" class="Symbol">:</a> <a id="54538" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="54543" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="54544" class="Symbol">}(</a><a id="54546" href="Demos.HSP.html#54546" class="Bound">s</a> <a id="54548" href="Demos.HSP.html#54548" class="Bound">t</a> <a id="54550" class="Symbol">:</a> <a id="54552" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="54557" href="Demos.HSP.html#54534" class="Bound">X</a><a id="54558" class="Symbol">)</a> <a id="54560" class="Symbol">â†’</a> <a id="54562" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="54567" class="Symbol">_</a>
 <a id="54570" href="Demos.HSP.html#54525" class="Function">Equal</a> <a id="54576" class="Symbol">{</a><a id="54577" class="Argument">X</a> <a id="54579" class="Symbol">=</a> <a id="54581" href="Demos.HSP.html#54581" class="Bound">X</a><a id="54582" class="Symbol">}</a> <a id="54584" href="Demos.HSP.html#54584" class="Bound">s</a> <a id="54586" href="Demos.HSP.html#54586" class="Bound">t</a> <a id="54588" class="Symbol">=</a> <a id="54590" class="Symbol">âˆ€</a> <a id="54592" class="Symbol">(</a><a id="54593" href="Demos.HSP.html#54593" class="Bound">Ï</a> <a id="54595" class="Symbol">:</a> <a id="54597" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="54605" class="Symbol">(</a><a id="54606" href="Demos.HSP.html#53359" class="Function">Env</a> <a id="54610" href="Demos.HSP.html#54581" class="Bound">X</a><a id="54611" class="Symbol">))</a> <a id="54614" class="Symbol">â†’</a> <a id="54616" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54618" href="Demos.HSP.html#54584" class="Bound">s</a> <a id="54620" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="54622" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="54626" href="Demos.HSP.html#54593" class="Bound">Ï</a> <a id="54628" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="54630" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="54632" href="Demos.HSP.html#54586" class="Bound">t</a> <a id="54634" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="54636" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="54640" href="Demos.HSP.html#54593" class="Bound">Ï</a>

</pre>
\ifshort
Proof that \af{Equal} is an equivalence relation, and that the implication \ab
s~\af{â‰ƒ}~\ab t \as{â†’} \af{Equal} \ab s \ab t holds for all terms \ab s and \ab t, is
straightforward (\seemedium).
(We denote these by \af{EqualIsEquiv} and \af{â‰ƒâ†’Equal} in the sequel.)
\else
<pre class="Agda">
 <a id="Environment.â‰ƒâ†’Equal"></a><a id="54948" href="Demos.HSP.html#54948" class="Function">â‰ƒâ†’Equal</a> <a id="54956" class="Symbol">:</a> <a id="54958" class="Symbol">{</a><a id="54959" href="Demos.HSP.html#54959" class="Bound">X</a> <a id="54961" class="Symbol">:</a> <a id="54963" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="54968" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="54969" class="Symbol">}(</a><a id="54971" href="Demos.HSP.html#54971" class="Bound">s</a> <a id="54973" href="Demos.HSP.html#54973" class="Bound">t</a> <a id="54975" class="Symbol">:</a> <a id="54977" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="54982" href="Demos.HSP.html#54959" class="Bound">X</a><a id="54983" class="Symbol">)</a> <a id="54985" class="Symbol">â†’</a> <a id="54987" href="Demos.HSP.html#54971" class="Bound">s</a> <a id="54989" href="Demos.HSP.html#50116" class="Datatype Operator">â‰ƒ</a> <a id="54991" href="Demos.HSP.html#54973" class="Bound">t</a> <a id="54993" class="Symbol">â†’</a> <a id="54995" href="Demos.HSP.html#54525" class="Function">Equal</a> <a id="55001" href="Demos.HSP.html#54971" class="Bound">s</a> <a id="55003" href="Demos.HSP.html#54973" class="Bound">t</a>
 <a id="55006" href="Demos.HSP.html#54948" class="Function">â‰ƒâ†’Equal</a> <a id="55014" class="DottedPattern Symbol">.(</a><a id="55016" href="Demos.HSP.html#49733" class="DottedPattern InductiveConstructor">â„Š</a> <a id="55018" class="DottedPattern Symbol">_)</a> <a id="55021" class="DottedPattern Symbol">.(</a><a id="55023" href="Demos.HSP.html#49733" class="DottedPattern InductiveConstructor">â„Š</a> <a id="55025" class="DottedPattern Symbol">_)</a> <a id="55028" class="Symbol">(</a><a id="55029" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="55033" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="55039" class="Symbol">)</a> <a id="55041" class="Symbol">=</a> <a id="55043" class="Symbol">Î»</a> <a id="55045" href="Demos.HSP.html#55045" class="Bound">_</a> <a id="55047" class="Symbol">â†’</a> <a id="55049" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="55055" href="Demos.HSP.html#54948" class="Function">â‰ƒâ†’Equal</a> <a id="55063" class="Symbol">(</a><a id="55064" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="55069" class="Symbol">_</a> <a id="55071" href="Demos.HSP.html#55071" class="Bound">s</a><a id="55072" class="Symbol">)(</a><a id="55074" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="55079" class="Symbol">_</a> <a id="55081" href="Demos.HSP.html#55081" class="Bound">t</a><a id="55082" class="Symbol">)(</a><a id="55084" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="55088" href="Demos.HSP.html#55088" class="Bound">x</a><a id="55089" class="Symbol">)</a> <a id="55091" class="Symbol">=</a>
  <a id="55095" class="Symbol">Î»</a> <a id="55097" href="Demos.HSP.html#55097" class="Bound">Ï</a> <a id="55099" class="Symbol">â†’</a> <a id="55101" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55106" class="Symbol">(</a><a id="55107" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="55114" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a><a id="55115" class="Symbol">)(</a><a id="55117" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="55124" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55126" class="Symbol">Î»</a> <a id="55128" href="Demos.HSP.html#55128" class="Bound">i</a> <a id="55130" class="Symbol">â†’</a> <a id="55132" href="Demos.HSP.html#54948" class="Function">â‰ƒâ†’Equal</a><a id="55139" class="Symbol">(</a><a id="55140" href="Demos.HSP.html#55071" class="Bound">s</a> <a id="55142" href="Demos.HSP.html#55128" class="Bound">i</a><a id="55143" class="Symbol">)(</a><a id="55145" href="Demos.HSP.html#55081" class="Bound">t</a> <a id="55147" href="Demos.HSP.html#55128" class="Bound">i</a><a id="55148" class="Symbol">)(</a><a id="55150" href="Demos.HSP.html#55088" class="Bound">x</a> <a id="55152" href="Demos.HSP.html#55128" class="Bound">i</a><a id="55153" class="Symbol">)</a><a id="55154" href="Demos.HSP.html#55097" class="Bound">Ï</a> <a id="55156" class="Symbol">)</a>

 <a id="Environment.EqualIsEquiv"></a><a id="55160" href="Demos.HSP.html#55160" class="Function">EqualIsEquiv</a> <a id="55173" class="Symbol">:</a> <a id="55175" class="Symbol">{</a><a id="55176" href="Demos.HSP.html#55176" class="Bound">Î“</a> <a id="55178" class="Symbol">:</a> <a id="55180" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="55185" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="55186" class="Symbol">}</a> <a id="55188" class="Symbol">â†’</a> <a id="55190" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="55204" class="Symbol">(</a><a id="55205" href="Demos.HSP.html#54525" class="Function">Equal</a> <a id="55211" class="Symbol">{</a><a id="55212" class="Argument">X</a> <a id="55214" class="Symbol">=</a> <a id="55216" href="Demos.HSP.html#55176" class="Bound">Î“</a><a id="55217" class="Symbol">})</a>
 <a id="55221" href="Demos.HSP.html#7861" class="Field">refláµ‰</a>   <a id="55229" href="Demos.HSP.html#55160" class="Function">EqualIsEquiv</a> <a id="55242" class="Symbol">=</a> <a id="55244" class="Symbol">Î»</a> <a id="55246" href="Demos.HSP.html#55246" class="Bound">_</a>        <a id="55255" class="Symbol">â†’</a> <a id="55257" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="55263" href="Demos.HSP.html#7877" class="Field">symáµ‰</a>    <a id="55271" href="Demos.HSP.html#55160" class="Function">EqualIsEquiv</a> <a id="55284" class="Symbol">=</a> <a id="55286" class="Symbol">Î»</a> <a id="55288" href="Demos.HSP.html#55288" class="Bound">x=y</a> <a id="55292" href="Demos.HSP.html#55292" class="Bound">Ï</a>    <a id="55297" class="Symbol">â†’</a> <a id="55299" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="55303" class="Symbol">(</a><a id="55304" href="Demos.HSP.html#55288" class="Bound">x=y</a> <a id="55308" href="Demos.HSP.html#55292" class="Bound">Ï</a><a id="55309" class="Symbol">)</a>
 <a id="55312" href="Demos.HSP.html#7895" class="Field">transáµ‰</a>  <a id="55320" href="Demos.HSP.html#55160" class="Function">EqualIsEquiv</a> <a id="55333" class="Symbol">=</a> <a id="55335" class="Symbol">Î»</a> <a id="55337" href="Demos.HSP.html#55337" class="Bound">ij</a> <a id="55340" href="Demos.HSP.html#55340" class="Bound">jk</a> <a id="55343" href="Demos.HSP.html#55343" class="Bound">Ï</a>  <a id="55346" class="Symbol">â†’</a> <a id="55348" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="55354" class="Symbol">(</a><a id="55355" href="Demos.HSP.html#55337" class="Bound">ij</a> <a id="55358" href="Demos.HSP.html#55343" class="Bound">Ï</a><a id="55359" class="Symbol">)</a> <a id="55361" class="Symbol">(</a><a id="55362" href="Demos.HSP.html#55340" class="Bound">jk</a> <a id="55365" href="Demos.HSP.html#55343" class="Bound">Ï</a><a id="55366" class="Symbol">)</a>

</pre>
\fi

We can then prove that substitution and evaluation commute.  More precisely,
applying substitution \ab{Ïƒ} to a term \ab{t}
and evaluating the result in environment \ab{Ï} has the same effect as evaluating
\ab{t} in the environment \as{Î»} \ab x \as{â†’} \aof{âŸ¦~\ab{Ïƒ}~\ab{x}~âŸ§}~\aofld{âŸ¨\$âŸ©}
\ab{Ï} (see~\cite{Abel:2021} or~\cite[Lem.~3.3.11]{Mitchell:1996}).

<pre class="Agda">

 <a id="Environment.substitution"></a><a id="55757" href="Demos.HSP.html#55757" class="Function">substitution</a> <a id="55770" class="Symbol">:</a>  <a id="55773" class="Symbol">{</a><a id="55774" href="Demos.HSP.html#55774" class="Bound">X</a> <a id="55776" href="Demos.HSP.html#55776" class="Bound">Y</a> <a id="55778" class="Symbol">:</a> <a id="55780" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="55785" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="55786" class="Symbol">}</a> <a id="55788" class="Symbol">â†’</a> <a id="55790" class="Symbol">(</a><a id="55791" href="Demos.HSP.html#55791" class="Bound">t</a> <a id="55793" class="Symbol">:</a> <a id="55795" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="55800" href="Demos.HSP.html#55776" class="Bound">Y</a><a id="55801" class="Symbol">)</a> <a id="55803" class="Symbol">(</a><a id="55804" href="Demos.HSP.html#55804" class="Bound">Ïƒ</a> <a id="55806" class="Symbol">:</a> <a id="55808" href="Demos.HSP.html#52866" class="Function">Sub</a> <a id="55812" href="Demos.HSP.html#55774" class="Bound">X</a> <a id="55814" href="Demos.HSP.html#55776" class="Bound">Y</a><a id="55815" class="Symbol">)</a> <a id="55817" class="Symbol">(</a><a id="55818" href="Demos.HSP.html#55818" class="Bound">Ï</a> <a id="55820" class="Symbol">:</a> <a id="55822" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="55829" class="Symbol">(</a> <a id="55831" href="Demos.HSP.html#53359" class="Function">Env</a> <a id="55835" href="Demos.HSP.html#55774" class="Bound">X</a> <a id="55837" class="Symbol">)</a> <a id="55839" class="Symbol">)</a>
  <a id="55843" class="Symbol">â†’</a>              <a id="55858" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="55860" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="55862" href="Demos.HSP.html#55804" class="Bound">Ïƒ</a> <a id="55864" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="55866" href="Demos.HSP.html#55791" class="Bound">t</a> <a id="55868" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="55870" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="55874" href="Demos.HSP.html#55818" class="Bound">Ï</a> <a id="55876" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="55878" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="55880" href="Demos.HSP.html#55791" class="Bound">t</a> <a id="55882" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="55884" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="55888" class="Symbol">(Î»</a> <a id="55891" href="Demos.HSP.html#55891" class="Bound">x</a> <a id="55893" class="Symbol">â†’</a> <a id="55895" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="55897" href="Demos.HSP.html#55804" class="Bound">Ïƒ</a> <a id="55899" href="Demos.HSP.html#55891" class="Bound">x</a> <a id="55901" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="55903" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="55907" href="Demos.HSP.html#55818" class="Bound">Ï</a><a id="55908" class="Symbol">)</a>
 <a id="55911" href="Demos.HSP.html#55757" class="Function">substitution</a> <a id="55924" class="Symbol">(</a><a id="55925" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="55927" href="Demos.HSP.html#55927" class="Bound">x</a><a id="55928" class="Symbol">)</a>        <a id="55937" href="Demos.HSP.html#55937" class="Bound">Ïƒ</a> <a id="55939" href="Demos.HSP.html#55939" class="Bound">Ï</a> <a id="55941" class="Symbol">=</a> <a id="55943" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="55949" href="Demos.HSP.html#55757" class="Function">substitution</a> <a id="55962" class="Symbol">(</a><a id="55963" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="55968" href="Demos.HSP.html#55968" class="Bound">f</a> <a id="55970" href="Demos.HSP.html#55970" class="Bound">ts</a><a id="55972" class="Symbol">)</a>  <a id="55975" href="Demos.HSP.html#55975" class="Bound">Ïƒ</a> <a id="55977" href="Demos.HSP.html#55977" class="Bound">Ï</a> <a id="55979" class="Symbol">=</a> <a id="55981" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55986" class="Symbol">(</a><a id="55987" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="55994" href="Demos.HSP.html#53280" class="Bound">ğ‘¨</a><a id="55995" class="Symbol">)(</a><a id="55997" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="56004" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56006" class="Symbol">Î»</a> <a id="56008" href="Demos.HSP.html#56008" class="Bound">i</a> <a id="56010" class="Symbol">â†’</a> <a id="56012" href="Demos.HSP.html#55757" class="Function">substitution</a> <a id="56025" class="Symbol">(</a><a id="56026" href="Demos.HSP.html#55970" class="Bound">ts</a> <a id="56029" href="Demos.HSP.html#56008" class="Bound">i</a><a id="56030" class="Symbol">)</a> <a id="56032" href="Demos.HSP.html#55975" class="Bound">Ïƒ</a> <a id="56034" href="Demos.HSP.html#55977" class="Bound">Ï</a><a id="56035" class="Symbol">)</a>

</pre>

\ifshort\else
\paragraph*{Compatibility of terms}
\fi
We need to formalize two more concepts involving terms.
The first is the assertion that every term commutes with every homomorphism (\af{comm-hom-term}), and
the second is the interpretation of a term in a product algebra (\af{interp-prod}).
<pre class="Agda">

<a id="56360" class="Keyword">module</a> <a id="56367" href="Demos.HSP.html#56367" class="Module">_</a> <a id="56369" class="Symbol">{</a><a id="56370" href="Demos.HSP.html#56370" class="Bound">X</a> <a id="56372" class="Symbol">:</a> <a id="56374" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="56379" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="56380" class="Symbol">}{</a><a id="56382" href="Demos.HSP.html#56382" class="Bound">ğ‘¨</a> <a id="56384" class="Symbol">:</a> <a id="56386" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="56394" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="56396" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="56398" class="Symbol">}{</a><a id="56400" href="Demos.HSP.html#56400" class="Bound">ğ‘©</a> <a id="56402" class="Symbol">:</a> <a id="56404" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="56412" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="56414" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="56416" class="Symbol">}(</a><a id="56418" href="Demos.HSP.html#56418" class="Bound">hh</a> <a id="56421" class="Symbol">:</a> <a id="56423" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="56427" href="Demos.HSP.html#56382" class="Bound">ğ‘¨</a> <a id="56429" href="Demos.HSP.html#56400" class="Bound">ğ‘©</a><a id="56430" class="Symbol">)</a> <a id="56432" class="Keyword">where</a>
 <a id="56439" class="Keyword">open</a> <a id="56444" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="56456" href="Demos.HSP.html#56382" class="Bound">ğ‘¨</a>  <a id="56459" class="Keyword">using</a> <a id="56465" class="Symbol">(</a> <a id="56467" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="56471" class="Symbol">)</a>
 <a id="56474" class="Keyword">open</a> <a id="56479" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="56491" href="Demos.HSP.html#56400" class="Bound">ğ‘©</a>  <a id="56494" class="Keyword">using</a> <a id="56500" class="Symbol">()</a> <a id="56503" class="Keyword">renaming</a> <a id="56512" class="Symbol">(</a> <a id="56514" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="56518" class="Symbol">to</a> <a id="56521" class="Function Operator">âŸ¦_âŸ§á´®</a> <a id="56526" class="Symbol">)</a>
 <a id="56529" class="Keyword">open</a> <a id="56534" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="56541" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="56544" href="Demos.HSP.html#56400" class="Bound">ğ‘©</a> <a id="56546" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="56549" class="Keyword">using</a> <a id="56555" class="Symbol">(</a> <a id="56557" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="56561" class="Symbol">;</a> <a id="56563" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>  <a id="56569" class="Symbol">)</a>
 <a id="56572" class="Keyword">private</a> <a id="56580" href="Demos.HSP.html#56580" class="Function">hfunc</a> <a id="56586" class="Symbol">=</a> <a id="56588" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="56590" href="Demos.HSP.html#56418" class="Bound">hh</a> <a id="56593" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="56595" class="Symbol">;</a> <a id="56597" href="Demos.HSP.html#56597" class="Function">h</a> <a id="56599" class="Symbol">=</a> <a id="56601" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="56607" href="Demos.HSP.html#56580" class="Function">hfunc</a>

 <a id="56615" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="56629" class="Symbol">:</a> <a id="56631" class="Symbol">(</a><a id="56632" href="Demos.HSP.html#56632" class="Bound">t</a> <a id="56634" class="Symbol">:</a> <a id="56636" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="56641" href="Demos.HSP.html#56370" class="Bound">X</a><a id="56642" class="Symbol">)</a> <a id="56644" class="Symbol">(</a><a id="56645" href="Demos.HSP.html#56645" class="Bound">a</a> <a id="56647" class="Symbol">:</a> <a id="56649" href="Demos.HSP.html#56370" class="Bound">X</a> <a id="56651" class="Symbol">â†’</a> <a id="56653" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="56656" href="Demos.HSP.html#56382" class="Bound">ğ‘¨</a> <a id="56658" href="Demos.HSP.html#23863" class="Function Operator">]</a><a id="56659" class="Symbol">)</a> <a id="56661" class="Symbol">â†’</a> <a id="56663" href="Demos.HSP.html#56597" class="Function">h</a> <a id="56665" class="Symbol">(</a><a id="56666" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="56668" href="Demos.HSP.html#56632" class="Bound">t</a> <a id="56670" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="56672" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="56676" href="Demos.HSP.html#56645" class="Bound">a</a><a id="56677" class="Symbol">)</a> <a id="56679" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="56681" href="Demos.HSP.html#56521" class="Function Operator">âŸ¦</a> <a id="56683" href="Demos.HSP.html#56632" class="Bound">t</a> <a id="56685" href="Demos.HSP.html#56521" class="Function Operator">âŸ§á´®</a> <a id="56688" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="56692" class="Symbol">(</a><a id="56693" href="Demos.HSP.html#56597" class="Function">h</a> <a id="56695" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="56697" href="Demos.HSP.html#56645" class="Bound">a</a><a id="56698" class="Symbol">)</a>
 <a id="56701" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="56715" class="Symbol">(</a><a id="56716" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="56718" href="Demos.HSP.html#56718" class="Bound">x</a><a id="56719" class="Symbol">)</a> <a id="56721" href="Demos.HSP.html#56721" class="Bound">a</a> <a id="56723" class="Symbol">=</a> <a id="56725" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="56731" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="56745" class="Symbol">(</a><a id="56746" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="56751" href="Demos.HSP.html#56751" class="Bound">f</a> <a id="56753" href="Demos.HSP.html#56753" class="Bound">t</a><a id="56754" class="Symbol">)</a> <a id="56756" href="Demos.HSP.html#56756" class="Bound">a</a> <a id="56758" class="Symbol">=</a>
  <a id="56762" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="56771" href="Demos.HSP.html#56597" class="Function">h</a><a id="56772" class="Symbol">(</a><a id="56773" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="56775" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="56780" href="Demos.HSP.html#56751" class="Bound">f</a> <a id="56782" href="Demos.HSP.html#56753" class="Bound">t</a> <a id="56784" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="56786" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="56790" href="Demos.HSP.html#56756" class="Bound">a</a><a id="56791" class="Symbol">)</a>            <a id="56804" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="56807" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="56818" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="56820" href="Demos.HSP.html#56418" class="Bound">hh</a> <a id="56823" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="56825" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="56830" class="Symbol">(</a><a id="56831" href="Demos.HSP.html#56751" class="Bound">f</a> <a id="56833" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="56835" href="Demos.HSP.html#56400" class="Bound">ğ‘©</a><a id="56836" class="Symbol">)(Î»</a> <a id="56840" href="Demos.HSP.html#56840" class="Bound">i</a> <a id="56842" class="Symbol">â†’</a> <a id="56844" href="Demos.HSP.html#56597" class="Function">h</a><a id="56845" class="Symbol">(</a><a id="56846" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="56848" href="Demos.HSP.html#56753" class="Bound">t</a> <a id="56850" href="Demos.HSP.html#56840" class="Bound">i</a> <a id="56852" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="56854" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="56858" href="Demos.HSP.html#56756" class="Bound">a</a><a id="56859" class="Symbol">))</a>  <a id="56863" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="56866" href="Function.Bundles.html#1938" class="Field">cong</a><a id="56870" class="Symbol">(</a><a id="56871" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="56878" href="Demos.HSP.html#56400" class="Bound">ğ‘©</a><a id="56879" class="Symbol">)(</a><a id="56881" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="56888" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56890" class="Symbol">Î»</a> <a id="56892" href="Demos.HSP.html#56892" class="Bound">i</a> <a id="56894" class="Symbol">â†’</a> <a id="56896" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a><a id="56909" class="Symbol">(</a><a id="56910" href="Demos.HSP.html#56753" class="Bound">t</a> <a id="56912" href="Demos.HSP.html#56892" class="Bound">i</a><a id="56913" class="Symbol">)</a> <a id="56915" href="Demos.HSP.html#56756" class="Bound">a</a><a id="56916" class="Symbol">)</a> <a id="56918" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="56923" href="Demos.HSP.html#56521" class="Function Operator">âŸ¦</a> <a id="56925" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="56930" href="Demos.HSP.html#56751" class="Bound">f</a> <a id="56932" href="Demos.HSP.html#56753" class="Bound">t</a> <a id="56934" href="Demos.HSP.html#56521" class="Function Operator">âŸ§á´®</a> <a id="56937" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="56941" class="Symbol">(</a><a id="56942" href="Demos.HSP.html#56597" class="Function">h</a> <a id="56944" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="56946" href="Demos.HSP.html#56756" class="Bound">a</a><a id="56947" class="Symbol">)</a>
  <a id="56951" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a> <a id="56953" class="Keyword">where</a> <a id="56959" class="Keyword">open</a> <a id="56964" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="56980" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="56983" href="Demos.HSP.html#56400" class="Bound">ğ‘©</a> <a id="56985" href="Demos.HSP.html#23810" class="Function Operator">]</a>

<a id="56988" class="Keyword">module</a> <a id="56995" href="Demos.HSP.html#56995" class="Module">_</a> <a id="56997" class="Symbol">{</a><a id="56998" href="Demos.HSP.html#56998" class="Bound">X</a> <a id="57000" class="Symbol">:</a> <a id="57002" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="57007" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="57008" class="Symbol">}{</a><a id="57010" href="Demos.HSP.html#57010" class="Bound">Î¹</a> <a id="57012" class="Symbol">:</a> <a id="57014" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="57019" class="Symbol">}</a> <a id="57021" class="Symbol">{</a><a id="57022" href="Demos.HSP.html#57022" class="Bound">I</a> <a id="57024" class="Symbol">:</a> <a id="57026" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="57031" href="Demos.HSP.html#57010" class="Bound">Î¹</a><a id="57032" class="Symbol">}</a> <a id="57034" class="Symbol">(</a><a id="57035" href="Demos.HSP.html#57035" class="Bound">ğ’œ</a> <a id="57037" class="Symbol">:</a> <a id="57039" href="Demos.HSP.html#57022" class="Bound">I</a> <a id="57041" class="Symbol">â†’</a> <a id="57043" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="57051" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="57053" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="57055" class="Symbol">)</a> <a id="57057" class="Keyword">where</a>
 <a id="57064" class="Keyword">open</a> <a id="57069" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="57076" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="57079" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="57081" href="Demos.HSP.html#57035" class="Bound">ğ’œ</a> <a id="57083" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="57086" class="Keyword">using</a> <a id="57092" class="Symbol">(</a> <a id="57094" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="57098" class="Symbol">)</a>
 <a id="57101" class="Keyword">open</a> <a id="57106" href="Demos.HSP.html#53267" class="Module">Environment</a>      <a id="57123" class="Keyword">using</a> <a id="57129" class="Symbol">(</a> <a id="57131" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="57135" class="Symbol">;</a> <a id="57137" href="Demos.HSP.html#54948" class="Function">â‰ƒâ†’Equal</a> <a id="57145" class="Symbol">)</a>

 <a id="57149" href="Demos.HSP.html#57149" class="Function">interp-prod</a> <a id="57161" class="Symbol">:</a> <a id="57163" class="Symbol">(</a><a id="57164" href="Demos.HSP.html#57164" class="Bound">p</a> <a id="57166" class="Symbol">:</a> <a id="57168" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="57173" href="Demos.HSP.html#56998" class="Bound">X</a><a id="57174" class="Symbol">)</a> <a id="57176" class="Symbol">â†’</a> <a id="57178" class="Symbol">âˆ€</a> <a id="57180" href="Demos.HSP.html#57180" class="Bound">Ï</a> <a id="57182" class="Symbol">â†’</a>  <a id="57185" class="Symbol">(</a><a id="57186" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="57188" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="57190" href="Demos.HSP.html#57035" class="Bound">ğ’œ</a> <a id="57192" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="57194" href="Demos.HSP.html#57164" class="Bound">p</a><a id="57195" class="Symbol">)</a> <a id="57197" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="57201" href="Demos.HSP.html#57180" class="Bound">Ï</a>   <a id="57205" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a>   <a id="57209" class="Symbol">Î»</a> <a id="57211" href="Demos.HSP.html#57211" class="Bound">i</a> <a id="57213" class="Symbol">â†’</a> <a id="57215" class="Symbol">(</a><a id="57216" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="57218" href="Demos.HSP.html#57035" class="Bound">ğ’œ</a> <a id="57220" href="Demos.HSP.html#57211" class="Bound">i</a> <a id="57222" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="57224" href="Demos.HSP.html#57164" class="Bound">p</a><a id="57225" class="Symbol">)</a> <a id="57227" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="57231" class="Symbol">Î»</a> <a id="57233" href="Demos.HSP.html#57233" class="Bound">x</a> <a id="57235" class="Symbol">â†’</a> <a id="57237" class="Symbol">(</a><a id="57238" href="Demos.HSP.html#57180" class="Bound">Ï</a> <a id="57240" href="Demos.HSP.html#57233" class="Bound">x</a><a id="57241" class="Symbol">)</a> <a id="57243" href="Demos.HSP.html#57211" class="Bound">i</a>
 <a id="57246" href="Demos.HSP.html#57149" class="Function">interp-prod</a> <a id="57258" class="Symbol">(</a><a id="57259" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="57261" href="Demos.HSP.html#57261" class="Bound">x</a><a id="57262" class="Symbol">)</a>       <a id="57270" class="Symbol">=</a> <a id="57272" class="Symbol">Î»</a> <a id="57274" href="Demos.HSP.html#57274" class="Bound">Ï</a> <a id="57276" href="Demos.HSP.html#57276" class="Bound">i</a>  <a id="57279" class="Symbol">â†’</a> <a id="57281" href="Demos.HSP.html#54948" class="Function">â‰ƒâ†’Equal</a> <a id="57289" class="Symbol">(</a><a id="57290" href="Demos.HSP.html#57035" class="Bound">ğ’œ</a> <a id="57292" href="Demos.HSP.html#57276" class="Bound">i</a><a id="57293" class="Symbol">)</a> <a id="57295" class="Symbol">(</a><a id="57296" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="57298" href="Demos.HSP.html#57261" class="Bound">x</a><a id="57299" class="Symbol">)</a> <a id="57301" class="Symbol">(</a><a id="57302" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="57304" href="Demos.HSP.html#57261" class="Bound">x</a><a id="57305" class="Symbol">)</a> <a id="57307" href="Demos.HSP.html#50474" class="Function">â‰ƒ-isRefl</a> <a id="57316" class="Symbol">Î»</a> <a id="57318" href="Demos.HSP.html#57318" class="Bound">_</a> <a id="57320" class="Symbol">â†’</a> <a id="57322" class="Symbol">(</a><a id="57323" href="Demos.HSP.html#57274" class="Bound">Ï</a> <a id="57325" href="Demos.HSP.html#57261" class="Bound">x</a><a id="57326" class="Symbol">)</a> <a id="57328" href="Demos.HSP.html#57276" class="Bound">i</a>
 <a id="57331" href="Demos.HSP.html#57149" class="Function">interp-prod</a> <a id="57343" class="Symbol">(</a><a id="57344" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="57349" href="Demos.HSP.html#57349" class="Bound">f</a> <a id="57351" href="Demos.HSP.html#57351" class="Bound">t</a><a id="57352" class="Symbol">)</a>  <a id="57355" class="Symbol">=</a> <a id="57357" class="Symbol">Î»</a> <a id="57359" href="Demos.HSP.html#57359" class="Bound">Ï</a>    <a id="57364" class="Symbol">â†’</a> <a id="57366" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="57371" class="Symbol">(</a><a id="57372" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="57379" class="Symbol">(</a><a id="57380" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="57382" href="Demos.HSP.html#57035" class="Bound">ğ’œ</a><a id="57383" class="Symbol">))</a> <a id="57386" class="Symbol">(</a> <a id="57388" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="57395" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="57397" class="Symbol">Î»</a> <a id="57399" href="Demos.HSP.html#57399" class="Bound">j</a> <a id="57401" href="Demos.HSP.html#57401" class="Bound">k</a> <a id="57403" class="Symbol">â†’</a> <a id="57405" href="Demos.HSP.html#57149" class="Function">interp-prod</a> <a id="57417" class="Symbol">(</a><a id="57418" href="Demos.HSP.html#57351" class="Bound">t</a> <a id="57420" href="Demos.HSP.html#57399" class="Bound">j</a><a id="57421" class="Symbol">)</a> <a id="57423" href="Demos.HSP.html#57359" class="Bound">Ï</a> <a id="57425" href="Demos.HSP.html#57401" class="Bound">k</a> <a id="57427" class="Symbol">)</a>
</pre>

\section{Equational Logic}
\label{equational-logic}

\paragraph*{Term identities, equational theories, and the âŠ§ relation}
Given a signature \ab{ğ‘†} and a context \ab X, an \ab{ğ‘†}-\defn{term equation} or \ab{ğ‘†}-\defn{term identity}
is an ordered pair (\ab p , \ab q) of ğ‘†-terms, also denoted by \ab p \af{â‰ˆ} \ab q.
They are often simply called equations or identities, especially when the signature \ab{ğ‘†} is clear.

We define an \defn{equational theory} (or \defn{algebraic theory}) to be a pair \ab{T} =
(\ab{ğ‘†} , \ab{â„°áµ€}) consisting of a signature \ab{ğ‘†} and a collection \ab{â„°áµ€} of
\ab{ğ‘†}-term equations. Some authors reserve the term \defn{theory} for
a \emph{deductively closed} set of equations, that is, a set of equations that is closed
under \emph{entailment} (defined below).

We say that the algebra \ab{ğ‘¨} \emph{satisfies} the equation \ab p \af{â‰ˆ} \ab q if,
for all \ab{Ï} : \ab X \as{â†’} \aof{ğ”»[~\ab{ğ‘¨}~]},
%(assigning values in the domain of \ab{ğ‘¨} to variable symbols in \ab X)
we have \aof{âŸ¦~\ab{p}~âŸ§} \aofld{âŸ¨\$âŸ©} \ab{Ï} \af{â‰ˆ} \aof{âŸ¦~\ab{q}~âŸ§} \aofld{âŸ¨\$âŸ©} \ab{Ï}.
In other words, when they are interpreted in the algebra \ab{ğ‘¨},
the terms \ab{p} and \ab{q} are equal no matter what values in \ab{ğ‘¨} are assigned to variable symbols in \ab{X}.
In this situation, we write
\ab{ğ‘¨}~\aof{âŠ§}~\ab{p}~\aof{â‰ˆ}~\ab{q} and say that \ab{ğ‘¨} \defn{models} \ab{p}~\af{â‰ˆ}~\ab{q},
or that \ab{ğ‘¨} is a \defn{model} of \ab{p}~\af{â‰ˆ}~\ab{q}.
If \ab{ğ’¦} is a class of algebras, all of the same signature, we write \ab{ğ’¦}~\aof{âŠ«}~\ab{p}~\aof{â‰ˆ}~\ab{q}
and say that \ab{ğ’¦} \defn{models} the identity \ab{p}~\af{â‰ˆ}~\ab{q} provided for every \ab{ğ‘¨} \aof{âˆˆ} \ab{ğ’¦}
we have \ab{ğ‘¨}~\aof{âŠ§}~\ab{p}~\aof{â‰ˆ}~\ab{q}.

<pre class="Agda">

<a id="59159" class="Keyword">module</a> <a id="59166" href="Demos.HSP.html#59166" class="Module">_</a> <a id="59168" class="Symbol">{</a><a id="59169" href="Demos.HSP.html#59169" class="Bound">X</a> <a id="59171" class="Symbol">:</a> <a id="59173" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="59178" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="59179" class="Symbol">}</a> <a id="59181" class="Keyword">where</a>
 <a id="59188" href="Demos.HSP.html#59188" class="Function Operator">_âŠ§_â‰ˆ_</a> <a id="59194" class="Symbol">:</a> <a id="59196" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="59204" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="59206" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="59209" class="Symbol">â†’</a> <a id="59211" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="59216" href="Demos.HSP.html#59169" class="Bound">X</a> <a id="59218" class="Symbol">â†’</a> <a id="59220" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="59225" href="Demos.HSP.html#59169" class="Bound">X</a> <a id="59227" class="Symbol">â†’</a> <a id="59229" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="59234" class="Symbol">_</a>
 <a id="59237" href="Demos.HSP.html#59237" class="Bound">ğ‘¨</a> <a id="59239" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="59241" href="Demos.HSP.html#59241" class="Bound">p</a> <a id="59243" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="59245" href="Demos.HSP.html#59245" class="Bound">q</a> <a id="59247" class="Symbol">=</a> <a id="59249" href="Demos.HSP.html#54525" class="Function">Equal</a> <a id="59255" href="Demos.HSP.html#59241" class="Bound">p</a> <a id="59257" href="Demos.HSP.html#59245" class="Bound">q</a> <a id="59259" class="Keyword">where</a> <a id="59265" class="Keyword">open</a> <a id="59270" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="59282" href="Demos.HSP.html#59237" class="Bound">ğ‘¨</a>

 <a id="59286" href="Demos.HSP.html#59286" class="Function Operator">_âŠ«_â‰ˆ_</a> <a id="59292" class="Symbol">:</a> <a id="59294" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="59299" class="Symbol">(</a><a id="59300" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="59308" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="59310" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="59312" class="Symbol">)</a> <a id="59314" href="Demos.HSP.html#8447" class="Generalizable">â„“</a> <a id="59316" class="Symbol">â†’</a> <a id="59318" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="59323" href="Demos.HSP.html#59169" class="Bound">X</a> <a id="59325" class="Symbol">â†’</a> <a id="59327" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="59332" href="Demos.HSP.html#59169" class="Bound">X</a> <a id="59334" class="Symbol">â†’</a> <a id="59336" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="59341" class="Symbol">_</a>
 <a id="59344" href="Demos.HSP.html#59344" class="Bound">ğ’¦</a> <a id="59346" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="59348" href="Demos.HSP.html#59348" class="Bound">p</a> <a id="59350" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="59352" href="Demos.HSP.html#59352" class="Bound">q</a> <a id="59354" class="Symbol">=</a> <a id="59356" class="Symbol">âˆ€</a> <a id="59358" href="Demos.HSP.html#59358" class="Bound">ğ‘¨</a> <a id="59360" class="Symbol">â†’</a> <a id="59362" href="Demos.HSP.html#59344" class="Bound">ğ’¦</a> <a id="59364" href="Demos.HSP.html#59358" class="Bound">ğ‘¨</a> <a id="59366" class="Symbol">â†’</a> <a id="59368" href="Demos.HSP.html#59358" class="Bound">ğ‘¨</a> <a id="59370" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="59372" href="Demos.HSP.html#59348" class="Bound">p</a> <a id="59374" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="59376" href="Demos.HSP.html#59352" class="Bound">q</a>

</pre>
We represent a set of term identities as a predicate over pairs of terms,
\ifshort\else
say, \ab{â„°} : \af{Pred}(\ad{Term} \ab{X} \af{Ã—} \ad{Term} \ab{X})~\au{}
\fi
and we denote by \ab{ğ‘¨}~\aof{âŠ¨}~\ab{â„°} the assertion that \ab{ğ‘¨} models \ab{p}~\af{â‰ˆ}~\ab{q}
for all (\ab{p} , \ab{q}) \af{âˆˆ} \ab{â„°}.%
\ifshort\else\footnote{Notice that \af{âŠ¨} is a stretched version of the models symbol, \af{âŠ§}
This makes it possible for \agda to distinguish and parse expressions involving the types
\af{\au{}âŠ¨\au{}} and \af{\au{}âŠ§\au{}â‰ˆ\au{}}.
In Emacs \texttt{agda2-mode}, the symbol \af{âŠ¨} is produced by typing
\textbackslash\textbar{}=, while \af{âŠ§} is produced with \textbackslash{}models.}
\fi

<pre class="Agda">

 <a id="60090" href="Demos.HSP.html#60090" class="Function Operator">_âŠ¨_</a> <a id="60094" class="Symbol">:</a> <a id="60096" class="Symbol">(</a><a id="60097" href="Demos.HSP.html#60097" class="Bound">ğ‘¨</a> <a id="60099" class="Symbol">:</a> <a id="60101" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="60109" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="60111" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="60113" class="Symbol">)</a> <a id="60115" class="Symbol">â†’</a> <a id="60117" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60121" class="Symbol">(</a><a id="60122" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="60127" href="Demos.HSP.html#59169" class="Bound">X</a> <a id="60129" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="60131" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="60136" href="Demos.HSP.html#59169" class="Bound">X</a><a id="60137" class="Symbol">)(</a><a id="60139" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="60142" href="Demos.HSP.html#59178" class="Bound">Ï‡</a><a id="60143" class="Symbol">)</a> <a id="60145" class="Symbol">â†’</a> <a id="60147" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="60152" class="Symbol">_</a>
 <a id="60155" href="Demos.HSP.html#60155" class="Bound">ğ‘¨</a> <a id="60157" href="Demos.HSP.html#60090" class="Function Operator">âŠ¨</a> <a id="60159" href="Demos.HSP.html#60159" class="Bound">â„°</a> <a id="60161" class="Symbol">=</a> <a id="60163" class="Symbol">âˆ€</a> <a id="60165" class="Symbol">{</a><a id="60166" href="Demos.HSP.html#60166" class="Bound">p</a> <a id="60168" href="Demos.HSP.html#60168" class="Bound">q</a><a id="60169" class="Symbol">}</a> <a id="60171" class="Symbol">â†’</a> <a id="60173" class="Symbol">(</a><a id="60174" href="Demos.HSP.html#60166" class="Bound">p</a> <a id="60176" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60178" href="Demos.HSP.html#60168" class="Bound">q</a><a id="60179" class="Symbol">)</a> <a id="60181" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="60183" href="Demos.HSP.html#60159" class="Bound">â„°</a> <a id="60185" class="Symbol">â†’</a> <a id="60187" href="Demos.HSP.html#54525" class="Function">Equal</a> <a id="60193" href="Demos.HSP.html#60166" class="Bound">p</a> <a id="60195" href="Demos.HSP.html#60168" class="Bound">q</a> <a id="60197" class="Keyword">where</a> <a id="60203" class="Keyword">open</a> <a id="60208" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="60220" href="Demos.HSP.html#60155" class="Bound">ğ‘¨</a>

</pre>

If \ab{ğ’¦} is a class of \ab{ğ‘†}-algebras, the set of identities modeled by \ab{ğ’¦}, denoted \af{Th}~\ab{ğ’¦}, is called the \defn{equational theory} of \ab{ğ’¦}. If \ab{â„°} is a set of \ab{ğ‘†}-term identities,
the class of algebras modeling \ab{â„°}, denoted \af{Mod}~\ab{â„°}, is called the \defn{equational class axiomatized} by \ab{â„°}. We codify these notions in the next two definitions.

<pre class="Agda">

<a id="Th"></a><a id="60630" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="60633" class="Symbol">:</a> <a id="60635" class="Symbol">{</a><a id="60636" href="Demos.HSP.html#60636" class="Bound">X</a> <a id="60638" class="Symbol">:</a> <a id="60640" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="60645" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="60646" class="Symbol">}</a> <a id="60648" class="Symbol">â†’</a> <a id="60650" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="60655" class="Symbol">(</a><a id="60656" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="60664" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="60666" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="60668" class="Symbol">)</a> <a id="60670" href="Demos.HSP.html#8447" class="Generalizable">â„“</a> <a id="60672" class="Symbol">â†’</a> <a id="60674" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60678" class="Symbol">(</a><a id="60679" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="60684" href="Demos.HSP.html#60636" class="Bound">X</a> <a id="60686" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="60688" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="60693" href="Demos.HSP.html#60636" class="Bound">X</a><a id="60694" class="Symbol">)</a> <a id="60696" class="Symbol">_</a>
<a id="60698" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="60701" href="Demos.HSP.html#60701" class="Bound">ğ’¦</a> <a id="60703" class="Symbol">=</a> <a id="60705" class="Symbol">Î»</a> <a id="60707" class="Symbol">(</a><a id="60708" href="Demos.HSP.html#60708" class="Bound">p</a> <a id="60710" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60712" href="Demos.HSP.html#60712" class="Bound">q</a><a id="60713" class="Symbol">)</a> <a id="60715" class="Symbol">â†’</a> <a id="60717" href="Demos.HSP.html#60701" class="Bound">ğ’¦</a> <a id="60719" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="60721" href="Demos.HSP.html#60708" class="Bound">p</a> <a id="60723" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="60725" href="Demos.HSP.html#60712" class="Bound">q</a>

<a id="Mod"></a><a id="60728" href="Demos.HSP.html#60728" class="Function">Mod</a> <a id="60732" class="Symbol">:</a> <a id="60734" class="Symbol">{</a><a id="60735" href="Demos.HSP.html#60735" class="Bound">X</a> <a id="60737" class="Symbol">:</a> <a id="60739" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="60744" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="60745" class="Symbol">}</a> <a id="60747" class="Symbol">â†’</a> <a id="60749" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60753" class="Symbol">(</a><a id="60754" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="60759" href="Demos.HSP.html#60735" class="Bound">X</a> <a id="60761" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="60763" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="60768" href="Demos.HSP.html#60735" class="Bound">X</a><a id="60769" class="Symbol">)</a> <a id="60771" href="Demos.HSP.html#8447" class="Generalizable">â„“</a> <a id="60773" class="Symbol">â†’</a> <a id="60775" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="60780" class="Symbol">(</a><a id="60781" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="60789" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="60791" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="60793" class="Symbol">)</a> <a id="60795" class="Symbol">_</a>
<a id="60797" href="Demos.HSP.html#60728" class="Function">Mod</a> <a id="60801" href="Demos.HSP.html#60801" class="Bound">â„°</a> <a id="60803" href="Demos.HSP.html#60803" class="Bound">ğ‘¨</a> <a id="60805" class="Symbol">=</a> <a id="60807" class="Symbol">âˆ€</a> <a id="60809" class="Symbol">{</a><a id="60810" href="Demos.HSP.html#60810" class="Bound">p</a> <a id="60812" href="Demos.HSP.html#60812" class="Bound">q</a><a id="60813" class="Symbol">}</a> <a id="60815" class="Symbol">â†’</a> <a id="60817" class="Symbol">(</a><a id="60818" href="Demos.HSP.html#60810" class="Bound">p</a> <a id="60820" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60822" href="Demos.HSP.html#60812" class="Bound">q</a><a id="60823" class="Symbol">)</a> <a id="60825" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="60827" href="Demos.HSP.html#60801" class="Bound">â„°</a> <a id="60829" class="Symbol">â†’</a> <a id="60831" href="Demos.HSP.html#54525" class="Function">Equal</a> <a id="60837" href="Demos.HSP.html#60810" class="Bound">p</a> <a id="60839" href="Demos.HSP.html#60812" class="Bound">q</a> <a id="60841" class="Keyword">where</a> <a id="60847" class="Keyword">open</a> <a id="60852" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="60864" href="Demos.HSP.html#60803" class="Bound">ğ‘¨</a>
</pre>

\paragraph*{Entailment}

If \ab{â„°} is a set of \ab{ğ‘†}-term identities and \ab{p} and \ab{q} are \ab{ğ‘†}-terms,
we say that \ab{â„°} \defn{entails} the equation \ab{p}~\aof{â‰ˆ}~\ab{q}, and we write
\ab{â„°}~\ad{âŠ¢}~\ab{p}~\ad{â‰ˆ}~\ab{q}, just in case every model of \ab{â„°} also models
\ab{p}~\aof{â‰ˆ}~\ab{q}.
We model our definition of \defn{entailment type} on the one defined by Abel
in~\cite{Abel:2021}.  It contains cases for representing hypotheses, congruence of term
application, that substitution respects entailment, and that entailment is
an equivalence.

<pre class="Agda">

<a id="61448" class="Keyword">data</a> <a id="_âŠ¢_â–¹_â‰ˆ_"></a><a id="61453" href="Demos.HSP.html#61453" class="Datatype Operator">_âŠ¢_â–¹_â‰ˆ_</a>  <a id="61462" class="Symbol">(</a><a id="61463" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61465" class="Symbol">:</a> <a id="61467" class="Symbol">{</a><a id="61468" href="Demos.HSP.html#61468" class="Bound">Y</a> <a id="61470" class="Symbol">:</a> <a id="61472" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="61477" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="61478" class="Symbol">}</a> <a id="61480" class="Symbol">â†’</a> <a id="61482" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="61486" class="Symbol">(</a><a id="61487" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="61492" href="Demos.HSP.html#61468" class="Bound">Y</a> <a id="61494" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="61496" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="61501" href="Demos.HSP.html#61468" class="Bound">Y</a><a id="61502" class="Symbol">)</a> <a id="61504" class="Symbol">(</a><a id="61505" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="61508" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="61509" class="Symbol">))</a> <a id="61512" class="Symbol">:</a>
              <a id="61528" class="Symbol">(</a><a id="61529" href="Demos.HSP.html#61529" class="Bound">X</a> <a id="61531" class="Symbol">:</a> <a id="61533" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="61538" href="Demos.HSP.html#61477" class="Bound">Ï‡</a><a id="61539" class="Symbol">)(</a><a id="61541" href="Demos.HSP.html#61541" class="Bound">p</a> <a id="61543" href="Demos.HSP.html#61543" class="Bound">q</a> <a id="61545" class="Symbol">:</a> <a id="61547" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="61552" href="Demos.HSP.html#61529" class="Bound">X</a><a id="61553" class="Symbol">)</a> <a id="61555" class="Symbol">â†’</a> <a id="61557" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="61562" class="Symbol">(</a><a id="61563" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="61566" href="Demos.HSP.html#61477" class="Bound">Ï‡</a><a id="61567" class="Symbol">)</a> <a id="61569" class="Keyword">where</a>

 <a id="_âŠ¢_â–¹_â‰ˆ_.hyp"></a><a id="61577" href="Demos.HSP.html#61577" class="InductiveConstructor">hyp</a>         <a id="61589" class="Symbol">:</a>  <a id="61592" class="Symbol">âˆ€{</a><a id="61594" href="Demos.HSP.html#61594" class="Bound">Y</a><a id="61595" class="Symbol">}{</a><a id="61597" href="Demos.HSP.html#61597" class="Bound">p</a> <a id="61599" href="Demos.HSP.html#61599" class="Bound">q</a> <a id="61601" class="Symbol">:</a> <a id="61603" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="61608" href="Demos.HSP.html#61594" class="Bound">Y</a><a id="61609" class="Symbol">}</a> <a id="61611" class="Symbol">â†’</a> <a id="61613" class="Symbol">(</a><a id="61614" href="Demos.HSP.html#61597" class="Bound">p</a> <a id="61616" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="61618" href="Demos.HSP.html#61599" class="Bound">q</a><a id="61619" class="Symbol">)</a> <a id="61621" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="61623" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61625" class="Symbol">â†’</a> <a id="61627" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61629" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61631" class="Symbol">_</a> <a id="61633" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61635" href="Demos.HSP.html#61597" class="Bound">p</a> <a id="61637" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61639" href="Demos.HSP.html#61599" class="Bound">q</a>
 <a id="_âŠ¢_â–¹_â‰ˆ_.app"></a><a id="61642" href="Demos.HSP.html#61642" class="InductiveConstructor">app</a>         <a id="61654" class="Symbol">:</a>  <a id="61657" class="Symbol">âˆ€{</a><a id="61659" href="Demos.HSP.html#61659" class="Bound">Y</a><a id="61660" class="Symbol">}{</a><a id="61662" href="Demos.HSP.html#61662" class="Bound">ps</a> <a id="61665" href="Demos.HSP.html#61665" class="Bound">qs</a> <a id="61668" class="Symbol">:</a> <a id="61670" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="61672" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="61674" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="61676" href="Demos.HSP.html#8486" class="Generalizable">ğ‘“</a> <a id="61678" class="Symbol">â†’</a> <a id="61680" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="61685" href="Demos.HSP.html#61659" class="Bound">Y</a><a id="61686" class="Symbol">}</a>
                          <a id="61714" class="Symbol">â†’</a> <a id="61716" class="Symbol">(âˆ€</a> <a id="61719" href="Demos.HSP.html#61719" class="Bound">i</a> <a id="61721" class="Symbol">â†’</a> <a id="61723" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61725" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61727" href="Demos.HSP.html#61659" class="Bound">Y</a> <a id="61729" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61731" href="Demos.HSP.html#61662" class="Bound">ps</a> <a id="61734" href="Demos.HSP.html#61719" class="Bound">i</a> <a id="61736" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61738" href="Demos.HSP.html#61665" class="Bound">qs</a> <a id="61741" href="Demos.HSP.html#61719" class="Bound">i</a><a id="61742" class="Symbol">)</a> <a id="61744" class="Symbol">â†’</a> <a id="61746" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61748" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61750" href="Demos.HSP.html#61659" class="Bound">Y</a> <a id="61752" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61754" class="Symbol">(</a><a id="61755" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="61760" href="Demos.HSP.html#8486" class="Generalizable">ğ‘“</a> <a id="61762" href="Demos.HSP.html#61662" class="Bound">ps</a><a id="61764" class="Symbol">)</a> <a id="61766" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61768" class="Symbol">(</a><a id="61769" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="61774" href="Demos.HSP.html#8486" class="Generalizable">ğ‘“</a> <a id="61776" href="Demos.HSP.html#61665" class="Bound">qs</a><a id="61778" class="Symbol">)</a>
 <a id="_âŠ¢_â–¹_â‰ˆ_.sub"></a><a id="61781" href="Demos.HSP.html#61781" class="InductiveConstructor">sub</a>         <a id="61793" class="Symbol">:</a>  <a id="61796" class="Symbol">âˆ€{</a><a id="61798" href="Demos.HSP.html#61798" class="Bound">p</a> <a id="61800" href="Demos.HSP.html#61800" class="Bound">q</a><a id="61801" class="Symbol">}</a>    <a id="61806" class="Symbol">â†’</a> <a id="61808" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61810" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61812" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="61814" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61816" href="Demos.HSP.html#61798" class="Bound">p</a> <a id="61818" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61820" href="Demos.HSP.html#61800" class="Bound">q</a> <a id="61822" class="Symbol">â†’</a> <a id="61824" class="Symbol">(</a><a id="61825" href="Demos.HSP.html#61825" class="Bound">Ïƒ</a> <a id="61827" class="Symbol">:</a> <a id="61829" href="Demos.HSP.html#52866" class="Function">Sub</a> <a id="61833" href="Demos.HSP.html#8465" class="Generalizable">Î”</a> <a id="61835" href="Demos.HSP.html#8463" class="Generalizable">Î“</a><a id="61836" class="Symbol">)</a> <a id="61838" class="Symbol">â†’</a> <a id="61840" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61842" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61844" href="Demos.HSP.html#8465" class="Generalizable">Î”</a> <a id="61846" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61848" class="Symbol">(</a><a id="61849" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="61851" href="Demos.HSP.html#61825" class="Bound">Ïƒ</a> <a id="61853" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="61855" href="Demos.HSP.html#61798" class="Bound">p</a><a id="61856" class="Symbol">)</a> <a id="61858" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61860" class="Symbol">(</a><a id="61861" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="61863" href="Demos.HSP.html#61825" class="Bound">Ïƒ</a> <a id="61865" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="61867" href="Demos.HSP.html#61800" class="Bound">q</a><a id="61868" class="Symbol">)</a>
 <a id="_âŠ¢_â–¹_â‰ˆ_.reflexive"></a><a id="61871" href="Demos.HSP.html#61871" class="InductiveConstructor">reflexive</a>   <a id="61883" class="Symbol">:</a>  <a id="61886" class="Symbol">âˆ€{</a><a id="61888" href="Demos.HSP.html#61888" class="Bound">p</a><a id="61889" class="Symbol">}</a>      <a id="61896" class="Symbol">â†’</a> <a id="61898" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61900" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61902" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="61904" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61906" href="Demos.HSP.html#61888" class="Bound">p</a> <a id="61908" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61910" href="Demos.HSP.html#61888" class="Bound">p</a>
 <a id="_âŠ¢_â–¹_â‰ˆ_.symmetric"></a><a id="61913" href="Demos.HSP.html#61913" class="InductiveConstructor">symmetric</a>   <a id="61925" class="Symbol">:</a>  <a id="61928" class="Symbol">âˆ€{</a><a id="61930" href="Demos.HSP.html#61930" class="Bound">p</a> <a id="61932" href="Demos.HSP.html#61932" class="Bound">q</a><a id="61933" class="Symbol">}</a>    <a id="61938" class="Symbol">â†’</a> <a id="61940" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61942" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61944" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="61946" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61948" href="Demos.HSP.html#61930" class="Bound">p</a> <a id="61950" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61952" href="Demos.HSP.html#61932" class="Bound">q</a> <a id="61954" class="Symbol">â†’</a> <a id="61956" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="61958" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="61960" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="61962" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="61964" href="Demos.HSP.html#61932" class="Bound">q</a> <a id="61966" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="61968" href="Demos.HSP.html#61930" class="Bound">p</a>
 <a id="_âŠ¢_â–¹_â‰ˆ_.transitive"></a><a id="61971" href="Demos.HSP.html#61971" class="InductiveConstructor">transitive</a>  <a id="61983" class="Symbol">:</a>  <a id="61986" class="Symbol">âˆ€{</a><a id="61988" href="Demos.HSP.html#61988" class="Bound">p</a> <a id="61990" href="Demos.HSP.html#61990" class="Bound">q</a> <a id="61992" href="Demos.HSP.html#61992" class="Bound">r</a><a id="61993" class="Symbol">}</a>  <a id="61996" class="Symbol">â†’</a> <a id="61998" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="62000" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="62002" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="62004" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="62006" href="Demos.HSP.html#61988" class="Bound">p</a> <a id="62008" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="62010" href="Demos.HSP.html#61990" class="Bound">q</a> <a id="62012" class="Symbol">â†’</a> <a id="62014" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="62016" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="62018" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="62020" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="62022" href="Demos.HSP.html#61990" class="Bound">q</a> <a id="62024" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="62026" href="Demos.HSP.html#61992" class="Bound">r</a> <a id="62028" class="Symbol">â†’</a> <a id="62030" href="Demos.HSP.html#61463" class="Bound">â„°</a> <a id="62032" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="62034" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="62036" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="62038" href="Demos.HSP.html#61988" class="Bound">p</a> <a id="62040" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="62042" href="Demos.HSP.html#61992" class="Bound">r</a>

</pre>

The fact that this exactly represents the informal semantic notion of entailment
given earlier is called \defn{soundness} and
\defn{completeness}.
More precisely, \defn{the entailment type is sound} means that
if \ab{â„°}~\ad{âŠ¢}~\ab{X}~\ad{â–¹}~\ab p~\ad{â‰ˆ}~\ab q, then \ab p \aof{â‰ˆ} \ab q holds in
every model of \ab{â„°}.
\defn{The entailment type is complete} means that
if \ab p \aof{â‰ˆ} \ab q holds in every model of \ab{â„°},
then \ab{â„°}~\ad{âŠ¢}~\ab{X}~\ad{â–¹}~\ab p~\aof{â‰ˆ}~\ab q.
We will use soundness of entailment only once below%
\ifshort
~(by the name \af{sound}), so we omit its proof, but see~\cite{Abel:2021}
or~\cite{DeMeo:2021}.
\else
; nonetheless, here is its formalization (essentially due to Abel, \textit{op. cit.}):

<pre class="Agda">

<a id="62800" class="Keyword">module</a> <a id="Soundness"></a><a id="62807" href="Demos.HSP.html#62807" class="Module">Soundness</a>  <a id="62818" class="Symbol">(</a><a id="62819" href="Demos.HSP.html#62819" class="Bound">â„°</a> <a id="62821" class="Symbol">:</a> <a id="62823" class="Symbol">{</a><a id="62824" href="Demos.HSP.html#62824" class="Bound">Y</a> <a id="62826" class="Symbol">:</a> <a id="62828" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="62833" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="62834" class="Symbol">}</a> <a id="62836" class="Symbol">â†’</a> <a id="62838" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="62842" class="Symbol">(</a><a id="62843" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="62848" href="Demos.HSP.html#62824" class="Bound">Y</a> <a id="62850" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="62852" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="62857" href="Demos.HSP.html#62824" class="Bound">Y</a><a id="62858" class="Symbol">)</a> <a id="62860" class="Symbol">(</a><a id="62861" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="62864" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="62865" class="Symbol">))</a>
                  <a id="62886" class="Symbol">(</a><a id="62887" href="Demos.HSP.html#62887" class="Bound">ğ‘¨</a> <a id="62889" class="Symbol">:</a> <a id="62891" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="62899" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="62901" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="62903" class="Symbol">)</a>                <a id="62920" class="Comment">-- We assume an algebra ğ‘¨</a>
                  <a id="62964" class="Symbol">(</a><a id="62965" href="Demos.HSP.html#62965" class="Bound">V</a> <a id="62967" class="Symbol">:</a> <a id="62969" class="Symbol">âˆ€{</a><a id="62971" href="Demos.HSP.html#62971" class="Bound">Y</a><a id="62972" class="Symbol">}</a> <a id="62974" class="Symbol">â†’</a> <a id="62976" href="Demos.HSP.html#60090" class="Function Operator">_âŠ¨_</a><a id="62979" class="Symbol">{</a><a id="62980" class="Argument">Ï‡</a> <a id="62982" class="Symbol">=</a> <a id="62984" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="62985" class="Symbol">}</a> <a id="62987" href="Demos.HSP.html#62887" class="Bound">ğ‘¨</a> <a id="62989" class="Symbol">(</a><a id="62990" href="Demos.HSP.html#62819" class="Bound">â„°</a><a id="62991" class="Symbol">{</a><a id="62992" href="Demos.HSP.html#62971" class="Bound">Y</a><a id="62993" class="Symbol">}))</a>  <a id="62998" class="Comment">-- that models all equations in â„°.</a>
                  <a id="63051" class="Keyword">where</a>
 <a id="63058" class="Keyword">open</a> <a id="63063" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="63079" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="63082" href="Demos.HSP.html#62887" class="Bound">ğ‘¨</a> <a id="63084" href="Demos.HSP.html#23810" class="Function Operator">]</a>
 <a id="63087" class="Keyword">open</a> <a id="63092" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="63104" href="Demos.HSP.html#62887" class="Bound">ğ‘¨</a>
 <a id="Soundness.sound"></a><a id="63107" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63113" class="Symbol">:</a> <a id="63115" class="Symbol">âˆ€</a> <a id="63117" class="Symbol">{</a><a id="63118" href="Demos.HSP.html#63118" class="Bound">p</a> <a id="63120" href="Demos.HSP.html#63120" class="Bound">q</a><a id="63121" class="Symbol">}</a> <a id="63123" class="Symbol">â†’</a> <a id="63125" href="Demos.HSP.html#62819" class="Bound">â„°</a> <a id="63127" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="63129" href="Demos.HSP.html#8463" class="Generalizable">Î“</a> <a id="63131" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="63133" href="Demos.HSP.html#63118" class="Bound">p</a> <a id="63135" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="63137" href="Demos.HSP.html#63120" class="Bound">q</a> <a id="63139" class="Symbol">â†’</a> <a id="63141" href="Demos.HSP.html#62887" class="Bound">ğ‘¨</a> <a id="63143" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="63145" href="Demos.HSP.html#63118" class="Bound">p</a> <a id="63147" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="63149" href="Demos.HSP.html#63120" class="Bound">q</a>
 <a id="63152" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63158" class="Symbol">(</a><a id="63159" href="Demos.HSP.html#61577" class="InductiveConstructor">hyp</a> <a id="63163" href="Demos.HSP.html#63163" class="Bound">i</a><a id="63164" class="Symbol">)</a> <a id="63166" class="Symbol">=</a> <a id="63168" href="Demos.HSP.html#62965" class="Bound">V</a> <a id="63170" href="Demos.HSP.html#63163" class="Bound">i</a>
 <a id="63173" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63179" class="Symbol">(</a><a id="63180" href="Demos.HSP.html#61642" class="InductiveConstructor">app</a> <a id="63184" href="Demos.HSP.html#63184" class="Bound">es</a><a id="63186" class="Symbol">)</a> <a id="63188" href="Demos.HSP.html#63188" class="Bound">Ï</a> <a id="63190" class="Symbol">=</a> <a id="63192" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="63197" class="Symbol">(</a><a id="63198" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="63205" href="Demos.HSP.html#62887" class="Bound">ğ‘¨</a><a id="63206" class="Symbol">)</a> <a id="63208" class="Symbol">(</a><a id="63209" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="63216" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="63218" class="Symbol">Î»</a> <a id="63220" href="Demos.HSP.html#63220" class="Bound">i</a> <a id="63222" class="Symbol">â†’</a> <a id="63224" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63230" class="Symbol">(</a><a id="63231" href="Demos.HSP.html#63184" class="Bound">es</a> <a id="63234" href="Demos.HSP.html#63220" class="Bound">i</a><a id="63235" class="Symbol">)</a> <a id="63237" href="Demos.HSP.html#63188" class="Bound">Ï</a><a id="63238" class="Symbol">)</a>
 <a id="63241" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63247" class="Symbol">(</a><a id="63248" href="Demos.HSP.html#61781" class="InductiveConstructor">sub</a> <a id="63252" class="Symbol">{</a><a id="63253" class="Argument">p</a> <a id="63255" class="Symbol">=</a> <a id="63257" href="Demos.HSP.html#63257" class="Bound">p</a><a id="63258" class="Symbol">}{</a><a id="63260" href="Demos.HSP.html#63260" class="Bound">q</a><a id="63261" class="Symbol">}</a> <a id="63263" href="Demos.HSP.html#63263" class="Bound">Epq</a> <a id="63267" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a><a id="63268" class="Symbol">)</a> <a id="63270" href="Demos.HSP.html#63270" class="Bound">Ï</a> <a id="63272" class="Symbol">=</a>
  <a id="63276" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="63285" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="63287" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="63289" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a> <a id="63291" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="63293" href="Demos.HSP.html#63257" class="Bound">p</a>  <a id="63296" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="63298" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>                     <a id="63322" href="Demos.HSP.html#63270" class="Bound">Ï</a>   <a id="63326" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="63331" href="Demos.HSP.html#55757" class="Function">substitution</a> <a id="63344" href="Demos.HSP.html#63257" class="Bound">p</a> <a id="63346" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a> <a id="63348" href="Demos.HSP.html#63270" class="Bound">Ï</a>               <a id="63364" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="63369" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="63371" href="Demos.HSP.html#63257" class="Bound">p</a>        <a id="63380" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="63382" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="63386" class="Symbol">(Î»</a> <a id="63389" href="Demos.HSP.html#63389" class="Bound">x</a> <a id="63391" class="Symbol">â†’</a> <a id="63393" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="63395" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a> <a id="63397" href="Demos.HSP.html#63389" class="Bound">x</a> <a id="63399" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="63401" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>  <a id="63406" href="Demos.HSP.html#63270" class="Bound">Ï</a><a id="63407" class="Symbol">)</a>  <a id="63410" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="63415" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63421" href="Demos.HSP.html#63263" class="Bound">Epq</a> <a id="63425" class="Symbol">(Î»</a> <a id="63428" href="Demos.HSP.html#63428" class="Bound">x</a> <a id="63430" class="Symbol">â†’</a> <a id="63432" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="63434" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a> <a id="63436" href="Demos.HSP.html#63428" class="Bound">x</a> <a id="63438" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="63440" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="63444" href="Demos.HSP.html#63270" class="Bound">Ï</a><a id="63445" class="Symbol">)</a>  <a id="63448" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="63453" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="63455" href="Demos.HSP.html#63260" class="Bound">q</a>        <a id="63464" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="63466" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="63470" class="Symbol">(Î»</a> <a id="63473" href="Demos.HSP.html#63473" class="Bound">x</a> <a id="63475" class="Symbol">â†’</a> <a id="63477" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="63479" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a> <a id="63481" href="Demos.HSP.html#63473" class="Bound">x</a> <a id="63483" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="63485" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>  <a id="63490" href="Demos.HSP.html#63270" class="Bound">Ï</a><a id="63491" class="Symbol">)</a>  <a id="63494" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="63499" href="Demos.HSP.html#55757" class="Function">substitution</a> <a id="63512" href="Demos.HSP.html#63260" class="Bound">q</a> <a id="63514" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a> <a id="63516" href="Demos.HSP.html#63270" class="Bound">Ï</a>               <a id="63532" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
   <a id="63537" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="63539" href="Demos.HSP.html#52925" class="Function Operator">[</a> <a id="63541" href="Demos.HSP.html#63267" class="Bound">Ïƒ</a> <a id="63543" href="Demos.HSP.html#52925" class="Function Operator">]</a> <a id="63545" href="Demos.HSP.html#63260" class="Bound">q</a>  <a id="63548" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="63550" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>                     <a id="63574" href="Demos.HSP.html#63270" class="Bound">Ï</a>   <a id="63578" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
 <a id="63581" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63587" class="Symbol">(</a><a id="63588" href="Demos.HSP.html#61871" class="InductiveConstructor">reflexive</a>   <a id="63600" class="Symbol">{</a><a id="63601" class="Argument">p</a> <a id="63603" class="Symbol">=</a> <a id="63605" href="Demos.HSP.html#63605" class="Bound">p</a><a id="63606" class="Symbol">}</a>                 <a id="63624" class="Symbol">)</a> <a id="63626" class="Symbol">=</a> <a id="63628" href="Demos.HSP.html#7861" class="Field">refláµ‰</a>   <a id="63636" href="Demos.HSP.html#55160" class="Function">EqualIsEquiv</a> <a id="63649" class="Symbol">{</a><a id="63650" class="Argument">x</a> <a id="63652" class="Symbol">=</a> <a id="63654" href="Demos.HSP.html#63605" class="Bound">p</a><a id="63655" class="Symbol">}</a>
 <a id="63658" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63664" class="Symbol">(</a><a id="63665" href="Demos.HSP.html#61913" class="InductiveConstructor">symmetric</a>   <a id="63677" class="Symbol">{</a><a id="63678" class="Argument">p</a> <a id="63680" class="Symbol">=</a> <a id="63682" href="Demos.HSP.html#63682" class="Bound">p</a><a id="63683" class="Symbol">}{</a><a id="63685" href="Demos.HSP.html#63685" class="Bound">q</a><a id="63686" class="Symbol">}</a>     <a id="63692" href="Demos.HSP.html#63692" class="Bound">Epq</a>      <a id="63701" class="Symbol">)</a> <a id="63703" class="Symbol">=</a> <a id="63705" href="Demos.HSP.html#7877" class="Field">symáµ‰</a>    <a id="63713" href="Demos.HSP.html#55160" class="Function">EqualIsEquiv</a> <a id="63726" class="Symbol">{</a><a id="63727" class="Argument">x</a> <a id="63729" class="Symbol">=</a> <a id="63731" href="Demos.HSP.html#63682" class="Bound">p</a><a id="63732" class="Symbol">}{</a><a id="63734" href="Demos.HSP.html#63685" class="Bound">q</a><a id="63735" class="Symbol">}</a>     <a id="63741" class="Symbol">(</a><a id="63742" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63748" href="Demos.HSP.html#63692" class="Bound">Epq</a><a id="63751" class="Symbol">)</a>
 <a id="63754" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63760" class="Symbol">(</a><a id="63761" href="Demos.HSP.html#61971" class="InductiveConstructor">transitive</a>  <a id="63773" class="Symbol">{</a><a id="63774" class="Argument">p</a> <a id="63776" class="Symbol">=</a> <a id="63778" href="Demos.HSP.html#63778" class="Bound">p</a><a id="63779" class="Symbol">}{</a><a id="63781" href="Demos.HSP.html#63781" class="Bound">q</a><a id="63782" class="Symbol">}{</a><a id="63784" href="Demos.HSP.html#63784" class="Bound">r</a><a id="63785" class="Symbol">}</a>  <a id="63788" href="Demos.HSP.html#63788" class="Bound">Epq</a> <a id="63792" href="Demos.HSP.html#63792" class="Bound">Eqr</a>  <a id="63797" class="Symbol">)</a> <a id="63799" class="Symbol">=</a> <a id="63801" href="Demos.HSP.html#7895" class="Field">transáµ‰</a>  <a id="63809" href="Demos.HSP.html#55160" class="Function">EqualIsEquiv</a> <a id="63822" class="Symbol">{</a><a id="63823" class="Argument">i</a> <a id="63825" class="Symbol">=</a> <a id="63827" href="Demos.HSP.html#63778" class="Bound">p</a><a id="63828" class="Symbol">}{</a><a id="63830" href="Demos.HSP.html#63781" class="Bound">q</a><a id="63831" class="Symbol">}{</a><a id="63833" href="Demos.HSP.html#63784" class="Bound">r</a><a id="63834" class="Symbol">}</a>  <a id="63837" class="Symbol">(</a><a id="63838" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63844" href="Demos.HSP.html#63788" class="Bound">Epq</a><a id="63847" class="Symbol">)(</a><a id="63849" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="63855" href="Demos.HSP.html#63792" class="Bound">Eqr</a><a id="63858" class="Symbol">)</a>
</pre>
\fi

\paragraph*{The Closure Operators H, S, P and V}
Fix a signature \ab{ğ‘†}, let \ab{ğ’¦} be a class of \ab{ğ‘†}-algebras, and define
\begin{itemize}
\item \af H \ab{ğ’¦} = algebras isomorphic to homomorphic images of members of \ab{ğ’¦};
\item \af S \ab{ğ’¦} = algebras isomorphic to subalgebras of members of \ab{ğ’¦};
\item \af P \ab{ğ’¦} = algebras isomorphic to products of members of \ab{ğ’¦}.
\end{itemize}
\ifshort\else
A straight-forward verification confirms that
\fi
\af H, \af S, and \af P are \emph{closure operators} (expansive, monotone, and
idempotent).  A class \ab{ğ’¦} of \ab{ğ‘†}-algebras is said to be \emph{closed under
the taking of homomorphic images} provided \af H \ab{ğ’¦} \aof{âŠ†} \ab{ğ’¦}. Similarly, \ab{ğ’¦} is
\emph{closed under the taking of subalgebras} (resp., \emph{arbitrary products}) provided
\af S~\ab{ğ’¦}~\aof{âŠ†}~\ab{ğ’¦} (resp., \af P \ab{ğ’¦} \aof{âŠ†} \ab{ğ’¦}). The operators \af H, \af
S, and \af P can be composed with one another repeatedly, forming yet more closure
operators.

% An algebra is a homomorphic image (resp., subalgebra; resp., product) of every algebra to which it is isomorphic.
% Thus, the class \af H \ab{ğ’¦} (resp., \af S \ab{ğ’¦}; resp., \af P \ab{ğ’¦}) is closed under isomorphism.

A \emph{variety} is a class of \ab{ğ‘†}-algebras that is closed under the taking of
homomorphic images, subalgebras, and arbitrary products.  To represent varieties
we define closure operators \af H, \af S, and \af P that are composable; we
then define a type \af V which represents closure under all three.
Thus, if \ab{ğ’¦} is a class of \ab{ğ‘†}-algebras, then
\af V \ab{ğ’¦} := \af H (\af S (\af P \ab{ğ’¦})), and \ab{ğ’¦} is a variety if and only if \af V \ab{ğ’¦} \aof{âŠ†} \ab{ğ’¦}.
\ifshort\else

We now define the type \af H to represent classes of algebras that include all homomorphic images
of algebras in the class---i.e., classes that are closed under the taking of homomorphic
images---the type \af S to represent classes of algebras that closed under the taking of subalgebras,
and the type \af P to represent classes of algebras closed under the taking of arbitrary products.

<pre class="Agda">

<a id="65973" class="Keyword">module</a> <a id="65980" href="Demos.HSP.html#65980" class="Module">_</a> <a id="65982" class="Symbol">{</a><a id="65983" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="65985" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a> <a id="65988" href="Demos.HSP.html#65988" class="Bound">Î²</a> <a id="65990" href="Demos.HSP.html#65990" class="Bound">Ïáµ‡</a> <a id="65993" class="Symbol">:</a> <a id="65995" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="66000" class="Symbol">}</a> <a id="66002" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="66038" class="Keyword">private</a> <a id="66046" href="Demos.HSP.html#66046" class="Function">a</a> <a id="66048" class="Symbol">=</a> <a id="66050" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="66052" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66054" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a>
 <a id="66058" href="Demos.HSP.html#66058" class="Function">H</a> <a id="66060" class="Symbol">:</a> <a id="66062" class="Symbol">âˆ€</a> <a id="66064" href="Demos.HSP.html#66064" class="Bound">â„“</a> <a id="66066" class="Symbol">â†’</a> <a id="66068" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66072" class="Symbol">(</a><a id="66073" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66081" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="66083" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a><a id="66085" class="Symbol">)</a> <a id="66087" class="Symbol">(</a><a id="66088" href="Demos.HSP.html#66046" class="Function">a</a> <a id="66090" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66092" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="66095" href="Demos.HSP.html#66064" class="Bound">â„“</a><a id="66096" class="Symbol">)</a> <a id="66098" class="Symbol">â†’</a> <a id="66100" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66104" class="Symbol">(</a><a id="66105" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66113" href="Demos.HSP.html#65988" class="Bound">Î²</a> <a id="66115" href="Demos.HSP.html#65990" class="Bound">Ïáµ‡</a><a id="66117" class="Symbol">)</a> <a id="66119" class="Symbol">_</a>
 <a id="66122" href="Demos.HSP.html#66058" class="Function">H</a> <a id="66124" class="Symbol">_</a> <a id="66126" href="Demos.HSP.html#66126" class="Bound">ğ’¦</a> <a id="66128" href="Demos.HSP.html#66128" class="Bound">ğ‘©</a> <a id="66130" class="Symbol">=</a> <a id="66132" href="Data.Product.html#916" class="Function">Î£[</a> <a id="66135" href="Demos.HSP.html#66135" class="Bound">ğ‘¨</a> <a id="66137" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="66139" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66147" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="66149" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a> <a id="66152" href="Data.Product.html#916" class="Function">]</a> <a id="66154" href="Demos.HSP.html#66135" class="Bound">ğ‘¨</a> <a id="66156" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="66158" href="Demos.HSP.html#66126" class="Bound">ğ’¦</a> <a id="66160" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="66162" href="Demos.HSP.html#66128" class="Bound">ğ‘©</a> <a id="66164" href="Demos.HSP.html#44710" class="Function Operator">IsHomImageOf</a> <a id="66177" href="Demos.HSP.html#66135" class="Bound">ğ‘¨</a>

 <a id="66181" href="Demos.HSP.html#66181" class="Function">S</a> <a id="66183" class="Symbol">:</a> <a id="66185" class="Symbol">âˆ€</a> <a id="66187" href="Demos.HSP.html#66187" class="Bound">â„“</a> <a id="66189" class="Symbol">â†’</a> <a id="66191" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66195" class="Symbol">(</a><a id="66196" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66204" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="66206" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a><a id="66208" class="Symbol">)</a> <a id="66210" class="Symbol">(</a><a id="66211" href="Demos.HSP.html#66046" class="Function">a</a> <a id="66213" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66215" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="66218" href="Demos.HSP.html#66187" class="Bound">â„“</a><a id="66219" class="Symbol">)</a> <a id="66221" class="Symbol">â†’</a> <a id="66223" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66227" class="Symbol">(</a><a id="66228" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66236" href="Demos.HSP.html#65988" class="Bound">Î²</a> <a id="66238" href="Demos.HSP.html#65990" class="Bound">Ïáµ‡</a><a id="66240" class="Symbol">)</a> <a id="66242" class="Symbol">_</a>
 <a id="66245" href="Demos.HSP.html#66181" class="Function">S</a> <a id="66247" class="Symbol">_</a> <a id="66249" href="Demos.HSP.html#66249" class="Bound">ğ’¦</a> <a id="66251" href="Demos.HSP.html#66251" class="Bound">ğ‘©</a> <a id="66253" class="Symbol">=</a> <a id="66255" href="Data.Product.html#916" class="Function">Î£[</a> <a id="66258" href="Demos.HSP.html#66258" class="Bound">ğ‘¨</a> <a id="66260" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="66262" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66270" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="66272" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a> <a id="66275" href="Data.Product.html#916" class="Function">]</a> <a id="66277" href="Demos.HSP.html#66258" class="Bound">ğ‘¨</a> <a id="66279" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="66281" href="Demos.HSP.html#66249" class="Bound">ğ’¦</a> <a id="66283" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="66285" href="Demos.HSP.html#66251" class="Bound">ğ‘©</a> <a id="66287" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="66289" href="Demos.HSP.html#66258" class="Bound">ğ‘¨</a>

 <a id="66293" href="Demos.HSP.html#66293" class="Function">P</a> <a id="66295" class="Symbol">:</a> <a id="66297" class="Symbol">âˆ€</a> <a id="66299" href="Demos.HSP.html#66299" class="Bound">â„“</a> <a id="66301" href="Demos.HSP.html#66301" class="Bound">Î¹</a> <a id="66303" class="Symbol">â†’</a> <a id="66305" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66309" class="Symbol">(</a><a id="66310" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66318" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="66320" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a><a id="66322" class="Symbol">)</a> <a id="66324" class="Symbol">(</a><a id="66325" href="Demos.HSP.html#66046" class="Function">a</a> <a id="66327" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66329" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="66332" href="Demos.HSP.html#66299" class="Bound">â„“</a><a id="66333" class="Symbol">)</a> <a id="66335" class="Symbol">â†’</a> <a id="66337" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66341" class="Symbol">(</a><a id="66342" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66350" href="Demos.HSP.html#65988" class="Bound">Î²</a> <a id="66352" href="Demos.HSP.html#65990" class="Bound">Ïáµ‡</a><a id="66354" class="Symbol">)</a> <a id="66356" class="Symbol">_</a>
 <a id="66359" href="Demos.HSP.html#66293" class="Function">P</a> <a id="66361" class="Symbol">_</a> <a id="66363" href="Demos.HSP.html#66363" class="Bound">Î¹</a> <a id="66365" href="Demos.HSP.html#66365" class="Bound">ğ’¦</a> <a id="66367" href="Demos.HSP.html#66367" class="Bound">ğ‘©</a> <a id="66369" class="Symbol">=</a> <a id="66371" href="Data.Product.html#916" class="Function">Î£[</a> <a id="66374" href="Demos.HSP.html#66374" class="Bound">I</a> <a id="66376" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="66378" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="66383" href="Demos.HSP.html#66363" class="Bound">Î¹</a> <a id="66385" href="Data.Product.html#916" class="Function">]</a> <a id="66387" class="Symbol">(</a><a id="66388" href="Data.Product.html#916" class="Function">Î£[</a> <a id="66391" href="Demos.HSP.html#66391" class="Bound">ğ’œ</a> <a id="66393" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="66395" class="Symbol">(</a><a id="66396" href="Demos.HSP.html#66374" class="Bound">I</a> <a id="66398" class="Symbol">â†’</a> <a id="66400" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66408" href="Demos.HSP.html#65983" class="Bound">Î±</a> <a id="66410" href="Demos.HSP.html#65985" class="Bound">Ïáµƒ</a><a id="66412" class="Symbol">)</a> <a id="66414" href="Data.Product.html#916" class="Function">]</a> <a id="66416" class="Symbol">(âˆ€</a> <a id="66419" href="Demos.HSP.html#66419" class="Bound">i</a> <a id="66421" class="Symbol">â†’</a> <a id="66423" href="Demos.HSP.html#66391" class="Bound">ğ’œ</a> <a id="66425" href="Demos.HSP.html#66419" class="Bound">i</a> <a id="66427" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="66429" href="Demos.HSP.html#66365" class="Bound">ğ’¦</a><a id="66430" class="Symbol">)</a> <a id="66432" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="66434" class="Symbol">(</a><a id="66435" href="Demos.HSP.html#66367" class="Bound">ğ‘©</a> <a id="66437" href="Demos.HSP.html#41316" class="Record Operator">â‰…</a> <a id="66439" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="66441" href="Demos.HSP.html#66391" class="Bound">ğ’œ</a><a id="66442" class="Symbol">))</a>

</pre>
Finally, we define the \defn{varietal closure} of a class \ab{ğ’¦} to be the class \af{V}
\ab{ğ’¦} := \af{H} (\af{S} (\af{P} \ab{ğ’¦})).  The explicit universe level declarations
are needed for disambiguation.
<pre class="Agda">

<a id="66675" class="Keyword">module</a> <a id="66682" href="Demos.HSP.html#66682" class="Module">_</a>  <a id="66685" class="Symbol">{</a><a id="66686" href="Demos.HSP.html#66686" class="Bound">Î±</a> <a id="66688" href="Demos.HSP.html#66688" class="Bound">Ïáµƒ</a> <a id="66691" href="Demos.HSP.html#66691" class="Bound">Î²</a> <a id="66693" href="Demos.HSP.html#66693" class="Bound">Ïáµ‡</a> <a id="66696" href="Demos.HSP.html#66696" class="Bound">Î³</a> <a id="66698" href="Demos.HSP.html#66698" class="Bound">Ïá¶œ</a> <a id="66701" href="Demos.HSP.html#66701" class="Bound">Î´</a> <a id="66703" href="Demos.HSP.html#66703" class="Bound">Ïáµˆ</a> <a id="66706" class="Symbol">:</a> <a id="66708" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="66713" class="Symbol">}</a> <a id="66715" class="Keyword">where</a>
 <a id="66722" class="Keyword">private</a> <a id="66730" href="Demos.HSP.html#66730" class="Function">a</a> <a id="66732" class="Symbol">=</a> <a id="66734" href="Demos.HSP.html#66686" class="Bound">Î±</a> <a id="66736" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66738" href="Demos.HSP.html#66688" class="Bound">Ïáµƒ</a> <a id="66741" class="Symbol">;</a> <a id="66743" href="Demos.HSP.html#66743" class="Function">b</a> <a id="66745" class="Symbol">=</a> <a id="66747" href="Demos.HSP.html#66691" class="Bound">Î²</a> <a id="66749" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66751" href="Demos.HSP.html#66693" class="Bound">Ïáµ‡</a>
 <a id="66755" href="Demos.HSP.html#66755" class="Function">V</a> <a id="66757" class="Symbol">:</a> <a id="66759" class="Symbol">âˆ€</a> <a id="66761" href="Demos.HSP.html#66761" class="Bound">â„“</a> <a id="66763" href="Demos.HSP.html#66763" class="Bound">Î¹</a> <a id="66765" class="Symbol">â†’</a> <a id="66767" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66771" class="Symbol">(</a><a id="66772" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66780" href="Demos.HSP.html#66686" class="Bound">Î±</a> <a id="66782" href="Demos.HSP.html#66688" class="Bound">Ïáµƒ</a><a id="66784" class="Symbol">)</a> <a id="66786" class="Symbol">(</a><a id="66787" href="Demos.HSP.html#66730" class="Function">a</a> <a id="66789" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66791" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="66794" href="Demos.HSP.html#66761" class="Bound">â„“</a><a id="66795" class="Symbol">)</a> <a id="66797" class="Symbol">â†’</a>  <a id="66800" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66804" class="Symbol">(</a><a id="66805" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="66813" href="Demos.HSP.html#66701" class="Bound">Î´</a> <a id="66815" href="Demos.HSP.html#66703" class="Bound">Ïáµˆ</a><a id="66817" class="Symbol">)</a> <a id="66819" class="Symbol">_</a>
 <a id="66822" href="Demos.HSP.html#66755" class="Function">V</a> <a id="66824" href="Demos.HSP.html#66824" class="Bound">â„“</a> <a id="66826" href="Demos.HSP.html#66826" class="Bound">Î¹</a> <a id="66828" href="Demos.HSP.html#66828" class="Bound">ğ’¦</a> <a id="66830" class="Symbol">=</a> <a id="66832" href="Demos.HSP.html#66058" class="Function">H</a><a id="66833" class="Symbol">{</a><a id="66834" href="Demos.HSP.html#66696" class="Bound">Î³</a><a id="66835" class="Symbol">}{</a><a id="66837" href="Demos.HSP.html#66698" class="Bound">Ïá¶œ</a><a id="66839" class="Symbol">}{</a><a id="66841" href="Demos.HSP.html#66701" class="Bound">Î´</a><a id="66842" class="Symbol">}{</a><a id="66844" href="Demos.HSP.html#66703" class="Bound">Ïáµˆ</a><a id="66846" class="Symbol">}</a> <a id="66848" class="Symbol">(</a><a id="66849" href="Demos.HSP.html#66730" class="Function">a</a> <a id="66851" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66853" href="Demos.HSP.html#66743" class="Function">b</a> <a id="66855" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66857" href="Demos.HSP.html#66824" class="Bound">â„“</a> <a id="66859" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66861" href="Demos.HSP.html#66826" class="Bound">Î¹</a><a id="66862" class="Symbol">)</a> <a id="66864" class="Symbol">(</a><a id="66865" href="Demos.HSP.html#66181" class="Function">S</a><a id="66866" class="Symbol">{</a><a id="66867" href="Demos.HSP.html#66691" class="Bound">Î²</a><a id="66868" class="Symbol">}{</a><a id="66870" href="Demos.HSP.html#66693" class="Bound">Ïáµ‡</a><a id="66872" class="Symbol">}</a> <a id="66874" class="Symbol">(</a><a id="66875" href="Demos.HSP.html#66730" class="Function">a</a> <a id="66877" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66879" href="Demos.HSP.html#66824" class="Bound">â„“</a> <a id="66881" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="66883" href="Demos.HSP.html#66826" class="Bound">Î¹</a><a id="66884" class="Symbol">)</a> <a id="66886" class="Symbol">(</a><a id="66887" href="Demos.HSP.html#66293" class="Function">P</a> <a id="66889" href="Demos.HSP.html#66824" class="Bound">â„“</a> <a id="66891" href="Demos.HSP.html#66826" class="Bound">Î¹</a> <a id="66893" href="Demos.HSP.html#66828" class="Bound">ğ’¦</a><a id="66894" class="Symbol">))</a>

</pre>

An important property of the binary relation \aof{âŠ§} is \emph{algebraic invariance} (i.e.,
invariance under isomorphism).  We formalize this result as follows.

<pre class="Agda">

<a id="67085" class="Keyword">module</a> <a id="67092" href="Demos.HSP.html#67092" class="Module">_</a> <a id="67094" class="Symbol">{</a><a id="67095" href="Demos.HSP.html#67095" class="Bound">X</a> <a id="67097" class="Symbol">:</a> <a id="67099" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="67104" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="67105" class="Symbol">}{</a><a id="67107" href="Demos.HSP.html#67107" class="Bound">ğ‘¨</a> <a id="67109" class="Symbol">:</a> <a id="67111" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="67119" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="67121" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="67123" class="Symbol">}(</a><a id="67125" href="Demos.HSP.html#67125" class="Bound">ğ‘©</a> <a id="67127" class="Symbol">:</a> <a id="67129" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="67137" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="67139" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="67141" class="Symbol">)(</a><a id="67143" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67145" href="Demos.HSP.html#67145" class="Bound">q</a> <a id="67147" class="Symbol">:</a> <a id="67149" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="67154" href="Demos.HSP.html#67095" class="Bound">X</a><a id="67155" class="Symbol">)</a> <a id="67157" class="Keyword">where</a>
 <a id="67164" href="Demos.HSP.html#67164" class="Function">âŠ§-I-invar</a> <a id="67174" class="Symbol">:</a> <a id="67176" href="Demos.HSP.html#67107" class="Bound">ğ‘¨</a> <a id="67178" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="67180" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67182" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="67184" href="Demos.HSP.html#67145" class="Bound">q</a>  <a id="67187" class="Symbol">â†’</a>  <a id="67190" href="Demos.HSP.html#67107" class="Bound">ğ‘¨</a> <a id="67192" href="Demos.HSP.html#41316" class="Record Operator">â‰…</a> <a id="67194" href="Demos.HSP.html#67125" class="Bound">ğ‘©</a>  <a id="67197" class="Symbol">â†’</a>  <a id="67200" href="Demos.HSP.html#67125" class="Bound">ğ‘©</a> <a id="67202" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="67204" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67206" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="67208" href="Demos.HSP.html#67145" class="Bound">q</a>
 <a id="67211" href="Demos.HSP.html#67164" class="Function">âŠ§-I-invar</a> <a id="67221" href="Demos.HSP.html#67221" class="Bound">Apq</a> <a id="67225" class="Symbol">(</a><a id="67226" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a> <a id="67232" href="Demos.HSP.html#67232" class="Bound">fh</a> <a id="67235" href="Demos.HSP.html#67235" class="Bound">gh</a> <a id="67238" href="Demos.HSP.html#67238" class="Bound">fâˆ¼g</a> <a id="67242" href="Demos.HSP.html#67242" class="Bound">gâˆ¼f</a><a id="67245" class="Symbol">)</a> <a id="67247" href="Demos.HSP.html#67247" class="Bound">Ï</a> <a id="67249" class="Symbol">=</a>
  <a id="67253" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
  <a id="67261" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="67263" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67265" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>     <a id="67271" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>             <a id="67287" href="Demos.HSP.html#67247" class="Bound">Ï</a>    <a id="67292" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="67297" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="67302" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="67304" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67306" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="67308" class="Symbol">(</a><a id="67309" href="Demos.HSP.html#67238" class="Bound">fâˆ¼g</a> <a id="67313" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="67315" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67316" class="Symbol">)</a>        <a id="67325" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
  <a id="67329" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="67331" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67333" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>     <a id="67339" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="67343" class="Symbol">(</a><a id="67344" href="Demos.HSP.html#67653" class="Function">f</a> <a id="67346" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="67349" class="Symbol">(</a><a id="67350" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67352" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="67355" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67356" class="Symbol">))</a>  <a id="67360" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="67365" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="67379" href="Demos.HSP.html#67232" class="Bound">fh</a> <a id="67382" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67384" class="Symbol">(</a><a id="67385" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67387" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="67389" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67390" class="Symbol">)</a>  <a id="67393" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
  <a id="67397" href="Demos.HSP.html#67653" class="Function">f</a><a id="67398" class="Symbol">(</a><a id="67399" href="Demos.HSP.html#67739" class="Function Operator">âŸ¦</a> <a id="67401" href="Demos.HSP.html#67143" class="Bound">p</a> <a id="67403" href="Demos.HSP.html#67739" class="Function Operator">âŸ§á´¬</a>  <a id="67407" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>       <a id="67417" class="Symbol">(</a><a id="67418" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67420" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="67423" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67424" class="Symbol">))</a>  <a id="67428" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="67433" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="67438" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="67440" href="Demos.HSP.html#67232" class="Bound">fh</a> <a id="67443" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="67445" class="Symbol">(</a><a id="67446" href="Demos.HSP.html#67221" class="Bound">Apq</a> <a id="67450" class="Symbol">(</a><a id="67451" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67453" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="67455" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67456" class="Symbol">))</a>   <a id="67461" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="67465" href="Demos.HSP.html#67653" class="Function">f</a><a id="67466" class="Symbol">(</a><a id="67467" href="Demos.HSP.html#67739" class="Function Operator">âŸ¦</a> <a id="67469" href="Demos.HSP.html#67145" class="Bound">q</a> <a id="67471" href="Demos.HSP.html#67739" class="Function Operator">âŸ§á´¬</a>  <a id="67475" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>       <a id="67485" class="Symbol">(</a><a id="67486" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67488" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="67491" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67492" class="Symbol">))</a>  <a id="67496" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="67501" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="67515" href="Demos.HSP.html#67232" class="Bound">fh</a> <a id="67518" href="Demos.HSP.html#67145" class="Bound">q</a> <a id="67520" class="Symbol">(</a><a id="67521" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67523" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="67525" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67526" class="Symbol">)</a>  <a id="67529" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="67533" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="67535" href="Demos.HSP.html#67145" class="Bound">q</a> <a id="67537" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>     <a id="67543" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="67547" class="Symbol">(</a><a id="67548" href="Demos.HSP.html#67653" class="Function">f</a> <a id="67550" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="67553" class="Symbol">(</a><a id="67554" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67556" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="67559" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67560" class="Symbol">))</a>  <a id="67564" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="67569" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="67574" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="67576" href="Demos.HSP.html#67145" class="Bound">q</a> <a id="67578" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="67580" class="Symbol">(</a><a id="67581" href="Demos.HSP.html#67238" class="Bound">fâˆ¼g</a> <a id="67585" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="67587" href="Demos.HSP.html#67247" class="Bound">Ï</a><a id="67588" class="Symbol">)</a>        <a id="67597" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="67601" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="67603" href="Demos.HSP.html#67145" class="Bound">q</a> <a id="67605" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>     <a id="67611" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>             <a id="67627" href="Demos.HSP.html#67247" class="Bound">Ï</a>    <a id="67632" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
  <a id="67636" class="Keyword">where</a>
   <a id="67645" class="Keyword">private</a> <a id="67653" href="Demos.HSP.html#67653" class="Function">f</a> <a id="67655" class="Symbol">=</a> <a id="67657" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="67663" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="67665" href="Demos.HSP.html#67232" class="Bound">fh</a> <a id="67668" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="67670" class="Symbol">;</a> <a id="67672" href="Demos.HSP.html#67672" class="Function">g</a> <a id="67674" class="Symbol">=</a> <a id="67676" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="67682" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="67684" href="Demos.HSP.html#67235" class="Bound">gh</a> <a id="67687" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
   <a id="67692" class="Keyword">open</a> <a id="67697" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="67709" href="Demos.HSP.html#67107" class="Bound">ğ‘¨</a>  <a id="67712" class="Keyword">using</a> <a id="67718" class="Symbol">()</a> <a id="67721" class="Keyword">renaming</a> <a id="67730" class="Symbol">(</a> <a id="67732" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="67736" class="Symbol">to</a> <a id="67739" class="Function Operator">âŸ¦_âŸ§á´¬</a> <a id="67744" class="Symbol">)</a>
   <a id="67749" class="Keyword">open</a> <a id="67754" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="67766" href="Demos.HSP.html#67125" class="Bound">ğ‘©</a>  <a id="67769" class="Keyword">using</a> <a id="67775" class="Symbol">(</a> <a id="67777" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="67781" class="Symbol">)</a>
   <a id="67786" class="Keyword">open</a> <a id="67791" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="67807" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="67810" href="Demos.HSP.html#67125" class="Bound">ğ‘©</a> <a id="67812" href="Demos.HSP.html#23810" class="Function Operator">]</a>

</pre>
Identities modeled by an algebra \ab{ğ‘¨} are also modeled by every homomorphic image of
\ab{ğ‘¨} and by every subalgebra of \ab{ğ‘¨}.
\ifshort
We refer to these facts as \af{âŠ§-H-invar} and \af{âŠ§-S-invar}, but omit their formal
statements and proofs, which are analogous to those of \af{âŠ§-I-invar}.
\else
These facts are formalized in \agda as follows.

\ifshort\else
<pre class="Agda">

<a id="68202" class="Keyword">module</a> <a id="68209" href="Demos.HSP.html#68209" class="Module">_</a> <a id="68211" class="Symbol">{</a><a id="68212" href="Demos.HSP.html#68212" class="Bound">X</a> <a id="68214" class="Symbol">:</a> <a id="68216" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="68221" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="68222" class="Symbol">}{</a><a id="68224" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="68226" class="Symbol">:</a> <a id="68228" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="68236" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="68238" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="68240" class="Symbol">}{</a><a id="68242" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a> <a id="68244" class="Symbol">:</a> <a id="68246" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="68254" href="Demos.HSP.html#8428" class="Generalizable">Î²</a> <a id="68256" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="68258" class="Symbol">}{</a><a id="68260" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68262" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="68264" class="Symbol">:</a> <a id="68266" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="68271" href="Demos.HSP.html#68212" class="Bound">X</a><a id="68272" class="Symbol">}</a> <a id="68274" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="68310" href="Demos.HSP.html#68310" class="Function">âŠ§-H-invar</a> <a id="68320" class="Symbol">:</a> <a id="68322" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="68324" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="68326" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68328" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="68330" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="68332" class="Symbol">â†’</a> <a id="68334" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a> <a id="68336" href="Demos.HSP.html#44710" class="Function Operator">IsHomImageOf</a> <a id="68349" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="68351" class="Symbol">â†’</a> <a id="68353" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a> <a id="68355" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="68357" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68359" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="68361" href="Demos.HSP.html#68262" class="Bound">q</a>
 <a id="68364" href="Demos.HSP.html#68310" class="Function">âŠ§-H-invar</a> <a id="68374" href="Demos.HSP.html#68374" class="Bound">Apq</a> <a id="68378" class="Symbol">(</a><a id="68379" href="Demos.HSP.html#68379" class="Bound">Ï†h</a> <a id="68382" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68384" href="Demos.HSP.html#68384" class="Bound">Ï†E</a><a id="68386" class="Symbol">)</a> <a id="68388" href="Demos.HSP.html#68388" class="Bound">Ï</a> <a id="68390" class="Symbol">=</a>
  <a id="68394" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
       <a id="68407" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="68409" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68411" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>   <a id="68415" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>               <a id="68433" href="Demos.HSP.html#68388" class="Bound">Ï</a>    <a id="68438" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="68443" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="68448" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="68450" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68452" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a><a id="68453" class="Symbol">(Î»</a> <a id="68456" href="Demos.HSP.html#68456" class="Bound">_</a> <a id="68458" class="Symbol">â†’</a> <a id="68460" href="Demos.HSP.html#12769" class="Function">InvIsInverseÊ³</a> <a id="68474" href="Demos.HSP.html#68384" class="Bound">Ï†E</a><a id="68476" class="Symbol">)</a>  <a id="68479" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
       <a id="68488" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="68490" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68492" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>   <a id="68496" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="68500" class="Symbol">(</a><a id="68501" href="Demos.HSP.html#68913" class="Function">Ï†</a> <a id="68503" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="68506" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a>  <a id="68511" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="68514" href="Demos.HSP.html#68388" class="Bound">Ï</a><a id="68515" class="Symbol">)</a>   <a id="68519" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="68524" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="68538" href="Demos.HSP.html#68379" class="Bound">Ï†h</a> <a id="68541" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68543" class="Symbol">(</a><a id="68544" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a> <a id="68548" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="68550" href="Demos.HSP.html#68388" class="Bound">Ï</a><a id="68551" class="Symbol">)</a>        <a id="68560" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
   <a id="68565" href="Demos.HSP.html#68913" class="Function">Ï†</a><a id="68566" class="Symbol">(</a>  <a id="68569" href="Demos.HSP.html#68981" class="Function Operator">âŸ¦</a> <a id="68571" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="68573" href="Demos.HSP.html#68981" class="Function Operator">âŸ§á´¬</a>  <a id="68577" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="68581" class="Symbol">(</a>     <a id="68587" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a>  <a id="68592" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="68595" href="Demos.HSP.html#68388" class="Bound">Ï</a><a id="68596" class="Symbol">))</a>  <a id="68600" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="68605" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="68610" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="68612" href="Demos.HSP.html#68379" class="Bound">Ï†h</a> <a id="68615" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="68617" class="Symbol">(</a><a id="68618" href="Demos.HSP.html#68374" class="Bound">Apq</a> <a id="68622" class="Symbol">(</a><a id="68623" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a> <a id="68627" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="68629" href="Demos.HSP.html#68388" class="Bound">Ï</a><a id="68630" class="Symbol">))</a>         <a id="68641" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="68646" href="Demos.HSP.html#68913" class="Function">Ï†</a><a id="68647" class="Symbol">(</a>  <a id="68650" href="Demos.HSP.html#68981" class="Function Operator">âŸ¦</a> <a id="68652" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="68654" href="Demos.HSP.html#68981" class="Function Operator">âŸ§á´¬</a>  <a id="68658" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="68662" class="Symbol">(</a>     <a id="68668" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a>  <a id="68673" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="68676" href="Demos.HSP.html#68388" class="Bound">Ï</a><a id="68677" class="Symbol">))</a>  <a id="68681" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="68686" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="68700" href="Demos.HSP.html#68379" class="Bound">Ï†h</a> <a id="68703" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="68705" class="Symbol">(</a><a id="68706" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a> <a id="68710" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="68712" href="Demos.HSP.html#68388" class="Bound">Ï</a><a id="68713" class="Symbol">)</a>        <a id="68722" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
       <a id="68731" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="68733" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="68735" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>   <a id="68739" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="68743" class="Symbol">(</a><a id="68744" href="Demos.HSP.html#68913" class="Function">Ï†</a> <a id="68746" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="68749" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a>  <a id="68754" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="68757" href="Demos.HSP.html#68388" class="Bound">Ï</a><a id="68758" class="Symbol">)</a>   <a id="68762" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="68767" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="68772" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="68774" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="68776" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a><a id="68777" class="Symbol">(Î»</a> <a id="68780" href="Demos.HSP.html#68780" class="Bound">_</a> <a id="68782" class="Symbol">â†’</a> <a id="68784" href="Demos.HSP.html#12769" class="Function">InvIsInverseÊ³</a> <a id="68798" href="Demos.HSP.html#68384" class="Bound">Ï†E</a><a id="68800" class="Symbol">)</a>  <a id="68803" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
       <a id="68812" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="68814" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="68816" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>   <a id="68820" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>               <a id="68838" href="Demos.HSP.html#68388" class="Bound">Ï</a>    <a id="68843" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
  <a id="68847" class="Keyword">where</a>
  <a id="68855" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a> <a id="68859" class="Symbol">:</a> <a id="68861" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="68864" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a> <a id="68866" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="68868" class="Symbol">â†’</a> <a id="68870" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="68873" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="68875" href="Demos.HSP.html#23863" class="Function Operator">]</a>
  <a id="68879" href="Demos.HSP.html#68855" class="Function">Ï†â»Â¹</a> <a id="68883" class="Symbol">=</a> <a id="68885" href="Demos.HSP.html#14347" class="Function">SurjInv</a> <a id="68893" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="68895" href="Demos.HSP.html#68379" class="Bound">Ï†h</a> <a id="68898" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="68900" href="Demos.HSP.html#68384" class="Bound">Ï†E</a>
  <a id="68905" class="Keyword">private</a> <a id="68913" href="Demos.HSP.html#68913" class="Function">Ï†</a> <a id="68915" class="Symbol">=</a> <a id="68917" class="Symbol">(</a><a id="68918" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="68924" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="68926" href="Demos.HSP.html#68379" class="Bound">Ï†h</a> <a id="68929" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a><a id="68930" class="Symbol">)</a>
  <a id="68934" class="Keyword">open</a> <a id="68939" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="68951" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a>  <a id="68954" class="Keyword">using</a> <a id="68960" class="Symbol">()</a> <a id="68963" class="Keyword">renaming</a> <a id="68972" class="Symbol">(</a> <a id="68974" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="68978" class="Symbol">to</a> <a id="68981" class="Function Operator">âŸ¦_âŸ§á´¬</a><a id="68985" class="Symbol">)</a>
  <a id="68989" class="Keyword">open</a> <a id="68994" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="69006" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a>  <a id="69009" class="Keyword">using</a> <a id="69015" class="Symbol">(</a> <a id="69017" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="69021" class="Symbol">)</a>
  <a id="69025" class="Keyword">open</a> <a id="69030" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="69046" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="69049" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a> <a id="69051" href="Demos.HSP.html#23810" class="Function Operator">]</a>

 <a id="69055" href="Demos.HSP.html#69055" class="Function">âŠ§-S-invar</a> <a id="69065" class="Symbol">:</a> <a id="69067" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="69069" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="69071" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="69073" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="69075" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="69077" class="Symbol">â†’</a> <a id="69079" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a> <a id="69081" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="69083" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="69085" class="Symbol">â†’</a> <a id="69087" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a> <a id="69089" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="69091" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="69093" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="69095" href="Demos.HSP.html#68262" class="Bound">q</a>
 <a id="69098" href="Demos.HSP.html#69055" class="Function">âŠ§-S-invar</a> <a id="69108" href="Demos.HSP.html#69108" class="Bound">Apq</a> <a id="69112" href="Demos.HSP.html#69112" class="Bound">Bâ‰¤A</a> <a id="69116" href="Demos.HSP.html#69116" class="Bound">b</a> <a id="69118" class="Symbol">=</a> <a id="69120" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="69122" href="Demos.HSP.html#69112" class="Bound">Bâ‰¤A</a> <a id="69126" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
  <a id="69130" class="Symbol">(</a> <a id="69132" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="69142" href="Demos.HSP.html#69544" class="Function">h</a> <a id="69144" class="Symbol">(</a>  <a id="69147" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="69149" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="69151" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>   <a id="69155" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>       <a id="69165" href="Demos.HSP.html#69116" class="Bound">b</a><a id="69166" class="Symbol">)</a>  <a id="69169" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="69174" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="69188" href="Demos.HSP.html#69529" class="Function">hh</a> <a id="69191" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="69193" href="Demos.HSP.html#69116" class="Bound">b</a>  <a id="69196" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
         <a id="69207" href="Demos.HSP.html#69476" class="Function Operator">âŸ¦</a> <a id="69209" href="Demos.HSP.html#68260" class="Bound">p</a> <a id="69211" href="Demos.HSP.html#69476" class="Function Operator">âŸ§á´¬</a>  <a id="69215" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="69219" class="Symbol">(</a><a id="69220" href="Demos.HSP.html#69544" class="Function">h</a> <a id="69222" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="69225" href="Demos.HSP.html#69116" class="Bound">b</a><a id="69226" class="Symbol">)</a>  <a id="69229" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="69234" href="Demos.HSP.html#69108" class="Bound">Apq</a> <a id="69238" class="Symbol">(</a><a id="69239" href="Demos.HSP.html#69544" class="Function">h</a> <a id="69241" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="69243" href="Demos.HSP.html#69116" class="Bound">b</a><a id="69244" class="Symbol">)</a>           <a id="69256" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
         <a id="69267" href="Demos.HSP.html#69476" class="Function Operator">âŸ¦</a> <a id="69269" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="69271" href="Demos.HSP.html#69476" class="Function Operator">âŸ§á´¬</a>  <a id="69275" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="69279" class="Symbol">(</a><a id="69280" href="Demos.HSP.html#69544" class="Function">h</a> <a id="69282" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="69285" href="Demos.HSP.html#69116" class="Bound">b</a><a id="69286" class="Symbol">)</a>  <a id="69289" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="69294" href="Demos.HSP.html#56615" class="Function">comm-hom-term</a> <a id="69308" href="Demos.HSP.html#69529" class="Function">hh</a> <a id="69311" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="69313" href="Demos.HSP.html#69116" class="Bound">b</a>  <a id="69316" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
    <a id="69322" href="Demos.HSP.html#69544" class="Function">h</a> <a id="69324" class="Symbol">(</a>  <a id="69327" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="69329" href="Demos.HSP.html#68262" class="Bound">q</a> <a id="69331" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a>   <a id="69335" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>       <a id="69345" href="Demos.HSP.html#69116" class="Bound">b</a><a id="69346" class="Symbol">)</a>  <a id="69349" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a> <a id="69351" class="Symbol">)</a>
  <a id="69355" class="Keyword">where</a>
  <a id="69363" class="Keyword">open</a> <a id="69368" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="69384" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="69387" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="69389" href="Demos.HSP.html#23810" class="Function Operator">]</a>
  <a id="69393" class="Keyword">open</a> <a id="69398" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="69405" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="69408" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a> <a id="69410" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="69413" class="Keyword">using</a> <a id="69419" class="Symbol">(</a> <a id="69421" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="69425" class="Symbol">)</a>
  <a id="69429" class="Keyword">open</a> <a id="69434" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="69446" href="Demos.HSP.html#68224" class="Bound">ğ‘¨</a>  <a id="69449" class="Keyword">using</a> <a id="69455" class="Symbol">()</a> <a id="69458" class="Keyword">renaming</a> <a id="69467" class="Symbol">(</a> <a id="69469" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="69473" class="Symbol">to</a> <a id="69476" class="Function Operator">âŸ¦_âŸ§á´¬</a> <a id="69481" class="Symbol">)</a>
  <a id="69485" class="Keyword">open</a> <a id="69490" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="69502" href="Demos.HSP.html#68242" class="Bound">ğ‘©</a>  <a id="69505" class="Keyword">using</a> <a id="69511" class="Symbol">(</a> <a id="69513" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="69517" class="Symbol">)</a>
  <a id="69521" class="Keyword">private</a> <a id="69529" href="Demos.HSP.html#69529" class="Function">hh</a> <a id="69532" class="Symbol">=</a> <a id="69534" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="69536" href="Demos.HSP.html#69112" class="Bound">Bâ‰¤A</a> <a id="69540" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="69542" class="Symbol">;</a> <a id="69544" href="Demos.HSP.html#69544" class="Function">h</a> <a id="69546" class="Symbol">=</a> <a id="69548" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="69554" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="69556" href="Demos.HSP.html#69529" class="Function">hh</a> <a id="69559" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>

</pre>
\fi
An identity satisfied by all algebras in an indexed collection is
also satisfied by the product of algebras in the collection.
\ifshort
We refer to this fact as \af{âŠ§-P-invar}.
\else

<pre class="Agda">

<a id="69775" class="Keyword">module</a> <a id="69782" href="Demos.HSP.html#69782" class="Module">_</a> <a id="69784" class="Symbol">{</a><a id="69785" href="Demos.HSP.html#69785" class="Bound">X</a> <a id="69787" class="Symbol">:</a> <a id="69789" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="69794" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="69795" class="Symbol">}{</a><a id="69797" href="Demos.HSP.html#69797" class="Bound">I</a> <a id="69799" class="Symbol">:</a> <a id="69801" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="69806" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="69807" class="Symbol">}(</a><a id="69809" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="69811" class="Symbol">:</a> <a id="69813" href="Demos.HSP.html#69797" class="Bound">I</a> <a id="69815" class="Symbol">â†’</a> <a id="69817" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="69825" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="69827" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="69829" class="Symbol">){</a><a id="69831" href="Demos.HSP.html#69831" class="Bound">p</a> <a id="69833" href="Demos.HSP.html#69833" class="Bound">q</a> <a id="69835" class="Symbol">:</a> <a id="69837" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="69842" href="Demos.HSP.html#69785" class="Bound">X</a><a id="69843" class="Symbol">}</a> <a id="69845" class="Keyword">where</a>
 <a id="69852" href="Demos.HSP.html#69852" class="Function">âŠ§-P-invar</a> <a id="69862" class="Symbol">:</a> <a id="69864" class="Symbol">(âˆ€</a> <a id="69867" href="Demos.HSP.html#69867" class="Bound">i</a> <a id="69869" class="Symbol">â†’</a> <a id="69871" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="69873" href="Demos.HSP.html#69867" class="Bound">i</a> <a id="69875" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="69877" href="Demos.HSP.html#69831" class="Bound">p</a> <a id="69879" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="69881" href="Demos.HSP.html#69833" class="Bound">q</a><a id="69882" class="Symbol">)</a> <a id="69884" class="Symbol">â†’</a> <a id="69886" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="69888" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="69890" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="69892" href="Demos.HSP.html#69831" class="Bound">p</a> <a id="69894" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="69896" href="Demos.HSP.html#69833" class="Bound">q</a>
 <a id="69899" href="Demos.HSP.html#69852" class="Function">âŠ§-P-invar</a> <a id="69909" href="Demos.HSP.html#69909" class="Bound">ğ’œpq</a> <a id="69913" href="Demos.HSP.html#69913" class="Bound">a</a> <a id="69915" class="Symbol">=</a>
  <a id="69919" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="69928" href="Demos.HSP.html#70259" class="Function Operator">âŸ¦</a> <a id="69930" href="Demos.HSP.html#69831" class="Bound">p</a> <a id="69932" href="Demos.HSP.html#70259" class="Function Operator">âŸ§â‚</a>               <a id="69949" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>  <a id="69954" href="Demos.HSP.html#69913" class="Bound">a</a>                <a id="69971" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="69976" href="Demos.HSP.html#57149" class="Function">interp-prod</a> <a id="69988" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="69990" href="Demos.HSP.html#69831" class="Bound">p</a> <a id="69992" href="Demos.HSP.html#69913" class="Bound">a</a>  <a id="69995" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="70000" class="Symbol">(</a> <a id="70002" class="Symbol">Î»</a> <a id="70004" href="Demos.HSP.html#70004" class="Bound">i</a> <a id="70006" class="Symbol">â†’</a> <a id="70008" class="Symbol">(</a><a id="70009" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="70011" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="70013" href="Demos.HSP.html#70004" class="Bound">i</a> <a id="70015" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="70017" href="Demos.HSP.html#69831" class="Bound">p</a><a id="70018" class="Symbol">)</a>  <a id="70021" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>  <a id="70026" class="Symbol">Î»</a> <a id="70028" href="Demos.HSP.html#70028" class="Bound">x</a> <a id="70030" class="Symbol">â†’</a> <a id="70032" class="Symbol">(</a><a id="70033" href="Demos.HSP.html#69913" class="Bound">a</a> <a id="70035" href="Demos.HSP.html#70028" class="Bound">x</a><a id="70036" class="Symbol">)</a> <a id="70038" href="Demos.HSP.html#70004" class="Bound">i</a> <a id="70040" class="Symbol">)</a>  <a id="70043" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="70046" class="Symbol">(Î»</a> <a id="70049" href="Demos.HSP.html#70049" class="Bound">i</a> <a id="70051" class="Symbol">â†’</a> <a id="70053" href="Demos.HSP.html#69909" class="Bound">ğ’œpq</a> <a id="70057" href="Demos.HSP.html#70049" class="Bound">i</a> <a id="70059" class="Symbol">(Î»</a> <a id="70062" href="Demos.HSP.html#70062" class="Bound">x</a> <a id="70064" class="Symbol">â†’</a> <a id="70066" class="Symbol">(</a><a id="70067" href="Demos.HSP.html#69913" class="Bound">a</a> <a id="70069" href="Demos.HSP.html#70062" class="Bound">x</a><a id="70070" class="Symbol">)</a> <a id="70072" href="Demos.HSP.html#70049" class="Bound">i</a><a id="70073" class="Symbol">))</a> <a id="70076" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="70081" class="Symbol">(</a> <a id="70083" class="Symbol">Î»</a> <a id="70085" href="Demos.HSP.html#70085" class="Bound">i</a> <a id="70087" class="Symbol">â†’</a> <a id="70089" class="Symbol">(</a><a id="70090" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="70092" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="70094" href="Demos.HSP.html#70085" class="Bound">i</a> <a id="70096" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="70098" href="Demos.HSP.html#69833" class="Bound">q</a><a id="70099" class="Symbol">)</a>  <a id="70102" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>  <a id="70107" class="Symbol">Î»</a> <a id="70109" href="Demos.HSP.html#70109" class="Bound">x</a> <a id="70111" class="Symbol">â†’</a> <a id="70113" class="Symbol">(</a><a id="70114" href="Demos.HSP.html#69913" class="Bound">a</a> <a id="70116" href="Demos.HSP.html#70109" class="Bound">x</a><a id="70117" class="Symbol">)</a> <a id="70119" href="Demos.HSP.html#70085" class="Bound">i</a> <a id="70121" class="Symbol">)</a>  <a id="70124" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="70129" href="Demos.HSP.html#57149" class="Function">interp-prod</a> <a id="70141" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="70143" href="Demos.HSP.html#69833" class="Bound">q</a> <a id="70145" href="Demos.HSP.html#69913" class="Bound">a</a>  <a id="70148" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
   <a id="70153" href="Demos.HSP.html#70259" class="Function Operator">âŸ¦</a> <a id="70155" href="Demos.HSP.html#69833" class="Bound">q</a> <a id="70157" href="Demos.HSP.html#70259" class="Function Operator">âŸ§â‚</a>               <a id="70174" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a>  <a id="70179" href="Demos.HSP.html#69913" class="Bound">a</a>                <a id="70196" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
  <a id="70200" class="Keyword">where</a>
  <a id="70208" class="Keyword">open</a> <a id="70213" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="70225" class="Symbol">(</a><a id="70226" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="70228" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a><a id="70229" class="Symbol">)</a>  <a id="70232" class="Keyword">using</a> <a id="70238" class="Symbol">()</a> <a id="70241" class="Keyword">renaming</a> <a id="70250" class="Symbol">(</a> <a id="70252" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="70256" class="Symbol">to</a> <a id="70259" class="Function Operator">âŸ¦_âŸ§â‚</a> <a id="70264" class="Symbol">)</a>
  <a id="70268" class="Keyword">open</a> <a id="70273" href="Demos.HSP.html#53267" class="Module">Environment</a>        <a id="70292" class="Keyword">using</a> <a id="70298" class="Symbol">(</a> <a id="70300" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="70304" class="Symbol">)</a>
  <a id="70308" class="Keyword">open</a> <a id="70313" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="70320" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="70323" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="70325" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="70327" href="Demos.HSP.html#23810" class="Function Operator">]</a>    <a id="70332" class="Keyword">using</a> <a id="70338" class="Symbol">(</a> <a id="70340" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="70344" class="Symbol">)</a>
  <a id="70348" class="Keyword">open</a> <a id="70353" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="70369" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="70372" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="70374" href="Demos.HSP.html#69809" class="Bound">ğ’œ</a> <a id="70376" href="Demos.HSP.html#23810" class="Function Operator">]</a>

</pre>
\fi

The classes \af H \ab{ğ’¦}, \af S \ab{ğ’¦}, \af P \ab{ğ’¦}, and \af V \ab{ğ’¦} all satisfy the
same term identities.  We will only use a subset of the inclusions needed to prove this
assertion, and we present here just the facts we need.\footnote{For more details, see
\ualmodule{Setoid.Varieties.Preservation}.}
First, the closure operator \af H preserves the identities modeled by the
given class; this follows almost immediately from the invariance lemma
\af{âŠ§-H-invar}.

\ifshort\else
<pre class="Agda">

<a id="70890" class="Keyword">module</a> <a id="70897" href="Demos.HSP.html#70897" class="Module">_</a>  <a id="70900" class="Symbol">{</a><a id="70901" href="Demos.HSP.html#70901" class="Bound">X</a> <a id="70903" class="Symbol">:</a> <a id="70905" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="70910" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="70911" class="Symbol">}{</a><a id="70913" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="70915" class="Symbol">:</a> <a id="70917" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="70921" class="Symbol">(</a><a id="70922" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="70930" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="70932" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="70934" class="Symbol">)</a> <a id="70936" class="Symbol">(</a><a id="70937" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="70939" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="70941" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="70944" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="70946" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="70949" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="70950" class="Symbol">)}{</a><a id="70953" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="70955" href="Demos.HSP.html#70955" class="Bound">q</a> <a id="70957" class="Symbol">:</a> <a id="70959" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="70964" href="Demos.HSP.html#70901" class="Bound">X</a><a id="70965" class="Symbol">}</a> <a id="70967" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="71003" href="Demos.HSP.html#71003" class="Function">H-id1</a> <a id="71009" class="Symbol">:</a> <a id="71011" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71013" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71015" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71017" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71019" href="Demos.HSP.html#70955" class="Bound">q</a> <a id="71021" class="Symbol">â†’</a> <a id="71023" href="Demos.HSP.html#66058" class="Function">H</a><a id="71024" class="Symbol">{</a><a id="71025" class="Argument">Î²</a> <a id="71027" class="Symbol">=</a> <a id="71029" href="Demos.HSP.html#70930" class="Bound">Î±</a><a id="71030" class="Symbol">}{</a><a id="71032" href="Demos.HSP.html#70932" class="Bound">Ïáµƒ</a><a id="71034" class="Symbol">}</a><a id="71035" href="Demos.HSP.html#70949" class="Bound">â„“</a> <a id="71037" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71039" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71041" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71043" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71045" href="Demos.HSP.html#70955" class="Bound">q</a>
 <a id="71048" href="Demos.HSP.html#71003" class="Function">H-id1</a> <a id="71054" href="Demos.HSP.html#71054" class="Bound">Ïƒ</a> <a id="71056" href="Demos.HSP.html#71056" class="Bound">ğ‘©</a> <a id="71058" class="Symbol">(</a><a id="71059" href="Demos.HSP.html#71059" class="Bound">ğ‘¨</a> <a id="71061" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71063" href="Demos.HSP.html#71063" class="Bound">kA</a> <a id="71066" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71068" href="Demos.HSP.html#71068" class="Bound">BimgA</a><a id="71073" class="Symbol">)</a> <a id="71075" class="Symbol">=</a> <a id="71077" href="Demos.HSP.html#68310" class="Function">âŠ§-H-invar</a><a id="71086" class="Symbol">{</a><a id="71087" class="Argument">p</a> <a id="71089" class="Symbol">=</a> <a id="71091" href="Demos.HSP.html#70953" class="Bound">p</a><a id="71092" class="Symbol">}{</a><a id="71094" href="Demos.HSP.html#70955" class="Bound">q</a><a id="71095" class="Symbol">}</a> <a id="71097" class="Symbol">(</a><a id="71098" href="Demos.HSP.html#71054" class="Bound">Ïƒ</a> <a id="71100" href="Demos.HSP.html#71059" class="Bound">ğ‘¨</a> <a id="71102" href="Demos.HSP.html#71063" class="Bound">kA</a><a id="71104" class="Symbol">)</a> <a id="71106" href="Demos.HSP.html#71068" class="Bound">BimgA</a>

</pre>
The analogous preservation result for \af S is a consequence of
the invariance lemma \af{âŠ§-S-invar}; the converse, which we call
\af{S-id2}, has an equally straightforward proof.

<pre class="Agda">

 <a id="71319" href="Demos.HSP.html#71319" class="Function">S-id1</a> <a id="71325" class="Symbol">:</a> <a id="71327" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71329" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71331" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71333" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71335" href="Demos.HSP.html#70955" class="Bound">q</a> <a id="71337" class="Symbol">â†’</a> <a id="71339" href="Demos.HSP.html#66181" class="Function">S</a><a id="71340" class="Symbol">{</a><a id="71341" class="Argument">Î²</a> <a id="71343" class="Symbol">=</a> <a id="71345" href="Demos.HSP.html#70930" class="Bound">Î±</a><a id="71346" class="Symbol">}{</a><a id="71348" href="Demos.HSP.html#70932" class="Bound">Ïáµƒ</a><a id="71350" class="Symbol">}</a><a id="71351" href="Demos.HSP.html#70949" class="Bound">â„“</a> <a id="71353" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71355" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71357" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71359" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71361" href="Demos.HSP.html#70955" class="Bound">q</a>
 <a id="71364" href="Demos.HSP.html#71319" class="Function">S-id1</a> <a id="71370" href="Demos.HSP.html#71370" class="Bound">Ïƒ</a> <a id="71372" href="Demos.HSP.html#71372" class="Bound">ğ‘©</a> <a id="71374" class="Symbol">(</a><a id="71375" href="Demos.HSP.html#71375" class="Bound">ğ‘¨</a> <a id="71377" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71379" href="Demos.HSP.html#71379" class="Bound">kA</a> <a id="71382" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71384" href="Demos.HSP.html#71384" class="Bound">Bâ‰¤A</a><a id="71387" class="Symbol">)</a> <a id="71389" class="Symbol">=</a> <a id="71391" href="Demos.HSP.html#69055" class="Function">âŠ§-S-invar</a><a id="71400" class="Symbol">{</a><a id="71401" class="Argument">p</a> <a id="71403" class="Symbol">=</a> <a id="71405" href="Demos.HSP.html#70953" class="Bound">p</a><a id="71406" class="Symbol">}{</a><a id="71408" href="Demos.HSP.html#70955" class="Bound">q</a><a id="71409" class="Symbol">}</a> <a id="71411" class="Symbol">(</a><a id="71412" href="Demos.HSP.html#71370" class="Bound">Ïƒ</a> <a id="71414" href="Demos.HSP.html#71375" class="Bound">ğ‘¨</a> <a id="71416" href="Demos.HSP.html#71379" class="Bound">kA</a><a id="71418" class="Symbol">)</a> <a id="71420" href="Demos.HSP.html#71384" class="Bound">Bâ‰¤A</a>

 <a id="71426" href="Demos.HSP.html#71426" class="Function">S-id2</a> <a id="71432" class="Symbol">:</a> <a id="71434" href="Demos.HSP.html#66181" class="Function">S</a> <a id="71436" href="Demos.HSP.html#70949" class="Bound">â„“</a> <a id="71438" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71440" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71442" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71444" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71446" href="Demos.HSP.html#70955" class="Bound">q</a> <a id="71448" class="Symbol">â†’</a> <a id="71450" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71452" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71454" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71456" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71458" href="Demos.HSP.html#70955" class="Bound">q</a>
 <a id="71461" href="Demos.HSP.html#71426" class="Function">S-id2</a> <a id="71467" href="Demos.HSP.html#71467" class="Bound">Spq</a> <a id="71471" href="Demos.HSP.html#71471" class="Bound">ğ‘¨</a> <a id="71473" href="Demos.HSP.html#71473" class="Bound">kA</a> <a id="71476" class="Symbol">=</a> <a id="71478" href="Demos.HSP.html#71467" class="Bound">Spq</a> <a id="71482" href="Demos.HSP.html#71471" class="Bound">ğ‘¨</a> <a id="71484" class="Symbol">(</a><a id="71485" href="Demos.HSP.html#71471" class="Bound">ğ‘¨</a> <a id="71487" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71489" class="Symbol">(</a><a id="71490" href="Demos.HSP.html#71473" class="Bound">kA</a> <a id="71493" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71495" href="Demos.HSP.html#46369" class="Function">â‰¤-reflexive</a><a id="71506" class="Symbol">))</a>

</pre>
Finally, we have analogous pairs of implications for \af P, \af H, and \af V,
  called \af{P-id1}, \af{P-id2}, \af{H-id1}, etc.
\ifshort
We omit the formalizations (\seeshort).
\else
In each case, we will only need the first implication, so we omit the others from this presentation.

<pre class="Agda">

 <a id="71821" href="Demos.HSP.html#71821" class="Function">P-id1</a> <a id="71827" class="Symbol">:</a> <a id="71829" class="Symbol">âˆ€{</a><a id="71831" href="Demos.HSP.html#71831" class="Bound">Î¹</a><a id="71832" class="Symbol">}</a> <a id="71834" class="Symbol">â†’</a> <a id="71836" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71838" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71840" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71842" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71844" href="Demos.HSP.html#70955" class="Bound">q</a> <a id="71846" class="Symbol">â†’</a> <a id="71848" href="Demos.HSP.html#66293" class="Function">P</a><a id="71849" class="Symbol">{</a><a id="71850" class="Argument">Î²</a> <a id="71852" class="Symbol">=</a> <a id="71854" href="Demos.HSP.html#70930" class="Bound">Î±</a><a id="71855" class="Symbol">}{</a><a id="71857" href="Demos.HSP.html#70932" class="Bound">Ïáµƒ</a><a id="71859" class="Symbol">}</a><a id="71860" href="Demos.HSP.html#70949" class="Bound">â„“</a> <a id="71862" href="Demos.HSP.html#71831" class="Bound">Î¹</a> <a id="71864" href="Demos.HSP.html#70913" class="Bound">ğ’¦</a> <a id="71866" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="71868" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71870" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="71872" href="Demos.HSP.html#70955" class="Bound">q</a>
 <a id="71875" href="Demos.HSP.html#71821" class="Function">P-id1</a> <a id="71881" href="Demos.HSP.html#71881" class="Bound">Ïƒ</a> <a id="71883" href="Demos.HSP.html#71883" class="Bound">ğ‘¨</a> <a id="71885" class="Symbol">(</a><a id="71886" href="Demos.HSP.html#71886" class="Bound">I</a> <a id="71888" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71890" href="Demos.HSP.html#71890" class="Bound">ğ’œ</a> <a id="71892" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71894" href="Demos.HSP.html#71894" class="Bound">kA</a> <a id="71897" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71899" href="Demos.HSP.html#71899" class="Bound">Aâ‰…â¨…A</a><a id="71903" class="Symbol">)</a> <a id="71905" class="Symbol">=</a> <a id="71907" href="Demos.HSP.html#67164" class="Function">âŠ§-I-invar</a> <a id="71917" href="Demos.HSP.html#71883" class="Bound">ğ‘¨</a> <a id="71919" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71921" href="Demos.HSP.html#70955" class="Bound">q</a> <a id="71923" href="Demos.HSP.html#71949" class="Function">IH</a> <a id="71926" class="Symbol">(</a><a id="71927" href="Demos.HSP.html#42782" class="Function">â‰…-sym</a> <a id="71933" href="Demos.HSP.html#71899" class="Bound">Aâ‰…â¨…A</a><a id="71937" class="Symbol">)</a>
  <a id="71941" class="Keyword">where</a>
  <a id="71949" href="Demos.HSP.html#71949" class="Function">IH</a> <a id="71952" class="Symbol">:</a> <a id="71954" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="71956" href="Demos.HSP.html#71890" class="Bound">ğ’œ</a> <a id="71958" href="Demos.HSP.html#59188" class="Function Operator">âŠ§</a> <a id="71960" href="Demos.HSP.html#70953" class="Bound">p</a> <a id="71962" href="Demos.HSP.html#59188" class="Function Operator">â‰ˆ</a> <a id="71964" href="Demos.HSP.html#70955" class="Bound">q</a>
  <a id="71968" href="Demos.HSP.html#71949" class="Function">IH</a> <a id="71971" class="Symbol">=</a> <a id="71973" href="Demos.HSP.html#69852" class="Function">âŠ§-P-invar</a> <a id="71983" href="Demos.HSP.html#71890" class="Bound">ğ’œ</a> <a id="71985" class="Symbol">{</a><a id="71986" href="Demos.HSP.html#70953" class="Bound">p</a><a id="71987" class="Symbol">}{</a><a id="71989" href="Demos.HSP.html#70955" class="Bound">q</a><a id="71990" class="Symbol">}</a> <a id="71992" class="Symbol">(Î»</a> <a id="71995" href="Demos.HSP.html#71995" class="Bound">i</a> <a id="71997" class="Symbol">â†’</a> <a id="71999" href="Demos.HSP.html#71881" class="Bound">Ïƒ</a> <a id="72001" class="Symbol">(</a><a id="72002" href="Demos.HSP.html#71890" class="Bound">ğ’œ</a> <a id="72004" href="Demos.HSP.html#71995" class="Bound">i</a><a id="72005" class="Symbol">)</a> <a id="72007" class="Symbol">(</a><a id="72008" href="Demos.HSP.html#71894" class="Bound">kA</a> <a id="72011" href="Demos.HSP.html#71995" class="Bound">i</a><a id="72012" class="Symbol">))</a>

<a id="72016" class="Keyword">module</a> <a id="72023" href="Demos.HSP.html#72023" class="Module">_</a> <a id="72025" class="Symbol">{</a><a id="72026" href="Demos.HSP.html#72026" class="Bound">X</a> <a id="72028" class="Symbol">:</a> <a id="72030" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="72035" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="72036" class="Symbol">}{</a><a id="72038" href="Demos.HSP.html#72038" class="Bound">Î¹</a> <a id="72040" class="Symbol">:</a> <a id="72042" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="72047" class="Symbol">}(</a><a id="72049" href="Demos.HSP.html#72049" class="Bound">â„“</a> <a id="72051" class="Symbol">:</a> <a id="72053" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="72058" class="Symbol">){</a><a id="72060" href="Demos.HSP.html#72060" class="Bound">ğ’¦</a> <a id="72062" class="Symbol">:</a> <a id="72064" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="72068" class="Symbol">(</a><a id="72069" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="72077" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="72079" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="72081" class="Symbol">)(</a><a id="72083" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="72085" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="72087" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="72090" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="72092" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="72095" href="Demos.HSP.html#72049" class="Bound">â„“</a><a id="72096" class="Symbol">)}{</a><a id="72099" href="Demos.HSP.html#72099" class="Bound">p</a> <a id="72101" href="Demos.HSP.html#72101" class="Bound">q</a> <a id="72103" class="Symbol">:</a> <a id="72105" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="72110" href="Demos.HSP.html#72026" class="Bound">X</a><a id="72111" class="Symbol">}</a> <a id="72113" class="Keyword">where</a>
 <a id="72120" class="Keyword">private</a> <a id="72128" href="Demos.HSP.html#72128" class="Function">aâ„“Î¹</a> <a id="72132" class="Symbol">=</a> <a id="72134" href="Demos.HSP.html#72077" class="Bound">Î±</a> <a id="72136" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="72138" href="Demos.HSP.html#72079" class="Bound">Ïáµƒ</a> <a id="72141" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="72143" href="Demos.HSP.html#72049" class="Bound">â„“</a> <a id="72145" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="72147" href="Demos.HSP.html#72038" class="Bound">Î¹</a>

 <a id="72151" href="Demos.HSP.html#72151" class="Function">V-id1</a> <a id="72157" class="Symbol">:</a> <a id="72159" href="Demos.HSP.html#72060" class="Bound">ğ’¦</a> <a id="72161" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="72163" href="Demos.HSP.html#72099" class="Bound">p</a> <a id="72165" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="72167" href="Demos.HSP.html#72101" class="Bound">q</a> <a id="72169" class="Symbol">â†’</a> <a id="72171" href="Demos.HSP.html#66755" class="Function">V</a> <a id="72173" href="Demos.HSP.html#72049" class="Bound">â„“</a> <a id="72175" href="Demos.HSP.html#72038" class="Bound">Î¹</a> <a id="72177" href="Demos.HSP.html#72060" class="Bound">ğ’¦</a> <a id="72179" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="72181" href="Demos.HSP.html#72099" class="Bound">p</a> <a id="72183" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="72185" href="Demos.HSP.html#72101" class="Bound">q</a>
 <a id="72188" href="Demos.HSP.html#72151" class="Function">V-id1</a> <a id="72194" href="Demos.HSP.html#72194" class="Bound">Ïƒ</a> <a id="72196" href="Demos.HSP.html#72196" class="Bound">ğ‘©</a> <a id="72198" class="Symbol">(</a><a id="72199" href="Demos.HSP.html#72199" class="Bound">ğ‘¨</a> <a id="72201" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72203" class="Symbol">(</a><a id="72204" href="Demos.HSP.html#72204" class="Bound">â¨…A</a> <a id="72207" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72209" href="Demos.HSP.html#72209" class="Bound">pâ¨…A</a> <a id="72213" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72215" href="Demos.HSP.html#72215" class="Bound">Aâ‰¤â¨…A</a><a id="72219" class="Symbol">)</a> <a id="72221" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72223" href="Demos.HSP.html#72223" class="Bound">BimgA</a><a id="72228" class="Symbol">)</a> <a id="72230" class="Symbol">=</a>
  <a id="72234" href="Demos.HSP.html#71003" class="Function">H-id1</a><a id="72239" class="Symbol">{</a><a id="72240" class="Argument">â„“</a> <a id="72242" class="Symbol">=</a> <a id="72244" href="Demos.HSP.html#72128" class="Function">aâ„“Î¹</a><a id="72247" class="Symbol">}{</a><a id="72249" class="Argument">ğ’¦</a> <a id="72251" class="Symbol">=</a> <a id="72253" href="Demos.HSP.html#66181" class="Function">S</a> <a id="72255" href="Demos.HSP.html#72128" class="Function">aâ„“Î¹</a> <a id="72259" class="Symbol">(</a><a id="72260" href="Demos.HSP.html#66293" class="Function">P</a> <a id="72262" class="Symbol">{</a><a id="72263" class="Argument">Î²</a> <a id="72265" class="Symbol">=</a> <a id="72267" href="Demos.HSP.html#72077" class="Bound">Î±</a><a id="72268" class="Symbol">}{</a><a id="72270" href="Demos.HSP.html#72079" class="Bound">Ïáµƒ</a><a id="72272" class="Symbol">}</a><a id="72273" href="Demos.HSP.html#72049" class="Bound">â„“</a> <a id="72275" href="Demos.HSP.html#72038" class="Bound">Î¹</a> <a id="72277" href="Demos.HSP.html#72060" class="Bound">ğ’¦</a><a id="72278" class="Symbol">)}{</a><a id="72281" class="Argument">p</a> <a id="72283" class="Symbol">=</a> <a id="72285" href="Demos.HSP.html#72099" class="Bound">p</a><a id="72286" class="Symbol">}{</a><a id="72288" href="Demos.HSP.html#72101" class="Bound">q</a><a id="72289" class="Symbol">}</a> <a id="72291" href="Demos.HSP.html#72399" class="Function">spKâŠ§pq</a> <a id="72298" href="Demos.HSP.html#72196" class="Bound">ğ‘©</a> <a id="72300" class="Symbol">(</a><a id="72301" href="Demos.HSP.html#72199" class="Bound">ğ‘¨</a> <a id="72303" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72305" class="Symbol">(</a><a id="72306" href="Demos.HSP.html#72332" class="Function">spA</a> <a id="72310" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72312" href="Demos.HSP.html#72223" class="Bound">BimgA</a><a id="72317" class="Symbol">))</a>
   <a id="72323" class="Keyword">where</a>
   <a id="72332" href="Demos.HSP.html#72332" class="Function">spA</a> <a id="72336" class="Symbol">:</a> <a id="72338" href="Demos.HSP.html#72199" class="Bound">ğ‘¨</a> <a id="72340" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="72342" href="Demos.HSP.html#66181" class="Function">S</a> <a id="72344" href="Demos.HSP.html#72128" class="Function">aâ„“Î¹</a> <a id="72348" class="Symbol">(</a><a id="72349" href="Demos.HSP.html#66293" class="Function">P</a> <a id="72351" class="Symbol">{</a><a id="72352" class="Argument">Î²</a> <a id="72354" class="Symbol">=</a> <a id="72356" href="Demos.HSP.html#72077" class="Bound">Î±</a><a id="72357" class="Symbol">}{</a><a id="72359" href="Demos.HSP.html#72079" class="Bound">Ïáµƒ</a><a id="72361" class="Symbol">}</a><a id="72362" href="Demos.HSP.html#72049" class="Bound">â„“</a> <a id="72364" href="Demos.HSP.html#72038" class="Bound">Î¹</a> <a id="72366" href="Demos.HSP.html#72060" class="Bound">ğ’¦</a><a id="72367" class="Symbol">)</a>
   <a id="72372" href="Demos.HSP.html#72332" class="Function">spA</a> <a id="72376" class="Symbol">=</a> <a id="72378" href="Demos.HSP.html#72204" class="Bound">â¨…A</a> <a id="72381" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72383" class="Symbol">(</a><a id="72384" href="Demos.HSP.html#72209" class="Bound">pâ¨…A</a> <a id="72388" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72390" href="Demos.HSP.html#72215" class="Bound">Aâ‰¤â¨…A</a><a id="72394" class="Symbol">)</a>
   <a id="72399" href="Demos.HSP.html#72399" class="Function">spKâŠ§pq</a> <a id="72406" class="Symbol">:</a> <a id="72408" href="Demos.HSP.html#66181" class="Function">S</a> <a id="72410" href="Demos.HSP.html#72128" class="Function">aâ„“Î¹</a> <a id="72414" class="Symbol">(</a><a id="72415" href="Demos.HSP.html#66293" class="Function">P</a> <a id="72417" href="Demos.HSP.html#72049" class="Bound">â„“</a> <a id="72419" href="Demos.HSP.html#72038" class="Bound">Î¹</a> <a id="72421" href="Demos.HSP.html#72060" class="Bound">ğ’¦</a><a id="72422" class="Symbol">)</a> <a id="72424" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="72426" href="Demos.HSP.html#72099" class="Bound">p</a> <a id="72428" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="72430" href="Demos.HSP.html#72101" class="Bound">q</a>
   <a id="72435" href="Demos.HSP.html#72399" class="Function">spKâŠ§pq</a> <a id="72442" class="Symbol">=</a> <a id="72444" href="Demos.HSP.html#71319" class="Function">S-id1</a><a id="72449" class="Symbol">{</a><a id="72450" class="Argument">â„“</a> <a id="72452" class="Symbol">=</a> <a id="72454" href="Demos.HSP.html#72128" class="Function">aâ„“Î¹</a><a id="72457" class="Symbol">}{</a><a id="72459" class="Argument">p</a> <a id="72461" class="Symbol">=</a> <a id="72463" href="Demos.HSP.html#72099" class="Bound">p</a><a id="72464" class="Symbol">}{</a><a id="72466" href="Demos.HSP.html#72101" class="Bound">q</a><a id="72467" class="Symbol">}</a> <a id="72469" class="Symbol">(</a><a id="72470" href="Demos.HSP.html#71821" class="Function">P-id1</a><a id="72475" class="Symbol">{</a><a id="72476" class="Argument">â„“</a> <a id="72478" class="Symbol">=</a> <a id="72480" href="Demos.HSP.html#72049" class="Bound">â„“</a><a id="72481" class="Symbol">}</a> <a id="72483" class="Symbol">{</a><a id="72484" class="Argument">ğ’¦</a> <a id="72486" class="Symbol">=</a> <a id="72488" href="Demos.HSP.html#72060" class="Bound">ğ’¦</a><a id="72489" class="Symbol">}{</a><a id="72491" class="Argument">p</a> <a id="72493" class="Symbol">=</a> <a id="72495" href="Demos.HSP.html#72099" class="Bound">p</a><a id="72496" class="Symbol">}{</a><a id="72498" href="Demos.HSP.html#72101" class="Bound">q</a><a id="72499" class="Symbol">}</a> <a id="72501" href="Demos.HSP.html#72194" class="Bound">Ïƒ</a><a id="72502" class="Symbol">)</a>
</pre>
\fi

%% -------------------------------------------------------------------------------------

\section{Free Algebras}
\label{free-algebras}
\paragraph*{The absolutely free algebra}
The term algebra \af{ğ‘»} \ab X is the \emph{absolutely free} (or \emph{initial})
\ab{S}-algebra. That is, for every \ab{ğ‘†}-algebra \ab{ğ‘¨}, the following hold.
\begin{itemize}
\item Every function from \ab{X} to \af{ğ•Œ[ \ab{ğ‘¨} ]} lifts to a homomorphism from \af{ğ‘»} \ab{X} to \ab{ğ‘¨}.
\item That homomorphism is unique.
\end{itemize}
We formalize the first of these in two steps.\footnote{\agdaalgebras also defines
 \af{free-lift-func} \as{:} \aof{ğ”»[~\af{ğ‘»}~\ab X~]}~\aor{âŸ¶}~\aof{ğ”»[~\ab{ğ‘¨}~]}
 for the analogous setoid function.}$^,$\footnote{For the proof of uniqueness,
see \ualmodule{Setoid.Terms.Properties}.}  First is the lifting (\af{free-lift}).
<pre class="Agda">

<a id="73362" class="Keyword">module</a> <a id="73369" href="Demos.HSP.html#73369" class="Module">_</a> <a id="73371" class="Symbol">{</a><a id="73372" href="Demos.HSP.html#73372" class="Bound">X</a> <a id="73374" class="Symbol">:</a> <a id="73376" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="73381" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="73382" class="Symbol">}{</a><a id="73384" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a> <a id="73386" class="Symbol">:</a> <a id="73388" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="73396" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="73398" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="73400" class="Symbol">}(</a><a id="73402" href="Demos.HSP.html#73402" class="Bound">h</a> <a id="73404" class="Symbol">:</a> <a id="73406" href="Demos.HSP.html#73372" class="Bound">X</a> <a id="73408" class="Symbol">â†’</a> <a id="73410" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="73413" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a> <a id="73415" href="Demos.HSP.html#23863" class="Function Operator">]</a><a id="73416" class="Symbol">)</a> <a id="73418" class="Keyword">where</a>
 <a id="73425" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="73435" class="Symbol">:</a> <a id="73437" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="73440" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="73442" href="Demos.HSP.html#73372" class="Bound">X</a> <a id="73444" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="73446" class="Symbol">â†’</a> <a id="73448" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="73451" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a> <a id="73453" href="Demos.HSP.html#23863" class="Function Operator">]</a>
 <a id="73456" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="73466" class="Symbol">(</a><a id="73467" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="73469" href="Demos.HSP.html#73469" class="Bound">x</a><a id="73470" class="Symbol">)</a>       <a id="73478" class="Symbol">=</a> <a id="73480" href="Demos.HSP.html#73402" class="Bound">h</a> <a id="73482" href="Demos.HSP.html#73469" class="Bound">x</a>
 <a id="73485" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="73495" class="Symbol">(</a><a id="73496" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="73501" href="Demos.HSP.html#73501" class="Bound">f</a> <a id="73503" href="Demos.HSP.html#73503" class="Bound">t</a><a id="73504" class="Symbol">)</a>  <a id="73507" class="Symbol">=</a> <a id="73509" class="Symbol">(</a><a id="73510" href="Demos.HSP.html#73501" class="Bound">f</a> <a id="73512" href="Demos.HSP.html#23921" class="Function Operator">Ì‚</a> <a id="73514" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a><a id="73515" class="Symbol">)</a> <a id="73517" class="Symbol">(Î»</a> <a id="73520" href="Demos.HSP.html#73520" class="Bound">i</a> <a id="73522" class="Symbol">â†’</a> <a id="73524" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="73534" class="Symbol">(</a><a id="73535" href="Demos.HSP.html#73503" class="Bound">t</a> <a id="73537" href="Demos.HSP.html#73520" class="Bound">i</a><a id="73538" class="Symbol">))</a>

</pre>
\ifshort\else
<pre class="Agda">
 <a id="73581" href="Demos.HSP.html#73581" class="Function">free-lift-func</a> <a id="73596" class="Symbol">:</a> <a id="73598" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="73601" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="73603" href="Demos.HSP.html#73372" class="Bound">X</a> <a id="73605" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="73607" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="73609" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="73612" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a> <a id="73614" href="Demos.HSP.html#23810" class="Function Operator">]</a>
 <a id="73617" href="Demos.HSP.html#73581" class="Function">free-lift-func</a> <a id="73632" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="73636" href="Demos.HSP.html#73636" class="Bound">x</a> <a id="73638" class="Symbol">=</a> <a id="73640" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="73650" href="Demos.HSP.html#73636" class="Bound">x</a>
 <a id="73653" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="73658" href="Demos.HSP.html#73581" class="Function">free-lift-func</a> <a id="73673" class="Symbol">=</a> <a id="73675" href="Demos.HSP.html#73764" class="Function">flcong</a>
  <a id="73684" class="Keyword">where</a>
  <a id="73692" class="Keyword">open</a> <a id="73697" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="73704" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="73707" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a> <a id="73709" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="73711" class="Keyword">using</a> <a id="73717" class="Symbol">(</a> <a id="73719" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="73723" class="Symbol">)</a> <a id="73725" class="Keyword">renaming</a> <a id="73734" class="Symbol">(</a> <a id="73736" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="73746" class="Symbol">to</a> <a id="73749" class="Function">reflexiveá´¬</a> <a id="73760" class="Symbol">)</a>
  <a id="73764" href="Demos.HSP.html#73764" class="Function">flcong</a> <a id="73771" class="Symbol">:</a> <a id="73773" class="Symbol">âˆ€</a> <a id="73775" class="Symbol">{</a><a id="73776" href="Demos.HSP.html#73776" class="Bound">s</a> <a id="73778" href="Demos.HSP.html#73778" class="Bound">t</a><a id="73779" class="Symbol">}</a> <a id="73781" class="Symbol">â†’</a> <a id="73783" href="Demos.HSP.html#73776" class="Bound">s</a> <a id="73785" href="Demos.HSP.html#50116" class="Datatype Operator">â‰ƒ</a> <a id="73787" href="Demos.HSP.html#73778" class="Bound">t</a> <a id="73789" class="Symbol">â†’</a> <a id="73791" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="73801" href="Demos.HSP.html#73776" class="Bound">s</a> <a id="73803" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="73805" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="73815" href="Demos.HSP.html#73778" class="Bound">t</a>
  <a id="73819" href="Demos.HSP.html#73764" class="Function">flcong</a> <a id="73826" class="Symbol">(</a><a id="73827" href="Demos.HSP.html#50160" class="InductiveConstructor">_â‰ƒ_.rfl</a> <a id="73835" href="Demos.HSP.html#73835" class="Bound">x</a><a id="73836" class="Symbol">)</a> <a id="73838" class="Symbol">=</a> <a id="73840" href="Demos.HSP.html#73749" class="Function">reflexiveá´¬</a> <a id="73851" class="Symbol">(</a><a id="73852" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">â‰¡.cong</a> <a id="73859" href="Demos.HSP.html#73402" class="Bound">h</a> <a id="73861" href="Demos.HSP.html#73835" class="Bound">x</a><a id="73862" class="Symbol">)</a>
  <a id="73866" href="Demos.HSP.html#73764" class="Function">flcong</a> <a id="73873" class="Symbol">(</a><a id="73874" href="Demos.HSP.html#50202" class="InductiveConstructor">_â‰ƒ_.gnl</a> <a id="73882" href="Demos.HSP.html#73882" class="Bound">x</a><a id="73883" class="Symbol">)</a> <a id="73885" class="Symbol">=</a> <a id="73887" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="73892" class="Symbol">(</a><a id="73893" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="73900" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a><a id="73901" class="Symbol">)</a> <a id="73903" class="Symbol">(</a><a id="73904" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="73911" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="73913" class="Symbol">(Î»</a> <a id="73916" href="Demos.HSP.html#73916" class="Bound">i</a> <a id="73918" class="Symbol">â†’</a> <a id="73920" href="Demos.HSP.html#73764" class="Function">flcong</a> <a id="73927" class="Symbol">(</a><a id="73928" href="Demos.HSP.html#73882" class="Bound">x</a> <a id="73930" href="Demos.HSP.html#73916" class="Bound">i</a><a id="73931" class="Symbol">)))</a>

</pre>
\fi
\ifshort\else
At the base step, when the term has the form \aic{â„Š}
\ab x, the free lift of \ab h agrees with \ab h; at the inductive step, when the
term has the form \aic{node} \ab f \ab t, we assume (the induction hypothesis)
that the image of each subterm \ab t \ab i under the free lift of \ab h is known
and the free lift is defined by applying \ab f \aof{Ì‚} \ab{ğ‘¨} to these images.
\fi
Then the lift so defined is shown to be a homomorphism.

<pre class="Agda">

 <a id="74414" href="Demos.HSP.html#74414" class="Function">lift-hom</a> <a id="74423" class="Symbol">:</a> <a id="74425" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="74429" class="Symbol">(</a><a id="74430" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="74432" href="Demos.HSP.html#73372" class="Bound">X</a><a id="74433" class="Symbol">)</a> <a id="74435" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a>
 <a id="74438" href="Demos.HSP.html#74414" class="Function">lift-hom</a> <a id="74447" class="Symbol">=</a> <a id="74449" href="Demos.HSP.html#73581" class="Function">free-lift-func</a> <a id="74464" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>
   <a id="74469" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="74475" class="Symbol">(Î»{</a><a id="74478" href="Demos.HSP.html#74478" class="Bound">_</a><a id="74479" class="Symbol">}{</a><a id="74481" href="Demos.HSP.html#74481" class="Bound">a</a><a id="74482" class="Symbol">}</a> <a id="74484" class="Symbol">â†’</a> <a id="74486" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="74491" class="Symbol">(</a><a id="74492" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="74499" href="Demos.HSP.html#73384" class="Bound">ğ‘¨</a><a id="74500" class="Symbol">)</a> <a id="74502" class="Symbol">(</a><a id="74503" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="74510" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="74512" class="Symbol">(Î»</a> <a id="74515" href="Demos.HSP.html#74515" class="Bound">i</a> <a id="74517" class="Symbol">â†’</a> <a id="74519" class="Symbol">(</a><a id="74520" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="74525" href="Demos.HSP.html#73581" class="Function">free-lift-func</a><a id="74539" class="Symbol">){</a><a id="74541" href="Demos.HSP.html#74481" class="Bound">a</a> <a id="74543" href="Demos.HSP.html#74515" class="Bound">i</a><a id="74544" class="Symbol">}</a> <a id="74546" href="Demos.HSP.html#50474" class="Function">â‰ƒ-isRefl</a><a id="74554" class="Symbol">)))</a>

</pre>

It turns out that the interpretation of a term \ab p in an environment \ab{Î·} is the same
as the free lift of \ab{Î·} evaluated at \ab p. We apply this fact a number of times in the sequel.

\ifshort\else
<pre class="Agda">

<a id="74789" class="Keyword">module</a> <a id="74796" href="Demos.HSP.html#74796" class="Module">_</a> <a id="74798" class="Symbol">{</a><a id="74799" href="Demos.HSP.html#74799" class="Bound">X</a> <a id="74801" class="Symbol">:</a> <a id="74803" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="74808" href="Demos.HSP.html#8445" class="Generalizable">Ï‡</a><a id="74809" class="Symbol">}{</a><a id="74811" href="Demos.HSP.html#74811" class="Bound">ğ‘¨</a> <a id="74813" class="Symbol">:</a> <a id="74815" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="74823" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="74825" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="74827" class="Symbol">}</a> <a id="74829" class="Keyword">where</a>
 <a id="74836" class="Keyword">open</a> <a id="74841" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="74848" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="74851" href="Demos.HSP.html#74811" class="Bound">ğ‘¨</a> <a id="74853" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="74856" class="Keyword">using</a> <a id="74862" class="Symbol">(</a> <a id="74864" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="74868" class="Symbol">;</a> <a id="74870" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="74875" class="Symbol">)</a>
 <a id="74878" class="Keyword">open</a> <a id="74883" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="74895" href="Demos.HSP.html#74811" class="Bound">ğ‘¨</a>  <a id="74898" class="Keyword">using</a> <a id="74904" class="Symbol">(</a> <a id="74906" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="74910" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="74942" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a> <a id="74959" class="Symbol">:</a> <a id="74961" class="Symbol">(</a><a id="74962" href="Demos.HSP.html#74962" class="Bound">Î·</a> <a id="74964" class="Symbol">:</a> <a id="74966" href="Demos.HSP.html#74799" class="Bound">X</a> <a id="74968" class="Symbol">â†’</a> <a id="74970" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="74973" href="Demos.HSP.html#74811" class="Bound">ğ‘¨</a> <a id="74975" href="Demos.HSP.html#23863" class="Function Operator">]</a><a id="74976" class="Symbol">)(</a><a id="74978" href="Demos.HSP.html#74978" class="Bound">p</a> <a id="74980" class="Symbol">:</a> <a id="74982" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="74987" href="Demos.HSP.html#74799" class="Bound">X</a><a id="74988" class="Symbol">)</a> <a id="74990" class="Symbol">â†’</a> <a id="74992" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="74994" href="Demos.HSP.html#74978" class="Bound">p</a> <a id="74996" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="74998" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="75002" href="Demos.HSP.html#74962" class="Bound">Î·</a> <a id="75004" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="75006" class="Symbol">(</a><a id="75007" href="Demos.HSP.html#73425" class="Function">free-lift</a><a id="75016" class="Symbol">{</a><a id="75017" class="Argument">ğ‘¨</a> <a id="75019" class="Symbol">=</a> <a id="75021" href="Demos.HSP.html#74811" class="Bound">ğ‘¨</a><a id="75022" class="Symbol">}</a> <a id="75024" href="Demos.HSP.html#74962" class="Bound">Î·</a><a id="75025" class="Symbol">)</a> <a id="75027" href="Demos.HSP.html#74978" class="Bound">p</a>
 <a id="75030" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a> <a id="75047" href="Demos.HSP.html#75047" class="Bound">Î·</a> <a id="75049" class="Symbol">(</a><a id="75050" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="75052" href="Demos.HSP.html#75052" class="Bound">x</a><a id="75053" class="Symbol">)</a>       <a id="75061" class="Symbol">=</a> <a id="75063" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="75069" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a> <a id="75086" href="Demos.HSP.html#75086" class="Bound">Î·</a> <a id="75088" class="Symbol">(</a><a id="75089" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="75094" href="Demos.HSP.html#75094" class="Bound">f</a> <a id="75096" href="Demos.HSP.html#75096" class="Bound">t</a><a id="75097" class="Symbol">)</a>  <a id="75100" class="Symbol">=</a> <a id="75102" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="75107" class="Symbol">(</a><a id="75108" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="75115" href="Demos.HSP.html#74811" class="Bound">ğ‘¨</a><a id="75116" class="Symbol">)</a> <a id="75118" class="Symbol">(</a><a id="75119" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="75126" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="75128" class="Symbol">(</a><a id="75129" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a> <a id="75146" href="Demos.HSP.html#75086" class="Bound">Î·</a><a id="75147" class="Symbol">)</a> <a id="75149" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="75151" href="Demos.HSP.html#75096" class="Bound">t</a><a id="75152" class="Symbol">)</a>
</pre>

\paragraph*{The relatively free algebra in theory}
Here we mathematically describe, for a given class \ab{ğ’¦} of \ab{ğ‘†}-algebras, the
\emph{relatively free algebra} in \af{S} (\af{P} \ab{ğ’¦}) over \ab X, with the
type theoretic version to follow in the next section.

Recall that the term algebra \T{X} is the \emph{free} class of all
\ab{ğ‘†}-algebras. Given an arbitrary class \ab{ğ’¦} of \ab{ğ‘†}-algebras, we can't expect that
\T{X} belongs to \ab{ğ’¦}, so, in general, we say that \T{X} is free \emph{for} \ab{ğ’¦}.
\ifshort\else
Indeed, it might not be possible to find a free algebra that belongs to \ab{ğ’¦}.
\fi
However, for any class \ab{ğ’¦} we can construct an algebra that is free for \ab{ğ’¦}
and belongs to the class \af{S} (\af{P} \ab{ğ’¦}), and for most applications this suffices.

Construction of the free algebra in \af{S} (\af{P} \ab{ğ’¦}) usually
proceeds by taking the quotient of \T{X} modulo the congruence relation \afld{â‰ˆ} := \af{â‹‚}\{\ab{Î¸} \af{âˆˆ} \af{Con} (\T{X}) : \T{X} \af{/} \ab{Î¸} \af{âˆˆ} \af{S}
\ab{ğ’¦}\}.\footnote{\af{Con} (\T{X}) denotes the congruences of \T{X}.}$^,$\footnote{Alternatively,
we could let \ab{â„°} = \af{Th} \ab{ğ’¦} and take \afld{â‰ˆ} to be the least equivalence relation
on T(X) such that (1) âˆ€ (\ab p , \ab q) \af{âˆˆ} \af{Th} \ab{ğ’¦}, âˆ€ \ab{Ï} : \ab X \as{â†’} \Term{X}, \af{âŸ¦~\ab p~âŸ§} \afld{âŸ¨\$âŸ©} \ab{Ï} \afld{â‰ˆ} \af{âŸ¦~\ab q~âŸ§} \afld{âŸ¨\$âŸ©} \ab{Ï}, and (2) \afld{â‰ˆ} âˆˆ \af{Con} \T{X}}
%
\begin{comment}
Equivalently, we could let \ab{â„°} = \af{Th} \ab{ğ’¦} and take \afld{â‰ˆ} to be the least equivalence relation
on the domain of \T{X} such that
\begin{enumerate}
\item for every equation (\ab p , \ab q) \af{âˆˆ} \af{Th} \ab{ğ’¦} and every
environment \ab{Ï} : \ab X \as{â†’} \Term{X}, we have\\
\af{âŸ¦~\ab p~âŸ§} \afld{âŸ¨\$âŸ©} \ab{Ï} \afld{â‰ˆ} \af{âŸ¦~\ab q~âŸ§} \afld{âŸ¨\$âŸ©} \ab{Ï}, and
\item \afld{â‰ˆ} is a congruence of \T{X}; that is, for every operation symbol \ab
f : \af{âˆ£~\ab{ğ‘†}~âˆ£}, and for all tuples \ab{s} \ab{t} : \af{âˆ¥~\ab{ğ‘†}~âˆ¥} \ab f
â†’ \Term{X}, the following implication holds:\footnote{Here all
interpretations, denoted by \af{âŸ¦\au{}âŸ§}, are with respect to \T{X}.}\\[-8pt]

(âˆ€ i â†’ \af{âŸ¦~\ab{s}~\ab i~âŸ§}~\afld{âŸ¨\$âŸ©}~\ab{Ï}~\afld{â‰ˆ}~\af{âŸ¦~\ab{t}~\ab
i~âŸ§}~\afld{âŸ¨\$âŸ©}~\ab{Ï})
\as{â†’} \af{âŸ¦~\ab f~\ab s~âŸ§}~\afld{âŸ¨\$âŸ©}~\ab{Ï}~\afld{â‰ˆ}~\af{âŸ¦~\ab f~\ab
t~âŸ§}~\afld{âŸ¨\$âŸ©}~\ab{Ï}\\[-8pt]
\end{comment}
%
The \defn{relatively free algebra over} \ab{X} (relative to
\ab{ğ’¦}) is defined to be the quotient \Free{X} := \T{X}~\af{/}~\afld{â‰ˆ}.
Evidently, \Free{X} is a subdirect product of the algebras in \{\T{X}~\af{/}~\ab{Î¸}\!\},
where \ab{Î¸} ranges over congruences modulo which \T{X} belongs to \af{S}~\ab{ğ’¦}.
In particular, \Free{X} embeds in a product of members of \af{S}~\ab{ğ’¦}, so
\Free{X} \af{âˆˆ} \af{S}(\af{P}(\af{S}~\ab{ğ’¦})) âŠ† \af{S}(\af{P}~\ab{ğ’¦}). It follows
that \Free{X} satisfies the identities in \af{Th} \ab{ğ’¦} (those modeled by all members of
\ab{ğ’¦}).  Indeed, for each pair \ab p \ab q : \Term{X}, if \ab{ğ’¦} \af{âŠ«} \ab p \af{â‰ˆ} \ab
q, then \ab p and \ab q belong to the same \afld{â‰ˆ}-class, so \ab p and \ab q are
identified in \Free{X}. \ifshort\else (Notice that \afld{â‰ˆ} may be empty, in which case
\T{X}~\af{/}~\afld{â‰ˆ} is trivial.) \fi

\paragraph*{The relatively free algebra in \agda}
%Our approach looks a bit different from the informal one described above, because we
%represent quotients as setoids, but the end result is the same.
We start with a type \ab{â„°} representing a collection of identities and, instead of
forming a quotient, we take the domain of the free algebra to be a setoid whose
\afld{Carrier} is the type \Term{X} of {ğ‘†}-terms in \ab X and whose equivalence relation
includes all pairs (\ab p , \ab q) \af{âˆˆ} \Term{X} \af{Ã—} \Term{X} such that \ab p \aod{â‰ˆ}
\ab q is derivable from \ab{â„°}; that is, \ab{â„°} \aod{âŠ¢} \ab X \aod{â–¹} \ab p \aod{â‰ˆ} \ab q.
Observe that elements of this setoid are equal iff they belong to the same equivalence
class of the congruence \afld{â‰ˆ} defined above.  Therefore, the setoid so defined, which
we denote by \Free{X}, represents the quotient \T{X}~\af{/}~\afld{â‰ˆ}.
Finally, the interpretation of an operation in the free algebra is simply the operation
itself, which works since \ab{â„°} \aod{âŠ¢} \ab X \aod{â–¹\au{}â‰ˆ\au{}} is a congruence
relation (see also~\cite{Abel:2021}).

<pre class="Agda">

<a id="79434" class="Keyword">module</a> <a id="FreeAlgebra"></a><a id="79441" href="Demos.HSP.html#79441" class="Module">FreeAlgebra</a> <a id="79453" class="Symbol">{</a><a id="79454" href="Demos.HSP.html#79454" class="Bound">Ï‡</a> <a id="79456" class="Symbol">:</a> <a id="79458" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="79463" class="Symbol">}(</a><a id="79465" href="Demos.HSP.html#79465" class="Bound">â„°</a> <a id="79467" class="Symbol">:</a> <a id="79469" class="Symbol">{</a><a id="79470" href="Demos.HSP.html#79470" class="Bound">Y</a> <a id="79472" class="Symbol">:</a> <a id="79474" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="79479" href="Demos.HSP.html#79454" class="Bound">Ï‡</a><a id="79480" class="Symbol">}</a> <a id="79482" class="Symbol">â†’</a> <a id="79484" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="79489" class="Symbol">(</a><a id="79490" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="79495" href="Demos.HSP.html#79470" class="Bound">Y</a> <a id="79497" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="79499" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="79504" href="Demos.HSP.html#79470" class="Bound">Y</a><a id="79505" class="Symbol">)</a> <a id="79507" class="Symbol">(</a><a id="79508" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="79511" href="Demos.HSP.html#79454" class="Bound">Ï‡</a><a id="79512" class="Symbol">))</a> <a id="79515" class="Keyword">where</a>

 <a id="FreeAlgebra.FreeDomain"></a><a id="79523" href="Demos.HSP.html#79523" class="Function">FreeDomain</a> <a id="79534" class="Symbol">:</a> <a id="79536" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="79541" href="Demos.HSP.html#79454" class="Bound">Ï‡</a> <a id="79543" class="Symbol">â†’</a> <a id="79545" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="79552" class="Symbol">_</a> <a id="79554" class="Symbol">_</a>
 <a id="79557" href="Demos.HSP.html#79523" class="Function">FreeDomain</a> <a id="79568" href="Demos.HSP.html#79568" class="Bound">X</a> <a id="79570" class="Symbol">=</a>
  <a id="79574" class="Keyword">record</a>  <a id="79582" class="Symbol">{</a> <a id="79584" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="79599" class="Symbol">=</a> <a id="79601" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="79606" href="Demos.HSP.html#79568" class="Bound">X</a>
          <a id="79618" class="Symbol">;</a> <a id="79620" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a>            <a id="79635" class="Symbol">=</a> <a id="79637" href="Demos.HSP.html#79465" class="Bound">â„°</a> <a id="79639" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="79641" href="Demos.HSP.html#79568" class="Bound">X</a> <a id="79643" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹_â‰ˆ_</a>
          <a id="79658" class="Symbol">;</a> <a id="79660" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="79675" class="Symbol">=</a> <a id="79677" class="Keyword">record</a> <a id="79684" class="Symbol">{</a> <a id="79686" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="79691" class="Symbol">=</a> <a id="79693" href="Demos.HSP.html#61871" class="InductiveConstructor">reflexive</a> <a id="79703" class="Symbol">;</a> <a id="79705" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="79709" class="Symbol">=</a> <a id="79711" href="Demos.HSP.html#61913" class="InductiveConstructor">symmetric</a> <a id="79721" class="Symbol">;</a> <a id="79723" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="79729" class="Symbol">=</a> <a id="79731" href="Demos.HSP.html#61971" class="InductiveConstructor">transitive</a> <a id="79742" class="Symbol">}</a> <a id="79744" class="Symbol">}</a>

 <a id="FreeAlgebra.ğ”½[_]"></a><a id="79748" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[_]</a> <a id="79753" class="Symbol">:</a> <a id="79755" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="79760" href="Demos.HSP.html#79454" class="Bound">Ï‡</a> <a id="79762" class="Symbol">â†’</a> <a id="79764" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="79772" class="Symbol">(</a><a id="79773" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="79776" href="Demos.HSP.html#79454" class="Bound">Ï‡</a><a id="79777" class="Symbol">)</a> <a id="79779" class="Symbol">_</a>
 <a id="79782" href="Demos.HSP.html#22917" class="Field">Domain</a> <a id="79789" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="79792" href="Demos.HSP.html#79792" class="Bound">X</a> <a id="79794" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="79796" class="Symbol">=</a> <a id="79798" href="Demos.HSP.html#79523" class="Function">FreeDomain</a> <a id="79809" href="Demos.HSP.html#79792" class="Bound">X</a>
 <a id="79812" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="79819" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="79822" href="Demos.HSP.html#79822" class="Bound">X</a> <a id="79824" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="79826" class="Symbol">=</a> <a id="79828" href="Demos.HSP.html#79847" class="Function">FreeInterp</a> <a id="79839" class="Keyword">where</a>
  <a id="79847" href="Demos.HSP.html#79847" class="Function">FreeInterp</a> <a id="79858" class="Symbol">:</a> <a id="79860" class="Symbol">âˆ€</a> <a id="79862" class="Symbol">{</a><a id="79863" href="Demos.HSP.html#79863" class="Bound">X</a><a id="79864" class="Symbol">}</a> <a id="79866" class="Symbol">â†’</a> <a id="79868" href="Demos.HSP.html#21347" class="Function Operator">âŸ¨</a> <a id="79870" href="Demos.HSP.html#6378" class="Bound">ğ‘†</a> <a id="79872" href="Demos.HSP.html#21347" class="Function Operator">âŸ©</a> <a id="79874" class="Symbol">(</a><a id="79875" href="Demos.HSP.html#79523" class="Function">FreeDomain</a> <a id="79886" href="Demos.HSP.html#79863" class="Bound">X</a><a id="79887" class="Symbol">)</a> <a id="79889" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="79891" href="Demos.HSP.html#79523" class="Function">FreeDomain</a> <a id="79902" href="Demos.HSP.html#79863" class="Bound">X</a>
  <a id="79906" href="Demos.HSP.html#79847" class="Function">FreeInterp</a> <a id="79917" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="79921" class="Symbol">(</a><a id="79922" href="Demos.HSP.html#79922" class="Bound">f</a> <a id="79924" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="79926" href="Demos.HSP.html#79926" class="Bound">ts</a><a id="79928" class="Symbol">)</a>       <a id="79936" class="Symbol">=</a> <a id="79938" href="Demos.HSP.html#49749" class="InductiveConstructor">node</a> <a id="79943" href="Demos.HSP.html#79922" class="Bound">f</a> <a id="79945" href="Demos.HSP.html#79926" class="Bound">ts</a>
  <a id="79950" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="79955" href="Demos.HSP.html#79847" class="Function">FreeInterp</a> <a id="79966" class="Symbol">(</a><a id="79967" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="79974" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="79976" href="Demos.HSP.html#79976" class="Bound">h</a><a id="79977" class="Symbol">)</a>  <a id="79980" class="Symbol">=</a> <a id="79982" href="Demos.HSP.html#61642" class="InductiveConstructor">app</a> <a id="79986" href="Demos.HSP.html#79976" class="Bound">h</a>
</pre>

\paragraph*{The natural epimorphism} % from ğ‘» X to ğ”½[ X ]}
We now define the natural epimorphism from \T{X} onto \Free{X} %(= \T{X}~\af{/}~\afld{â‰ˆ})
and prove that its kernel is contained in the collection of identities modeled
by \af{V} \ab{ğ’¦}.%(which we represent by \af{Th} (\af{V} \ab{ğ’¦})).
\ifshort%
\footnote{The \AgdaFunction{HomReduct} method of the \ar{IsEpi} record type merely extracts the \af{hom} part of an epimorphism.}
\fi

<pre class="Agda">

<a id="80454" class="Keyword">module</a> <a id="FreeHom"></a><a id="80461" href="Demos.HSP.html#80461" class="Module">FreeHom</a> <a id="80469" class="Symbol">{</a><a id="80470" href="Demos.HSP.html#80470" class="Bound">ğ’¦</a> <a id="80472" class="Symbol">:</a> <a id="80474" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="80478" class="Symbol">(</a><a id="80479" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="80487" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="80489" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="80491" class="Symbol">)</a> <a id="80493" class="Symbol">(</a><a id="80494" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="80496" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="80498" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="80501" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="80503" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="80506" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="80507" class="Symbol">)}</a> <a id="80510" class="Keyword">where</a>
 <a id="80517" class="Keyword">private</a> <a id="FreeHom.c"></a><a id="80525" href="Demos.HSP.html#80525" class="Function">c</a> <a id="80527" class="Symbol">=</a> <a id="80529" href="Demos.HSP.html#80487" class="Bound">Î±</a> <a id="80531" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="80533" href="Demos.HSP.html#80489" class="Bound">Ïáµƒ</a> <a id="80536" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="80538" href="Demos.HSP.html#80506" class="Bound">â„“</a> <a id="80540" class="Symbol">;</a> <a id="FreeHom.Î¹"></a><a id="80542" href="Demos.HSP.html#80542" class="Function">Î¹</a> <a id="80544" class="Symbol">=</a> <a id="80546" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="80549" href="Demos.HSP.html#80525" class="Function">c</a>  <a id="80552" class="Symbol">;</a>  <a id="80555" class="Keyword">open</a> <a id="80560" href="Demos.HSP.html#79441" class="Module">FreeAlgebra</a> <a id="80572" class="Symbol">{</a><a id="80573" class="Argument">Ï‡</a> <a id="80575" class="Symbol">=</a> <a id="80577" href="Demos.HSP.html#80525" class="Function">c</a><a id="80578" class="Symbol">}</a> <a id="80580" class="Symbol">(</a><a id="80581" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="80584" href="Demos.HSP.html#80470" class="Bound">ğ’¦</a><a id="80585" class="Symbol">)</a> <a id="80587" class="Keyword">using</a> <a id="80593" class="Symbol">(</a> <a id="80595" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[_]</a> <a id="80600" class="Symbol">)</a>

 <a id="FreeHom.epiF[_]"></a><a id="80604" href="Demos.HSP.html#80604" class="Function Operator">epiF[_]</a> <a id="80612" class="Symbol">:</a> <a id="80614" class="Symbol">(</a><a id="80615" href="Demos.HSP.html#80615" class="Bound">X</a> <a id="80617" class="Symbol">:</a> <a id="80619" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="80624" href="Demos.HSP.html#80525" class="Function">c</a><a id="80625" class="Symbol">)</a> <a id="80627" class="Symbol">â†’</a> <a id="80629" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="80633" class="Symbol">(</a><a id="80634" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="80636" href="Demos.HSP.html#80615" class="Bound">X</a><a id="80637" class="Symbol">)</a> <a id="80639" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="80642" href="Demos.HSP.html#80615" class="Bound">X</a> <a id="80644" href="Demos.HSP.html#79748" class="Function Operator">]</a>
 <a id="80647" href="Demos.HSP.html#80604" class="Function Operator">epiF[</a> <a id="80653" href="Demos.HSP.html#80653" class="Bound">X</a> <a id="80655" href="Demos.HSP.html#80604" class="Function Operator">]</a> <a id="80657" class="Symbol">=</a> <a id="80659" href="Demos.HSP.html#80967" class="Function">h</a> <a id="80661" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="80663" href="Demos.HSP.html#81034" class="Function">hepi</a>
  <a id="80670" class="Keyword">where</a>
  <a id="80678" class="Keyword">open</a> <a id="80683" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="80690" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="80693" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="80695" href="Demos.HSP.html#80653" class="Bound">X</a> <a id="80697" href="Demos.HSP.html#23810" class="Function Operator">]</a>     <a id="80703" class="Keyword">using</a> <a id="80709" class="Symbol">()</a>        <a id="80719" class="Keyword">renaming</a> <a id="80728" class="Symbol">(</a> <a id="80730" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="80734" class="Symbol">to</a> <a id="80737" class="Field Operator">_â‰ˆâ‚€_</a>  <a id="80743" class="Symbol">;</a> <a id="80745" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="80750" class="Symbol">to</a> <a id="80753" class="Function">refláµ€</a> <a id="80759" class="Symbol">)</a>
  <a id="80763" class="Keyword">open</a> <a id="80768" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="80775" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="80778" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="80781" href="Demos.HSP.html#80653" class="Bound">X</a> <a id="80783" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="80785" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="80788" class="Keyword">using</a> <a id="80794" class="Symbol">(</a> <a id="80796" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="80801" class="Symbol">)</a>  <a id="80804" class="Keyword">renaming</a> <a id="80813" class="Symbol">(</a> <a id="80815" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="80819" class="Symbol">to</a> <a id="80822" class="Field Operator">_â‰ˆâ‚_</a>  <a id="80828" class="Symbol">)</a>

  <a id="80833" href="Demos.HSP.html#80833" class="Function">con</a> <a id="80837" class="Symbol">:</a> <a id="80839" class="Symbol">âˆ€</a> <a id="80841" class="Symbol">{</a><a id="80842" href="Demos.HSP.html#80842" class="Bound">x</a> <a id="80844" href="Demos.HSP.html#80844" class="Bound">y</a><a id="80845" class="Symbol">}</a> <a id="80847" class="Symbol">â†’</a> <a id="80849" href="Demos.HSP.html#80842" class="Bound">x</a> <a id="80851" href="Demos.HSP.html#80737" class="Function Operator">â‰ˆâ‚€</a> <a id="80854" href="Demos.HSP.html#80844" class="Bound">y</a> <a id="80856" class="Symbol">â†’</a> <a id="80858" href="Demos.HSP.html#80842" class="Bound">x</a> <a id="80860" href="Demos.HSP.html#80822" class="Function Operator">â‰ˆâ‚</a> <a id="80863" href="Demos.HSP.html#80844" class="Bound">y</a>
  <a id="80867" href="Demos.HSP.html#80833" class="Function">con</a> <a id="80871" class="Symbol">(</a><a id="80872" href="Demos.HSP.html#50160" class="InductiveConstructor">rfl</a> <a id="80876" class="Symbol">{</a><a id="80877" href="Demos.HSP.html#80877" class="Bound">x</a><a id="80878" class="Symbol">}{</a><a id="80880" href="Demos.HSP.html#80880" class="Bound">y</a><a id="80881" class="Symbol">}</a> <a id="80883" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="80889" class="Symbol">)</a> <a id="80891" class="Symbol">=</a> <a id="80893" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
  <a id="80900" href="Demos.HSP.html#80833" class="Function">con</a> <a id="80904" class="Symbol">(</a><a id="80905" href="Demos.HSP.html#50202" class="InductiveConstructor">gnl</a> <a id="80909" class="Symbol">{</a><a id="80910" href="Demos.HSP.html#80910" class="Bound">f</a><a id="80911" class="Symbol">}{</a><a id="80913" href="Demos.HSP.html#80913" class="Bound">s</a><a id="80914" class="Symbol">}{</a><a id="80916" href="Demos.HSP.html#80916" class="Bound">t</a><a id="80917" class="Symbol">}</a> <a id="80919" href="Demos.HSP.html#80919" class="Bound">x</a><a id="80920" class="Symbol">)</a> <a id="80922" class="Symbol">=</a> <a id="80924" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="80929" class="Symbol">(</a><a id="80930" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="80937" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="80940" href="Demos.HSP.html#80653" class="Bound">X</a> <a id="80942" href="Demos.HSP.html#79748" class="Function Operator">]</a><a id="80943" class="Symbol">)</a> <a id="80945" class="Symbol">(</a><a id="80946" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="80953" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="80955" href="Demos.HSP.html#80833" class="Function">con</a> <a id="80959" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="80961" href="Demos.HSP.html#80919" class="Bound">x</a><a id="80962" class="Symbol">)</a>

  <a id="80967" href="Demos.HSP.html#80967" class="Function">h</a> <a id="80969" class="Symbol">:</a> <a id="80971" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="80974" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="80976" href="Demos.HSP.html#80653" class="Bound">X</a> <a id="80978" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="80980" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="80982" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="80985" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="80988" href="Demos.HSP.html#80653" class="Bound">X</a> <a id="80990" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="80992" href="Demos.HSP.html#23810" class="Function Operator">]</a>
  <a id="80996" href="Demos.HSP.html#80967" class="Function">h</a> <a id="80998" class="Symbol">=</a> <a id="81000" class="Keyword">record</a> <a id="81007" class="Symbol">{</a> <a id="81009" href="Function.Bundles.html#1919" class="Field">f</a> <a id="81011" class="Symbol">=</a> <a id="81013" href="Function.Base.html#615" class="Function">id</a> <a id="81016" class="Symbol">;</a> <a id="81018" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="81023" class="Symbol">=</a> <a id="81025" href="Demos.HSP.html#80833" class="Function">con</a> <a id="81029" class="Symbol">}</a>

  <a id="81034" href="Demos.HSP.html#81034" class="Function">hepi</a> <a id="81039" class="Symbol">:</a> <a id="81041" href="Demos.HSP.html#33827" class="Record">IsEpi</a> <a id="81047" class="Symbol">(</a><a id="81048" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="81050" href="Demos.HSP.html#80653" class="Bound">X</a><a id="81051" class="Symbol">)</a> <a id="81053" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="81056" href="Demos.HSP.html#80653" class="Bound">X</a> <a id="81058" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="81060" href="Demos.HSP.html#80967" class="Function">h</a>
  <a id="81064" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="81075" class="Symbol">(</a><a id="81076" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="81082" href="Demos.HSP.html#81034" class="Function">hepi</a><a id="81086" class="Symbol">)</a> <a id="81088" class="Symbol">=</a> <a id="81090" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="81095" href="Demos.HSP.html#80967" class="Function">h</a> <a id="81097" href="Demos.HSP.html#80753" class="Function">refláµ€</a>
  <a id="81105" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="81118" href="Demos.HSP.html#81034" class="Function">hepi</a> <a id="81123" class="Symbol">{</a><a id="81124" href="Demos.HSP.html#81124" class="Bound">y</a><a id="81125" class="Symbol">}</a> <a id="81127" class="Symbol">=</a> <a id="81129" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="81132" href="Demos.HSP.html#81124" class="Bound">y</a> <a id="81134" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="FreeHom.homF[_]"></a><a id="81141" href="Demos.HSP.html#81141" class="Function Operator">homF[_]</a> <a id="81149" class="Symbol">:</a> <a id="81151" class="Symbol">(</a><a id="81152" href="Demos.HSP.html#81152" class="Bound">X</a> <a id="81154" class="Symbol">:</a> <a id="81156" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="81161" href="Demos.HSP.html#80525" class="Function">c</a><a id="81162" class="Symbol">)</a> <a id="81164" class="Symbol">â†’</a> <a id="81166" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="81170" class="Symbol">(</a><a id="81171" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="81173" href="Demos.HSP.html#81152" class="Bound">X</a><a id="81174" class="Symbol">)</a> <a id="81176" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="81179" href="Demos.HSP.html#81152" class="Bound">X</a> <a id="81181" href="Demos.HSP.html#79748" class="Function Operator">]</a>
 <a id="81184" href="Demos.HSP.html#81141" class="Function Operator">homF[</a> <a id="81190" href="Demos.HSP.html#81190" class="Bound">X</a> <a id="81192" href="Demos.HSP.html#81141" class="Function Operator">]</a> <a id="81194" class="Symbol">=</a> <a id="81196" href="Demos.HSP.html#33956" class="Function">IsEpi.HomReduct</a> <a id="81212" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="81214" href="Demos.HSP.html#80604" class="Function Operator">epiF[</a> <a id="81220" href="Demos.HSP.html#81190" class="Bound">X</a> <a id="81222" href="Demos.HSP.html#80604" class="Function Operator">]</a> <a id="81224" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>

 <a id="FreeHom.kernel-in-theory"></a><a id="81228" href="Demos.HSP.html#81228" class="Function">kernel-in-theory</a> <a id="81245" class="Symbol">:</a> <a id="81247" class="Symbol">{</a><a id="81248" href="Demos.HSP.html#81248" class="Bound">X</a> <a id="81250" class="Symbol">:</a> <a id="81252" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="81257" href="Demos.HSP.html#80525" class="Function">c</a><a id="81258" class="Symbol">}</a> <a id="81260" class="Symbol">â†’</a> <a id="81262" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="81266" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="81268" href="Demos.HSP.html#81141" class="Function Operator">homF[</a> <a id="81274" href="Demos.HSP.html#81248" class="Bound">X</a> <a id="81276" href="Demos.HSP.html#81141" class="Function Operator">]</a> <a id="81278" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="81280" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="81282" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="81285" class="Symbol">(</a><a id="81286" href="Demos.HSP.html#66755" class="Function">V</a> <a id="81288" href="Demos.HSP.html#80506" class="Bound">â„“</a> <a id="81290" href="Demos.HSP.html#80542" class="Function">Î¹</a> <a id="81292" href="Demos.HSP.html#80470" class="Bound">ğ’¦</a><a id="81293" class="Symbol">)</a>
 <a id="81296" href="Demos.HSP.html#81228" class="Function">kernel-in-theory</a> <a id="81313" class="Symbol">{</a><a id="81314" class="Argument">X</a> <a id="81316" class="Symbol">=</a> <a id="81318" href="Demos.HSP.html#81318" class="Bound">X</a><a id="81319" class="Symbol">}</a> <a id="81321" class="Symbol">{</a><a id="81322" href="Demos.HSP.html#81322" class="Bound">p</a> <a id="81324" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="81326" href="Demos.HSP.html#81326" class="Bound">q</a><a id="81327" class="Symbol">}</a> <a id="81329" href="Demos.HSP.html#81329" class="Bound">pKq</a> <a id="81333" href="Demos.HSP.html#81333" class="Bound">ğ‘¨</a> <a id="81335" href="Demos.HSP.html#81335" class="Bound">vkA</a> <a id="81339" class="Symbol">=</a> <a id="81341" href="Demos.HSP.html#72151" class="Function">V-id1</a> <a id="81347" href="Demos.HSP.html#80506" class="Bound">â„“</a> <a id="81349" class="Symbol">{</a><a id="81350" class="Argument">p</a> <a id="81352" class="Symbol">=</a> <a id="81354" href="Demos.HSP.html#81322" class="Bound">p</a><a id="81355" class="Symbol">}{</a><a id="81357" href="Demos.HSP.html#81326" class="Bound">q</a><a id="81358" class="Symbol">}</a> <a id="81360" class="Symbol">(</a><a id="81361" href="Demos.HSP.html#81384" class="Function">Î¶</a> <a id="81363" href="Demos.HSP.html#81329" class="Bound">pKq</a><a id="81366" class="Symbol">)</a> <a id="81368" href="Demos.HSP.html#81333" class="Bound">ğ‘¨</a> <a id="81370" href="Demos.HSP.html#81335" class="Bound">vkA</a>
  <a id="81376" class="Keyword">where</a>
  <a id="81384" href="Demos.HSP.html#81384" class="Function">Î¶</a> <a id="81386" class="Symbol">:</a> <a id="81388" class="Symbol">âˆ€{</a><a id="81390" href="Demos.HSP.html#81390" class="Bound">p</a> <a id="81392" href="Demos.HSP.html#81392" class="Bound">q</a><a id="81393" class="Symbol">}</a> <a id="81395" class="Symbol">â†’</a> <a id="81397" class="Symbol">(</a><a id="81398" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="81401" href="Demos.HSP.html#80470" class="Bound">ğ’¦</a><a id="81402" class="Symbol">)</a> <a id="81404" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="81406" href="Demos.HSP.html#81318" class="Bound">X</a> <a id="81408" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="81410" href="Demos.HSP.html#81390" class="Bound">p</a> <a id="81412" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="81414" href="Demos.HSP.html#81392" class="Bound">q</a> <a id="81416" class="Symbol">â†’</a> <a id="81418" href="Demos.HSP.html#80470" class="Bound">ğ’¦</a> <a id="81420" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="81422" href="Demos.HSP.html#81390" class="Bound">p</a> <a id="81424" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="81426" href="Demos.HSP.html#81392" class="Bound">q</a>
  <a id="81430" href="Demos.HSP.html#81384" class="Function">Î¶</a> <a id="81432" href="Demos.HSP.html#81432" class="Bound">x</a> <a id="81434" href="Demos.HSP.html#81434" class="Bound">ğ‘¨</a> <a id="81436" href="Demos.HSP.html#81436" class="Bound">kA</a> <a id="81439" class="Symbol">=</a> <a id="81441" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="81447" class="Symbol">(Î»</a> <a id="81450" href="Demos.HSP.html#81450" class="Bound">y</a> <a id="81452" href="Demos.HSP.html#81452" class="Bound">Ï</a> <a id="81454" class="Symbol">â†’</a> <a id="81456" href="Demos.HSP.html#81450" class="Bound">y</a> <a id="81458" href="Demos.HSP.html#81434" class="Bound">ğ‘¨</a> <a id="81460" href="Demos.HSP.html#81436" class="Bound">kA</a> <a id="81463" href="Demos.HSP.html#81452" class="Bound">Ï</a><a id="81464" class="Symbol">)</a> <a id="81466" href="Demos.HSP.html#81432" class="Bound">x</a> <a id="81468" class="Keyword">where</a> <a id="81474" class="Keyword">open</a> <a id="81479" href="Demos.HSP.html#62807" class="Module">Soundness</a> <a id="81489" class="Symbol">(</a><a id="81490" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="81493" href="Demos.HSP.html#80470" class="Bound">ğ’¦</a><a id="81494" class="Symbol">)</a> <a id="81496" href="Demos.HSP.html#81434" class="Bound">ğ‘¨</a>

</pre>
Next we prove an important property of the relatively free algebra
(relative to \ab{ğ’¦} and satisfying the identities in \af{Th} \ab{ğ’¦}),
which will be used in the formalization of the HSP theorem. Specifically,
we prove that for every algebra \ab{ğ‘¨}, if \ab{ğ‘¨} \af{âŠ¨} \ab{Th} (\af{V} \ab{ğ’¦}),
then there exists an epimorphism from \Free{A} onto \ab{ğ‘¨}.

<pre class="Agda">

<a id="81878" class="Keyword">module</a> <a id="81885" href="Demos.HSP.html#81885" class="Module">_</a> <a id="81887" class="Symbol">{</a><a id="81888" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a> <a id="81890" class="Symbol">:</a> <a id="81892" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="81900" class="Symbol">(</a><a id="81901" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="81903" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81905" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="81908" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81910" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="81911" class="Symbol">)(</a><a id="81913" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="81915" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81917" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="81920" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81922" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="81923" class="Symbol">)}{</a><a id="81926" href="Demos.HSP.html#81926" class="Bound">ğ’¦</a> <a id="81928" class="Symbol">:</a> <a id="81930" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="81934" class="Symbol">(</a><a id="81935" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="81943" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="81945" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="81947" class="Symbol">)(</a><a id="81949" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="81951" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81953" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="81956" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81958" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="81961" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="81962" class="Symbol">)}</a> <a id="81965" class="Keyword">where</a>
 <a id="81972" class="Keyword">private</a> <a id="81980" href="Demos.HSP.html#81980" class="Function">c</a> <a id="81982" class="Symbol">=</a> <a id="81984" href="Demos.HSP.html#81901" class="Bound">Î±</a> <a id="81986" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81988" href="Demos.HSP.html#81905" class="Bound">Ïáµƒ</a> <a id="81991" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="81993" href="Demos.HSP.html#81910" class="Bound">â„“</a> <a id="81995" class="Symbol">;</a> <a id="81997" href="Demos.HSP.html#81997" class="Function">Î¹</a> <a id="81999" class="Symbol">=</a> <a id="82001" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="82004" href="Demos.HSP.html#81980" class="Function">c</a>
 <a id="82007" class="Keyword">open</a> <a id="82012" href="Demos.HSP.html#79441" class="Module">FreeAlgebra</a> <a id="82024" class="Symbol">{</a><a id="82025" class="Argument">Ï‡</a> <a id="82027" class="Symbol">=</a> <a id="82029" href="Demos.HSP.html#81980" class="Function">c</a><a id="82030" class="Symbol">}(</a><a id="82032" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="82035" href="Demos.HSP.html#81926" class="Bound">ğ’¦</a><a id="82036" class="Symbol">)</a>    <a id="82041" class="Keyword">using</a> <a id="82047" class="Symbol">(</a> <a id="82049" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[_]</a> <a id="82054" class="Symbol">)</a>
 <a id="82057" class="Keyword">open</a> <a id="82062" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="82069" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="82072" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a> <a id="82074" href="Demos.HSP.html#23810" class="Function Operator">]</a>                <a id="82091" class="Keyword">using</a> <a id="82097" class="Symbol">(</a> <a id="82099" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="82104" class="Symbol">;</a> <a id="82106" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="82110" class="Symbol">;</a> <a id="82112" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="82118" class="Symbol">)</a> <a id="82120" class="Keyword">renaming</a> <a id="82129" class="Symbol">(</a> <a id="82131" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="82139" class="Symbol">to</a> <a id="82142" class="Field">A</a> <a id="82144" class="Symbol">)</a>

 <a id="82148" href="Demos.HSP.html#82148" class="Function">F-ModTh-epi</a> <a id="82160" class="Symbol">:</a> <a id="82162" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a> <a id="82164" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="82166" href="Demos.HSP.html#60728" class="Function">Mod</a> <a id="82170" class="Symbol">(</a><a id="82171" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="82174" class="Symbol">(</a><a id="82175" href="Demos.HSP.html#66755" class="Function">V</a> <a id="82177" href="Demos.HSP.html#81910" class="Bound">â„“</a> <a id="82179" href="Demos.HSP.html#81997" class="Function">Î¹</a> <a id="82181" href="Demos.HSP.html#81926" class="Bound">ğ’¦</a><a id="82182" class="Symbol">))</a> <a id="82185" class="Symbol">â†’</a> <a id="82187" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="82191" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="82194" href="Demos.HSP.html#82142" class="Function">A</a> <a id="82196" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="82198" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a>
 <a id="82201" href="Demos.HSP.html#82148" class="Function">F-ModTh-epi</a> <a id="82213" href="Demos.HSP.html#82213" class="Bound">AâˆˆModThK</a> <a id="82222" class="Symbol">=</a> <a id="82224" href="Demos.HSP.html#82277" class="Function">Ï†</a> <a id="82226" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="82228" href="Demos.HSP.html#82597" class="Function">isEpi</a>
  <a id="82236" class="Keyword">where</a>  <a id="82243" class="Keyword">open</a> <a id="82248" href="Demos.HSP.html#80461" class="Module">FreeHom</a> <a id="82256" class="Symbol">{</a><a id="82257" class="Argument">â„“</a> <a id="82259" class="Symbol">=</a> <a id="82261" href="Demos.HSP.html#81910" class="Bound">â„“</a><a id="82262" class="Symbol">}</a> <a id="82264" class="Symbol">{</a><a id="82265" href="Demos.HSP.html#81926" class="Bound">ğ’¦</a><a id="82266" class="Symbol">}</a>
         <a id="82277" href="Demos.HSP.html#82277" class="Function">Ï†</a> <a id="82279" class="Symbol">:</a> <a id="82281" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="82284" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="82287" href="Demos.HSP.html#82142" class="Function">A</a> <a id="82289" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="82291" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="82293" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="82295" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="82298" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a> <a id="82300" href="Demos.HSP.html#23810" class="Function Operator">]</a>
         <a id="82311" href="Demos.HSP.html#7750" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="82317" href="Demos.HSP.html#82277" class="Function">Ï†</a>            <a id="82330" class="Symbol">=</a> <a id="82332" href="Demos.HSP.html#73425" class="Function">free-lift</a><a id="82341" class="Symbol">{</a><a id="82342" class="Argument">ğ‘¨</a> <a id="82344" class="Symbol">=</a> <a id="82346" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a><a id="82347" class="Symbol">}</a> <a id="82349" href="Function.Base.html#615" class="Function">id</a>
         <a id="82361" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="82366" href="Demos.HSP.html#82277" class="Function">Ï†</a> <a id="82368" class="Symbol">{</a><a id="82369" href="Demos.HSP.html#82369" class="Bound">p</a><a id="82370" class="Symbol">}</a> <a id="82372" class="Symbol">{</a><a id="82373" href="Demos.HSP.html#82373" class="Bound">q</a><a id="82374" class="Symbol">}</a> <a id="82376" href="Demos.HSP.html#82376" class="Bound">pq</a>  <a id="82380" class="Symbol">=</a>  <a id="82383" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="82390" class="Symbol">(</a> <a id="82392" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="82396" class="Symbol">(</a><a id="82397" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a><a id="82413" class="Symbol">{</a><a id="82414" class="Argument">ğ‘¨</a> <a id="82416" class="Symbol">=</a> <a id="82418" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a><a id="82419" class="Symbol">}</a> <a id="82421" href="Function.Base.html#615" class="Function">id</a> <a id="82424" href="Demos.HSP.html#82369" class="Bound">p</a><a id="82425" class="Symbol">)</a> <a id="82427" class="Symbol">)</a>
                            <a id="82457" class="Symbol">(</a>  <a id="82460" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="82467" class="Symbol">(</a> <a id="82469" href="Demos.HSP.html#82213" class="Bound">AâˆˆModThK</a><a id="82477" class="Symbol">{</a><a id="82478" class="Argument">p</a> <a id="82480" class="Symbol">=</a> <a id="82482" href="Demos.HSP.html#82369" class="Bound">p</a><a id="82483" class="Symbol">}{</a><a id="82485" href="Demos.HSP.html#82373" class="Bound">q</a><a id="82486" class="Symbol">}</a> <a id="82488" class="Symbol">(</a><a id="82489" href="Demos.HSP.html#81228" class="Function">kernel-in-theory</a> <a id="82506" href="Demos.HSP.html#82376" class="Bound">pq</a><a id="82508" class="Symbol">)</a> <a id="82510" href="Function.Base.html#615" class="Function">id</a> <a id="82513" class="Symbol">)</a>
                                      <a id="82553" class="Symbol">(</a> <a id="82555" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a><a id="82571" class="Symbol">{</a><a id="82572" class="Argument">ğ‘¨</a> <a id="82574" class="Symbol">=</a> <a id="82576" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a><a id="82577" class="Symbol">}</a> <a id="82579" href="Function.Base.html#615" class="Function">id</a> <a id="82582" href="Demos.HSP.html#82373" class="Bound">q</a> <a id="82584" class="Symbol">)</a> <a id="82586" class="Symbol">)</a>
         <a id="82597" href="Demos.HSP.html#82597" class="Function">isEpi</a> <a id="82603" class="Symbol">:</a> <a id="82605" href="Demos.HSP.html#33827" class="Record">IsEpi</a> <a id="82611" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="82614" href="Demos.HSP.html#82142" class="Function">A</a> <a id="82616" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="82618" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a> <a id="82620" href="Demos.HSP.html#82277" class="Function">Ï†</a>
         <a id="82631" href="Demos.HSP.html#32789" class="Field">compatible</a> <a id="82642" class="Symbol">(</a><a id="82643" href="Demos.HSP.html#33898" class="Field">isHom</a> <a id="82649" href="Demos.HSP.html#82597" class="Function">isEpi</a><a id="82654" class="Symbol">)</a> <a id="82656" class="Symbol">=</a> <a id="82658" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="82663" class="Symbol">(</a><a id="82664" href="Demos.HSP.html#22946" class="Field">Interp</a> <a id="82671" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a><a id="82672" class="Symbol">)</a> <a id="82674" class="Symbol">(</a><a id="82675" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="82682" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="82684" class="Symbol">(Î»</a> <a id="82687" href="Demos.HSP.html#82687" class="Bound">_</a> <a id="82689" class="Symbol">â†’</a> <a id="82691" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="82695" class="Symbol">))</a>
         <a id="82707" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="82720" href="Demos.HSP.html#82597" class="Function">isEpi</a> <a id="82726" class="Symbol">{</a><a id="82727" href="Demos.HSP.html#82727" class="Bound">y</a><a id="82728" class="Symbol">}</a> <a id="82730" class="Symbol">=</a> <a id="82732" href="Demos.HSP.html#12178" class="InductiveConstructor">eq</a> <a id="82735" class="Symbol">(</a><a id="82736" href="Demos.HSP.html#49733" class="InductiveConstructor">â„Š</a> <a id="82738" href="Demos.HSP.html#82727" class="Bound">y</a><a id="82739" class="Symbol">)</a> <a id="82741" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
</pre>
\ifshort\else

\medskip

\noindent Actually, we will need the following lifted version of this result.

<pre class="Agda">

 <a id="82876" href="Demos.HSP.html#82876" class="Function">F-ModTh-epi-lift</a> <a id="82893" class="Symbol">:</a> <a id="82895" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a> <a id="82897" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="82899" href="Demos.HSP.html#60728" class="Function">Mod</a> <a id="82903" class="Symbol">(</a><a id="82904" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="82907" class="Symbol">(</a><a id="82908" href="Demos.HSP.html#66755" class="Function">V</a> <a id="82910" href="Demos.HSP.html#81910" class="Bound">â„“</a> <a id="82912" href="Demos.HSP.html#81997" class="Function">Î¹</a> <a id="82914" href="Demos.HSP.html#81926" class="Bound">ğ’¦</a><a id="82915" class="Symbol">))</a> <a id="82918" class="Symbol">â†’</a> <a id="82920" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="82924" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="82927" href="Demos.HSP.html#82142" class="Function">A</a> <a id="82929" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="82931" class="Symbol">(</a><a id="82932" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="82941" href="Demos.HSP.html#81888" class="Bound">ğ‘¨</a> <a id="82943" href="Demos.HSP.html#81997" class="Function">Î¹</a> <a id="82945" href="Demos.HSP.html#81997" class="Function">Î¹</a><a id="82946" class="Symbol">)</a>
 <a id="82949" href="Demos.HSP.html#82876" class="Function">F-ModTh-epi-lift</a> <a id="82966" href="Demos.HSP.html#82966" class="Bound">AâˆˆModThK</a> <a id="82975" class="Symbol">=</a> <a id="82977" href="Demos.HSP.html#35625" class="Function">âˆ˜-epi</a> <a id="82983" class="Symbol">(</a><a id="82984" href="Demos.HSP.html#82148" class="Function">F-ModTh-epi</a> <a id="82996" class="Symbol">(Î»</a> <a id="82999" class="Symbol">{</a><a id="83000" href="Demos.HSP.html#83000" class="Bound">p</a> <a id="83002" href="Demos.HSP.html#83002" class="Bound">q</a><a id="83003" class="Symbol">}</a> <a id="83005" class="Symbol">â†’</a> <a id="83007" href="Demos.HSP.html#82966" class="Bound">AâˆˆModThK</a><a id="83015" class="Symbol">{</a><a id="83016" class="Argument">p</a> <a id="83018" class="Symbol">=</a> <a id="83020" href="Demos.HSP.html#83000" class="Bound">p</a><a id="83021" class="Symbol">}{</a><a id="83023" href="Demos.HSP.html#83002" class="Bound">q</a><a id="83024" class="Symbol">}))</a> <a id="83028" href="Demos.HSP.html#37582" class="Function">ToLift-epi</a>
</pre>
\fi


%% -------------------------------------------------------------------------------------

\section{Birkhoff's Variety Theorem}

Birkhoff's variety theorem, also known as the HSP theorem, asserts that a class of algebras
is a variety if and only if it is an equational class.  In this section, we present the
statement and proof of the HSP theorem---first in a style similar to
what one finds in textbooks (e.g.,~\cite[Theorem 4.41]{Bergman:2012}),
and then formally in the language of \mltt.

\subsection{Informal proof}
Let \ab{ğ’¦} be a class of algebras and recall that \ab{ğ’¦} is a \emph{variety} provided
\ifshort\else
it is closed under homomorphisms, subalgebras and products; equivalently,
\fi
\af{V} \ab{ğ’¦} âŠ† \ab{ğ’¦}.
(Observe that \ab{ğ’¦} âŠ† \af{V} \ab{ğ’¦} holds for all \ab{ğ’¦} since
\af{V} is a closure operator.)
We call \ab{ğ’¦} an \emph{equational class} if it is precisely the class of all models of some set of identities.

\emph{Every equational class is a variety}. Indeed, suppose \ab{ğ’¦} is an equational
class axiomatized by term identities \ab{â„°}; that is, \ab{ğ‘¨} âˆˆ \ab{ğ’¦} iff
\ab{ğ‘¨} \af{âŠ¨} \ab{â„°}. Since the classes \af H \ab{ğ’¦}, \af S \ab{ğ’¦}, \af P \ab{ğ’¦} and
\ab{ğ’¦} all satisfy the same set of equations, we have \af{V} \ab{ğ’¦} \af{âŠ«} \ab p
\af{â‰ˆ} \ab q for all (\ab p , \ab q) \af{âˆˆ} \ab{â„°}, so \af{V} \ab{ğ’¦} âŠ† \ab{ğ’¦}.

The converse assertion---that \emph{every variety is an equational class}---takes more
work.\footnote{The proof we present here is based on that of~\cite[Theorem 4.41]{Bergman:2012}.}
Let \ab{ğ’¦} be an arbitrary variety.  We will describe a set of equations that axiomatizes
\ab{ğ’¦}.  A natural choice is \af{Th} \ab{ğ’¦}, all equations that hold in \ab{ğ’¦};
% Let \ab{ğ’¦âº} := \af{Mod} (\af{Th} \ab{ğ’¦}). Clearly, \ab{ğ’¦} \aof{âŠ†} \ab{ğ’¦âº}.  We prove the
for this choice, we must prove \ab{ğ’¦} \aof{=} \af{Mod} (\af{Th} \ab{ğ’¦}).
Clearly, \ab{ğ’¦} \aof{âŠ†} \af{Mod} (\af{Th} \ab{ğ’¦}).  We prove the
converse inclusion. Let \ab{ğ‘¨} \af{âˆˆ} \af{Mod} (\af{Th} \ab{ğ’¦});
it suffices to find an algebra \ab{ğ‘­} \af{âˆˆ} \af{S} (\af{P} \ab{ğ’¦}) such that
\ab{ğ‘¨} is a homomorphic image of \ab{ğ‘­}, as this will show that \ab{ğ‘¨} \af{âˆˆ}
\af{H} (\af{S} (\af{P} \ab{ğ’¦})) = \ab{ğ’¦}.

Let \ab{X} be such that there exists a \emph{surjective} environment
\ab{Ï} : \ab{X} \as{â†’} \af{ğ•Œ[~\ab{ğ‘¨}~]}.
%\footnote{This is usually done by assuming \ab{X} has cardinality at least max(|~\af{ğ•Œ[~\ab{ğ‘¨}~]}~|, Ï‰).}
By the \af{lift-hom} lemma, there is an epimorphism \ab{h} from \T{X} onto \af{ğ•Œ[~\ab{ğ‘¨}~]}
that extends \ab{Ï}.
Now, put \aof{ğ”½[~\ab{X}~]}~:=~\T{X}/\afld{â‰ˆ}, and let \ab{g} : \T{X} \as{â†’} \aof{ğ”½[~\ab{X}~]}
be the natural epimorphism with kernel \afld{â‰ˆ}. We claim that \af{ker} \ab g \af{âŠ†}
\af{ker} \ab h. If the claim is true, then there is a map \ab{f} : \aof{ğ”½[~\ab{X}~]} \as{â†’} \ab{ğ‘¨}
such that \ab f \af{âˆ˜} \ab g = \ab h. Since \ab h is surjective, so is \ab f. Hence \ab{ğ‘¨}
\af{âˆˆ} \af{ğ–§} (\af{ğ”½} \ab X) \aof{âŠ†} \af{Mod} (\af{Th} \ab{ğ’¦}) completing the proof.
To prove the claim, let \ab u , \ab v \af{âˆˆ} \T{X} and assume that \ab g \ab u =
\ab g \ab v. Since \T{X} is generated by \ab X, there are terms \ab p, \ab q âˆˆ
\T{X} such that \ab u = \af{âŸ¦~\T{X}~âŸ§} \ab p and v = \af{âŸ¦~\T{X}~âŸ§} \ab
q.
%\footnote{Recall, \af{âŸ¦~\ab{ğ‘¨}~âŸ§} \ab t denotes the interpretation of the term
%\ab t in the algebra \ab{ğ‘¨}.}
Therefore,\\[-4pt]

\af{âŸ¦~\Free{X}~âŸ§} \ab p = \ab g (\af{âŸ¦~\T{X}~âŸ§} \ab p) = \ab g \ab u = \ab g \ab v =
\ab g (\af{âŸ¦~\T{X}~âŸ§} \ab q) = \af{âŸ¦~\Free{X}~âŸ§} \ab q,\\[8pt]
so \ab{ğ’¦} \af{âŠ«} \ab p \af{â‰ˆ} \ab q, thus (\ab p , \ab q) \af{âˆˆ} \af{Th}
\ab{ğ’¦}. Since \ab{ğ‘¨} \af{âˆˆ} \af{Mod} (\af{Th} \ab{ğ’¦}) =
\af{Mod} (\af{Th} \ab{ğ’¦}), we obtain \ab{ğ‘¨}~\af{âŠ§}~\ab p~\af{â‰ˆ}~\ab q, which implies
that \ab h \ab u = (\af{âŸ¦~\ab{ğ‘¨}~âŸ§} \ab p) \aofld{âŸ¨\$âŸ©} \ab{Ï} = (\af{âŸ¦~\ab{ğ‘¨}~âŸ§} \ab q)
\aofld{âŸ¨\$âŸ©} \ab{Ï} = \ab h \ab v, as desired.

\subsection{Formal proof}
We now show how to express and prove the twin assertions that
(i) every equational class is a variety and (ii) every variety is an equational class.

\paragraph*{Every equational class is a variety}
For (i), we need an arbitrary equational class, which we obtain by starting with an arbitrary
collection \ab{â„°} of equations and then defining \ab{ğ’¦} = \af{Mod} \ab{â„°}, the equational class
determined by \ab{â„°}. We prove that \ab{ğ’¦} is a variety by showing that
\ab{ğ’¦} = \af{V} \ab{ğ’¦}. The inclusion \ab{ğ’¦} \aof{âŠ†} \af V \ab{ğ’¦}, which holds for all
classes \ab{ğ’¦}, is called the \defn{expansive} property of \af{V}.

<pre class="Agda">

<a id="87543" class="Keyword">module</a> <a id="87550" href="Demos.HSP.html#87550" class="Module">_</a> <a id="87552" class="Symbol">(</a><a id="87553" href="Demos.HSP.html#87553" class="Bound">ğ’¦</a> <a id="87555" class="Symbol">:</a> <a id="87557" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="87561" class="Symbol">(</a><a id="87562" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="87570" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="87572" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="87574" class="Symbol">)</a> <a id="87576" class="Symbol">(</a><a id="87577" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="87579" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="87581" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="87584" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="87586" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="87589" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="87590" class="Symbol">))</a> <a id="87593" class="Keyword">where</a>

 <a id="87601" href="Demos.HSP.html#87601" class="Function">V-expa</a> <a id="87608" class="Symbol">:</a> <a id="87610" href="Demos.HSP.html#87553" class="Bound">ğ’¦</a> <a id="87612" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="87614" href="Demos.HSP.html#66755" class="Function">V</a> <a id="87616" href="Demos.HSP.html#87589" class="Bound">â„“</a> <a id="87618" class="Symbol">(</a><a id="87619" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="87622" class="Symbol">(</a><a id="87623" href="Demos.HSP.html#87570" class="Bound">Î±</a> <a id="87625" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="87627" href="Demos.HSP.html#87572" class="Bound">Ïáµƒ</a> <a id="87630" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="87632" href="Demos.HSP.html#87589" class="Bound">â„“</a><a id="87633" class="Symbol">))</a> <a id="87636" href="Demos.HSP.html#87553" class="Bound">ğ’¦</a>
 <a id="87639" href="Demos.HSP.html#87601" class="Function">V-expa</a> <a id="87646" class="Symbol">{</a><a id="87647" class="Argument">x</a> <a id="87649" class="Symbol">=</a> <a id="87651" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a><a id="87652" class="Symbol">}</a> <a id="87654" href="Demos.HSP.html#87654" class="Bound">kA</a> <a id="87657" class="Symbol">=</a> <a id="87659" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a> <a id="87661" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87663" class="Symbol">(</a><a id="87664" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a> <a id="87666" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87668" class="Symbol">(</a><a id="87669" href="Data.Unit.Polymorphic.Base.html#480" class="Function">âŠ¤</a> <a id="87671" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87673" class="Symbol">(Î»</a> <a id="87676" href="Demos.HSP.html#87676" class="Bound">_</a> <a id="87678" class="Symbol">â†’</a> <a id="87680" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a><a id="87681" class="Symbol">)</a> <a id="87683" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87685" class="Symbol">(Î»</a> <a id="87688" href="Demos.HSP.html#87688" class="Bound">_</a> <a id="87690" class="Symbol">â†’</a> <a id="87692" href="Demos.HSP.html#87654" class="Bound">kA</a><a id="87694" class="Symbol">)</a><a id="87695" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87697" href="Demos.HSP.html#88061" class="Function">Goal</a><a id="87701" class="Symbol">)</a><a id="87702" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87704" href="Demos.HSP.html#46369" class="Function">â‰¤-reflexive</a><a id="87715" class="Symbol">)</a><a id="87716" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87718" href="Demos.HSP.html#44955" class="Function">IdHomImage</a>
  <a id="87731" class="Keyword">where</a>
  <a id="87739" class="Keyword">open</a> <a id="87744" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="87751" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="87754" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a> <a id="87756" href="Demos.HSP.html#23810" class="Function Operator">]</a>            <a id="87769" class="Keyword">using</a> <a id="87775" class="Symbol">(</a> <a id="87777" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="87782" class="Symbol">)</a>
  <a id="87786" class="Keyword">open</a> <a id="87791" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="87798" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="87801" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="87803" class="Symbol">(Î»</a> <a id="87806" href="Demos.HSP.html#87806" class="Bound">_</a> <a id="87808" class="Symbol">â†’</a> <a id="87810" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a><a id="87811" class="Symbol">)</a> <a id="87813" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="87816" class="Keyword">using</a> <a id="87822" class="Symbol">()</a> <a id="87825" class="Keyword">renaming</a> <a id="87834" class="Symbol">(</a> <a id="87836" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="87841" class="Symbol">to</a> <a id="87844" class="Function">reflâ¨…</a> <a id="87850" class="Symbol">)</a>

  <a id="87855" href="Demos.HSP.html#87855" class="Function">toâ¨…</a>    <a id="87862" class="Symbol">:</a> <a id="87864" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="87867" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a> <a id="87869" href="Demos.HSP.html#23810" class="Function Operator">]</a>            <a id="87882" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="87884" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="87887" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="87889" class="Symbol">(Î»</a> <a id="87892" href="Demos.HSP.html#87892" class="Bound">_</a> <a id="87894" class="Symbol">â†’</a> <a id="87896" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a><a id="87897" class="Symbol">)</a> <a id="87899" href="Demos.HSP.html#23810" class="Function Operator">]</a>
  <a id="87903" href="Demos.HSP.html#87855" class="Function">toâ¨…</a>    <a id="87910" class="Symbol">=</a> <a id="87912" class="Keyword">record</a> <a id="87919" class="Symbol">{</a> <a id="87921" href="Function.Bundles.html#1919" class="Field">f</a> <a id="87923" class="Symbol">=</a> <a id="87925" class="Symbol">Î»</a> <a id="87927" href="Demos.HSP.html#87927" class="Bound">x</a> <a id="87929" href="Demos.HSP.html#87929" class="Bound">_</a> <a id="87931" class="Symbol">â†’</a> <a id="87933" href="Demos.HSP.html#87927" class="Bound">x</a>   <a id="87937" class="Symbol">;</a> <a id="87939" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="87944" class="Symbol">=</a> <a id="87946" class="Symbol">Î»</a> <a id="87948" href="Demos.HSP.html#87948" class="Bound">xy</a> <a id="87951" href="Demos.HSP.html#87951" class="Bound">_</a> <a id="87953" class="Symbol">â†’</a> <a id="87955" href="Demos.HSP.html#87948" class="Bound">xy</a> <a id="87958" class="Symbol">}</a>
  <a id="87962" href="Demos.HSP.html#87962" class="Function">fromâ¨…</a>  <a id="87969" class="Symbol">:</a> <a id="87971" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="87974" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="87976" class="Symbol">(Î»</a> <a id="87979" href="Demos.HSP.html#87979" class="Bound">_</a> <a id="87981" class="Symbol">â†’</a> <a id="87983" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a><a id="87984" class="Symbol">)</a> <a id="87986" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="87989" href="Demos.HSP.html#7635" class="Record Operator">âŸ¶</a> <a id="87991" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="87994" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a> <a id="87996" href="Demos.HSP.html#23810" class="Function Operator">]</a>
  <a id="88000" href="Demos.HSP.html#87962" class="Function">fromâ¨…</a>  <a id="88007" class="Symbol">=</a> <a id="88009" class="Keyword">record</a> <a id="88016" class="Symbol">{</a> <a id="88018" href="Function.Bundles.html#1919" class="Field">f</a> <a id="88020" class="Symbol">=</a> <a id="88022" class="Symbol">Î»</a> <a id="88024" href="Demos.HSP.html#88024" class="Bound">x</a> <a id="88026" class="Symbol">â†’</a> <a id="88028" href="Demos.HSP.html#88024" class="Bound">x</a> <a id="88030" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>  <a id="88034" class="Symbol">;</a> <a id="88036" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="88041" class="Symbol">=</a> <a id="88043" class="Symbol">Î»</a> <a id="88045" href="Demos.HSP.html#88045" class="Bound">xy</a> <a id="88048" class="Symbol">â†’</a> <a id="88050" href="Demos.HSP.html#88045" class="Bound">xy</a> <a id="88053" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="88056" class="Symbol">}</a>

  <a id="88061" href="Demos.HSP.html#88061" class="Function">Goal</a>   <a id="88068" class="Symbol">:</a> <a id="88070" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a> <a id="88072" href="Demos.HSP.html#41316" class="Record Operator">â‰…</a> <a id="88074" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="88076" class="Symbol">(Î»</a> <a id="88079" href="Demos.HSP.html#88079" class="Bound">x</a> <a id="88081" class="Symbol">â†’</a> <a id="88083" href="Demos.HSP.html#87651" class="Bound">ğ‘¨</a><a id="88084" class="Symbol">)</a>
  <a id="88088" href="Demos.HSP.html#88061" class="Function">Goal</a>   <a id="88095" class="Symbol">=</a> <a id="88097" href="Demos.HSP.html#41375" class="InductiveConstructor">mkiso</a><a id="88102" class="Symbol">(</a><a id="88103" href="Demos.HSP.html#87855" class="Function">toâ¨…</a> <a id="88107" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="88109" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="88115" href="Demos.HSP.html#87844" class="Function">reflâ¨…</a><a id="88120" class="Symbol">)(</a><a id="88122" href="Demos.HSP.html#87962" class="Function">fromâ¨…</a> <a id="88128" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="88130" href="Demos.HSP.html#32775" class="InductiveConstructor">mkhom</a> <a id="88136" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="88140" class="Symbol">)(Î»</a> <a id="88144" href="Demos.HSP.html#88144" class="Bound">_</a> <a id="88146" href="Demos.HSP.html#88146" class="Bound">_</a> <a id="88148" class="Symbol">â†’</a> <a id="88150" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="88154" class="Symbol">)(Î»</a> <a id="88158" href="Demos.HSP.html#88158" class="Bound">_</a> <a id="88160" class="Symbol">â†’</a> <a id="88162" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="88166" class="Symbol">)</a>

</pre>
Observe how \ab{ğ‘¨} is expressed as (isomorphic to) a product with just one factor (\ab{ğ‘¨} itself); that is, the product
\af{â¨…} (\as{Î»} \ab x \as{â†’} \ab{ğ‘¨}) indexed over the one-element type \af{âŠ¤}.)

The converse inclusion, \af V \ab{ğ’¦} \aof{âŠ†} \ab{ğ’¦}, requires the assumption
that \ab{ğ’¦} is an equational class. Recall lemma
\af{V-id1}, which asserts that \ab{ğ’¦} \aof{âŠ«} \ab p \aof{â‰ˆ} \ab q implies \af{V}
\ab{â„“} \ab{Î¹} \ab{ğ’¦} \aof{âŠ«} \ab p \aof{â‰ˆ} \ab q. Whence, if \ab{ğ’¦} is an equational
class, then \af V \ab{ğ’¦} \aof{âŠ†} \ab{ğ’¦}, as we now confirm.

<pre class="Agda">

<a id="88747" class="Keyword">module</a> <a id="88754" href="Demos.HSP.html#88754" class="Module">_</a> <a id="88756" class="Symbol">{</a><a id="88757" href="Demos.HSP.html#88757" class="Bound">â„“</a> <a id="88759" class="Symbol">:</a> <a id="88761" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="88766" class="Symbol">}{</a><a id="88768" href="Demos.HSP.html#88768" class="Bound">X</a> <a id="88770" class="Symbol">:</a> <a id="88772" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="88777" href="Demos.HSP.html#88757" class="Bound">â„“</a><a id="88778" class="Symbol">}{</a><a id="88780" href="Demos.HSP.html#88780" class="Bound">â„°</a> <a id="88782" class="Symbol">:</a> <a id="88784" class="Symbol">{</a><a id="88785" href="Demos.HSP.html#88785" class="Bound">Y</a> <a id="88787" class="Symbol">:</a> <a id="88789" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="88794" href="Demos.HSP.html#88757" class="Bound">â„“</a><a id="88795" class="Symbol">}</a> <a id="88797" class="Symbol">â†’</a> <a id="88799" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="88804" class="Symbol">(</a><a id="88805" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="88810" href="Demos.HSP.html#88785" class="Bound">Y</a> <a id="88812" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="88814" href="Demos.HSP.html#49692" class="Datatype">Term</a> <a id="88819" href="Demos.HSP.html#88785" class="Bound">Y</a><a id="88820" class="Symbol">)</a> <a id="88822" class="Symbol">(</a><a id="88823" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="88826" href="Demos.HSP.html#88757" class="Bound">â„“</a><a id="88827" class="Symbol">)}</a> <a id="88830" class="Keyword">where</a>
 <a id="88837" class="Keyword">private</a> <a id="88845" href="Demos.HSP.html#88845" class="Function">ğ’¦</a> <a id="88847" class="Symbol">=</a> <a id="88849" href="Demos.HSP.html#60728" class="Function">Mod</a><a id="88852" class="Symbol">{</a><a id="88853" class="Argument">Î±</a> <a id="88855" class="Symbol">=</a> <a id="88857" href="Demos.HSP.html#88757" class="Bound">â„“</a><a id="88858" class="Symbol">}{</a><a id="88860" href="Demos.HSP.html#88757" class="Bound">â„“</a><a id="88861" class="Symbol">}{</a><a id="88863" href="Demos.HSP.html#88768" class="Bound">X</a><a id="88864" class="Symbol">}</a> <a id="88866" href="Demos.HSP.html#88780" class="Bound">â„°</a>     <a id="88872" class="Comment">-- an arbitrary equational class</a>

 <a id="88907" href="Demos.HSP.html#88907" class="Function">EqClâ‡’Var</a> <a id="88916" class="Symbol">:</a> <a id="88918" href="Demos.HSP.html#66755" class="Function">V</a> <a id="88920" href="Demos.HSP.html#88757" class="Bound">â„“</a> <a id="88922" class="Symbol">(</a><a id="88923" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="88926" href="Demos.HSP.html#88757" class="Bound">â„“</a><a id="88927" class="Symbol">)</a> <a id="88929" href="Demos.HSP.html#88845" class="Function">ğ’¦</a> <a id="88931" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="88933" href="Demos.HSP.html#88845" class="Function">ğ’¦</a>
 <a id="88936" href="Demos.HSP.html#88907" class="Function">EqClâ‡’Var</a> <a id="88945" class="Symbol">{</a><a id="88946" href="Demos.HSP.html#88946" class="Bound">ğ‘¨</a><a id="88947" class="Symbol">}</a> <a id="88949" href="Demos.HSP.html#88949" class="Bound">vA</a> <a id="88952" class="Symbol">{</a><a id="88953" href="Demos.HSP.html#88953" class="Bound">p</a><a id="88954" class="Symbol">}</a> <a id="88956" class="Symbol">{</a><a id="88957" href="Demos.HSP.html#88957" class="Bound">q</a><a id="88958" class="Symbol">}</a> <a id="88960" href="Demos.HSP.html#88960" class="Bound">pâ„°q</a> <a id="88964" href="Demos.HSP.html#88964" class="Bound">Ï</a> <a id="88966" class="Symbol">=</a> <a id="88968" href="Demos.HSP.html#72151" class="Function">V-id1</a> <a id="88974" href="Demos.HSP.html#88757" class="Bound">â„“</a> <a id="88976" class="Symbol">{</a><a id="88977" href="Demos.HSP.html#88845" class="Function">ğ’¦</a><a id="88978" class="Symbol">}</a> <a id="88980" class="Symbol">{</a><a id="88981" href="Demos.HSP.html#88953" class="Bound">p</a><a id="88982" class="Symbol">}</a> <a id="88984" class="Symbol">{</a><a id="88985" href="Demos.HSP.html#88957" class="Bound">q</a><a id="88986" class="Symbol">}</a> <a id="88988" class="Symbol">(Î»</a> <a id="88991" href="Demos.HSP.html#88991" class="Bound">_</a> <a id="88993" href="Demos.HSP.html#88993" class="Bound">x</a> <a id="88995" href="Demos.HSP.html#88995" class="Bound">Ï„</a> <a id="88997" class="Symbol">â†’</a> <a id="88999" href="Demos.HSP.html#88993" class="Bound">x</a> <a id="89001" href="Demos.HSP.html#88960" class="Bound">pâ„°q</a> <a id="89005" href="Demos.HSP.html#88995" class="Bound">Ï„</a><a id="89006" class="Symbol">)</a> <a id="89008" href="Demos.HSP.html#88946" class="Bound">ğ‘¨</a> <a id="89010" href="Demos.HSP.html#88949" class="Bound">vA</a> <a id="89013" href="Demos.HSP.html#88964" class="Bound">Ï</a>

</pre>
Together, \af{V-expa} and \af{Eqclâ‡’Var} prove that every equational class is a variety.


\paragraph*{Every variety is an equational class}
For (ii), we need an arbitrary variety, which we obtain by starting with an arbitrary class
\ab{ğ’¦} of \ab{ğ‘†}-algebras and taking the \emph{varietal closure}, \af{V} \ab{ğ’¦}.
We prove that \af{V} \ab{ğ’¦} is an equational class by showing it is precisely the collection of
algebras that model the equations in \af{Th} (\af{V} \ab{ğ’¦}); that is, we prove
\af{V} \ab{ğ’¦} = \af{Mod} (\af{Th} (\af{V} \ab{ğ’¦})).
The inclusion \af{V} \ab{ğ’¦} \aof{âŠ†} \af{Mod} (\af{Th} (\af{V} \ab{ğ’¦})) is a
consequence of the fact that \af{Mod} \af{Th} is a closure operator.

<pre class="Agda">

<a id="89728" class="Keyword">module</a> <a id="89735" href="Demos.HSP.html#89735" class="Module">_</a> <a id="89737" class="Symbol">(</a><a id="89738" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a> <a id="89740" class="Symbol">:</a> <a id="89742" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="89746" class="Symbol">(</a><a id="89747" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="89755" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="89757" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="89759" class="Symbol">)</a> <a id="89761" class="Symbol">(</a><a id="89762" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="89764" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="89766" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="89769" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="89771" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="89774" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="89775" class="Symbol">)){</a><a id="89778" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="89780" class="Symbol">:</a> <a id="89782" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="89787" class="Symbol">(</a><a id="89788" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="89790" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="89792" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="89795" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="89797" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="89798" class="Symbol">)}</a> <a id="89801" class="Keyword">where</a>
 <a id="89808" class="Keyword">private</a> <a id="89816" href="Demos.HSP.html#89816" class="Function">c</a> <a id="89818" class="Symbol">=</a> <a id="89820" href="Demos.HSP.html#89755" class="Bound">Î±</a> <a id="89822" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="89824" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a> <a id="89827" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="89829" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="89831" class="Symbol">;</a> <a id="89833" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="89835" class="Symbol">=</a> <a id="89837" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="89840" href="Demos.HSP.html#89816" class="Function">c</a>

 <a id="89844" href="Demos.HSP.html#89844" class="Function">ModTh-closure</a> <a id="89858" class="Symbol">:</a> <a id="89860" href="Demos.HSP.html#66755" class="Function">V</a><a id="89861" class="Symbol">{</a><a id="89862" class="Argument">Î²</a> <a id="89864" class="Symbol">=</a> <a id="89866" href="Demos.HSP.html#8428" class="Generalizable">Î²</a><a id="89867" class="Symbol">}{</a><a id="89869" href="Demos.HSP.html#8430" class="Generalizable">Ïáµ‡</a><a id="89871" class="Symbol">}{</a><a id="89873" href="Demos.HSP.html#8433" class="Generalizable">Î³</a><a id="89874" class="Symbol">}{</a><a id="89876" href="Demos.HSP.html#8435" class="Generalizable">Ïá¶œ</a><a id="89878" class="Symbol">}{</a><a id="89880" href="Demos.HSP.html#8438" class="Generalizable">Î´</a><a id="89881" class="Symbol">}{</a><a id="89883" href="Demos.HSP.html#8440" class="Generalizable">Ïáµˆ</a><a id="89885" class="Symbol">}</a> <a id="89887" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="89889" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="89891" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a> <a id="89893" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="89895" href="Demos.HSP.html#60728" class="Function">Mod</a><a id="89898" class="Symbol">{</a><a id="89899" class="Argument">X</a> <a id="89901" class="Symbol">=</a> <a id="89903" href="Demos.HSP.html#89778" class="Bound">X</a><a id="89904" class="Symbol">}</a> <a id="89906" class="Symbol">(</a><a id="89907" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="89910" class="Symbol">(</a><a id="89911" href="Demos.HSP.html#66755" class="Function">V</a> <a id="89913" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="89915" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="89917" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="89918" class="Symbol">))</a>
 <a id="89922" href="Demos.HSP.html#89844" class="Function">ModTh-closure</a> <a id="89936" class="Symbol">{</a><a id="89937" class="Argument">x</a> <a id="89939" class="Symbol">=</a> <a id="89941" href="Demos.HSP.html#89941" class="Bound">ğ‘¨</a><a id="89942" class="Symbol">}</a> <a id="89944" href="Demos.HSP.html#89944" class="Bound">vA</a> <a id="89947" class="Symbol">{</a><a id="89948" href="Demos.HSP.html#89948" class="Bound">p</a><a id="89949" class="Symbol">}</a> <a id="89951" class="Symbol">{</a><a id="89952" href="Demos.HSP.html#89952" class="Bound">q</a><a id="89953" class="Symbol">}</a> <a id="89955" href="Demos.HSP.html#89955" class="Bound">x</a> <a id="89957" href="Demos.HSP.html#89957" class="Bound">Ï</a> <a id="89959" class="Symbol">=</a> <a id="89961" href="Demos.HSP.html#89955" class="Bound">x</a> <a id="89963" href="Demos.HSP.html#89941" class="Bound">ğ‘¨</a> <a id="89965" href="Demos.HSP.html#89944" class="Bound">vA</a> <a id="89968" href="Demos.HSP.html#89957" class="Bound">Ï</a>

</pre>

\noindent Our proof of the inclusion \af{Mod} (\af{Th} (V ğ’¦)) \aof{âŠ†}
\af{V} \ab{ğ’¦} proceeds according to the following plan.

\begin{enumerate}
\item \label{item:1} Prove \aof{ğ”½[ \ab{X} ]} \af{âˆˆ} \af{S} (\af{P} \ab{ğ’¦}).
\begin{enumerate}
\item \label{item:1.1} Let \ab{ğ‘ª} be the product of all algebras in \af{S} \ab{ğ’¦}, so \ab{ğ‘ª} \af{âˆˆ} \af{P} (\af{S} \ab{ğ’¦}).
\item \label{item:1.2} Prove \af{P} (\af{S} \ab{ğ’¦}) \af{âŠ†} \af{S} (\af{P} \ab{ğ’¦}), so \ab{ğ‘ª} \af{âˆˆ} \af{S} (\af{P} \ab{ğ’¦}).
\item \label{item:1.3} Prove \aof{ğ”½[ \ab{X} ]} \af{â‰¤} \ab{ğ‘ª}, so \aof{ğ”½[ \ab{X} ]} \af{âˆˆ} \af{S} (\af{S} (\af{P} \ab{ğ’¦})) (= \af{S} (\af{P} \ab{ğ’¦})).
\end{enumerate}
\item \label{item:2} Prove that every algebra in \af{Mod} (\af{Th} (V ğ’¦)) is a homomorphic image of
\aof{ğ”½[ \ab{X} ]}.
\end{enumerate}
From \ref{item:1} and \ref{item:2} will follow \af{Mod} (\af{Th} (V ğ’¦))
âŠ† \af{H} (\af{S} (\af{P} \ab{ğ’¦})) (= \af{V} \ab{ğ’¦}), as desired.

\begin{itemize}
\item
\noindent \ref{item:1.1}. To define \ab{ğ‘ª} as the product of all algebras in \af{S} \ab{ğ’¦}, we must first contrive
an index type for the class \af{S} \ab{ğ’¦}.  We do so by letting the indices be the algebras
belonging to \ab{ğ’¦}. Actually, each index will consist of a triple (\ab{ğ‘¨} , \ab p ,
\ab{Ï}) where \ab{ğ‘¨} is an algebra, \ab p : \ab{ğ‘¨} \af{âˆˆ} \af{S} \ab{ğ’¦} is a proof of membership in \ab{ğ’¦},
and \ab{Ï} : \ab X \as{â†’} \aof{ğ•Œ[ \ab{ğ‘¨} ]} is an arbitrary environment.
Using this indexing scheme, we construct \ab{ğ‘ª}, the product of all algebras in \ab{ğ’¦}
and all environments.

The indexing type \ab{â„‘}, the family of algebras \ab{ğ”„}, and the product \ab{ğ‘ª} are defined
as follows.

<pre class="Agda">

 <a id="91634" class="Keyword">open</a> <a id="91639" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="91651" class="Keyword">using</a> <a id="91657" class="Symbol">(</a> <a id="91659" href="Demos.HSP.html#53359" class="Function">Env</a> <a id="91663" class="Symbol">)</a>
 <a id="91666" href="Demos.HSP.html#91666" class="Function">â„‘</a> <a id="91668" class="Symbol">:</a> <a id="91670" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="91675" href="Demos.HSP.html#89833" class="Function">Î¹</a>
 <a id="91678" href="Demos.HSP.html#91666" class="Function">â„‘</a> <a id="91680" class="Symbol">=</a> <a id="91682" href="Data.Product.html#916" class="Function">Î£[</a> <a id="91685" href="Demos.HSP.html#91685" class="Bound">ğ‘¨</a> <a id="91687" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="91689" class="Symbol">(</a><a id="91690" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="91698" href="Demos.HSP.html#89755" class="Bound">Î±</a> <a id="91700" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a><a id="91702" class="Symbol">)</a> <a id="91704" href="Data.Product.html#916" class="Function">]</a> <a id="91706" class="Symbol">(</a><a id="91707" href="Demos.HSP.html#91685" class="Bound">ğ‘¨</a> <a id="91709" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="91711" href="Demos.HSP.html#66181" class="Function">S</a> <a id="91713" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="91715" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="91716" class="Symbol">)</a> <a id="91718" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="91720" class="Symbol">(</a><a id="91721" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="91729" class="Symbol">(</a><a id="91730" href="Demos.HSP.html#53359" class="Function">Env</a> <a id="91734" href="Demos.HSP.html#91685" class="Bound">ğ‘¨</a> <a id="91736" href="Demos.HSP.html#89778" class="Bound">X</a><a id="91737" class="Symbol">))</a>

 <a id="91742" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="91744" class="Symbol">:</a> <a id="91746" href="Demos.HSP.html#91666" class="Function">â„‘</a> <a id="91748" class="Symbol">â†’</a> <a id="91750" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="91758" href="Demos.HSP.html#89755" class="Bound">Î±</a> <a id="91760" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a>
 <a id="91764" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="91766" href="Demos.HSP.html#91766" class="Bound">i</a> <a id="91768" class="Symbol">=</a> <a id="91770" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="91772" href="Demos.HSP.html#91766" class="Bound">i</a> <a id="91774" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>

 <a id="91778" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a> <a id="91780" class="Symbol">:</a> <a id="91782" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="91790" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="91792" href="Demos.HSP.html#89833" class="Function">Î¹</a>
 <a id="91795" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a> <a id="91797" class="Symbol">=</a> <a id="91799" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="91801" href="Demos.HSP.html#91742" class="Function">ğ”„</a>

</pre>
\ifshort\else
<pre class="Agda">
 <a id="91843" href="Demos.HSP.html#91843" class="Function">skEqual</a> <a id="91851" class="Symbol">:</a> <a id="91853" class="Symbol">(</a><a id="91854" href="Demos.HSP.html#91854" class="Bound">i</a> <a id="91856" class="Symbol">:</a> <a id="91858" href="Demos.HSP.html#91666" class="Function">â„‘</a><a id="91859" class="Symbol">)</a> <a id="91861" class="Symbol">â†’</a> <a id="91863" class="Symbol">âˆ€{</a><a id="91865" href="Demos.HSP.html#91865" class="Bound">p</a> <a id="91867" href="Demos.HSP.html#91867" class="Bound">q</a><a id="91868" class="Symbol">}</a> <a id="91870" class="Symbol">â†’</a> <a id="91872" href="Demos.HSP.html#7408" class="Primitive">Type</a> <a id="91877" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a>
 <a id="91881" href="Demos.HSP.html#91843" class="Function">skEqual</a> <a id="91889" href="Demos.HSP.html#91889" class="Bound">i</a> <a id="91891" class="Symbol">{</a><a id="91892" href="Demos.HSP.html#91892" class="Bound">p</a><a id="91893" class="Symbol">}{</a><a id="91895" href="Demos.HSP.html#91895" class="Bound">q</a><a id="91896" class="Symbol">}</a> <a id="91898" class="Symbol">=</a> <a id="91900" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="91902" href="Demos.HSP.html#91892" class="Bound">p</a> <a id="91904" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="91906" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="91910" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="91914" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="91916" href="Demos.HSP.html#91889" class="Bound">i</a> <a id="91918" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="91920" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="91922" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="91924" href="Demos.HSP.html#91895" class="Bound">q</a> <a id="91926" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="91928" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="91932" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="91936" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="91938" href="Demos.HSP.html#91889" class="Bound">i</a> <a id="91940" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
  <a id="91944" class="Keyword">where</a> <a id="91950" class="Keyword">open</a> <a id="91955" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="91962" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="91965" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="91967" href="Demos.HSP.html#91889" class="Bound">i</a> <a id="91969" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="91971" class="Keyword">using</a> <a id="91977" class="Symbol">(</a> <a id="91979" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="91983" class="Symbol">)</a> <a id="91985" class="Symbol">;</a> <a id="91987" class="Keyword">open</a> <a id="91992" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="92004" class="Symbol">(</a><a id="92005" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="92007" href="Demos.HSP.html#91889" class="Bound">i</a><a id="92008" class="Symbol">)</a> <a id="92010" class="Keyword">using</a> <a id="92016" class="Symbol">(</a> <a id="92018" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="92022" class="Symbol">)</a>

</pre>

The type \af{skEqual} provides a term identity \ab p \af{â‰ˆ} \ab q for each index \ab i = (\ab{ğ‘¨} , \ab{p} , \ab{Ï}) of the product.
%(here, as above, \ab{ğ‘¨} is an algebra, \ab{sA} is a proof that \ab{ğ‘¨} belongs to \af{S} \ab{ğ’¦}, and \ab{Ï} is an environment).
%map assigning values in the domain of \ab{ğ‘¨} to variable symbols in \ab X).
Later we prove that if the identity \ab{p} \af{â‰ˆ} \ab q holds in all \ab{ğ‘¨} \aof{âˆˆ} \af S \ab{ğ’¦} (for all environments), then \ab p \af{â‰ˆ} \ab q
holds in the relatively free algebra \Free{X}; equivalently, the pair (\ab p , \ab q) belongs to the
kernel of the natural homomorphism from \T{X} onto \Free{X}. We will use that fact to prove
that the kernel of the natural hom from \T{X} to \ab{ğ‘ª} is contained in the kernel of the natural hom from \T{X} onto \Free{X},
whence we construct a monomorphism from \Free{X} into \ab{ğ‘ª}, and thus \Free{X} is a subalgebra of \ab{ğ‘ª},
so belongs to \af S (\af P \ab{ğ’¦}).

\fi

\item \noindent \ref{item:1.2}. We need to show that a product of subalgebras of algebras in a class is a subalgebra of a product of algebras in the class;
in other terms, \af{P} (\af{S} \ab{ğ’¦}) \aof{âŠ†} \af{S} (\af{P} \ab{ğ’¦}), for every class \ab{ğ’¦}.
% We need \af{P} (\af{S} \ab{ğ’¦}) \aof{âŠ†} \af{S} (\af{P}
% \ab{ğ’¦}) for every class \ab{ğ’¦},.
\ifshort
The \agdaalgebras library denotes this fact by \af{PSâŠ†SP}.
As the proof is a bit tedious, it doesn't seem helpful to reproduce it here (\seeshort).
\else
We state and prove this in \agda as follows.

<pre class="Agda">

 <a id="93555" href="Demos.HSP.html#93555" class="Function">PSâŠ†SP</a> <a id="93561" class="Symbol">:</a> <a id="93563" href="Demos.HSP.html#66293" class="Function">P</a> <a id="93565" href="Demos.HSP.html#89816" class="Function">c</a> <a id="93567" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="93569" class="Symbol">(</a><a id="93570" href="Demos.HSP.html#66181" class="Function">S</a><a id="93571" class="Symbol">{</a><a id="93572" class="Argument">Î²</a> <a id="93574" class="Symbol">=</a> <a id="93576" href="Demos.HSP.html#89755" class="Bound">Î±</a><a id="93577" class="Symbol">}{</a><a id="93579" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a><a id="93581" class="Symbol">}</a> <a id="93583" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="93585" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="93586" class="Symbol">)</a> <a id="93588" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="93590" href="Demos.HSP.html#66181" class="Function">S</a> <a id="93592" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="93594" class="Symbol">(</a><a id="93595" href="Demos.HSP.html#66293" class="Function">P</a> <a id="93597" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="93599" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="93601" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="93602" class="Symbol">)</a>
 <a id="93605" href="Demos.HSP.html#93555" class="Function">PSâŠ†SP</a> <a id="93611" class="Symbol">{</a><a id="93612" href="Demos.HSP.html#93612" class="Bound">ğ‘©</a><a id="93613" class="Symbol">}</a> <a id="93615" class="Symbol">(</a><a id="93616" href="Demos.HSP.html#93616" class="Bound">I</a> <a id="93618" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93620" class="Symbol">(</a> <a id="93622" href="Demos.HSP.html#93622" class="Bound">ğ’œ</a> <a id="93624" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93626" href="Demos.HSP.html#93626" class="Bound">sA</a> <a id="93629" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93631" href="Demos.HSP.html#93631" class="Bound">Bâ‰…â¨…A</a> <a id="93636" class="Symbol">))</a> <a id="93639" class="Symbol">=</a> <a id="93641" href="Demos.HSP.html#93797" class="Function">Goal</a>
  <a id="93648" class="Keyword">where</a>
  <a id="93656" href="Demos.HSP.html#93656" class="Function">â„¬</a> <a id="93658" class="Symbol">:</a> <a id="93660" href="Demos.HSP.html#93616" class="Bound">I</a> <a id="93662" class="Symbol">â†’</a> <a id="93664" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="93672" href="Demos.HSP.html#89755" class="Bound">Î±</a> <a id="93674" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a>
  <a id="93679" href="Demos.HSP.html#93656" class="Function">â„¬</a> <a id="93681" href="Demos.HSP.html#93681" class="Bound">i</a> <a id="93683" class="Symbol">=</a> <a id="93685" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="93687" href="Demos.HSP.html#93626" class="Bound">sA</a> <a id="93690" href="Demos.HSP.html#93681" class="Bound">i</a> <a id="93692" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
  <a id="93696" href="Demos.HSP.html#93696" class="Function">kB</a> <a id="93699" class="Symbol">:</a> <a id="93701" class="Symbol">(</a><a id="93702" href="Demos.HSP.html#93702" class="Bound">i</a> <a id="93704" class="Symbol">:</a> <a id="93706" href="Demos.HSP.html#93616" class="Bound">I</a><a id="93707" class="Symbol">)</a> <a id="93709" class="Symbol">â†’</a> <a id="93711" href="Demos.HSP.html#93656" class="Function">â„¬</a> <a id="93713" href="Demos.HSP.html#93702" class="Bound">i</a> <a id="93715" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="93717" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a>
  <a id="93721" href="Demos.HSP.html#93696" class="Function">kB</a> <a id="93724" href="Demos.HSP.html#93724" class="Bound">i</a> <a id="93726" class="Symbol">=</a>  <a id="93729" href="Demos.HSP.html#7523" class="Field">fst</a> <a id="93733" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="93735" href="Demos.HSP.html#93626" class="Bound">sA</a> <a id="93738" href="Demos.HSP.html#93724" class="Bound">i</a> <a id="93740" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
  <a id="93744" href="Demos.HSP.html#93744" class="Function">â¨…Aâ‰¤â¨…B</a> <a id="93750" class="Symbol">:</a> <a id="93752" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="93754" href="Demos.HSP.html#93622" class="Bound">ğ’œ</a> <a id="93756" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="93758" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="93760" href="Demos.HSP.html#93656" class="Function">â„¬</a>
  <a id="93764" href="Demos.HSP.html#93744" class="Function">â¨…Aâ‰¤â¨…B</a> <a id="93770" class="Symbol">=</a> <a id="93772" href="Demos.HSP.html#47055" class="Function">â¨…-â‰¤</a> <a id="93776" class="Symbol">Î»</a> <a id="93778" href="Demos.HSP.html#93778" class="Bound">i</a> <a id="93780" class="Symbol">â†’</a> <a id="93782" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="93786" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="93788" href="Demos.HSP.html#93626" class="Bound">sA</a> <a id="93791" href="Demos.HSP.html#93778" class="Bound">i</a> <a id="93793" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
  <a id="93797" href="Demos.HSP.html#93797" class="Function">Goal</a> <a id="93802" class="Symbol">:</a> <a id="93804" href="Demos.HSP.html#93612" class="Bound">ğ‘©</a> <a id="93806" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="93808" href="Demos.HSP.html#66181" class="Function">S</a><a id="93809" class="Symbol">{</a><a id="93810" class="Argument">Î²</a> <a id="93812" class="Symbol">=</a> <a id="93814" href="Demos.HSP.html#89833" class="Function">Î¹</a><a id="93815" class="Symbol">}{</a><a id="93817" href="Demos.HSP.html#89833" class="Function">Î¹</a><a id="93818" class="Symbol">}</a><a id="93819" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="93821" class="Symbol">(</a><a id="93822" href="Demos.HSP.html#66293" class="Function">P</a> <a id="93824" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="93826" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="93828" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="93829" class="Symbol">)</a>
  <a id="93833" href="Demos.HSP.html#93797" class="Function">Goal</a> <a id="93838" class="Symbol">=</a> <a id="93840" href="Demos.HSP.html#30007" class="Function">â¨…</a> <a id="93842" href="Demos.HSP.html#93656" class="Function">â„¬</a> <a id="93844" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93846" class="Symbol">(</a><a id="93847" href="Demos.HSP.html#93616" class="Bound">I</a> <a id="93849" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93851" href="Demos.HSP.html#93656" class="Function">â„¬</a> <a id="93853" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93855" href="Demos.HSP.html#93696" class="Function">kB</a> <a id="93858" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93860" href="Demos.HSP.html#42653" class="Function">â‰…-refl</a><a id="93866" class="Symbol">)</a> <a id="93868" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93870" class="Symbol">(</a><a id="93871" href="Demos.HSP.html#47806" class="Function">â‰…-trans-â‰¤</a> <a id="93881" href="Demos.HSP.html#93631" class="Bound">Bâ‰…â¨…A</a> <a id="93886" href="Demos.HSP.html#93744" class="Function">â¨…Aâ‰¤â¨…B</a><a id="93891" class="Symbol">)</a>

</pre>
\fi

\item \noindent \ref{item:1.3}. To prove \aof{ğ”½[ \ab{X} ]} \af{â‰¤} \ab{ğ‘ª}, we construct homomorphisms from \ab{ğ‘»} \ab{X} to \ab{ğ‘ª} and \Free{X} to \ab{ğ‘ª}, the latter of which requires the kernel condition mentioned above.

<pre class="Agda">

 <a id="94147" href="Demos.HSP.html#94147" class="Function">homC</a> <a id="94152" class="Symbol">:</a> <a id="94154" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="94158" class="Symbol">(</a><a id="94159" href="Demos.HSP.html#51895" class="Function">ğ‘»</a> <a id="94161" href="Demos.HSP.html#89778" class="Bound">X</a><a id="94162" class="Symbol">)</a> <a id="94164" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a>
 <a id="94167" href="Demos.HSP.html#94147" class="Function">homC</a> <a id="94172" class="Symbol">=</a> <a id="94174" href="Demos.HSP.html#38453" class="Function">â¨…-hom-co</a> <a id="94183" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="94185" class="Symbol">(Î»</a> <a id="94188" href="Demos.HSP.html#94188" class="Bound">i</a> <a id="94190" class="Symbol">â†’</a> <a id="94192" href="Demos.HSP.html#74414" class="Function">lift-hom</a> <a id="94201" class="Symbol">(</a><a id="94202" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="94206" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="94208" href="Demos.HSP.html#94188" class="Bound">i</a> <a id="94210" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a><a id="94211" class="Symbol">))</a>

 <a id="94216" class="Keyword">open</a> <a id="94221" href="Demos.HSP.html#80461" class="Module">FreeHom</a> <a id="94229" class="Symbol">{</a><a id="94230" class="Argument">â„“</a> <a id="94232" class="Symbol">=</a> <a id="94234" href="Demos.HSP.html#89774" class="Bound">â„“</a><a id="94235" class="Symbol">}{</a><a id="94237" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="94238" class="Symbol">}</a>
 <a id="94241" href="Demos.HSP.html#94241" class="Function">kerFâŠ†kerC</a> <a id="94251" class="Symbol">:</a> <a id="94253" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="94257" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="94259" href="Demos.HSP.html#81141" class="Function Operator">homF[</a> <a id="94265" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="94267" href="Demos.HSP.html#81141" class="Function Operator">]</a> <a id="94269" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="94271" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="94273" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="94277" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="94279" href="Demos.HSP.html#94147" class="Function">homC</a> <a id="94284" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
 <a id="94287" href="Demos.HSP.html#94241" class="Function">kerFâŠ†kerC</a> <a id="94297" class="Symbol">{</a><a id="94298" href="Demos.HSP.html#94298" class="Bound">p</a> <a id="94300" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="94302" href="Demos.HSP.html#94302" class="Bound">q</a><a id="94303" class="Symbol">}</a> <a id="94305" href="Demos.HSP.html#94305" class="Bound">pKq</a> <a id="94309" class="Symbol">(</a><a id="94310" href="Demos.HSP.html#94310" class="Bound">ğ‘¨</a> <a id="94312" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="94314" href="Demos.HSP.html#94314" class="Bound">sA</a> <a id="94317" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="94319" href="Demos.HSP.html#94319" class="Bound">Ï</a><a id="94320" class="Symbol">)</a> <a id="94322" class="Symbol">=</a> <a id="94324" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
  <a id="94332" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="94342" href="Demos.HSP.html#94319" class="Bound">Ï</a> <a id="94344" href="Demos.HSP.html#94298" class="Bound">p</a>   <a id="94348" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="94353" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a> <a id="94370" class="Symbol">{</a><a id="94371" class="Argument">ğ‘¨</a> <a id="94373" class="Symbol">=</a> <a id="94375" href="Demos.HSP.html#94310" class="Bound">ğ‘¨</a><a id="94376" class="Symbol">}</a> <a id="94378" href="Demos.HSP.html#94319" class="Bound">Ï</a> <a id="94380" href="Demos.HSP.html#94298" class="Bound">p</a>              <a id="94395" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
  <a id="94399" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="94401" href="Demos.HSP.html#94298" class="Bound">p</a> <a id="94403" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="94405" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="94409" href="Demos.HSP.html#94319" class="Bound">Ï</a>     <a id="94415" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="94420" href="Demos.HSP.html#71319" class="Function">S-id1</a> <a id="94426" class="Symbol">{</a><a id="94427" class="Argument">â„“</a> <a id="94429" class="Symbol">=</a> <a id="94431" href="Demos.HSP.html#89774" class="Bound">â„“</a><a id="94432" class="Symbol">}</a> <a id="94434" class="Symbol">{</a><a id="94435" class="Argument">p</a> <a id="94437" class="Symbol">=</a> <a id="94439" href="Demos.HSP.html#94298" class="Bound">p</a><a id="94440" class="Symbol">}</a> <a id="94442" class="Symbol">{</a><a id="94443" href="Demos.HSP.html#94302" class="Bound">q</a><a id="94444" class="Symbol">}</a> <a id="94446" class="Symbol">(</a><a id="94447" href="Demos.HSP.html#94678" class="Function">Î¶</a> <a id="94449" href="Demos.HSP.html#94305" class="Bound">pKq</a><a id="94452" class="Symbol">)</a> <a id="94454" href="Demos.HSP.html#94310" class="Bound">ğ‘¨</a> <a id="94456" href="Demos.HSP.html#94314" class="Bound">sA</a> <a id="94459" href="Demos.HSP.html#94319" class="Bound">Ï</a>  <a id="94462" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="94466" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="94468" href="Demos.HSP.html#94302" class="Bound">q</a> <a id="94470" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="94472" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="94476" href="Demos.HSP.html#94319" class="Bound">Ï</a>     <a id="94482" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="94487" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a> <a id="94504" class="Symbol">{</a><a id="94505" class="Argument">ğ‘¨</a> <a id="94507" class="Symbol">=</a> <a id="94509" href="Demos.HSP.html#94310" class="Bound">ğ‘¨</a><a id="94510" class="Symbol">}</a> <a id="94512" href="Demos.HSP.html#94319" class="Bound">Ï</a> <a id="94514" href="Demos.HSP.html#94302" class="Bound">q</a>              <a id="94529" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="94533" href="Demos.HSP.html#73425" class="Function">free-lift</a> <a id="94543" href="Demos.HSP.html#94319" class="Bound">Ï</a> <a id="94545" href="Demos.HSP.html#94302" class="Bound">q</a>   <a id="94549" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
  <a id="94553" class="Keyword">where</a>  <a id="94560" class="Keyword">open</a> <a id="94565" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="94577" href="Demos.HSP.html#94310" class="Bound">ğ‘¨</a>  <a id="94580" class="Keyword">using</a> <a id="94586" class="Symbol">(</a> <a id="94588" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="94592" class="Symbol">)</a>
         <a id="94603" class="Keyword">open</a> <a id="94608" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="94615" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="94618" href="Demos.HSP.html#94310" class="Bound">ğ‘¨</a> <a id="94620" href="Demos.HSP.html#23810" class="Function Operator">]</a>  <a id="94623" class="Keyword">using</a> <a id="94629" class="Symbol">(</a> <a id="94631" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="94635" class="Symbol">)</a>  <a id="94638" class="Symbol">;</a>  <a id="94641" class="Keyword">open</a> <a id="94646" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="94662" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="94665" href="Demos.HSP.html#94310" class="Bound">ğ‘¨</a> <a id="94667" href="Demos.HSP.html#23810" class="Function Operator">]</a>
         <a id="94678" href="Demos.HSP.html#94678" class="Function">Î¶</a> <a id="94680" class="Symbol">:</a> <a id="94682" class="Symbol">âˆ€{</a><a id="94684" href="Demos.HSP.html#94684" class="Bound">p</a> <a id="94686" href="Demos.HSP.html#94686" class="Bound">q</a><a id="94687" class="Symbol">}</a> <a id="94689" class="Symbol">â†’</a> <a id="94691" class="Symbol">(</a><a id="94692" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="94695" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="94696" class="Symbol">)</a> <a id="94698" href="Demos.HSP.html#61453" class="Datatype Operator">âŠ¢</a> <a id="94700" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="94702" href="Demos.HSP.html#61453" class="Datatype Operator">â–¹</a> <a id="94704" href="Demos.HSP.html#94684" class="Bound">p</a> <a id="94706" href="Demos.HSP.html#61453" class="Datatype Operator">â‰ˆ</a> <a id="94708" href="Demos.HSP.html#94686" class="Bound">q</a> <a id="94710" class="Symbol">â†’</a> <a id="94712" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a> <a id="94714" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="94716" href="Demos.HSP.html#94684" class="Bound">p</a> <a id="94718" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="94720" href="Demos.HSP.html#94686" class="Bound">q</a>
         <a id="94731" href="Demos.HSP.html#94678" class="Function">Î¶</a> <a id="94733" href="Demos.HSP.html#94733" class="Bound">x</a> <a id="94735" href="Demos.HSP.html#94735" class="Bound">ğ‘¨</a> <a id="94737" href="Demos.HSP.html#94737" class="Bound">kA</a> <a id="94740" class="Symbol">=</a> <a id="94742" href="Demos.HSP.html#63107" class="Function">sound</a> <a id="94748" class="Symbol">(Î»</a> <a id="94751" href="Demos.HSP.html#94751" class="Bound">y</a> <a id="94753" href="Demos.HSP.html#94753" class="Bound">Ï</a> <a id="94755" class="Symbol">â†’</a> <a id="94757" href="Demos.HSP.html#94751" class="Bound">y</a> <a id="94759" href="Demos.HSP.html#94735" class="Bound">ğ‘¨</a> <a id="94761" href="Demos.HSP.html#94737" class="Bound">kA</a> <a id="94764" href="Demos.HSP.html#94753" class="Bound">Ï</a><a id="94765" class="Symbol">)</a> <a id="94767" href="Demos.HSP.html#94733" class="Bound">x</a> <a id="94769" class="Keyword">where</a> <a id="94775" class="Keyword">open</a> <a id="94780" href="Demos.HSP.html#62807" class="Module">Soundness</a> <a id="94790" class="Symbol">(</a><a id="94791" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="94794" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="94795" class="Symbol">)</a> <a id="94797" href="Demos.HSP.html#94735" class="Bound">ğ‘¨</a>

 <a id="94801" class="Keyword">open</a> <a id="94806" href="Demos.HSP.html#79441" class="Module">FreeAlgebra</a><a id="94817" class="Symbol">{</a><a id="94818" class="Argument">Ï‡</a> <a id="94820" class="Symbol">=</a> <a id="94822" href="Demos.HSP.html#89816" class="Function">c</a><a id="94823" class="Symbol">}(</a><a id="94825" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="94828" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="94829" class="Symbol">)</a> <a id="94831" class="Keyword">using</a> <a id="94837" class="Symbol">(</a> <a id="94839" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[_]</a> <a id="94844" class="Symbol">)</a>
 <a id="94847" href="Demos.HSP.html#94847" class="Function">homFC</a> <a id="94853" class="Symbol">:</a> <a id="94855" href="Demos.HSP.html#32821" class="Function">hom</a> <a id="94859" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="94862" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="94864" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="94866" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a>
 <a id="94869" href="Demos.HSP.html#94847" class="Function">homFC</a> <a id="94875" class="Symbol">=</a> <a id="94877" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="94879" href="Demos.HSP.html#39411" class="Function">HomFactor</a> <a id="94889" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a> <a id="94891" href="Demos.HSP.html#94147" class="Function">homC</a> <a id="94896" href="Demos.HSP.html#81141" class="Function Operator">homF[</a> <a id="94902" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="94904" href="Demos.HSP.html#81141" class="Function Operator">]</a> <a id="94906" href="Demos.HSP.html#94241" class="Function">kerFâŠ†kerC</a> <a id="94916" class="Symbol">(</a><a id="94917" href="Demos.HSP.html#33923" class="Field">isSurjective</a> <a id="94930" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="94932" href="Demos.HSP.html#80604" class="Function Operator">epiF[</a> <a id="94938" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="94940" href="Demos.HSP.html#80604" class="Function Operator">]</a> <a id="94942" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a><a id="94943" class="Symbol">)</a> <a id="94945" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>

</pre>
If \AgdaPair{p}{q} belongs to the kernel of \af{homC}, then
\af{Th} \ab{ğ’¦} includes the identity \ab{p} \af{â‰ˆ} \ab{q}.
%---that is, \af{Th} \ab{ğ’¦} \af{âŠ¢} \ab X \af{â–¹} \ab{p} \af{â‰ˆ} \ab{q}.
Equivalently,
the kernel of \af{homC} is contained in that of \af{homF[ X ]}.
\ifshort
We omit the proof of this lemma and merely display its formal statement, which is the following:
\else
\fi
<pre class="Agda">

 <a id="95357" href="Demos.HSP.html#95357" class="Function">kerCâŠ†kerF</a> <a id="95367" class="Symbol">:</a> <a id="95369" class="Symbol">âˆ€{</a><a id="95371" href="Demos.HSP.html#95371" class="Bound">p</a> <a id="95373" href="Demos.HSP.html#95373" class="Bound">q</a><a id="95374" class="Symbol">}</a> <a id="95376" class="Symbol">â†’</a> <a id="95378" class="Symbol">(</a><a id="95379" href="Demos.HSP.html#95371" class="Bound">p</a> <a id="95381" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95383" href="Demos.HSP.html#95373" class="Bound">q</a><a id="95384" class="Symbol">)</a> <a id="95386" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="95388" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="95392" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="95394" href="Demos.HSP.html#94147" class="Function">homC</a> <a id="95399" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="95401" class="Symbol">â†’</a> <a id="95403" class="Symbol">(</a><a id="95404" href="Demos.HSP.html#95371" class="Bound">p</a> <a id="95406" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95408" href="Demos.HSP.html#95373" class="Bound">q</a><a id="95409" class="Symbol">)</a> <a id="95411" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="95413" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="95417" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="95419" href="Demos.HSP.html#81141" class="Function Operator">homF[</a> <a id="95425" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="95427" href="Demos.HSP.html#81141" class="Function Operator">]</a> <a id="95429" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
</pre>
\ifshort
\vskip2mm
\else
<pre class="Agda">
 <a id="95481" href="Demos.HSP.html#95357" class="Function">kerCâŠ†kerF</a> <a id="95491" class="Symbol">{</a><a id="95492" href="Demos.HSP.html#95492" class="Bound">p</a><a id="95493" class="Symbol">}{</a><a id="95495" href="Demos.HSP.html#95495" class="Bound">q</a><a id="95496" class="Symbol">}</a> <a id="95498" href="Demos.HSP.html#95498" class="Bound">pKq</a> <a id="95502" class="Symbol">=</a> <a id="95504" href="Demos.HSP.html#95629" class="Function">Sğ’¦âŠ«â†’kerğ”½</a> <a id="95513" class="Symbol">(</a><a id="95514" href="Demos.HSP.html#95537" class="Function">Sğ’¦âŠ«</a> <a id="95518" href="Demos.HSP.html#95744" class="Function">pqEqual</a><a id="95525" class="Symbol">)</a>
  <a id="95529" class="Keyword">where</a>
  <a id="95537" href="Demos.HSP.html#95537" class="Function">Sğ’¦âŠ«</a> <a id="95541" class="Symbol">:</a> <a id="95543" class="Symbol">(âˆ€</a> <a id="95546" href="Demos.HSP.html#95546" class="Bound">i</a> <a id="95548" class="Symbol">â†’</a> <a id="95550" href="Demos.HSP.html#91843" class="Function">skEqual</a> <a id="95558" href="Demos.HSP.html#95546" class="Bound">i</a> <a id="95560" class="Symbol">{</a><a id="95561" href="Demos.HSP.html#95492" class="Bound">p</a><a id="95562" class="Symbol">}{</a><a id="95564" href="Demos.HSP.html#95495" class="Bound">q</a><a id="95565" class="Symbol">})</a> <a id="95568" class="Symbol">â†’</a> <a id="95570" href="Demos.HSP.html#66181" class="Function">S</a><a id="95571" class="Symbol">{</a><a id="95572" class="Argument">Î²</a> <a id="95574" class="Symbol">=</a> <a id="95576" href="Demos.HSP.html#89755" class="Bound">Î±</a><a id="95577" class="Symbol">}{</a><a id="95579" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a><a id="95581" class="Symbol">}</a> <a id="95583" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="95585" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a> <a id="95587" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="95589" href="Demos.HSP.html#95492" class="Bound">p</a> <a id="95591" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="95593" href="Demos.HSP.html#95495" class="Bound">q</a>
  <a id="95597" href="Demos.HSP.html#95537" class="Function">Sğ’¦âŠ«</a> <a id="95601" href="Demos.HSP.html#95601" class="Bound">x</a> <a id="95603" href="Demos.HSP.html#95603" class="Bound">ğ‘¨</a> <a id="95605" href="Demos.HSP.html#95605" class="Bound">sA</a> <a id="95608" href="Demos.HSP.html#95608" class="Bound">Ï</a> <a id="95610" class="Symbol">=</a> <a id="95612" href="Demos.HSP.html#95601" class="Bound">x</a> <a id="95614" class="Symbol">(</a><a id="95615" href="Demos.HSP.html#95603" class="Bound">ğ‘¨</a> <a id="95617" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95619" href="Demos.HSP.html#95605" class="Bound">sA</a> <a id="95622" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95624" href="Demos.HSP.html#95608" class="Bound">Ï</a><a id="95625" class="Symbol">)</a>
  <a id="95629" href="Demos.HSP.html#95629" class="Function">Sğ’¦âŠ«â†’kerğ”½</a> <a id="95638" class="Symbol">:</a> <a id="95640" href="Demos.HSP.html#66181" class="Function">S</a><a id="95641" class="Symbol">{</a><a id="95642" class="Argument">Î²</a> <a id="95644" class="Symbol">=</a> <a id="95646" href="Demos.HSP.html#89755" class="Bound">Î±</a><a id="95647" class="Symbol">}{</a><a id="95649" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a><a id="95651" class="Symbol">}</a> <a id="95653" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="95655" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a> <a id="95657" href="Demos.HSP.html#59286" class="Function Operator">âŠ«</a> <a id="95659" href="Demos.HSP.html#95492" class="Bound">p</a> <a id="95661" href="Demos.HSP.html#59286" class="Function Operator">â‰ˆ</a> <a id="95663" href="Demos.HSP.html#95495" class="Bound">q</a> <a id="95665" class="Symbol">â†’</a> <a id="95667" class="Symbol">(</a><a id="95668" href="Demos.HSP.html#95492" class="Bound">p</a> <a id="95670" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95672" href="Demos.HSP.html#95495" class="Bound">q</a><a id="95673" class="Symbol">)</a> <a id="95675" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="95677" href="Demos.HSP.html#16071" class="Function">ker</a> <a id="95681" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="95683" href="Demos.HSP.html#81141" class="Function Operator">homF[</a> <a id="95689" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="95691" href="Demos.HSP.html#81141" class="Function Operator">]</a> <a id="95693" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a>
  <a id="95697" href="Demos.HSP.html#95629" class="Function">Sğ’¦âŠ«â†’kerğ”½</a> <a id="95706" href="Demos.HSP.html#95706" class="Bound">x</a> <a id="95708" class="Symbol">=</a> <a id="95710" href="Demos.HSP.html#61577" class="InductiveConstructor">hyp</a> <a id="95714" class="Symbol">(</a><a id="95715" href="Demos.HSP.html#71426" class="Function">S-id2</a><a id="95720" class="Symbol">{</a><a id="95721" class="Argument">â„“</a> <a id="95723" class="Symbol">=</a> <a id="95725" href="Demos.HSP.html#89774" class="Bound">â„“</a><a id="95726" class="Symbol">}{</a><a id="95728" class="Argument">p</a> <a id="95730" class="Symbol">=</a> <a id="95732" href="Demos.HSP.html#95492" class="Bound">p</a><a id="95733" class="Symbol">}{</a><a id="95735" href="Demos.HSP.html#95495" class="Bound">q</a><a id="95736" class="Symbol">}</a> <a id="95738" href="Demos.HSP.html#95706" class="Bound">x</a><a id="95739" class="Symbol">)</a>

  <a id="95744" href="Demos.HSP.html#95744" class="Function">pqEqual</a> <a id="95752" class="Symbol">:</a> <a id="95754" class="Symbol">âˆ€</a> <a id="95756" href="Demos.HSP.html#95756" class="Bound">i</a> <a id="95758" class="Symbol">â†’</a> <a id="95760" href="Demos.HSP.html#91843" class="Function">skEqual</a> <a id="95768" href="Demos.HSP.html#95756" class="Bound">i</a> <a id="95770" class="Symbol">{</a><a id="95771" href="Demos.HSP.html#95492" class="Bound">p</a><a id="95772" class="Symbol">}{</a><a id="95774" href="Demos.HSP.html#95495" class="Bound">q</a><a id="95775" class="Symbol">}</a>
  <a id="95779" href="Demos.HSP.html#95744" class="Function">pqEqual</a> <a id="95787" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="95789" class="Symbol">=</a> <a id="95791" href="Demos.HSP.html#95897" class="Function">goal</a>  <a id="95797" class="Keyword">where</a>
   <a id="95806" class="Keyword">open</a> <a id="95811" href="Demos.HSP.html#53267" class="Module">Environment</a> <a id="95823" class="Symbol">(</a><a id="95824" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="95826" href="Demos.HSP.html#95787" class="Bound">i</a><a id="95827" class="Symbol">)</a> <a id="95829" class="Keyword">using</a> <a id="95835" class="Symbol">(</a> <a id="95837" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦_âŸ§</a> <a id="95841" class="Symbol">)</a> <a id="95843" class="Symbol">;</a> <a id="95845" class="Keyword">open</a> <a id="95850" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="95857" href="Demos.HSP.html#23810" class="Function Operator">ğ”»[</a> <a id="95860" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="95862" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="95864" href="Demos.HSP.html#23810" class="Function Operator">]</a> <a id="95866" class="Keyword">using</a> <a id="95872" class="Symbol">(</a> <a id="95874" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="95878" class="Symbol">;</a> <a id="95880" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="95884" class="Symbol">;</a> <a id="95886" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="95892" class="Symbol">)</a>
   <a id="95897" href="Demos.HSP.html#95897" class="Function">goal</a> <a id="95902" class="Symbol">:</a> <a id="95904" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="95906" href="Demos.HSP.html#95492" class="Bound">p</a> <a id="95908" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="95910" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="95914" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="95918" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="95920" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="95922" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="95924" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="95926" href="Demos.HSP.html#54029" class="Function Operator">âŸ¦</a> <a id="95928" href="Demos.HSP.html#95495" class="Bound">q</a> <a id="95930" href="Demos.HSP.html#54029" class="Function Operator">âŸ§</a> <a id="95932" href="Demos.HSP.html#7750" class="Field Operator">âŸ¨$âŸ©</a> <a id="95936" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="95940" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="95942" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="95944" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a>
   <a id="95949" href="Demos.HSP.html#95897" class="Function">goal</a>  <a id="95955" class="Symbol">=</a> <a id="95957" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="95963" class="Symbol">(</a><a id="95964" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a><a id="95980" class="Symbol">{</a><a id="95981" class="Argument">ğ‘¨</a> <a id="95983" class="Symbol">=</a> <a id="95985" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="95987" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="95989" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a><a id="95990" class="Symbol">}(</a><a id="95992" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="95996" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="95998" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="96000" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a><a id="96001" class="Symbol">)</a> <a id="96003" href="Demos.HSP.html#95492" class="Bound">p</a><a id="96004" class="Symbol">)</a>
         <a id="96015" class="Symbol">(</a> <a id="96017" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="96023" class="Symbol">(</a><a id="96024" href="Demos.HSP.html#95498" class="Bound">pKq</a> <a id="96028" href="Demos.HSP.html#95787" class="Bound">i</a><a id="96029" class="Symbol">)(</a><a id="96031" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="96035" class="Symbol">(</a><a id="96036" href="Demos.HSP.html#74942" class="Function">free-lift-interp</a><a id="96052" class="Symbol">{</a><a id="96053" class="Argument">ğ‘¨</a> <a id="96055" class="Symbol">=</a> <a id="96057" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="96059" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="96061" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a><a id="96062" class="Symbol">}</a> <a id="96064" class="Symbol">(</a><a id="96065" href="Demos.HSP.html#7538" class="Field">snd</a> <a id="96069" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="96071" href="Demos.HSP.html#95787" class="Bound">i</a> <a id="96073" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a><a id="96074" class="Symbol">)</a> <a id="96076" href="Demos.HSP.html#95495" class="Bound">q</a><a id="96077" class="Symbol">)))</a>

</pre>
\fi
\noindent We conclude that the homomorphism from \Free{X} to \af{ğ‘ª} is injective, whence
\Free{X} is (isomorphic to) a subalgebra of \af{ğ‘ª}.\footnote{The function \af{monâ†’â‰¤} in
the proof of \af{Fâ‰¤C} merely extracts a subalgebra witness from a monomorphism.}

<pre class="Agda">

 <a id="96371" href="Demos.HSP.html#96371" class="Function">monFC</a> <a id="96377" class="Symbol">:</a> <a id="96379" href="Demos.HSP.html#33561" class="Function">mon</a> <a id="96383" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="96386" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="96388" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="96390" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a>
 <a id="96393" href="Demos.HSP.html#96371" class="Function">monFC</a> <a id="96399" class="Symbol">=</a> <a id="96401" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="96403" href="Demos.HSP.html#94847" class="Function">homFC</a> <a id="96409" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="96411" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96413" class="Keyword">record</a> <a id="96420" class="Symbol">{</a> <a id="96422" href="Demos.HSP.html#33463" class="Field">isHom</a> <a id="96428" class="Symbol">=</a> <a id="96430" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="96432" href="Demos.HSP.html#94847" class="Function">homFC</a> <a id="96438" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="96440" class="Symbol">;</a> <a id="96442" href="Demos.HSP.html#33488" class="Field">isInjective</a> <a id="96454" class="Symbol">=</a> <a id="96456" href="Demos.HSP.html#95357" class="Function">kerCâŠ†kerF</a> <a id="96466" class="Symbol">}</a>

 <a id="96470" href="Demos.HSP.html#96470" class="Function">Fâ‰¤C</a> <a id="96474" class="Symbol">:</a> <a id="96476" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="96479" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="96481" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="96483" href="Demos.HSP.html#46099" class="Function Operator">â‰¤</a> <a id="96485" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a>
 <a id="96488" href="Demos.HSP.html#96470" class="Function">Fâ‰¤C</a> <a id="96492" class="Symbol">=</a> <a id="96494" href="Demos.HSP.html#47703" class="Function">monâ†’â‰¤</a> <a id="96500" href="Demos.HSP.html#96371" class="Function">monFC</a>

</pre>
Recall, from \ref{item:1.1} and \ref{item:1.2}, we have \ab{ğ‘ª} \af{âˆˆ}
\af{P} (\af{S} \ab{ğ’¦}) \af{âŠ†} \af{S} (\af{P} \ab{ğ’¦}). We now use this, along with
what we just proved (\af{Fâ‰¤C}), to conclude that \Free{X} belongs to \af{S}
(\af{P} \ab{ğ’¦}).
<pre class="Agda">

 <a id="96778" href="Demos.HSP.html#96778" class="Function">SPF</a> <a id="96782" class="Symbol">:</a> <a id="96784" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="96787" href="Demos.HSP.html#89778" class="Bound">X</a> <a id="96789" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="96791" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="96793" href="Demos.HSP.html#66181" class="Function">S</a> <a id="96795" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="96797" class="Symbol">(</a><a id="96798" href="Demos.HSP.html#66293" class="Function">P</a> <a id="96800" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="96802" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="96804" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="96805" class="Symbol">)</a>
 <a id="96808" href="Demos.HSP.html#96778" class="Function">SPF</a> <a id="96812" class="Symbol">=</a> <a id="96814" class="Keyword">let</a> <a id="96818" class="Symbol">(</a><a id="96819" href="Demos.HSP.html#96819" class="Bound">alg</a> <a id="96823" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96825" href="Demos.HSP.html#96825" class="Bound">âˆˆğ’¦</a> <a id="96828" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96830" href="Demos.HSP.html#96830" class="Bound">â‰¤SP</a><a id="96833" class="Symbol">)</a> <a id="96835" class="Symbol">=</a> <a id="96837" href="Demos.HSP.html#93555" class="Function">PSâŠ†SP</a> <a id="96843" href="Demos.HSP.html#96893" class="Function">psC</a> <a id="96847" class="Keyword">in</a> <a id="96850" class="Symbol">(</a><a id="96851" href="Demos.HSP.html#96819" class="Bound">alg</a> <a id="96855" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96857" href="Demos.HSP.html#96825" class="Bound">âˆˆğ’¦</a> <a id="96860" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96862" href="Demos.HSP.html#46436" class="Function">â‰¤-transitive</a> <a id="96875" href="Demos.HSP.html#96470" class="Function">Fâ‰¤C</a> <a id="96879" href="Demos.HSP.html#96830" class="Bound">â‰¤SP</a><a id="96882" class="Symbol">)</a>
  <a id="96886" class="Keyword">where</a>  <a id="96893" href="Demos.HSP.html#96893" class="Function">psC</a> <a id="96897" class="Symbol">:</a> <a id="96899" href="Demos.HSP.html#91778" class="Function">ğ‘ª</a> <a id="96901" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="96903" href="Demos.HSP.html#66293" class="Function">P</a> <a id="96905" class="Symbol">(</a><a id="96906" href="Demos.HSP.html#89755" class="Bound">Î±</a> <a id="96908" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="96910" href="Demos.HSP.html#89757" class="Bound">Ïáµƒ</a> <a id="96913" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="96915" href="Demos.HSP.html#89774" class="Bound">â„“</a><a id="96916" class="Symbol">)</a> <a id="96918" href="Demos.HSP.html#89833" class="Function">Î¹</a> <a id="96920" class="Symbol">(</a><a id="96921" href="Demos.HSP.html#66181" class="Function">S</a> <a id="96923" href="Demos.HSP.html#89774" class="Bound">â„“</a> <a id="96925" href="Demos.HSP.html#89738" class="Bound">ğ’¦</a><a id="96926" class="Symbol">)</a>
         <a id="96937" href="Demos.HSP.html#96893" class="Function">psC</a> <a id="96941" class="Symbol">=</a> <a id="96943" href="Demos.HSP.html#91666" class="Function">â„‘</a> <a id="96945" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96947" class="Symbol">(</a><a id="96948" href="Demos.HSP.html#91742" class="Function">ğ”„</a> <a id="96950" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96952" class="Symbol">((Î»</a> <a id="96956" href="Demos.HSP.html#96956" class="Bound">i</a> <a id="96958" class="Symbol">â†’</a> <a id="96960" href="Demos.HSP.html#7523" class="Field">fst</a> <a id="96964" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="96966" href="Demos.HSP.html#96956" class="Bound">i</a> <a id="96968" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a><a id="96969" class="Symbol">)</a> <a id="96971" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96973" href="Demos.HSP.html#42653" class="Function">â‰…-refl</a><a id="96979" class="Symbol">))</a>

</pre>
This completes stage \ref{item:1} of the proof.
\end{itemize}
\begin{itemize}
\item \ref{item:2}. We show that every algebra in \af{Mod} (\af{Th} (\af{V}
\ab{ğ’¦})) is a homomorphic image of \af{ğ”½[~\ab{X}~]}.
<pre class="Agda">

<a id="97215" class="Keyword">module</a> <a id="97222" href="Demos.HSP.html#97222" class="Module">_</a> <a id="97224" class="Symbol">{</a><a id="97225" href="Demos.HSP.html#97225" class="Bound">ğ’¦</a> <a id="97227" class="Symbol">:</a> <a id="97229" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="97233" class="Symbol">(</a><a id="97234" href="Demos.HSP.html#22861" class="Record">Algebra</a> <a id="97242" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="97244" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a><a id="97246" class="Symbol">)</a> <a id="97248" class="Symbol">(</a><a id="97249" href="Demos.HSP.html#8423" class="Generalizable">Î±</a> <a id="97251" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="97253" href="Demos.HSP.html#8425" class="Generalizable">Ïáµƒ</a> <a id="97256" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="97258" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="97261" href="Demos.HSP.html#8447" class="Generalizable">â„“</a><a id="97262" class="Symbol">)}</a> <a id="97265" class="Keyword">where</a>
 <a id="97272" class="Keyword">private</a> <a id="97280" href="Demos.HSP.html#97280" class="Function">c</a> <a id="97282" class="Symbol">=</a> <a id="97284" href="Demos.HSP.html#97242" class="Bound">Î±</a> <a id="97286" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="97288" href="Demos.HSP.html#97244" class="Bound">Ïáµƒ</a> <a id="97291" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="97293" href="Demos.HSP.html#97261" class="Bound">â„“</a> <a id="97295" class="Symbol">;</a> <a id="97297" href="Demos.HSP.html#97297" class="Function">Î¹</a> <a id="97299" class="Symbol">=</a> <a id="97301" href="Demos.HSP.html#44640" class="Function">ov</a> <a id="97304" href="Demos.HSP.html#97280" class="Function">c</a>

 <a id="97308" href="Demos.HSP.html#97308" class="Function">Varâ‡’EqCl</a> <a id="97317" class="Symbol">:</a> <a id="97319" class="Symbol">âˆ€</a> <a id="97321" href="Demos.HSP.html#97321" class="Bound">ğ‘¨</a> <a id="97323" class="Symbol">â†’</a> <a id="97325" href="Demos.HSP.html#97321" class="Bound">ğ‘¨</a> <a id="97327" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="97329" href="Demos.HSP.html#60728" class="Function">Mod</a> <a id="97333" class="Symbol">(</a><a id="97334" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="97337" class="Symbol">(</a><a id="97338" href="Demos.HSP.html#66755" class="Function">V</a> <a id="97340" href="Demos.HSP.html#97261" class="Bound">â„“</a> <a id="97342" href="Demos.HSP.html#97297" class="Function">Î¹</a> <a id="97344" href="Demos.HSP.html#97225" class="Bound">ğ’¦</a><a id="97345" class="Symbol">))</a> <a id="97348" class="Symbol">â†’</a> <a id="97350" href="Demos.HSP.html#97321" class="Bound">ğ‘¨</a> <a id="97352" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="97354" href="Demos.HSP.html#66755" class="Function">V</a> <a id="97356" href="Demos.HSP.html#97261" class="Bound">â„“</a> <a id="97358" href="Demos.HSP.html#97297" class="Function">Î¹</a> <a id="97360" href="Demos.HSP.html#97225" class="Bound">ğ’¦</a>
 <a id="97363" href="Demos.HSP.html#97308" class="Function">Varâ‡’EqCl</a> <a id="97372" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97374" href="Demos.HSP.html#97374" class="Bound">ModThA</a> <a id="97381" class="Symbol">=</a> <a id="97383" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="97386" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="97389" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97391" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="97393" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="97395" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="97397" class="Symbol">(</a><a id="97398" href="Demos.HSP.html#96778" class="Function">SPF</a><a id="97401" class="Symbol">{</a><a id="97402" class="Argument">â„“</a> <a id="97404" class="Symbol">=</a> <a id="97406" href="Demos.HSP.html#97261" class="Bound">â„“</a><a id="97407" class="Symbol">}</a> <a id="97409" href="Demos.HSP.html#97225" class="Bound">ğ’¦</a> <a id="97411" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="97413" href="Demos.HSP.html#97686" class="Function">Aim</a><a id="97416" class="Symbol">)</a>
  <a id="97420" class="Keyword">where</a>
  <a id="97428" class="Keyword">open</a> <a id="97433" href="Demos.HSP.html#79441" class="Module">FreeAlgebra</a> <a id="97445" class="Symbol">{</a><a id="97446" class="Argument">Ï‡</a> <a id="97448" class="Symbol">=</a> <a id="97450" href="Demos.HSP.html#97280" class="Function">c</a><a id="97451" class="Symbol">}(</a><a id="97453" href="Demos.HSP.html#60630" class="Function">Th</a> <a id="97456" href="Demos.HSP.html#97225" class="Bound">ğ’¦</a><a id="97457" class="Symbol">)</a> <a id="97459" class="Keyword">using</a> <a id="97465" class="Symbol">(</a> <a id="97467" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[_]</a> <a id="97472" class="Symbol">)</a>
  <a id="97476" href="Demos.HSP.html#97476" class="Function">epiFlA</a> <a id="97483" class="Symbol">:</a> <a id="97485" href="Demos.HSP.html#33998" class="Function">epi</a> <a id="97489" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="97492" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="97495" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97497" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="97499" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="97501" class="Symbol">(</a><a id="97502" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="97511" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97513" href="Demos.HSP.html#97297" class="Function">Î¹</a> <a id="97515" href="Demos.HSP.html#97297" class="Function">Î¹</a><a id="97516" class="Symbol">)</a>
  <a id="97520" href="Demos.HSP.html#97476" class="Function">epiFlA</a> <a id="97527" class="Symbol">=</a> <a id="97529" href="Demos.HSP.html#82876" class="Function">F-ModTh-epi-lift</a><a id="97545" class="Symbol">{</a><a id="97546" class="Argument">â„“</a> <a id="97548" class="Symbol">=</a> <a id="97550" href="Demos.HSP.html#97261" class="Bound">â„“</a><a id="97551" class="Symbol">}</a> <a id="97553" class="Symbol">(Î»</a> <a id="97556" class="Symbol">{</a><a id="97557" href="Demos.HSP.html#97557" class="Bound">p</a> <a id="97559" href="Demos.HSP.html#97559" class="Bound">q</a><a id="97560" class="Symbol">}</a> <a id="97562" class="Symbol">â†’</a> <a id="97564" href="Demos.HSP.html#97374" class="Bound">ModThA</a><a id="97570" class="Symbol">{</a><a id="97571" class="Argument">p</a> <a id="97573" class="Symbol">=</a> <a id="97575" href="Demos.HSP.html#97557" class="Bound">p</a><a id="97576" class="Symbol">}{</a><a id="97578" href="Demos.HSP.html#97559" class="Bound">q</a><a id="97579" class="Symbol">})</a>

  <a id="97585" href="Demos.HSP.html#97585" class="Function">Ï†</a> <a id="97587" class="Symbol">:</a> <a id="97589" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="97598" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97600" href="Demos.HSP.html#97297" class="Function">Î¹</a> <a id="97602" href="Demos.HSP.html#97297" class="Function">Î¹</a> <a id="97604" href="Demos.HSP.html#44710" class="Function Operator">IsHomImageOf</a> <a id="97617" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="97620" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="97623" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97625" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="97627" href="Demos.HSP.html#79748" class="Function Operator">]</a>
  <a id="97631" href="Demos.HSP.html#97585" class="Function">Ï†</a> <a id="97633" class="Symbol">=</a> <a id="97635" href="Demos.HSP.html#34354" class="Function">epiâ†’ontohom</a> <a id="97647" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="97650" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="97653" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97655" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="97657" href="Demos.HSP.html#79748" class="Function Operator">]</a> <a id="97659" class="Symbol">(</a><a id="97660" href="Demos.HSP.html#27789" class="Function">Lift-Alg</a> <a id="97669" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97671" href="Demos.HSP.html#97297" class="Function">Î¹</a> <a id="97673" href="Demos.HSP.html#97297" class="Function">Î¹</a><a id="97674" class="Symbol">)</a> <a id="97676" href="Demos.HSP.html#97476" class="Function">epiFlA</a>

  <a id="97686" href="Demos.HSP.html#97686" class="Function">Aim</a> <a id="97690" class="Symbol">:</a> <a id="97692" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97694" href="Demos.HSP.html#44710" class="Function Operator">IsHomImageOf</a> <a id="97707" href="Demos.HSP.html#79748" class="Function Operator">ğ”½[</a> <a id="97710" href="Demos.HSP.html#23863" class="Function Operator">ğ•Œ[</a> <a id="97713" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a> <a id="97715" href="Demos.HSP.html#23863" class="Function Operator">]</a> <a id="97717" href="Demos.HSP.html#79748" class="Function Operator">]</a>
  <a id="97721" href="Demos.HSP.html#97686" class="Function">Aim</a> <a id="97725" class="Symbol">=</a> <a id="97727" href="Demos.HSP.html#35522" class="Function">âˆ˜-hom</a> <a id="97733" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a> <a id="97735" href="Demos.HSP.html#97585" class="Function">Ï†</a> <a id="97737" href="Demos.HSP.html#9323" class="Function Operator">âˆ£</a><a id="97738" class="Symbol">(</a><a id="97739" href="Demos.HSP.html#41424" class="Field">from</a> <a id="97744" href="Demos.HSP.html#44025" class="Function">Lift-â‰…</a><a id="97750" class="Symbol">)</a><a id="97751" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="97753" href="Demos.HSP.html#14932" class="Function">âˆ˜-IsSurjective</a> <a id="97768" class="Symbol">_</a> <a id="97770" class="Symbol">_</a> <a id="97772" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a> <a id="97774" href="Demos.HSP.html#97585" class="Function">Ï†</a> <a id="97776" href="Demos.HSP.html#9360" class="Function Operator">âˆ¥</a><a id="97777" class="Symbol">(</a><a id="97778" href="Demos.HSP.html#42130" class="Function">fromIsSurjective</a><a id="97794" class="Symbol">(</a><a id="97795" href="Demos.HSP.html#44025" class="Function">Lift-â‰…</a><a id="97801" class="Symbol">{</a><a id="97802" class="Argument">ğ‘¨</a> <a id="97804" class="Symbol">=</a> <a id="97806" href="Demos.HSP.html#97372" class="Bound">ğ‘¨</a><a id="97807" class="Symbol">}))</a>

</pre>
\af{ModTh-closure} and \af{Varâ‡’EqCl} show that
\af{V} \ab{ğ’¦} = \af{Mod} (\af{Th} (\af{V} \ab{ğ’¦})) holds for every class \ab{ğ’¦} of \ab{ğ‘†}-algebras.
Thus, every variety is an equational class.
\end{itemize}

This completes the formal proof of Birkhoff's variety theorem.

%% -----------------------------------------------------------------------------
\section{Discussion}\label{sec:discuss}
How do we differ from the classical, set-theoretic approach? Most noticeable is
our avoidance of all \emph{size} issues. By using universe levels and level
polymorphism, we always make sure we are in a \emph{large enough} universe.
So we can easily talk about ``all algebras such that \ldots'' because these are
always taken from a bounded (but arbitrary) universe.

Our use of setoids never introduces anything new: all the equivalence relations we
use were already present in the classical proofs. The only ``new'' material is
that we have to prove that a few functions respect those equivalences.
%% -----------------------------------------------------------------------------
\section{Related work}
There have been a number of efforts to formalize parts of universal algebra in
type theory besides ours. The Coq proof assistant, based on the Calculus of
Inductive Constructions, was used by Capretta, in~\cite{Capretta:1999}, and
Spitters and Van der Weegen, in~\cite{Spitters:2011}, to formalized the basics
of universal algebra and some classical algebraic structures.
In~\cite{Gunther:2018} Gunther et al developed what seemed (prior to the \agdaalgebras
library) the most extensive library of formalized universal algebra to date.
Like \agdaalgebras,~\cite{Gunther:2018} is based on dependent type theory, is programmed
in \agda, and goes beyond the basic isomorphism theorems to include some equational logic.
Although their coverage is less extensive than that of \agdaalgebras, Gunther et al do treat
\emph{multi-sorted} algebras, whereas \agdaalgebras is currently limited to single-sorted structures.

As noted by Abel~\cite{Abel:2021}, Amato et al, in \cite{Amato:2021}, have
formalized multi-sorted algebras with finitary operators in UniMath. The restriction to
finitary operations was due to limitations of the UniMath type theory, which does
not have W-types nor user-defined inductive types.
Abel also notes that Lynge and Spitters, in~\cite{Lynge:2019}, formalize multi-sorted
algebras with finitary operators in \emph{Homotopy type theory} (\cite{HoTT}) using
Coq.  HoTT's higher inductive types enable them to define quotients as types, without
the need for setoids.  Lynge and Spitters prove three isomorphism theorems concerning
subalgebras and quotient algebras, but do not formalize universal algebras nor varieties.
Finally, in~\cite{Abel:2021}, Abel gives a new formal proof of the soundness theorem and
Birkhoff's completeness theorem for multi-sorted algebraic structures.

%Some other projects aimed at formalizing mathematics generally, and algebra in particular,
% have developed into very extensive libraries that include definitions, theorems, and proofs
% about algebraic structures, such as groups, rings, modules, etc.  However, the goals of these
% efforts seem to be the formalization of special classical algebraic structures, as opposed
% to the general theory of (universal) algebras. Moreover, the part of universal algebra and
% equational logic formalized in the \agdaalgebras library extends beyond the scope of prior efforts.

%Prior to our work, a constructive version of Birkhoff's theorem was published by
% Carlstr\"om in~\cite{Carlstrom:2008}.  However, the logical foundations of that work is constructive set
% theory and, as far as we know, there was no attempt to formalize it in type theory and verify
% it with a proof assistant.


% \section{Conclusion}

% One positive outcome of this project is further evidence in support of dependent type theory and the \agda language. We have shown that, despite the technical demands they place on the user, these technologies are accessible to universal algebraists who possess sufficient patience and resolve to codify their work in type theory and verify their results with a proof assistant.
