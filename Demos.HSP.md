---
layout: default
title : "Demos.HSP module"
date : "2022-04-27"
author: "the agda-algebras development team"
---

### <a id="introduction">Introduction</a>

The Agda Universal Algebra Library ([agda-algebras][]) formalizes the foundations of universal 
algebra in intensional Martin-LÃ¶f type theory ([MLTT][]) using [Agda][] () Â [@Norell:2007; @agdaref].
The library includes a collection of definitions and verified theorems originated in classical 
(set-theory based) universal algebra and equational logic, but adapted to [MLTT][].

The first major milestone of the project is a complete formalization of *Birkhoff's variety
theorem* (also known as the *HSP theorem*)Â [@Birkhoff:1935]. To the best of our knowledge, this
is the first time Birkhoff's celebrated 1935 result has been formalized in [MLTT][].[^1]

Our first attempt to formalize Birkhoff's theorem suffered from two flaws.[^2] First, we 
assumed function extensionality in [MLTT][]; consequently, it was unclear whether the
formalization was fully constructive. Second, an inconsistency could be contrived by taking the
type `X`, representing an arbitrary collection of variable symbols, to be the two element type
(see Â§[7](#sec:discuss){reference-type="ref" reference="sec:discuss"} for details). To resolve
these issues, we developed a new formalization of the HSP theorem based on *setoids* and
rewrote much of the [agda-algebras][] library to support this approach. This enabled us to
avoid function extensionality altogether. Moreover, the type `X` of variable symbols was
treated with more care using the *context* and *environment* types that Andreas Abel uses
inÂ [@Abel:2021] to formalize Birkhoff's completeness theorem. These design choices are
discussed further in Â§[2.2](#setoids){reference-type="ref"
reference="setoids"}--[2.3](#setoid-functions){reference-type="ref"
reference="setoid-functions"}.

What follows is a self-contained formal proof of the HSP theorem in [Agda][]. This is achieved
by extracting a subset of the library, including only the pieces needed for the proof, into a
single literate file.[^3] For spaces reasons, we elide some inessential parts, but strive to
preserve the essential content and character of the development. Specifically, routine or
overly technical components, as well as anything that does not seem to offer insight into the
central ideas of the proof are omitted. (The file [[src/Demos/HSP.lagda]{.sans-serif}](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) mentioned above includes the full proof.)

<!-- We include here every line of code of our new proof of Birkhoff's theorem in a single module, -->
<!-- presented as a literate document,[^4]. Apart from a few dozen imports from the , the module is self-contained. -->

In this paper, we highlight some of the more challenging aspects of formalizing universal algebra in type theory. To some extent, this is a sobering glimpse of the significant technical hurdles that must be overcome to do mathematics in dependent type theory. Nonetheless, we hope to demonstrate that [MLTT][] is a relatively natural language for formalizing universal algebra. Indeed, we believe that researchers with sufficient patience and resolve can reap the substantial rewards of deeper insight and greater confidence in their results by using type
theory and a proof assistant like [Agda][]. On the other hand, this paper is probably not the best place to learn about the latter, since we assume the reader is already familiar with [MLTT][] and [Agda][]. In summary, our main contribution is to show that a straightforward but very general representation of algebraic structures in dependent type theory is quite practical, as we demonstrate by formalizing a major seminal result of universal algebra.

### <a id="preliminaries">Preliminaries</a>

#### <a id="logical-foundations">Logical foundations</a>

To best emulate [MLTT][], we use
<pre class="Agda">
<a id="3945" class="Symbol">{-#</a> <a id="3949" class="Keyword">OPTIONS</a> <a id="3957" class="Pragma">--without-K</a> <a id="3969" class="Pragma">--exact-split</a> <a id="3983" class="Pragma">--safe</a> <a id="3990" class="Symbol">#-}</a>
</pre>
 disables [Streicher's K axiom](https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29); 
directs [Agda][] to accept only definitions behaving like *judgmental* equalities;
**safe** ensures that nothing is postulated outright.
(SeeÂ [@agdaref-axiomk; @agdaref-safeagda; @agdatools-patternmatching].)

Here are brief descriptions of these options, accompanied by links to
related documentation.

*  **without-K** disables [Streicher's K axiom](https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29). See
   the [section on axiom K](https://agda.readthedocs.io/en/v2.6.1/language/without-k.html) in the [Agda Language Reference Manual](https://agda.readthedocs.io/en/v2.6.1.3/language)Â [@agdaref-axiomk].

*  **exact-split** directs [Agda][] to accept only definitions behaving like *judgmental* equalities. See the [Pattern matching and equality](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#pattern-matching-and-equality) section of the [Agda Tools](https://agda.readthedocs.io/en/v2.6.1.3/tools/) documentationÂ [@agdatools-patternmatching].

*  **safe** ensures that nothing is postulated outright---every non-axiom has to be an explicit assumption (e.g., an argument to a function or module). See the [cmdoption-safe](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#cmdoption-safe) section ofÂ [@agdaref-safeagda].

We also make use of the following definitions from [Agda][]'s standard library (ver.Â 1.7).

<pre class="Agda">
<a id="5476" class="Comment">-- Import universe levels and Signature type (described below) from the agda-algebras library.</a>
<a id="5571" class="Keyword">open</a> <a id="5576" class="Keyword">import</a> <a id="5583" href="Overture.html" class="Module">Overture</a> <a id="5592" class="Keyword">using</a> <a id="5598" class="Symbol">(</a> <a id="5600" href="Overture.Signatures.html#520" class="Generalizable">ğ“</a> <a id="5602" class="Symbol">;</a> <a id="5604" href="Overture.Signatures.html#522" class="Generalizable">ğ“¥</a> <a id="5606" class="Symbol">;</a> <a id="5608" href="Overture.Signatures.html#3171" class="Function">Signature</a> <a id="5618" class="Symbol">)</a>
<a id="5620" class="Keyword">module</a> <a id="5627" href="Demos.HSP.html" class="Module">Demos.HSP</a> <a id="5637" class="Symbol">{</a><a id="5638" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="5640" class="Symbol">:</a> <a id="5642" href="Overture.Signatures.html#3171" class="Function">Signature</a> <a id="5652" href="Overture.Signatures.html#520" class="Generalizable">ğ“</a> <a id="5654" href="Overture.Signatures.html#522" class="Generalizable">ğ“¥</a><a id="5655" class="Symbol">}</a> <a id="5657" class="Keyword">where</a>

<a id="5664" class="Comment">-- Import 16 definitions from the Agda Standard Library.</a>
<a id="5721" class="Keyword">open</a> <a id="5726" class="Keyword">import</a> <a id="5733" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a>  <a id="5756" class="Keyword">using</a>  <a id="5763" class="Symbol">(</a> <a id="5765" href="Data.Unit.Polymorphic.Base.html#480" class="Function">âŠ¤</a> <a id="5767" class="Symbol">;</a> <a id="5769" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="5772" class="Symbol">)</a>
<a id="5774" class="Keyword">open</a> <a id="5779" class="Keyword">import</a> <a id="5786" href="Function.html" class="Module">Function</a>               <a id="5809" class="Keyword">using</a>  <a id="5816" class="Symbol">(</a> <a id="5818" href="Function.Base.html#615" class="Function">id</a> <a id="5821" class="Symbol">;</a> <a id="5823" href="Function.Base.html#1031" class="Function Operator">_âˆ˜_</a> <a id="5827" class="Symbol">;</a> <a id="5829" href="Function.Base.html#1554" class="Function">flip</a> <a id="5834" class="Symbol">)</a>
<a id="5836" class="Keyword">open</a> <a id="5841" class="Keyword">import</a> <a id="5848" href="Level.html" class="Module">Level</a>                  <a id="5871" class="Keyword">using</a>  <a id="5878" class="Symbol">(</a> <a id="5880" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="5886" class="Symbol">;</a>  <a id="5889" href="Agda.Primitive.html#810" class="Primitive Operator">_âŠ”_</a> <a id="5893" class="Symbol">;</a> <a id="5895" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="5899" class="Symbol">)</a>
<a id="5901" class="Keyword">open</a> <a id="5906" class="Keyword">import</a> <a id="5913" href="Relation.Binary.html" class="Module">Relation.Binary</a>        <a id="5936" class="Keyword">using</a>  <a id="5943" class="Symbol">(</a> <a id="5945" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="5949" class="Symbol">;</a> <a id="5951" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="5958" class="Symbol">;</a> <a id="5960" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>
                                          <a id="6016" class="Symbol">;</a> <a id="6018" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="6028" class="Symbol">;</a> <a id="6030" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a> <a id="6040" class="Symbol">;</a> <a id="6042" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a>
                                          <a id="6095" class="Symbol">;</a> <a id="6097" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="6101" class="Symbol">;</a> <a id="6103" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a> <a id="6109" class="Symbol">)</a>
<a id="6111" class="Keyword">open</a> <a id="6116" class="Keyword">import</a> <a id="6123" href="Relation.Unary.html" class="Module">Relation.Unary</a>         <a id="6146" class="Keyword">using</a>  <a id="6153" class="Symbol">(</a> <a id="6155" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="6160" class="Symbol">;</a> <a id="6162" href="Relation.Unary.html#1742" class="Function Operator">_âŠ†_</a> <a id="6166" class="Symbol">;</a> <a id="6168" href="Relation.Unary.html#1523" class="Function Operator">_âˆˆ_</a> <a id="6172" class="Symbol">)</a>

<a id="6175" class="Keyword">open</a> <a id="6180" class="Keyword">import</a> <a id="6187" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="6225" class="Keyword">using</a> <a id="6231" class="Symbol">(</a> <a id="6233" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_â‰¡_</a> <a id="6237" class="Symbol">)</a>

<a id="6240" class="Comment">-- Import 23 definitions from the Agda Standard Library and rename 12 of them.</a>
<a id="6319" class="Keyword">open</a> <a id="6324" class="Keyword">import</a> <a id="6331" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="6347" class="Keyword">using</a> <a id="6353" class="Symbol">()</a> <a id="6356" class="Keyword">renaming</a> <a id="6365" class="Symbol">(</a> <a id="6367" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6371" class="Symbol">to</a> <a id="6374" class="Primitive">Type</a> <a id="6379" class="Symbol">)</a>
<a id="6381" class="Keyword">open</a> <a id="6386" class="Keyword">import</a> <a id="6393" href="Data.Product.html" class="Module">Data.Product</a>    <a id="6409" class="Keyword">using</a> <a id="6415" class="Symbol">(</a> <a id="6417" href="Data.Product.html#1167" class="Function Operator">_Ã—_</a> <a id="6421" class="Symbol">;</a> <a id="6423" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="6427" class="Symbol">;</a> <a id="6429" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="6431" class="Symbol">;</a> <a id="6433" href="Data.Product.html#916" class="Function">Î£-syntax</a> <a id="6442" class="Symbol">)</a>
                            <a id="6472" class="Keyword">renaming</a> <a id="6481" class="Symbol">(</a> <a id="6483" href="Agda.Builtin.Sigma.html#252" class="Field">projâ‚</a> <a id="6489" class="Symbol">to</a> <a id="6492" class="Field">fst</a> <a id="6496" class="Symbol">;</a> <a id="6498" href="Agda.Builtin.Sigma.html#264" class="Field">projâ‚‚</a> <a id="6504" class="Symbol">to</a> <a id="6507" class="Field">snd</a> <a id="6511" class="Symbol">)</a>
<a id="6513" class="Keyword">open</a> <a id="6518" class="Keyword">import</a> <a id="6525" href="Function.html" class="Module">Function</a>        <a id="6541" class="Keyword">using</a> <a id="6547" class="Symbol">()</a> <a id="6550" class="Keyword">renaming</a> <a id="6559" class="Symbol">(</a> <a id="6561" href="Function.Bundles.html#1868" class="Record">Func</a> <a id="6566" class="Symbol">to</a> <a id="6569" class="Record">_âŸ¶_</a> <a id="6573" class="Symbol">)</a>

<a id="6576" class="Keyword">open</a>  <a id="6582" href="Demos.HSP.html#6569" class="Module">_âŸ¶_</a>           <a id="6596" class="Keyword">using</a> <a id="6602" class="Symbol">(</a> <a id="6604" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="6609" class="Symbol">)</a> <a id="6611" class="Keyword">renaming</a> <a id="6620" class="Symbol">(</a> <a id="6622" href="Function.Bundles.html#1919" class="Field">f</a> <a id="6624" class="Symbol">to</a> <a id="6627" class="Field">_âŸ¨$âŸ©_</a> <a id="6633" class="Symbol">)</a>
<a id="6635" class="Keyword">open</a> <a id="6640" href="Relation.Binary.Structures.html#1522" class="Module">IsEquivalence</a>  <a id="6655" class="Keyword">using</a> <a id="6661" class="Symbol">()</a>
                    <a id="6684" class="Keyword">renaming</a> <a id="6693" class="Symbol">(</a> <a id="6695" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="6700" class="Symbol">to</a> <a id="6703" class="Field">refláµ‰</a> <a id="6709" class="Symbol">;</a> <a id="6711" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="6715" class="Symbol">to</a> <a id="6718" class="Field">symáµ‰</a> <a id="6723" class="Symbol">;</a> <a id="6725" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="6731" class="Symbol">to</a> <a id="6734" class="Field">transáµ‰</a> <a id="6741" class="Symbol">)</a>
<a id="6743" class="Keyword">open</a> <a id="6748" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>         <a id="6763" class="Keyword">using</a> <a id="6769" class="Symbol">(</a> <a id="6771" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="6779" class="Symbol">;</a> <a id="6781" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="6795" class="Symbol">)</a> <a id="6797" class="Keyword">renaming</a> <a id="6806" class="Symbol">(</a> <a id="6808" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="6812" class="Symbol">to</a> <a id="6815" class="Field Operator">_â‰ˆË¢_</a> <a id="6820" class="Symbol">)</a>
                    <a id="6842" class="Keyword">renaming</a> <a id="6851" class="Symbol">(</a> <a id="6853" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="6858" class="Symbol">to</a> <a id="6861" class="Function">reflË¢</a> <a id="6867" class="Symbol">;</a> <a id="6869" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="6873" class="Symbol">to</a> <a id="6876" class="Function">symË¢</a> <a id="6881" class="Symbol">;</a> <a id="6883" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="6889" class="Symbol">to</a> <a id="6892" class="Function">transË¢</a> <a id="6899" class="Symbol">)</a>

<a id="6902" class="Comment">-- Assign handles to 3 modules of the Agda Standard Library.</a>
<a id="6963" class="Keyword">import</a> <a id="6970" href="Function.Definitions.html" class="Module">Function.Definitions</a>                   <a id="7009" class="Symbol">as</a> <a id="7012" class="Module">FD</a>
<a id="7015" class="Keyword">import</a> <a id="7022" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="7061" class="Symbol">as</a> <a id="7064" class="Module">â‰¡</a>
<a id="7066" class="Keyword">import</a> <a id="7073" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a>       <a id="7112" class="Symbol">as</a> <a id="7115" class="Module">SetoidReasoning</a>

<a id="7132" class="Keyword">private</a> <a id="7140" class="Keyword">variable</a>
 <a id="7150" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="7152" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="7155" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="7157" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a> <a id="7160" href="Demos.HSP.html#7160" class="Generalizable">Î³</a> <a id="7162" href="Demos.HSP.html#7162" class="Generalizable">Ïá¶œ</a> <a id="7165" href="Demos.HSP.html#7165" class="Generalizable">Î´</a> <a id="7167" href="Demos.HSP.html#7167" class="Generalizable">Ïáµˆ</a> <a id="7170" href="Demos.HSP.html#7170" class="Generalizable">Ï</a> <a id="7172" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a> <a id="7174" href="Demos.HSP.html#7174" class="Generalizable">â„“</a> <a id="7176" class="Symbol">:</a> <a id="7178" href="Agda.Primitive.html#597" class="Postulate">Level</a>
 <a id="7185" href="Demos.HSP.html#7185" class="Generalizable">Î“</a> <a id="7187" href="Demos.HSP.html#7187" class="Generalizable">Î”</a> <a id="7189" class="Symbol">:</a> <a id="7191" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="7196" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a>

</pre>

The above imports include some adjustments to "standard" [Agda][] syntax; in particular, we use `Type` in place of `Set`, the infix long arrow symbol, `_âŸ¶_`, in place of `Func` (the type of "setoid functions," discussed in
Â§[2.3](#setoid-functions){reference-type="ref"
reference="setoid-functions"} below), and the symbol `_âŸ¨$âŸ©_` in place of `f` (application of the map of a setoid function); we use `fst` and `snd`, and sometimes `âˆ£_âˆ£` and `âˆ¥_âˆ¥`, to denote the first and second projections out of the product type `_Ã—_`.

<pre class="Agda">
<a id="7748" class="Keyword">module</a> <a id="7755" href="Demos.HSP.html#7755" class="Module">_</a> <a id="7757" class="Symbol">{</a><a id="7758" href="Demos.HSP.html#7758" class="Bound">A</a> <a id="7760" class="Symbol">:</a> <a id="7762" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="7767" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="7769" class="Symbol">}{</a><a id="7771" href="Demos.HSP.html#7771" class="Bound">B</a> <a id="7773" class="Symbol">:</a> <a id="7775" href="Demos.HSP.html#7758" class="Bound">A</a> <a id="7777" class="Symbol">â†’</a> <a id="7779" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="7784" href="Demos.HSP.html#7155" class="Generalizable">Î²</a><a id="7785" class="Symbol">}</a> <a id="7787" class="Keyword">where</a>
 <a id="7794" href="Demos.HSP.html#7794" class="Function Operator">âˆ£_âˆ£</a> <a id="7798" class="Symbol">:</a> <a id="7800" href="Data.Product.html#916" class="Function">Î£[</a> <a id="7803" href="Demos.HSP.html#7803" class="Bound">x</a> <a id="7805" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="7807" href="Demos.HSP.html#7758" class="Bound">A</a> <a id="7809" href="Data.Product.html#916" class="Function">]</a> <a id="7811" href="Demos.HSP.html#7771" class="Bound">B</a> <a id="7813" href="Demos.HSP.html#7803" class="Bound">x</a> <a id="7815" class="Symbol">â†’</a> <a id="7817" href="Demos.HSP.html#7758" class="Bound">A</a>
 <a id="7820" href="Demos.HSP.html#7794" class="Function Operator">âˆ£_âˆ£</a> <a id="7824" class="Symbol">=</a> <a id="7826" href="Demos.HSP.html#6492" class="Field">fst</a>
 <a id="7831" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥_âˆ¥</a> <a id="7835" class="Symbol">:</a> <a id="7837" class="Symbol">(</a><a id="7838" href="Demos.HSP.html#7838" class="Bound">z</a> <a id="7840" class="Symbol">:</a> <a id="7842" href="Data.Product.html#916" class="Function">Î£[</a> <a id="7845" href="Demos.HSP.html#7845" class="Bound">a</a> <a id="7847" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="7849" href="Demos.HSP.html#7758" class="Bound">A</a> <a id="7851" href="Data.Product.html#916" class="Function">]</a> <a id="7853" href="Demos.HSP.html#7771" class="Bound">B</a> <a id="7855" href="Demos.HSP.html#7845" class="Bound">a</a><a id="7856" class="Symbol">)</a> <a id="7858" class="Symbol">â†’</a> <a id="7860" href="Demos.HSP.html#7771" class="Bound">B</a> <a id="7862" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="7864" href="Demos.HSP.html#7838" class="Bound">z</a> <a id="7866" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>
 <a id="7869" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥_âˆ¥</a> <a id="7873" class="Symbol">=</a> <a id="7875" href="Demos.HSP.html#6507" class="Field">snd</a>
</pre>


#### <a id="setoids">Setoids</a>

A *setoid* is a pair consisting of a type and an equivalence relation on that type. Setoids are useful for representing a set with an explicit, "local" notion of equivalence, instead of relying on an implicit, "global" one as is more common in set theory. In reality, informal mathematical practice relies on equivalence relations quite pervasively, taking great care to define only functions that preserve equivalences, while eliding the details. To be properly formal, such details must be made explicit. While there are many different workable approaches, the one that requires no additional meta-theory is based on setoids, which is why we adopt it here. While in some settings setoids are found by others to be burdensome, we have not found them to be so for universal algebra.

The [agda-algebras][] library was first developed without setoids, relying on propositional equality instead, along with some experimental, domain-specific types for equivalence classes, quotients, etc. This
required postulating function extensionality,[^4] which is known to be independent from [MLTT][]Â [@MHE; @MHE:2019]; this was unsatisfactory as we aimed to show that the theorems hold directly in [MLTT][] without extra axioms. The present work makes no appeal to functional extensionality or classical axioms like Choice or Excluded Middle.[^5]

##### <a id="setoid-functions">Setoid functions</a>

A *setoid function* is a function from one setoid to another that respects the underlying equivalences. If [ğ‘¨]{.ab} and [ğ‘©]{.ab} are setoids, we use [ğ‘¨]{.ab}_[âŸ¶]{.aor}_[ğ‘©]{.ab} to denote the type of setoid functions from [ğ‘¨]{.ab} to [ğ‘©]{.ab}.

An example of a setoid function is the identity function from a setoid to itself. We define it, along with a binary composition operation for setoid functions, `_âŸ¨âˆ˜âŸ©_`, as follows.

<pre class="Agda">

<a id="ğ‘–ğ‘‘"></a><a id="9756" href="Demos.HSP.html#9756" class="Function">ğ‘–ğ‘‘</a> <a id="9759" class="Symbol">:</a> <a id="9761" class="Symbol">{</a><a id="9762" href="Demos.HSP.html#9762" class="Bound">A</a> <a id="9764" class="Symbol">:</a> <a id="9766" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9773" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="9775" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="9777" class="Symbol">}</a> <a id="9779" class="Symbol">â†’</a> <a id="9781" href="Demos.HSP.html#9762" class="Bound">A</a> <a id="9783" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="9785" href="Demos.HSP.html#9762" class="Bound">A</a>
<a id="9787" href="Demos.HSP.html#9756" class="Function">ğ‘–ğ‘‘</a> <a id="9790" class="Symbol">{</a><a id="9791" href="Demos.HSP.html#9791" class="Bound">A</a><a id="9792" class="Symbol">}</a> <a id="9794" class="Symbol">=</a> <a id="9796" class="Keyword">record</a> <a id="9803" class="Symbol">{</a> <a id="9805" href="Function.Bundles.html#1919" class="Field">f</a> <a id="9807" class="Symbol">=</a> <a id="9809" href="Function.Base.html#615" class="Function">id</a> <a id="9812" class="Symbol">;</a> <a id="9814" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="9819" class="Symbol">=</a> <a id="9821" href="Function.Base.html#615" class="Function">id</a> <a id="9824" class="Symbol">}</a>

<a id="_âŸ¨âˆ˜âŸ©_"></a><a id="9827" href="Demos.HSP.html#9827" class="Function Operator">_âŸ¨âˆ˜âŸ©_</a> <a id="9833" class="Symbol">:</a>  <a id="9836" class="Symbol">{</a><a id="9837" href="Demos.HSP.html#9837" class="Bound">A</a> <a id="9839" class="Symbol">:</a> <a id="9841" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9848" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="9850" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="9852" class="Symbol">}</a> <a id="9854" class="Symbol">{</a><a id="9855" href="Demos.HSP.html#9855" class="Bound">B</a> <a id="9857" class="Symbol">:</a> <a id="9859" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9866" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="9868" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="9870" class="Symbol">}</a> <a id="9872" class="Symbol">{</a><a id="9873" href="Demos.HSP.html#9873" class="Bound">C</a> <a id="9875" class="Symbol">:</a> <a id="9877" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9884" href="Demos.HSP.html#7160" class="Generalizable">Î³</a> <a id="9886" href="Demos.HSP.html#7162" class="Generalizable">Ïá¶œ</a><a id="9888" class="Symbol">}</a>
 <a id="9891" class="Symbol">â†’</a>       <a id="9899" href="Demos.HSP.html#9855" class="Bound">B</a> <a id="9901" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="9903" href="Demos.HSP.html#9873" class="Bound">C</a>  <a id="9906" class="Symbol">â†’</a>  <a id="9909" href="Demos.HSP.html#9837" class="Bound">A</a> <a id="9911" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="9913" href="Demos.HSP.html#9855" class="Bound">B</a>  <a id="9916" class="Symbol">â†’</a>  <a id="9919" href="Demos.HSP.html#9837" class="Bound">A</a> <a id="9921" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="9923" href="Demos.HSP.html#9873" class="Bound">C</a>

<a id="9926" href="Demos.HSP.html#9926" class="Bound">f</a> <a id="9928" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="9932" href="Demos.HSP.html#9932" class="Bound">g</a> <a id="9934" class="Symbol">=</a> <a id="9936" class="Keyword">record</a>  <a id="9944" class="Symbol">{</a> <a id="9946" href="Function.Bundles.html#1919" class="Field">f</a> <a id="9948" class="Symbol">=</a> <a id="9950" class="Symbol">(</a><a id="9951" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="9957" href="Demos.HSP.html#9926" class="Bound">f</a><a id="9958" class="Symbol">)</a> <a id="9960" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="9962" class="Symbol">(</a><a id="9963" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="9969" href="Demos.HSP.html#9932" class="Bound">g</a><a id="9970" class="Symbol">)</a>
                  <a id="9990" class="Symbol">;</a> <a id="9992" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="9997" class="Symbol">=</a> <a id="9999" class="Symbol">(</a><a id="10000" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10005" href="Demos.HSP.html#9926" class="Bound">f</a><a id="10006" class="Symbol">)</a> <a id="10008" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="10010" class="Symbol">(</a><a id="10011" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10016" href="Demos.HSP.html#9932" class="Bound">g</a><a id="10017" class="Symbol">)</a> <a id="10019" class="Symbol">}</a>
</pre>


#### <a id="inverses">Inverses</a>
<!-- {#inverses .unnumbered} -->

We define the *inverse* of a setoid function in terms of the image of the function's domain, as follows.

<pre class="Agda">

<a id="10223" class="Keyword">module</a> <a id="10230" href="Demos.HSP.html#10230" class="Module">_</a> <a id="10232" class="Symbol">{</a><a id="10233" href="Demos.HSP.html#10233" class="Bound">ğ‘¨</a> <a id="10235" class="Symbol">:</a> <a id="10237" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10244" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="10246" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="10248" class="Symbol">}{</a><a id="10250" href="Demos.HSP.html#10250" class="Bound">ğ‘©</a> <a id="10252" class="Symbol">:</a> <a id="10254" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10261" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="10263" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="10265" class="Symbol">}</a> <a id="10267" class="Keyword">where</a>
 <a id="10274" class="Keyword">open</a> <a id="10279" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="10286" href="Demos.HSP.html#10250" class="Bound">ğ‘©</a> <a id="10288" class="Keyword">using</a> <a id="10294" class="Symbol">(</a> <a id="10296" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="10300" class="Symbol">;</a> <a id="10302" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="10306" class="Symbol">)</a> <a id="10308" class="Keyword">renaming</a> <a id="10317" class="Symbol">(</a> <a id="10319" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="10327" class="Symbol">to</a> <a id="10330" class="Field">B</a> <a id="10332" class="Symbol">)</a>

 <a id="10336" class="Keyword">data</a> <a id="10341" href="Demos.HSP.html#10341" class="Datatype Operator">Image_âˆ‹_</a> <a id="10350" class="Symbol">(</a><a id="10351" href="Demos.HSP.html#10351" class="Bound">f</a> <a id="10353" class="Symbol">:</a> <a id="10355" href="Demos.HSP.html#10233" class="Bound">ğ‘¨</a> <a id="10357" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="10359" href="Demos.HSP.html#10250" class="Bound">ğ‘©</a><a id="10360" class="Symbol">)</a> <a id="10362" class="Symbol">:</a> <a id="10364" href="Demos.HSP.html#10330" class="Field">B</a> <a id="10366" class="Symbol">â†’</a> <a id="10368" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="10373" class="Symbol">(</a><a id="10374" href="Demos.HSP.html#10244" class="Bound">Î±</a> <a id="10376" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="10378" href="Demos.HSP.html#10261" class="Bound">Î²</a> <a id="10380" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="10382" href="Demos.HSP.html#10263" class="Bound">Ïáµ‡</a><a id="10384" class="Symbol">)</a> <a id="10386" class="Keyword">where</a>
  <a id="10394" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="10397" class="Symbol">:</a> <a id="10399" class="Symbol">{</a><a id="10400" href="Demos.HSP.html#10400" class="Bound">b</a> <a id="10402" class="Symbol">:</a> <a id="10404" href="Demos.HSP.html#10330" class="Field">B</a><a id="10405" class="Symbol">}</a> <a id="10407" class="Symbol">â†’</a> <a id="10409" class="Symbol">âˆ€</a> <a id="10411" href="Demos.HSP.html#10411" class="Bound">a</a> <a id="10413" class="Symbol">â†’</a> <a id="10415" href="Demos.HSP.html#10400" class="Bound">b</a> <a id="10417" href="Relation.Binary.Bundles.html#1098" class="Field Operator">â‰ˆ</a> <a id="10419" href="Demos.HSP.html#10351" class="Bound">f</a> <a id="10421" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="10425" href="Demos.HSP.html#10411" class="Bound">a</a> <a id="10427" class="Symbol">â†’</a> <a id="10429" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="10435" href="Demos.HSP.html#10351" class="Bound">f</a> <a id="10437" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="10439" href="Demos.HSP.html#10400" class="Bound">b</a>

</pre>

An inhabitant of the `Image f âˆ‹ b` type is a point `a : Carrier ğ‘¨`, along with a proof `p : b â‰ˆ f a`, that `f` maps `a` to `b`. Since a proof of `Image f âˆ‹ b` must include a concrete witness `a : Carrier ğ‘¨`, we can actually *compute* a range-restricted right-inverse of `f`. Here is the definition of `Inv` which, for extra
certainty, is accompanied by a proof that it gives such a right-inverse.

<pre class="Agda">

 <a id="10867" href="Demos.HSP.html#10867" class="Function">Inv</a> <a id="10871" class="Symbol">:</a> <a id="10873" class="Symbol">(</a><a id="10874" href="Demos.HSP.html#10874" class="Bound">f</a> <a id="10876" class="Symbol">:</a> <a id="10878" href="Demos.HSP.html#10233" class="Bound">ğ‘¨</a> <a id="10880" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="10882" href="Demos.HSP.html#10250" class="Bound">ğ‘©</a><a id="10883" class="Symbol">){</a><a id="10885" href="Demos.HSP.html#10885" class="Bound">b</a> <a id="10887" class="Symbol">:</a> <a id="10889" href="Demos.HSP.html#10330" class="Field">B</a><a id="10890" class="Symbol">}</a> <a id="10892" class="Symbol">â†’</a> <a id="10894" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="10900" href="Demos.HSP.html#10874" class="Bound">f</a> <a id="10902" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="10904" href="Demos.HSP.html#10885" class="Bound">b</a> <a id="10906" class="Symbol">â†’</a> <a id="10908" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="10916" href="Demos.HSP.html#10233" class="Bound">ğ‘¨</a>
 <a id="10919" href="Demos.HSP.html#10867" class="Function">Inv</a> <a id="10923" class="Symbol">_</a> <a id="10925" class="Symbol">(</a><a id="10926" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="10929" href="Demos.HSP.html#10929" class="Bound">a</a> <a id="10931" class="Symbol">_)</a> <a id="10934" class="Symbol">=</a> <a id="10936" href="Demos.HSP.html#10929" class="Bound">a</a>

 <a id="10940" href="Demos.HSP.html#10940" class="Function">InvIsInverseÊ³</a> <a id="10954" class="Symbol">:</a> <a id="10956" class="Symbol">{</a><a id="10957" href="Demos.HSP.html#10957" class="Bound">f</a> <a id="10959" class="Symbol">:</a> <a id="10961" href="Demos.HSP.html#10233" class="Bound">ğ‘¨</a> <a id="10963" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="10965" href="Demos.HSP.html#10250" class="Bound">ğ‘©</a><a id="10966" class="Symbol">}{</a><a id="10968" href="Demos.HSP.html#10968" class="Bound">b</a> <a id="10970" class="Symbol">:</a> <a id="10972" href="Demos.HSP.html#10330" class="Field">B</a><a id="10973" class="Symbol">}(</a><a id="10975" href="Demos.HSP.html#10975" class="Bound">q</a> <a id="10977" class="Symbol">:</a> <a id="10979" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="10985" href="Demos.HSP.html#10957" class="Bound">f</a> <a id="10987" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="10989" href="Demos.HSP.html#10968" class="Bound">b</a><a id="10990" class="Symbol">)</a> <a id="10992" class="Symbol">â†’</a> <a id="10994" href="Demos.HSP.html#10957" class="Bound">f</a> <a id="10996" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="11000" class="Symbol">(</a><a id="11001" href="Demos.HSP.html#10867" class="Function">Inv</a> <a id="11005" href="Demos.HSP.html#10957" class="Bound">f</a> <a id="11007" href="Demos.HSP.html#10975" class="Bound">q</a><a id="11008" class="Symbol">)</a> <a id="11010" href="Relation.Binary.Bundles.html#1098" class="Field Operator">â‰ˆ</a> <a id="11012" href="Demos.HSP.html#10968" class="Bound">b</a>
 <a id="11015" href="Demos.HSP.html#10940" class="Function">InvIsInverseÊ³</a> <a id="11029" class="Symbol">(</a><a id="11030" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="11033" class="Symbol">_</a> <a id="11035" href="Demos.HSP.html#11035" class="Bound">p</a><a id="11036" class="Symbol">)</a> <a id="11038" class="Symbol">=</a> <a id="11040" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="11044" href="Demos.HSP.html#11035" class="Bound">p</a>
</pre>


#### <a id="injective-and-surjective-setoid-functions">Injective and surjective setoid functions</a>
<!-- {#injective-and-surjective-setoid-functions .unnumbered} -->

If `f : ğ‘¨ âŸ¶ ğ‘©` then we call `f` *injective* provided `âˆ€(aâ‚€ aâ‚ : A)`, `f âŸ¨$âŸ© aâ‚€ â‰ˆá´® f âŸ¨$âŸ© aâ‚` implies `aâ‚€ â‰ˆá´¬ aâ‚`; we call `f` *surjective* provided `âˆ€(b : B) âˆƒ(a : A)` such that `f âŸ¨$âŸ© a â‰ˆá´® b`.

We represent injective functions on bare types by the type `Injective`, and use this to define the `IsInjective` type representing the property of being an injective setoid function. Similarly, the type `IsSurjective`
represents the property of being a surjective setoid function and `SurjInv` represents the *right-inverse* of a surjective function.

We reproduce the definitions and prove some of their properties inside the next submodule where we first set the stage by declaring two setoids `ğ‘¨` and `ğ‘©` and naming their equality relations.

<pre class="Agda">

<a id="11980" class="Keyword">module</a> <a id="11987" href="Demos.HSP.html#11987" class="Module">_</a> <a id="11989" class="Symbol">{</a><a id="11990" href="Demos.HSP.html#11990" class="Bound">ğ‘¨</a> <a id="11992" class="Symbol">:</a> <a id="11994" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12001" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="12003" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="12005" class="Symbol">}{</a><a id="12007" href="Demos.HSP.html#12007" class="Bound">ğ‘©</a> <a id="12009" class="Symbol">:</a> <a id="12011" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12018" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="12020" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="12022" class="Symbol">}</a> <a id="12024" class="Keyword">where</a>
 <a id="12031" class="Keyword">open</a> <a id="12036" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12043" href="Demos.HSP.html#11990" class="Bound">ğ‘¨</a> <a id="12045" class="Keyword">using</a> <a id="12051" class="Symbol">()</a> <a id="12054" class="Keyword">renaming</a> <a id="12063" class="Symbol">(</a> <a id="12065" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="12069" class="Symbol">to</a> <a id="12072" class="Field Operator">_â‰ˆá´¬_</a> <a id="12077" class="Symbol">)</a>
 <a id="12080" class="Keyword">open</a> <a id="12085" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12092" href="Demos.HSP.html#12007" class="Bound">ğ‘©</a> <a id="12094" class="Keyword">using</a> <a id="12100" class="Symbol">()</a> <a id="12103" class="Keyword">renaming</a> <a id="12112" class="Symbol">(</a> <a id="12114" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="12118" class="Symbol">to</a> <a id="12121" class="Field Operator">_â‰ˆá´®_</a> <a id="12126" class="Symbol">)</a>
 <a id="12129" class="Keyword">open</a> <a id="12134" href="Function.Definitions.html" class="Module">FD</a> <a id="12137" href="Demos.HSP.html#12072" class="Function Operator">_â‰ˆá´¬_</a> <a id="12142" href="Demos.HSP.html#12121" class="Field Operator">_â‰ˆá´®_</a>

 <a id="12149" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="12161" class="Symbol">:</a> <a id="12163" class="Symbol">(</a><a id="12164" href="Demos.HSP.html#11990" class="Bound">ğ‘¨</a> <a id="12166" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="12168" href="Demos.HSP.html#12007" class="Bound">ğ‘©</a><a id="12169" class="Symbol">)</a> <a id="12171" class="Symbol">â†’</a>  <a id="12174" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="12179" class="Symbol">(</a><a id="12180" href="Demos.HSP.html#12001" class="Bound">Î±</a> <a id="12182" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="12184" href="Demos.HSP.html#12003" class="Bound">Ïáµƒ</a> <a id="12187" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="12189" href="Demos.HSP.html#12020" class="Bound">Ïáµ‡</a><a id="12191" class="Symbol">)</a>
 <a id="12194" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="12206" href="Demos.HSP.html#12206" class="Bound">f</a> <a id="12208" class="Symbol">=</a> <a id="12210" href="Function.Definitions.html#889" class="Function">Injective</a> <a id="12220" class="Symbol">(</a><a id="12221" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="12227" href="Demos.HSP.html#12206" class="Bound">f</a><a id="12228" class="Symbol">)</a>

 <a id="12232" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="12245" class="Symbol">:</a> <a id="12247" class="Symbol">(</a><a id="12248" href="Demos.HSP.html#11990" class="Bound">ğ‘¨</a> <a id="12250" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="12252" href="Demos.HSP.html#12007" class="Bound">ğ‘©</a><a id="12253" class="Symbol">)</a> <a id="12255" class="Symbol">â†’</a>  <a id="12258" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="12263" class="Symbol">(</a><a id="12264" href="Demos.HSP.html#12001" class="Bound">Î±</a> <a id="12266" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="12268" href="Demos.HSP.html#12018" class="Bound">Î²</a> <a id="12270" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="12272" href="Demos.HSP.html#12020" class="Bound">Ïáµ‡</a><a id="12274" class="Symbol">)</a>
 <a id="12277" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="12290" href="Demos.HSP.html#12290" class="Bound">F</a> <a id="12292" class="Symbol">=</a> <a id="12294" class="Symbol">âˆ€</a> <a id="12296" class="Symbol">{</a><a id="12297" href="Demos.HSP.html#12297" class="Bound">y</a><a id="12298" class="Symbol">}</a> <a id="12300" class="Symbol">â†’</a> <a id="12302" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="12308" href="Demos.HSP.html#12290" class="Bound">F</a> <a id="12310" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="12312" href="Demos.HSP.html#12297" class="Bound">y</a>

 <a id="12316" href="Demos.HSP.html#12316" class="Function">SurjInv</a> <a id="12324" class="Symbol">:</a> <a id="12326" class="Symbol">(</a><a id="12327" href="Demos.HSP.html#12327" class="Bound">f</a> <a id="12329" class="Symbol">:</a> <a id="12331" href="Demos.HSP.html#11990" class="Bound">ğ‘¨</a> <a id="12333" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="12335" href="Demos.HSP.html#12007" class="Bound">ğ‘©</a><a id="12336" class="Symbol">)</a> <a id="12338" class="Symbol">â†’</a> <a id="12340" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="12353" href="Demos.HSP.html#12327" class="Bound">f</a> <a id="12355" class="Symbol">â†’</a> <a id="12357" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12365" href="Demos.HSP.html#12007" class="Bound">ğ‘©</a> <a id="12367" class="Symbol">â†’</a> <a id="12369" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12377" href="Demos.HSP.html#11990" class="Bound">ğ‘¨</a>
 <a id="12380" href="Demos.HSP.html#12316" class="Function">SurjInv</a> <a id="12388" href="Demos.HSP.html#12388" class="Bound">f</a> <a id="12390" href="Demos.HSP.html#12390" class="Bound">fonto</a> <a id="12396" href="Demos.HSP.html#12396" class="Bound">b</a> <a id="12398" class="Symbol">=</a> <a id="12400" href="Demos.HSP.html#10867" class="Function">Inv</a> <a id="12404" href="Demos.HSP.html#12388" class="Bound">f</a> <a id="12406" class="Symbol">(</a><a id="12407" href="Demos.HSP.html#12390" class="Bound">fonto</a> <a id="12413" class="Symbol">{</a><a id="12414" href="Demos.HSP.html#12396" class="Bound">b</a><a id="12415" class="Symbol">})</a>

</pre>

Proving that the composition of injective setoid functions is again injective is simply a matter of composing the two assumed witnesses to injectivity. Proving that surjectivity is preserved under composition is only slightly more involved.

<pre class="Agda">

<a id="12687" class="Keyword">module</a> <a id="12694" href="Demos.HSP.html#12694" class="Module">_</a>  <a id="12697" class="Symbol">{</a><a id="12698" href="Demos.HSP.html#12698" class="Bound">ğ‘¨</a> <a id="12700" class="Symbol">:</a> <a id="12702" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12709" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="12711" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="12713" class="Symbol">}{</a><a id="12715" href="Demos.HSP.html#12715" class="Bound">ğ‘©</a> <a id="12717" class="Symbol">:</a> <a id="12719" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12726" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="12728" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="12730" class="Symbol">}{</a><a id="12732" href="Demos.HSP.html#12732" class="Bound">ğ‘ª</a> <a id="12734" class="Symbol">:</a> <a id="12736" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12743" href="Demos.HSP.html#7160" class="Generalizable">Î³</a> <a id="12745" href="Demos.HSP.html#7162" class="Generalizable">Ïá¶œ</a><a id="12747" class="Symbol">}</a>
          <a id="12759" class="Symbol">(</a><a id="12760" href="Demos.HSP.html#12760" class="Bound">f</a> <a id="12762" class="Symbol">:</a> <a id="12764" href="Demos.HSP.html#12698" class="Bound">ğ‘¨</a> <a id="12766" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="12768" href="Demos.HSP.html#12715" class="Bound">ğ‘©</a><a id="12769" class="Symbol">)(</a><a id="12771" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="12773" class="Symbol">:</a> <a id="12775" href="Demos.HSP.html#12715" class="Bound">ğ‘©</a> <a id="12777" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="12779" href="Demos.HSP.html#12732" class="Bound">ğ‘ª</a><a id="12780" class="Symbol">)</a> <a id="12782" class="Keyword">where</a>

 <a id="12790" href="Demos.HSP.html#12790" class="Function">âˆ˜-IsInjective</a> <a id="12804" class="Symbol">:</a> <a id="12806" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="12818" href="Demos.HSP.html#12760" class="Bound">f</a> <a id="12820" class="Symbol">â†’</a> <a id="12822" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="12834" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="12836" class="Symbol">â†’</a> <a id="12838" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="12850" class="Symbol">(</a><a id="12851" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="12853" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="12857" href="Demos.HSP.html#12760" class="Bound">f</a><a id="12858" class="Symbol">)</a>
 <a id="12861" href="Demos.HSP.html#12790" class="Function">âˆ˜-IsInjective</a> <a id="12875" href="Demos.HSP.html#12875" class="Bound">finj</a> <a id="12880" href="Demos.HSP.html#12880" class="Bound">ginj</a> <a id="12885" class="Symbol">=</a> <a id="12887" href="Demos.HSP.html#12875" class="Bound">finj</a> <a id="12892" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="12894" href="Demos.HSP.html#12880" class="Bound">ginj</a>

 <a id="12901" href="Demos.HSP.html#12901" class="Function">âˆ˜-IsSurjective</a> <a id="12916" class="Symbol">:</a> <a id="12918" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="12931" href="Demos.HSP.html#12760" class="Bound">f</a> <a id="12933" class="Symbol">â†’</a> <a id="12935" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="12948" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="12950" class="Symbol">â†’</a> <a id="12952" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="12965" class="Symbol">(</a><a id="12966" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="12968" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="12972" href="Demos.HSP.html#12760" class="Bound">f</a><a id="12973" class="Symbol">)</a>
 <a id="12976" href="Demos.HSP.html#12901" class="Function">âˆ˜-IsSurjective</a> <a id="12991" href="Demos.HSP.html#12991" class="Bound">fonto</a> <a id="12997" href="Demos.HSP.html#12997" class="Bound">gonto</a> <a id="13003" class="Symbol">{</a><a id="13004" href="Demos.HSP.html#13004" class="Bound">y</a><a id="13005" class="Symbol">}</a> <a id="13007" class="Symbol">=</a> <a id="13009" href="Demos.HSP.html#13206" class="Function">Goal</a> <a id="13014" class="Keyword">where</a>
  <a id="13022" href="Demos.HSP.html#13022" class="Function">mp</a> <a id="13025" class="Symbol">:</a> <a id="13027" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="13033" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="13035" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="13037" href="Demos.HSP.html#13004" class="Bound">y</a> <a id="13039" class="Symbol">â†’</a> <a id="13041" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="13047" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="13049" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="13053" href="Demos.HSP.html#12760" class="Bound">f</a> <a id="13055" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="13057" href="Demos.HSP.html#13004" class="Bound">y</a>
  <a id="13061" href="Demos.HSP.html#13022" class="Function">mp</a> <a id="13064" class="Symbol">(</a><a id="13065" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="13068" href="Demos.HSP.html#13068" class="Bound">c</a> <a id="13070" href="Demos.HSP.html#13070" class="Bound">p</a><a id="13071" class="Symbol">)</a> <a id="13073" class="Symbol">=</a> <a id="13075" href="Demos.HSP.html#13125" class="Function">Î·</a> <a id="13077" href="Demos.HSP.html#12991" class="Bound">fonto</a> <a id="13083" class="Keyword">where</a>
   <a id="13092" class="Keyword">open</a> <a id="13097" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13104" href="Demos.HSP.html#12732" class="Bound">ğ‘ª</a> <a id="13106" class="Keyword">using</a> <a id="13112" class="Symbol">(</a> <a id="13114" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13120" class="Symbol">)</a>
   <a id="13125" href="Demos.HSP.html#13125" class="Function">Î·</a> <a id="13127" class="Symbol">:</a> <a id="13129" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="13135" href="Demos.HSP.html#12760" class="Bound">f</a> <a id="13137" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="13139" href="Demos.HSP.html#13068" class="Bound">c</a> <a id="13141" class="Symbol">â†’</a> <a id="13143" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="13149" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="13151" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="13155" href="Demos.HSP.html#12760" class="Bound">f</a> <a id="13157" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="13159" href="Demos.HSP.html#13004" class="Bound">y</a>
   <a id="13164" href="Demos.HSP.html#13125" class="Function">Î·</a> <a id="13166" class="Symbol">(</a><a id="13167" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="13170" href="Demos.HSP.html#13170" class="Bound">a</a> <a id="13172" href="Demos.HSP.html#13172" class="Bound">q</a><a id="13173" class="Symbol">)</a> <a id="13175" class="Symbol">=</a> <a id="13177" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="13180" href="Demos.HSP.html#13170" class="Bound">a</a> <a id="13182" class="Symbol">(</a><a id="13183" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13189" href="Demos.HSP.html#13070" class="Bound">p</a> <a id="13191" class="Symbol">(</a><a id="13192" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13197" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="13199" href="Demos.HSP.html#13172" class="Bound">q</a><a id="13200" class="Symbol">))</a>

  <a id="13206" href="Demos.HSP.html#13206" class="Function">Goal</a> <a id="13211" class="Symbol">:</a> <a id="13213" href="Demos.HSP.html#10341" class="Datatype Operator">Image</a> <a id="13219" href="Demos.HSP.html#12771" class="Bound">g</a> <a id="13221" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="13225" href="Demos.HSP.html#12760" class="Bound">f</a> <a id="13227" href="Demos.HSP.html#10341" class="Datatype Operator">âˆ‹</a> <a id="13229" href="Demos.HSP.html#13004" class="Bound">y</a>
  <a id="13233" href="Demos.HSP.html#13206" class="Function">Goal</a> <a id="13238" class="Symbol">=</a> <a id="13240" href="Demos.HSP.html#13022" class="Function">mp</a> <a id="13243" href="Demos.HSP.html#12997" class="Bound">gonto</a>
</pre>



#### <a id="factorization-of-setoid-functions">Factorization of setoid functions[^6]</a>
<!-- {#factorization-of-setoid-functions .unnumbered} -->

Every (setoid) function `f : A âŸ¶ B` factors as a surjective map `toIm : A âŸ¶ Im f` followed
by an injective map `fromIm : Im f âŸ¶ B`.

<pre class="Agda">

<a id="13558" class="Keyword">module</a> <a id="13565" href="Demos.HSP.html#13565" class="Module">_</a> <a id="13567" class="Symbol">{</a><a id="13568" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a> <a id="13570" class="Symbol">:</a> <a id="13572" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13579" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="13581" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="13583" class="Symbol">}{</a><a id="13585" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a> <a id="13587" class="Symbol">:</a> <a id="13589" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13596" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="13598" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="13600" class="Symbol">}</a> <a id="13602" class="Keyword">where</a>

 <a id="13610" href="Demos.HSP.html#13610" class="Function">Im</a> <a id="13613" class="Symbol">:</a> <a id="13615" class="Symbol">(</a><a id="13616" href="Demos.HSP.html#13616" class="Bound">f</a> <a id="13618" class="Symbol">:</a> <a id="13620" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a> <a id="13622" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="13624" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a><a id="13625" class="Symbol">)</a> <a id="13627" class="Symbol">â†’</a> <a id="13629" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13636" class="Symbol">_</a> <a id="13638" class="Symbol">_</a>
 <a id="13641" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13649" class="Symbol">(</a><a id="13650" href="Demos.HSP.html#13610" class="Function">Im</a> <a id="13653" href="Demos.HSP.html#13653" class="Bound">f</a><a id="13654" class="Symbol">)</a> <a id="13656" class="Symbol">=</a> <a id="13658" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13666" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a>
 <a id="13669" href="Demos.HSP.html#6815" class="Field Operator">_â‰ˆË¢_</a> <a id="13674" class="Symbol">(</a><a id="13675" href="Demos.HSP.html#13610" class="Function">Im</a> <a id="13678" href="Demos.HSP.html#13678" class="Bound">f</a><a id="13679" class="Symbol">)</a> <a id="13681" href="Demos.HSP.html#13681" class="Bound">b1</a> <a id="13684" href="Demos.HSP.html#13684" class="Bound">b2</a> <a id="13687" class="Symbol">=</a> <a id="13689" href="Demos.HSP.html#13678" class="Bound">f</a> <a id="13691" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="13695" href="Demos.HSP.html#13681" class="Bound">b1</a> <a id="13698" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="13700" href="Demos.HSP.html#13678" class="Bound">f</a> <a id="13702" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="13706" href="Demos.HSP.html#13684" class="Bound">b2</a> <a id="13709" class="Keyword">where</a> <a id="13715" class="Keyword">open</a> <a id="13720" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13727" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a>

 <a id="13731" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="13745" class="Symbol">(</a><a id="13746" href="Demos.HSP.html#13610" class="Function">Im</a> <a id="13749" href="Demos.HSP.html#13749" class="Bound">f</a><a id="13750" class="Symbol">)</a> <a id="13752" class="Symbol">=</a> <a id="13754" class="Keyword">record</a> <a id="13761" class="Symbol">{</a> <a id="13763" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="13768" class="Symbol">=</a> <a id="13770" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="13775" class="Symbol">;</a> <a id="13777" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="13781" class="Symbol">=</a> <a id="13783" href="Relation.Binary.Structures.html#1594" class="Function">sym</a><a id="13786" class="Symbol">;</a> <a id="13788" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="13794" class="Symbol">=</a> <a id="13796" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13802" class="Symbol">}</a>
  <a id="13806" class="Keyword">where</a> <a id="13812" class="Keyword">open</a> <a id="13817" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13824" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a>

 <a id="13828" href="Demos.HSP.html#13828" class="Function">toIm</a> <a id="13833" class="Symbol">:</a> <a id="13835" class="Symbol">(</a><a id="13836" href="Demos.HSP.html#13836" class="Bound">f</a> <a id="13838" class="Symbol">:</a> <a id="13840" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a> <a id="13842" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="13844" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a><a id="13845" class="Symbol">)</a> <a id="13847" class="Symbol">â†’</a> <a id="13849" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a> <a id="13851" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="13853" href="Demos.HSP.html#13610" class="Function">Im</a> <a id="13856" href="Demos.HSP.html#13836" class="Bound">f</a>
 <a id="13859" href="Demos.HSP.html#13828" class="Function">toIm</a> <a id="13864" href="Demos.HSP.html#13864" class="Bound">f</a> <a id="13866" class="Symbol">=</a> <a id="13868" class="Keyword">record</a> <a id="13875" class="Symbol">{</a> <a id="13877" href="Function.Bundles.html#1919" class="Field">f</a> <a id="13879" class="Symbol">=</a> <a id="13881" href="Function.Base.html#615" class="Function">id</a> <a id="13884" class="Symbol">;</a> <a id="13886" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13891" class="Symbol">=</a> <a id="13893" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13898" href="Demos.HSP.html#13864" class="Bound">f</a> <a id="13900" class="Symbol">}</a>

 <a id="13904" href="Demos.HSP.html#13904" class="Function">fromIm</a> <a id="13911" class="Symbol">:</a> <a id="13913" class="Symbol">(</a><a id="13914" href="Demos.HSP.html#13914" class="Bound">f</a> <a id="13916" class="Symbol">:</a> <a id="13918" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a> <a id="13920" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="13922" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a><a id="13923" class="Symbol">)</a> <a id="13925" class="Symbol">â†’</a> <a id="13927" href="Demos.HSP.html#13610" class="Function">Im</a> <a id="13930" href="Demos.HSP.html#13914" class="Bound">f</a> <a id="13932" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="13934" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a>
 <a id="13937" href="Demos.HSP.html#13904" class="Function">fromIm</a> <a id="13944" href="Demos.HSP.html#13944" class="Bound">f</a> <a id="13946" class="Symbol">=</a> <a id="13948" class="Keyword">record</a> <a id="13955" class="Symbol">{</a> <a id="13957" href="Function.Bundles.html#1919" class="Field">f</a> <a id="13959" class="Symbol">=</a> <a id="13961" class="Symbol">Î»</a> <a id="13963" href="Demos.HSP.html#13963" class="Bound">x</a> <a id="13965" class="Symbol">â†’</a> <a id="13967" href="Demos.HSP.html#13944" class="Bound">f</a> <a id="13969" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="13973" href="Demos.HSP.html#13963" class="Bound">x</a> <a id="13975" class="Symbol">;</a> <a id="13977" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13982" class="Symbol">=</a> <a id="13984" href="Function.Base.html#615" class="Function">id</a> <a id="13987" class="Symbol">}</a>

 <a id="13991" href="Demos.HSP.html#13991" class="Function">fromIm-inj</a> <a id="14002" class="Symbol">:</a> <a id="14004" class="Symbol">(</a><a id="14005" href="Demos.HSP.html#14005" class="Bound">f</a> <a id="14007" class="Symbol">:</a> <a id="14009" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a> <a id="14011" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="14013" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a><a id="14014" class="Symbol">)</a> <a id="14016" class="Symbol">â†’</a> <a id="14018" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="14030" class="Symbol">(</a><a id="14031" href="Demos.HSP.html#13904" class="Function">fromIm</a> <a id="14038" href="Demos.HSP.html#14005" class="Bound">f</a><a id="14039" class="Symbol">)</a>
 <a id="14042" href="Demos.HSP.html#13991" class="Function">fromIm-inj</a> <a id="14053" class="Symbol">_</a> <a id="14055" class="Symbol">=</a> <a id="14057" href="Function.Base.html#615" class="Function">id</a>

 <a id="14062" href="Demos.HSP.html#14062" class="Function">toIm-surj</a> <a id="14072" class="Symbol">:</a> <a id="14074" class="Symbol">(</a><a id="14075" href="Demos.HSP.html#14075" class="Bound">f</a> <a id="14077" class="Symbol">:</a> <a id="14079" href="Demos.HSP.html#13568" class="Bound">ğ‘¨</a> <a id="14081" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="14083" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a><a id="14084" class="Symbol">)</a> <a id="14086" class="Symbol">â†’</a> <a id="14088" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="14101" class="Symbol">(</a><a id="14102" href="Demos.HSP.html#13828" class="Function">toIm</a> <a id="14107" href="Demos.HSP.html#14075" class="Bound">f</a><a id="14108" class="Symbol">)</a>
 <a id="14111" href="Demos.HSP.html#14062" class="Function">toIm-surj</a> <a id="14121" class="Symbol">_</a> <a id="14123" class="Symbol">=</a> <a id="14125" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="14128" class="Symbol">_</a> <a id="14130" class="Symbol">(</a><a id="14131" href="Demos.HSP.html#6861" class="Function">reflË¢</a> <a id="14137" href="Demos.HSP.html#13585" class="Bound">ğ‘©</a><a id="14138" class="Symbol">)</a>
</pre>


### <a id="basic-universal-algebra">Basic Universal Algebra</a>

We now develop a working vocabulary in [MLTT][] corresponding to classical, single-sorted, set-based universal algebra. We cover a number of important concepts, but limit ourselves to those required to prove Birkhoff's HSP theorem. In each case, we give a type-theoretic version of the informal definition, followed by its implementation in [Agda][].

This section is organized into the following subsections:
Â§[3.1](#signatures){reference-type="ref" reference="signatures"} defines
a general type of *signatures* of algebraic structures;
Â§[3.2](#algebras){reference-type="ref" reference="algebras"} does the
same for structures and their products;
Â§[3.3](#homomorphisms){reference-type="ref" reference="homomorphisms"}
defines *homomorphisms*, *monomorphisms*, and *epimorphisms*, presents
types that codify these concepts, and formally verifies some of their
basic properties; Â§[3.5](#subalgebras){reference-type="ref"
reference="subalgebras"}--[3.6](#terms){reference-type="ref"
reference="terms"} do the same for *subalgebras* and *terms*,
respectively.

#### <a id="signatures">Signatures</a>

An (algebraic) *signature* is a pair `ğ‘† = (F, Ï)` where `F` is a collection of *operation symbols* and `Ï : F â†’ N` is an *arity function* which maps each operation symbol to its arity. Here, `N` denotes the *arity type*. Heuristically, the arity of an operation symbol may be thought of as the number of arguments that takes as
"input."  We represent signatures as inhabitants of the following dependent pair type.

```agda
Signature : (ğ’ª ğ’± : Level) â†’ Type (lsuc (ğ’ª âŠ” ğ’±))
Signature ğ’ª ğ’± = Î£[ F âˆˆ Type ğ’ª ] (F â†’ Type ğ’±)
```

Recalling our syntax for the first and second projections, if `ğ‘†` is a signature, then `âˆ£ ğ‘† âˆ£` denotes the set of operation symbols and `âˆ¥ ğ‘† âˆ¥` denotes the arity function. Thus, if `f : âˆ£ ğ‘† âˆ£` is an operation symbol in the signature `ğ‘†`, then `âˆ¥ ğ‘† âˆ¥ f` is the arity of `f`.

We need to augment our `Signature` type so that it supports algebras over setoid domains. To do so, following AbelÂ [@Abel:2021], we define an operator that translates an ordinary signature into a *setoid signature*, that is, a signature over a setoid domain. This raises a minor technical issue: given operations `f` and `g`, with arguments `u : âˆ¥ ğ‘† âˆ¥ f â†’ A` and `v : âˆ¥ ğ‘† âˆ¥ g â†’ A`, respectively, and a proof of `f â‰¡ g` (*intensional* equality), we ought to be able to check whether `u` and `v` are *pointwise* equal. Technically, `u` and `v` appear to inhabit different types; of course, this is reconciled by the hypothesis `f â‰¡ g`, as we see in the next definition (borrowed fromÂ [@Abel:2021]).

<pre class="Agda">

<a id="EqArgs"></a><a id="16826" href="Demos.HSP.html#16826" class="Function">EqArgs</a> <a id="16833" class="Symbol">:</a>  <a id="16836" class="Symbol">{</a><a id="16837" href="Demos.HSP.html#16837" class="Bound">ğ‘†</a> <a id="16839" class="Symbol">:</a> <a id="16841" href="Overture.Signatures.html#3171" class="Function">Signature</a> <a id="16851" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="16853" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a><a id="16854" class="Symbol">}{</a><a id="16856" href="Demos.HSP.html#16856" class="Bound">Î¾</a> <a id="16858" class="Symbol">:</a> <a id="16860" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="16867" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="16869" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="16871" class="Symbol">}</a>
 <a id="16874" class="Symbol">â†’</a>        <a id="16883" class="Symbol">âˆ€</a> <a id="16885" class="Symbol">{</a><a id="16886" href="Demos.HSP.html#16886" class="Bound">f</a> <a id="16888" href="Demos.HSP.html#16888" class="Bound">g</a><a id="16889" class="Symbol">}</a> <a id="16891" class="Symbol">â†’</a> <a id="16893" href="Demos.HSP.html#16886" class="Bound">f</a> <a id="16895" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="16897" href="Demos.HSP.html#16888" class="Bound">g</a> <a id="16899" class="Symbol">â†’</a> <a id="16901" class="Symbol">(</a><a id="16902" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="16904" href="Demos.HSP.html#16837" class="Bound">ğ‘†</a> <a id="16906" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="16908" href="Demos.HSP.html#16886" class="Bound">f</a> <a id="16910" class="Symbol">â†’</a> <a id="16912" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="16920" href="Demos.HSP.html#16856" class="Bound">Î¾</a><a id="16921" class="Symbol">)</a> <a id="16923" class="Symbol">â†’</a> <a id="16925" class="Symbol">(</a><a id="16926" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="16928" href="Demos.HSP.html#16837" class="Bound">ğ‘†</a> <a id="16930" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="16932" href="Demos.HSP.html#16888" class="Bound">g</a> <a id="16934" class="Symbol">â†’</a> <a id="16936" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="16944" href="Demos.HSP.html#16856" class="Bound">Î¾</a><a id="16945" class="Symbol">)</a> <a id="16947" class="Symbol">â†’</a> <a id="16949" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="16954" class="Symbol">(</a><a id="16955" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="16957" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="16959" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="16961" class="Symbol">)</a>
<a id="16963" href="Demos.HSP.html#16826" class="Function">EqArgs</a> <a id="16970" class="Symbol">{</a><a id="16971" class="Argument">Î¾</a> <a id="16973" class="Symbol">=</a> <a id="16975" href="Demos.HSP.html#16975" class="Bound">Î¾</a><a id="16976" class="Symbol">}</a> <a id="16978" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="16985" href="Demos.HSP.html#16985" class="Bound">u</a> <a id="16987" href="Demos.HSP.html#16987" class="Bound">v</a> <a id="16989" class="Symbol">=</a> <a id="16991" class="Symbol">âˆ€</a> <a id="16993" href="Demos.HSP.html#16993" class="Bound">i</a> <a id="16995" class="Symbol">â†’</a> <a id="16997" href="Demos.HSP.html#16985" class="Bound">u</a> <a id="16999" href="Demos.HSP.html#16993" class="Bound">i</a> <a id="17001" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="17003" href="Demos.HSP.html#16987" class="Bound">v</a> <a id="17005" href="Demos.HSP.html#16993" class="Bound">i</a> <a id="17007" class="Keyword">where</a> <a id="17013" class="Keyword">open</a> <a id="17018" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="17025" href="Demos.HSP.html#16975" class="Bound">Î¾</a> <a id="17027" class="Keyword">using</a> <a id="17033" class="Symbol">(</a> <a id="17035" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="17039" class="Symbol">)</a>

</pre>

This makes it possible to define an operator which translates a signature for algebras over bare types into a signature for algebras over setoids. We denote this operator by `âŸ¨_âŸ©` and define it as follows.

<pre class="Agda">

<a id="âŸ¨_âŸ©"></a><a id="17275" href="Demos.HSP.html#17275" class="Function Operator">âŸ¨_âŸ©</a> <a id="17279" class="Symbol">:</a> <a id="17281" href="Overture.Signatures.html#3171" class="Function">Signature</a> <a id="17291" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="17293" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="17295" class="Symbol">â†’</a> <a id="17297" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17304" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="17306" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="17309" class="Symbol">â†’</a> <a id="17311" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17318" class="Symbol">_</a> <a id="17320" class="Symbol">_</a>

<a id="17323" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="17332" class="Symbol">(</a><a id="17333" href="Demos.HSP.html#17275" class="Function Operator">âŸ¨</a> <a id="17335" href="Demos.HSP.html#17335" class="Bound">ğ‘†</a> <a id="17337" href="Demos.HSP.html#17275" class="Function Operator">âŸ©</a> <a id="17339" href="Demos.HSP.html#17339" class="Bound">Î¾</a><a id="17340" class="Symbol">)</a>                <a id="17357" class="Symbol">=</a> <a id="17359" href="Data.Product.html#916" class="Function">Î£[</a> <a id="17362" href="Demos.HSP.html#17362" class="Bound">f</a> <a id="17364" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="17366" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="17368" href="Demos.HSP.html#17335" class="Bound">ğ‘†</a> <a id="17370" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="17372" href="Data.Product.html#916" class="Function">]</a> <a id="17374" class="Symbol">(</a><a id="17375" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="17377" href="Demos.HSP.html#17335" class="Bound">ğ‘†</a> <a id="17379" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="17381" href="Demos.HSP.html#17362" class="Bound">f</a> <a id="17383" class="Symbol">â†’</a> <a id="17385" href="Demos.HSP.html#17339" class="Bound">Î¾</a> <a id="17387" class="Symbol">.</a><a id="17388" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="17395" class="Symbol">)</a>
<a id="17397" href="Demos.HSP.html#6815" class="Field Operator">_â‰ˆË¢_</a>     <a id="17406" class="Symbol">(</a><a id="17407" href="Demos.HSP.html#17275" class="Function Operator">âŸ¨</a> <a id="17409" href="Demos.HSP.html#17409" class="Bound">ğ‘†</a> <a id="17411" href="Demos.HSP.html#17275" class="Function Operator">âŸ©</a> <a id="17413" href="Demos.HSP.html#17413" class="Bound">Î¾</a><a id="17414" class="Symbol">)(</a><a id="17416" href="Demos.HSP.html#17416" class="Bound">f</a> <a id="17418" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17420" href="Demos.HSP.html#17420" class="Bound">u</a><a id="17421" class="Symbol">)(</a><a id="17423" href="Demos.HSP.html#17423" class="Bound">g</a> <a id="17425" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17427" href="Demos.HSP.html#17427" class="Bound">v</a><a id="17428" class="Symbol">)</a>  <a id="17431" class="Symbol">=</a> <a id="17433" href="Data.Product.html#916" class="Function">Î£[</a> <a id="17436" href="Demos.HSP.html#17436" class="Bound">eqv</a> <a id="17440" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="17442" href="Demos.HSP.html#17416" class="Bound">f</a> <a id="17444" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="17446" href="Demos.HSP.html#17423" class="Bound">g</a> <a id="17448" href="Data.Product.html#916" class="Function">]</a> <a id="17450" href="Demos.HSP.html#16826" class="Function">EqArgs</a><a id="17456" class="Symbol">{</a><a id="17457" class="Argument">Î¾</a> <a id="17459" class="Symbol">=</a> <a id="17461" href="Demos.HSP.html#17413" class="Bound">Î¾</a><a id="17462" class="Symbol">}</a> <a id="17464" href="Demos.HSP.html#17436" class="Bound">eqv</a> <a id="17468" href="Demos.HSP.html#17420" class="Bound">u</a> <a id="17470" href="Demos.HSP.html#17427" class="Bound">v</a>

<a id="17473" href="Demos.HSP.html#6703" class="Field">refláµ‰</a>   <a id="17481" class="Symbol">(</a><a id="17482" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17496" class="Symbol">(</a><a id="17497" href="Demos.HSP.html#17275" class="Function Operator">âŸ¨</a> <a id="17499" href="Demos.HSP.html#17499" class="Bound">ğ‘†</a> <a id="17501" href="Demos.HSP.html#17275" class="Function Operator">âŸ©</a> <a id="17503" href="Demos.HSP.html#17503" class="Bound">Î¾</a><a id="17504" class="Symbol">))</a>                           <a id="17533" class="Symbol">=</a> <a id="17535" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="17542" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17544" class="Symbol">Î»</a> <a id="17546" href="Demos.HSP.html#17546" class="Bound">i</a> <a id="17548" class="Symbol">â†’</a> <a id="17550" href="Demos.HSP.html#6861" class="Function">reflË¢</a>   <a id="17558" href="Demos.HSP.html#17503" class="Bound">Î¾</a>
<a id="17560" href="Demos.HSP.html#6718" class="Field">symáµ‰</a>    <a id="17568" class="Symbol">(</a><a id="17569" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17583" class="Symbol">(</a><a id="17584" href="Demos.HSP.html#17275" class="Function Operator">âŸ¨</a> <a id="17586" href="Demos.HSP.html#17586" class="Bound">ğ‘†</a> <a id="17588" href="Demos.HSP.html#17275" class="Function Operator">âŸ©</a> <a id="17590" href="Demos.HSP.html#17590" class="Bound">Î¾</a><a id="17591" class="Symbol">))</a> <a id="17594" class="Symbol">(</a><a id="17595" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="17602" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17604" href="Demos.HSP.html#17604" class="Bound">g</a><a id="17605" class="Symbol">)</a>              <a id="17620" class="Symbol">=</a> <a id="17622" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="17629" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17631" class="Symbol">Î»</a> <a id="17633" href="Demos.HSP.html#17633" class="Bound">i</a> <a id="17635" class="Symbol">â†’</a> <a id="17637" href="Demos.HSP.html#6876" class="Function">symË¢</a>    <a id="17645" href="Demos.HSP.html#17590" class="Bound">Î¾</a> <a id="17647" class="Symbol">(</a><a id="17648" href="Demos.HSP.html#17604" class="Bound">g</a> <a id="17650" href="Demos.HSP.html#17633" class="Bound">i</a><a id="17651" class="Symbol">)</a>
<a id="17653" href="Demos.HSP.html#6734" class="Field">transáµ‰</a>  <a id="17661" class="Symbol">(</a><a id="17662" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17676" class="Symbol">(</a><a id="17677" href="Demos.HSP.html#17275" class="Function Operator">âŸ¨</a> <a id="17679" href="Demos.HSP.html#17679" class="Bound">ğ‘†</a> <a id="17681" href="Demos.HSP.html#17275" class="Function Operator">âŸ©</a> <a id="17683" href="Demos.HSP.html#17683" class="Bound">Î¾</a><a id="17684" class="Symbol">))</a> <a id="17687" class="Symbol">(</a><a id="17688" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="17695" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17697" href="Demos.HSP.html#17697" class="Bound">g</a><a id="17698" class="Symbol">)(</a><a id="17700" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="17707" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17709" href="Demos.HSP.html#17709" class="Bound">h</a><a id="17710" class="Symbol">)</a>  <a id="17713" class="Symbol">=</a> <a id="17715" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="17722" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17724" class="Symbol">Î»</a> <a id="17726" href="Demos.HSP.html#17726" class="Bound">i</a> <a id="17728" class="Symbol">â†’</a> <a id="17730" href="Demos.HSP.html#6892" class="Function">transË¢</a>  <a id="17738" href="Demos.HSP.html#17683" class="Bound">Î¾</a> <a id="17740" class="Symbol">(</a><a id="17741" href="Demos.HSP.html#17697" class="Bound">g</a> <a id="17743" href="Demos.HSP.html#17726" class="Bound">i</a><a id="17744" class="Symbol">)</a> <a id="17746" class="Symbol">(</a><a id="17747" href="Demos.HSP.html#17709" class="Bound">h</a> <a id="17749" href="Demos.HSP.html#17726" class="Bound">i</a><a id="17750" class="Symbol">)</a>
</pre>


#### <a id="algebras">Algebras</a>

An *algebraic structure* `ğ‘¨ = (A, Fá´¬)` *in the signature* `ğ‘† = (F, Ï)`, or `ğ‘†`-*algebra*, consists of
*  a type `A`, called the *domain* of the algebra;
*  a collection `Fá´¬ := {fá´¬ âˆ£ f âˆˆ F, fá´¬ : (Ï f â†’ A) â†’ A}` of *operations* on `A`;
*  a (potentially empty) collection of *identities* satisfied by elements and operations of `ğ‘¨`.
Our [Agda][] implementation represents algebras as inhabitants of a record type with two fields---a `Domain` setoid denoting the domain of the algebra, and an `Interp` function denoting the interpretation in the algebra of each operation symbol in `ğ‘†`. We postpone introducing identities untilÂ Â§[4](#equational-logic){reference-type="ref" reference="equational-logic"}.

<pre class="Agda">

<a id="18517" class="Keyword">record</a> <a id="Algebra"></a><a id="18524" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="18532" href="Demos.HSP.html#18532" class="Bound">Î±</a> <a id="18534" href="Demos.HSP.html#18534" class="Bound">Ï</a> <a id="18536" class="Symbol">:</a> <a id="18538" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="18543" class="Symbol">(</a><a id="18544" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="18546" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="18548" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="18550" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="18552" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="18556" class="Symbol">(</a><a id="18557" href="Demos.HSP.html#18532" class="Bound">Î±</a> <a id="18559" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="18561" href="Demos.HSP.html#18534" class="Bound">Ï</a><a id="18562" class="Symbol">))</a> <a id="18565" class="Keyword">where</a>
 <a id="18572" class="Keyword">field</a>  <a id="Algebra.Domain"></a><a id="18579" href="Demos.HSP.html#18579" class="Field">Domain</a>  <a id="18587" class="Symbol">:</a> <a id="18589" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="18596" href="Demos.HSP.html#18532" class="Bound">Î±</a> <a id="18598" href="Demos.HSP.html#18534" class="Bound">Ï</a>
        <a id="Algebra.Interp"></a><a id="18608" href="Demos.HSP.html#18608" class="Field">Interp</a>  <a id="18616" class="Symbol">:</a> <a id="18618" href="Demos.HSP.html#17275" class="Function Operator">âŸ¨</a> <a id="18620" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="18622" href="Demos.HSP.html#17275" class="Function Operator">âŸ©</a> <a id="18624" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="18631" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="18633" href="Demos.HSP.html#18579" class="Field">Domain</a>

</pre>

Thus, for each operation symbol in `ğ‘†` we have a setoid function `f` whose domain is a power of `Domain` and whose codomain is `Domain`. Further, we define some syntactic sugar to make our formalizations easier to read and reason about. Specifically, if `ğ‘¨` is an algebra, then
*  `ğ”»[ ğ‘¨ ]` denotes the `Domain` setoid of `ğ‘¨`,
*  `ğ•Œ[ ğ‘¨ ]` is the underlying carrier of (the `Domain` setoid of) `ğ‘¨`, and
*  `f Ì‚ ğ‘¨` denotes the interpretation of the operation symbol `f` in the algebra `ğ‘¨`.

<pre class="Agda">

<a id="19155" class="Keyword">open</a> <a id="19160" href="Demos.HSP.html#18524" class="Module">Algebra</a>
<a id="ğ”»[_]"></a><a id="19168" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[_]</a> <a id="19173" class="Symbol">:</a> <a id="19175" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="19183" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="19185" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="19188" class="Symbol">â†’</a>  <a id="19191" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="19198" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="19200" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a>
<a id="19203" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="19206" href="Demos.HSP.html#19206" class="Bound">ğ‘¨</a> <a id="19208" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="19210" class="Symbol">=</a> <a id="19212" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="19219" href="Demos.HSP.html#19206" class="Bound">ğ‘¨</a>

<a id="ğ•Œ[_]"></a><a id="19222" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[_]</a> <a id="19227" class="Symbol">:</a> <a id="19229" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="19237" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="19239" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="19242" class="Symbol">â†’</a>  <a id="19245" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="19250" href="Demos.HSP.html#7150" class="Generalizable">Î±</a>
<a id="19252" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="19255" href="Demos.HSP.html#19255" class="Bound">ğ‘¨</a> <a id="19257" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="19259" class="Symbol">=</a> <a id="19261" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="19269" class="Symbol">(</a><a id="19270" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="19277" href="Demos.HSP.html#19255" class="Bound">ğ‘¨</a><a id="19278" class="Symbol">)</a>

<a id="_Ì‚_"></a><a id="19281" href="Demos.HSP.html#19281" class="Function Operator">_Ì‚_</a> <a id="19285" class="Symbol">:</a> <a id="19287" class="Symbol">(</a><a id="19288" href="Demos.HSP.html#19288" class="Bound">f</a> <a id="19290" class="Symbol">:</a> <a id="19292" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="19294" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="19296" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a><a id="19297" class="Symbol">)(</a><a id="19299" href="Demos.HSP.html#19299" class="Bound">ğ‘¨</a> <a id="19301" class="Symbol">:</a> <a id="19303" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="19311" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="19313" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="19315" class="Symbol">)</a> <a id="19317" class="Symbol">â†’</a> <a id="19319" class="Symbol">(</a><a id="19320" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="19322" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="19324" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="19326" href="Demos.HSP.html#19288" class="Bound">f</a>  <a id="19329" class="Symbol">â†’</a>  <a id="19332" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="19335" href="Demos.HSP.html#19299" class="Bound">ğ‘¨</a> <a id="19337" href="Demos.HSP.html#19222" class="Function Operator">]</a><a id="19338" class="Symbol">)</a> <a id="19340" class="Symbol">â†’</a> <a id="19342" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="19345" href="Demos.HSP.html#19299" class="Bound">ğ‘¨</a> <a id="19347" href="Demos.HSP.html#19222" class="Function Operator">]</a>
<a id="19349" href="Demos.HSP.html#19349" class="Bound">f</a> <a id="19351" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="19353" href="Demos.HSP.html#19353" class="Bound">ğ‘¨</a> <a id="19355" class="Symbol">=</a> <a id="19357" class="Symbol">Î»</a> <a id="19359" href="Demos.HSP.html#19359" class="Bound">a</a> <a id="19361" class="Symbol">â†’</a> <a id="19363" class="Symbol">(</a><a id="19364" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="19371" href="Demos.HSP.html#19353" class="Bound">ğ‘¨</a><a id="19372" class="Symbol">)</a> <a id="19374" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="19378" class="Symbol">(</a><a id="19379" href="Demos.HSP.html#19349" class="Bound">f</a> <a id="19381" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="19383" href="Demos.HSP.html#19359" class="Bound">a</a><a id="19384" class="Symbol">)</a>
</pre>

#### <a id="universe-levels-of-algebra-types">Universe levels of algebra types</a>
<!-- {#universe-levels-of-algebra-types .unnumbered} -->

Types belong to *universes*, which are structured in [Agda][] as follows: 
`Type â„“ : Type (suc â„“)`, `Type (suc â„“) : Type (suc (suc â„“))`.[^7] 
While this means that `Type â„“` has type `Type (suc â„“)`, it does *not* imply that `Type â„“` 
has type `Type (suc (suc â„“))`. In other words, [Agda][]'s universes are *non-cumulative*. 
This can be advantageous as it becomes possible to treat size issues more generally and precisely. 
However, dealing with explicit universe levels can be daunting, and the standard literature
(in which uniform smallness is typically assumed) offers little guidance. While in some settings, 
such as category theory, formalizing in [Agda][] works smoothly with respect to universe levels 
(seeÂ [@agda-categories]), in universal algebra the terrain is bumpier. Thus, it seems worthwhile to 
explain how we make use of universe lifting and lowering functions, available in the 
[Agda Standard Library][], to develop domain-specific tools for dealing with [Agda][]'s non-cumulative 
universe hierarchy.

<!-- Let us be more concrete about what is at issue by considering a typical example. frequently encounters problems during the type-checking process and responds by printing a message like the following. Here informs us that it encountered universe level on line 498 of the HSP module, where it was expecting level Â Â Â Â ( ). In this case, we tried to use an algebra inhabiting the type whereas expected an inhabitant of the type ( ( )) . The operation of the standard library embeds a type into a higher universe. Specializing to our situation, we define a function Â with the following interface. -2mm . -->

The `Lift` operation of the standard library embeds a type into a higher universe. Specializing `Lift` to our situation, we define a function `Lift-Alg`.

<pre class="Agda">

<a id="21341" class="Keyword">module</a> <a id="21348" href="Demos.HSP.html#21348" class="Module">_</a> <a id="21350" class="Symbol">(</a><a id="21351" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a> <a id="21353" class="Symbol">:</a> <a id="21355" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="21363" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="21365" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="21367" class="Symbol">)</a> <a id="21369" class="Keyword">where</a>
 <a id="21376" class="Keyword">open</a> <a id="21381" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="21388" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="21391" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a> <a id="21393" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="21395" class="Keyword">using</a> <a id="21401" class="Symbol">(</a> <a id="21403" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="21407" class="Symbol">;</a> <a id="21409" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21414" class="Symbol">;</a> <a id="21416" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21420" class="Symbol">;</a> <a id="21422" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21428" class="Symbol">)</a> <a id="21430" class="Symbol">;</a> <a id="21432" class="Keyword">open</a> <a id="21437" href="Level.html" class="Module">Level</a>
 <a id="21444" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="21454" class="Symbol">:</a> <a id="21456" class="Symbol">(</a><a id="21457" href="Demos.HSP.html#21457" class="Bound">â„“</a> <a id="21459" class="Symbol">:</a> <a id="21461" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="21466" class="Symbol">)</a> <a id="21468" class="Symbol">â†’</a> <a id="21470" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="21478" class="Symbol">(</a><a id="21479" href="Demos.HSP.html#21363" class="Bound">Î±</a> <a id="21481" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="21483" href="Demos.HSP.html#21457" class="Bound">â„“</a><a id="21484" class="Symbol">)</a> <a id="21486" href="Demos.HSP.html#21365" class="Bound">Ïáµƒ</a>
 <a id="21490" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="21497" class="Symbol">(</a><a id="21498" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="21508" href="Demos.HSP.html#21508" class="Bound">â„“</a><a id="21509" class="Symbol">)</a> <a id="21511" class="Symbol">=</a>
  <a id="21515" class="Keyword">record</a>  <a id="21523" class="Symbol">{</a> <a id="21525" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="21540" class="Symbol">=</a> <a id="21542" href="Level.html#400" class="Record">Lift</a> <a id="21547" href="Demos.HSP.html#21508" class="Bound">â„“</a> <a id="21549" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="21552" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a> <a id="21554" href="Demos.HSP.html#19222" class="Function Operator">]</a>
          <a id="21566" class="Symbol">;</a> <a id="21568" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a>            <a id="21583" class="Symbol">=</a> <a id="21585" class="Symbol">Î»</a> <a id="21587" href="Demos.HSP.html#21587" class="Bound">x</a> <a id="21589" href="Demos.HSP.html#21589" class="Bound">y</a> <a id="21591" class="Symbol">â†’</a> <a id="21593" href="Level.html#470" class="Field">lower</a> <a id="21599" href="Demos.HSP.html#21587" class="Bound">x</a> <a id="21601" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="21603" href="Level.html#470" class="Field">lower</a> <a id="21609" href="Demos.HSP.html#21589" class="Bound">y</a>
          <a id="21621" class="Symbol">;</a> <a id="21623" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="21638" class="Symbol">=</a> <a id="21640" class="Keyword">record</a> <a id="21647" class="Symbol">{</a> <a id="21649" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="21654" class="Symbol">=</a> <a id="21656" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21661" class="Symbol">;</a> <a id="21663" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="21667" class="Symbol">=</a> <a id="21669" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21673" class="Symbol">;</a> <a id="21675" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="21681" class="Symbol">=</a> <a id="21683" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21689" class="Symbol">}</a>
          <a id="21701" class="Symbol">}</a>
 <a id="21704" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="21711" class="Symbol">(</a><a id="21712" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="21722" href="Demos.HSP.html#21722" class="Bound">â„“</a><a id="21723" class="Symbol">)</a> <a id="21725" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="21729" class="Symbol">(</a><a id="21730" href="Demos.HSP.html#21730" class="Bound">f</a> <a id="21732" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21734" href="Demos.HSP.html#21734" class="Bound">la</a><a id="21736" class="Symbol">)</a> <a id="21738" class="Symbol">=</a> <a id="21740" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="21745" class="Symbol">((</a><a id="21747" href="Demos.HSP.html#21730" class="Bound">f</a> <a id="21749" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="21751" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a><a id="21752" class="Symbol">)</a> <a id="21754" class="Symbol">(</a><a id="21755" href="Level.html#470" class="Field">lower</a> <a id="21761" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="21763" href="Demos.HSP.html#21734" class="Bound">la</a><a id="21765" class="Symbol">))</a>
 <a id="21769" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21774" class="Symbol">(</a><a id="21775" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="21782" class="Symbol">(</a><a id="21783" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="21793" href="Demos.HSP.html#21793" class="Bound">â„“</a><a id="21794" class="Symbol">))</a> <a id="21797" class="Symbol">(</a><a id="21798" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21805" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21807" href="Demos.HSP.html#21807" class="Bound">lab</a><a id="21810" class="Symbol">)</a> <a id="21812" class="Symbol">=</a> <a id="21814" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21819" class="Symbol">(</a><a id="21820" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="21827" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a><a id="21828" class="Symbol">)</a> <a id="21830" class="Symbol">((</a><a id="21832" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="21839" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21841" href="Demos.HSP.html#21807" class="Bound">lab</a><a id="21844" class="Symbol">))</a>

 <a id="21849" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="21859" class="Symbol">:</a> <a id="21861" class="Symbol">(</a><a id="21862" href="Demos.HSP.html#21862" class="Bound">â„“</a> <a id="21864" class="Symbol">:</a> <a id="21866" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="21871" class="Symbol">)</a> <a id="21873" class="Symbol">â†’</a> <a id="21875" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="21883" href="Demos.HSP.html#21363" class="Bound">Î±</a> <a id="21885" class="Symbol">(</a><a id="21886" href="Demos.HSP.html#21365" class="Bound">Ïáµƒ</a> <a id="21889" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="21891" href="Demos.HSP.html#21862" class="Bound">â„“</a><a id="21892" class="Symbol">)</a>
 <a id="21895" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="21902" class="Symbol">(</a><a id="21903" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="21913" href="Demos.HSP.html#21913" class="Bound">â„“</a><a id="21914" class="Symbol">)</a> <a id="21916" class="Symbol">=</a>
  <a id="21920" class="Keyword">record</a>  <a id="21928" class="Symbol">{</a> <a id="21930" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="21945" class="Symbol">=</a> <a id="21947" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="21950" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a> <a id="21952" href="Demos.HSP.html#19222" class="Function Operator">]</a>
          <a id="21964" class="Symbol">;</a> <a id="21966" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a>            <a id="21981" class="Symbol">=</a> <a id="21983" class="Symbol">Î»</a> <a id="21985" href="Demos.HSP.html#21985" class="Bound">x</a> <a id="21987" href="Demos.HSP.html#21987" class="Bound">y</a> <a id="21989" class="Symbol">â†’</a> <a id="21991" href="Level.html#400" class="Record">Lift</a> <a id="21996" href="Demos.HSP.html#21913" class="Bound">â„“</a> <a id="21998" class="Symbol">(</a><a id="21999" href="Demos.HSP.html#21985" class="Bound">x</a> <a id="22001" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="22003" href="Demos.HSP.html#21987" class="Bound">y</a><a id="22004" class="Symbol">)</a>
          <a id="22016" class="Symbol">;</a> <a id="22018" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="22033" class="Symbol">=</a> <a id="22035" class="Keyword">record</a>  <a id="22043" class="Symbol">{</a> <a id="22045" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="22051" class="Symbol">=</a> <a id="22053" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22058" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                     <a id="22100" class="Symbol">;</a> <a id="22102" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="22108" class="Symbol">=</a> <a id="22110" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22115" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="22117" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="22121" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="22123" href="Level.html#470" class="Field">lower</a>
                                     <a id="22166" class="Symbol">;</a> <a id="22168" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="22174" class="Symbol">=</a> <a id="22176" class="Symbol">Î»</a> <a id="22178" href="Demos.HSP.html#22178" class="Bound">x</a> <a id="22180" href="Demos.HSP.html#22180" class="Bound">y</a> <a id="22182" class="Symbol">â†’</a> <a id="22184" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22189" class="Symbol">(</a><a id="22190" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="22196" class="Symbol">(</a><a id="22197" href="Level.html#470" class="Field">lower</a> <a id="22203" href="Demos.HSP.html#22178" class="Bound">x</a><a id="22204" class="Symbol">)(</a><a id="22206" href="Level.html#470" class="Field">lower</a> <a id="22212" href="Demos.HSP.html#22180" class="Bound">y</a><a id="22213" class="Symbol">))</a>
                                     <a id="22253" class="Symbol">}</a>
          <a id="22265" class="Symbol">}</a>
 <a id="22268" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="22275" class="Symbol">(</a><a id="22276" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="22286" href="Demos.HSP.html#22286" class="Bound">â„“</a> <a id="22288" class="Symbol">)</a> <a id="22290" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="22294" class="Symbol">(</a><a id="22295" href="Demos.HSP.html#22295" class="Bound">f</a> <a id="22297" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22299" href="Demos.HSP.html#22299" class="Bound">la</a><a id="22301" class="Symbol">)</a> <a id="22303" class="Symbol">=</a> <a id="22305" class="Symbol">(</a><a id="22306" href="Demos.HSP.html#22295" class="Bound">f</a> <a id="22308" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="22310" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a><a id="22311" class="Symbol">)</a> <a id="22313" href="Demos.HSP.html#22299" class="Bound">la</a>
 <a id="22317" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="22322" class="Symbol">(</a><a id="22323" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="22330" class="Symbol">(</a><a id="22331" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="22341" href="Demos.HSP.html#22341" class="Bound">â„“</a><a id="22342" class="Symbol">))(</a><a id="22345" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="22352" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22354" href="Demos.HSP.html#22354" class="Bound">lab</a><a id="22357" class="Symbol">)</a> <a id="22359" class="Symbol">=</a>
  <a id="22363" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22368" class="Symbol">(</a> <a id="22370" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="22375" class="Symbol">(</a><a id="22376" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="22383" href="Demos.HSP.html#21351" class="Bound">ğ‘¨</a><a id="22384" class="Symbol">)</a> <a id="22386" class="Symbol">(</a> <a id="22388" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="22395" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22397" class="Symbol">Î»</a> <a id="22399" href="Demos.HSP.html#22399" class="Bound">i</a> <a id="22401" class="Symbol">â†’</a> <a id="22403" href="Level.html#470" class="Field">lower</a> <a id="22409" class="Symbol">(</a><a id="22410" href="Demos.HSP.html#22354" class="Bound">lab</a> <a id="22414" href="Demos.HSP.html#22399" class="Bound">i</a><a id="22415" class="Symbol">)</a> <a id="22417" class="Symbol">)</a> <a id="22419" class="Symbol">)</a>

<a id="Lift-Alg"></a><a id="22422" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="22431" class="Symbol">:</a> <a id="22433" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="22441" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="22443" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="22446" class="Symbol">â†’</a> <a id="22448" class="Symbol">(</a><a id="22449" href="Demos.HSP.html#22449" class="Bound">â„“â‚€</a> <a id="22452" href="Demos.HSP.html#22452" class="Bound">â„“â‚</a> <a id="22455" class="Symbol">:</a> <a id="22457" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="22462" class="Symbol">)</a> <a id="22464" class="Symbol">â†’</a> <a id="22466" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="22474" class="Symbol">(</a><a id="22475" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="22477" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="22479" href="Demos.HSP.html#22449" class="Bound">â„“â‚€</a><a id="22481" class="Symbol">)</a> <a id="22483" class="Symbol">(</a><a id="22484" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="22487" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="22489" href="Demos.HSP.html#22452" class="Bound">â„“â‚</a><a id="22491" class="Symbol">)</a>
<a id="22493" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="22502" href="Demos.HSP.html#22502" class="Bound">ğ‘¨</a> <a id="22504" href="Demos.HSP.html#22504" class="Bound">â„“â‚€</a> <a id="22507" href="Demos.HSP.html#22507" class="Bound">â„“â‚</a> <a id="22510" class="Symbol">=</a> <a id="22512" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="22522" class="Symbol">(</a><a id="22523" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="22533" href="Demos.HSP.html#22502" class="Bound">ğ‘¨</a> <a id="22535" href="Demos.HSP.html#22504" class="Bound">â„“â‚€</a><a id="22537" class="Symbol">)</a> <a id="22539" href="Demos.HSP.html#22507" class="Bound">â„“â‚</a>

</pre>

Recall that our `Algebra` type has two universe level parameters corresponding to
those of the domain setoid. Concretely, an algebra of type `Algebra Î± Ïáµƒ` has a
`Domain` of type `Setoid Î± Ïáµƒ`. This packages a  "carrier set" (`Carrier`),
inhabiting `Type Î±`, with an equality on `Carrier` of type `Rel Carrier Ïáµƒ`.
`Lift-Alg` takes an algebra parametrized by levels `Î±` and `Ïáµƒ` and constructs a
new algebra whose carrier  inhabits `Type (Î± âŠ” â„“â‚€)` and whose equivalence inhabits
`Rel Carrier (Ïáµƒ âŠ” â„“â‚)`. To be useful, this lifting operation should result in an
algebra with the same semantic properties as the one we started with. We will see
in Â§[3.4](#sec:lift-alg){reference-type="ref" reference="sec:lift-alg"} that this
is indeed the case.


#### <a id="product-algebras">Product Algebras</a>
 <!-- {#product-algebras .unnumbered} -->

We define the *product* of a family of algebras as follows. Let `Î¹` be a universe
and `I : Type Î¹` a type (the "indexing type"). Then `ğ’œ : I â†’ Algebra Î± Ïáµƒ`
represents an *indexed family of algebras*. Denote by `â¨… ğ’œ` the *product of
algebras* in `ğ’œ` (or *product algebra*), by which we mean the algebra whose domain
is the Cartesian product `âˆ[i âˆˆ I] ğ”»[ ğ’œ i ]` of the domains of the algebras in
`ğ’œ`, and whose operations are those arising from the point-wise interpretation of
the operation symbols in the obvious way: if `f` is a `J`-ary operation symbol and
if `a : Î [ i âˆˆ I ] J â†’ ğ”»[ ğ’œ i ]` is, for each `i : I`, a `J`-tuple of elements of
the domain `ğ”»[ ğ’œ i ]`, then we define the interpretation of `f` in `â¨… ğ’œ` by

`(f Ì‚ â¨… ğ’œ) a := Î» (i : I) â†’ (f Ì‚ ğ’œ i)(a i)`.

Here is the formal definition of the product algebra type in [Agda][].

<pre class="Agda">

<a id="24247" class="Keyword">module</a> <a id="24254" href="Demos.HSP.html#24254" class="Module">_</a> <a id="24256" class="Symbol">{</a><a id="24257" href="Demos.HSP.html#24257" class="Bound">Î¹</a> <a id="24259" class="Symbol">:</a> <a id="24261" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="24266" class="Symbol">}{</a><a id="24268" href="Demos.HSP.html#24268" class="Bound">I</a> <a id="24270" class="Symbol">:</a> <a id="24272" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="24277" href="Demos.HSP.html#24257" class="Bound">Î¹</a> <a id="24279" class="Symbol">}</a> <a id="24281" class="Keyword">where</a>

 <a id="24289" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="24291" class="Symbol">:</a> <a id="24293" class="Symbol">(</a><a id="24294" href="Demos.HSP.html#24294" class="Bound">ğ’œ</a> <a id="24296" class="Symbol">:</a> <a id="24298" href="Demos.HSP.html#24268" class="Bound">I</a> <a id="24300" class="Symbol">â†’</a> <a id="24302" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="24310" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="24312" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="24314" class="Symbol">)</a> <a id="24316" class="Symbol">â†’</a> <a id="24318" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="24326" class="Symbol">(</a><a id="24327" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="24329" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="24331" href="Demos.HSP.html#24257" class="Bound">Î¹</a><a id="24332" class="Symbol">)</a> <a id="24334" class="Symbol">(</a><a id="24335" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="24338" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="24340" href="Demos.HSP.html#24257" class="Bound">Î¹</a><a id="24341" class="Symbol">)</a>
 <a id="24344" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="24351" class="Symbol">(</a><a id="24352" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="24354" href="Demos.HSP.html#24354" class="Bound">ğ’œ</a><a id="24355" class="Symbol">)</a> <a id="24357" class="Symbol">=</a>
  <a id="24361" class="Keyword">record</a>  <a id="24369" class="Symbol">{</a> <a id="24371" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="24379" class="Symbol">=</a> <a id="24381" class="Symbol">âˆ€</a> <a id="24383" href="Demos.HSP.html#24383" class="Bound">i</a> <a id="24385" class="Symbol">â†’</a> <a id="24387" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="24390" href="Demos.HSP.html#24354" class="Bound">ğ’œ</a> <a id="24392" href="Demos.HSP.html#24383" class="Bound">i</a> <a id="24394" href="Demos.HSP.html#19222" class="Function Operator">]</a>
          <a id="24406" class="Symbol">;</a> <a id="24408" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="24412" class="Symbol">=</a> <a id="24414" class="Symbol">Î»</a> <a id="24416" href="Demos.HSP.html#24416" class="Bound">a</a> <a id="24418" href="Demos.HSP.html#24418" class="Bound">b</a> <a id="24420" class="Symbol">â†’</a> <a id="24422" class="Symbol">âˆ€</a> <a id="24424" href="Demos.HSP.html#24424" class="Bound">i</a> <a id="24426" class="Symbol">â†’</a> <a id="24428" class="Symbol">(</a><a id="24429" href="Demos.HSP.html#6815" class="Field Operator">_â‰ˆË¢_</a> <a id="24434" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="24437" href="Demos.HSP.html#24354" class="Bound">ğ’œ</a> <a id="24439" href="Demos.HSP.html#24424" class="Bound">i</a> <a id="24441" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="24442" class="Symbol">)</a> <a id="24444" class="Symbol">(</a><a id="24445" href="Demos.HSP.html#24416" class="Bound">a</a> <a id="24447" href="Demos.HSP.html#24424" class="Bound">i</a><a id="24448" class="Symbol">)(</a><a id="24450" href="Demos.HSP.html#24418" class="Bound">b</a> <a id="24452" href="Demos.HSP.html#24424" class="Bound">i</a><a id="24453" class="Symbol">)</a>
          <a id="24465" class="Symbol">;</a> <a id="24467" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24481" class="Symbol">=</a>
             <a id="24496" class="Keyword">record</a>  <a id="24504" class="Symbol">{</a> <a id="24506" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="24511" class="Symbol">=</a> <a id="24513" class="Symbol">Î»</a> <a id="24515" href="Demos.HSP.html#24515" class="Bound">i</a> <a id="24517" class="Symbol">â†’</a> <a id="24519" href="Demos.HSP.html#6703" class="Field">refláµ‰</a> <a id="24525" class="Symbol">(</a><a id="24526" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24540" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="24543" href="Demos.HSP.html#24354" class="Bound">ğ’œ</a> <a id="24545" href="Demos.HSP.html#24515" class="Bound">i</a> <a id="24547" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="24548" class="Symbol">)</a>
                     <a id="24571" class="Symbol">;</a> <a id="24573" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="24577" class="Symbol">=</a> <a id="24579" class="Symbol">Î»</a> <a id="24581" href="Demos.HSP.html#24581" class="Bound">x</a> <a id="24583" href="Demos.HSP.html#24583" class="Bound">i</a> <a id="24585" class="Symbol">â†’</a> <a id="24587" href="Demos.HSP.html#6718" class="Field">symáµ‰</a> <a id="24592" class="Symbol">(</a><a id="24593" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24607" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="24610" href="Demos.HSP.html#24354" class="Bound">ğ’œ</a> <a id="24612" href="Demos.HSP.html#24583" class="Bound">i</a> <a id="24614" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="24615" class="Symbol">)(</a><a id="24617" href="Demos.HSP.html#24581" class="Bound">x</a> <a id="24619" href="Demos.HSP.html#24583" class="Bound">i</a><a id="24620" class="Symbol">)</a>
                     <a id="24643" class="Symbol">;</a> <a id="24645" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="24651" class="Symbol">=</a> <a id="24653" class="Symbol">Î»</a> <a id="24655" href="Demos.HSP.html#24655" class="Bound">x</a> <a id="24657" href="Demos.HSP.html#24657" class="Bound">y</a> <a id="24659" href="Demos.HSP.html#24659" class="Bound">i</a> <a id="24661" class="Symbol">â†’</a> <a id="24663" href="Demos.HSP.html#6734" class="Field">transáµ‰</a> <a id="24670" class="Symbol">(</a><a id="24671" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24685" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="24688" href="Demos.HSP.html#24354" class="Bound">ğ’œ</a> <a id="24690" href="Demos.HSP.html#24659" class="Bound">i</a> <a id="24692" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="24693" class="Symbol">)(</a><a id="24695" href="Demos.HSP.html#24655" class="Bound">x</a> <a id="24697" href="Demos.HSP.html#24659" class="Bound">i</a><a id="24698" class="Symbol">)(</a><a id="24700" href="Demos.HSP.html#24657" class="Bound">y</a> <a id="24702" href="Demos.HSP.html#24659" class="Bound">i</a><a id="24703" class="Symbol">)</a>
                     <a id="24726" class="Symbol">}</a>
          <a id="24738" class="Symbol">}</a>

 <a id="24742" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="24749" class="Symbol">(</a><a id="24750" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="24752" href="Demos.HSP.html#24752" class="Bound">ğ’œ</a><a id="24753" class="Symbol">)</a> <a id="24755" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="24759" class="Symbol">(</a><a id="24760" href="Demos.HSP.html#24760" class="Bound">f</a> <a id="24762" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24764" href="Demos.HSP.html#24764" class="Bound">a</a><a id="24765" class="Symbol">)</a> <a id="24767" class="Symbol">=</a> <a id="24769" class="Symbol">Î»</a> <a id="24771" href="Demos.HSP.html#24771" class="Bound">i</a> <a id="24773" class="Symbol">â†’</a> <a id="24775" class="Symbol">(</a><a id="24776" href="Demos.HSP.html#24760" class="Bound">f</a> <a id="24778" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="24780" class="Symbol">(</a><a id="24781" href="Demos.HSP.html#24752" class="Bound">ğ’œ</a> <a id="24783" href="Demos.HSP.html#24771" class="Bound">i</a><a id="24784" class="Symbol">))</a> <a id="24787" class="Symbol">(</a><a id="24788" href="Function.Base.html#1554" class="Function">flip</a> <a id="24793" href="Demos.HSP.html#24764" class="Bound">a</a> <a id="24795" href="Demos.HSP.html#24771" class="Bound">i</a><a id="24796" class="Symbol">)</a>
 <a id="24799" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="24804" class="Symbol">(</a><a id="24805" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="24812" class="Symbol">(</a><a id="24813" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="24815" href="Demos.HSP.html#24815" class="Bound">ğ’œ</a><a id="24816" class="Symbol">))</a> <a id="24819" class="Symbol">(</a><a id="24820" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="24827" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24829" href="Demos.HSP.html#24829" class="Bound">f=g</a> <a id="24833" class="Symbol">)</a> <a id="24835" class="Symbol">=</a> <a id="24837" class="Symbol">Î»</a> <a id="24839" href="Demos.HSP.html#24839" class="Bound">i</a> <a id="24841" class="Symbol">â†’</a> <a id="24843" href="Function.Bundles.html#1938" class="Field">cong</a>  <a id="24849" class="Symbol">(</a> <a id="24851" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="24858" class="Symbol">(</a><a id="24859" href="Demos.HSP.html#24815" class="Bound">ğ’œ</a> <a id="24861" href="Demos.HSP.html#24839" class="Bound">i</a><a id="24862" class="Symbol">)</a> <a id="24864" class="Symbol">)</a>
                                                   <a id="24917" class="Symbol">(</a> <a id="24919" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="24926" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24928" href="Function.Base.html#1554" class="Function">flip</a> <a id="24933" href="Demos.HSP.html#24829" class="Bound">f=g</a> <a id="24937" href="Demos.HSP.html#24839" class="Bound">i</a> <a id="24939" class="Symbol">)</a>

</pre>

Evidently, the carrier of the product algebra type is indeed the (dependent)
product of the carriers in the indexed family. The rest of the definitions are the
point-wise versions of the underlying ones.

#### <a id="structure-preserving-maps-and-isomorphism">Structure preserving maps and isomorphism</a>

Throughout the rest of the paper, unless stated otherwise, `ğ‘¨` and `ğ‘©` will denote
`ğ‘†`-algebras inhabiting the types `Algebra Î± Ïáµƒ` and `Algebra Î² Ïáµ‡`, respectively.

A *homomorphism* (or "hom") from `ğ‘¨` to `ğ‘©` is a setoid function
`h : ğ”»[ ğ‘¨ ] âŸ¶ ğ”»[ ğ‘© ]` that is *compatible* with all basic operations; that is, for
every operation symbol `f : âˆ£ ğ‘† âˆ£` and all tuples `a : âˆ¥ ğ‘† âˆ¥ f â†’ ğ•Œ[ ğ‘¨ ]`, we have
`h âŸ¨$âŸ© (f Ì‚ ğ‘¨) a â‰ˆ (f Ì‚ ğ‘©) Î» x â†’ h âŸ¨$âŸ© (a x)`.

It is convenient to first formalize "compatible" (`compatible-map-op`),
representing the assertion that a given setoid function `h : ğ”»[ ğ‘¨ ] âŸ¶ ğ”»[ ğ‘© ]`
commutes with a given operation symbol `f`, and then generalize over operation
symbols to yield the type (`compatible-map`) of compatible maps from (the domain
of) `ğ‘¨` to (the domain of) `ğ‘©`.

<pre class="Agda">

<a id="26063" class="Keyword">module</a> <a id="26070" href="Demos.HSP.html#26070" class="Module">_</a> <a id="26072" class="Symbol">(</a><a id="26073" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="26075" class="Symbol">:</a> <a id="26077" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="26085" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="26087" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="26089" class="Symbol">)(</a><a id="26091" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="26093" class="Symbol">:</a> <a id="26095" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="26103" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="26105" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="26107" class="Symbol">)</a> <a id="26109" class="Keyword">where</a>

 <a id="26117" href="Demos.HSP.html#26117" class="Function">compatible-map-op</a> <a id="26135" class="Symbol">:</a> <a id="26137" class="Symbol">(</a><a id="26138" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26141" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="26143" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="26145" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="26147" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26150" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="26152" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="26153" class="Symbol">)</a> <a id="26155" class="Symbol">â†’</a> <a id="26157" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="26159" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="26161" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="26163" class="Symbol">â†’</a> <a id="26165" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="26170" class="Symbol">_</a>
 <a id="26173" href="Demos.HSP.html#26117" class="Function">compatible-map-op</a> <a id="26191" href="Demos.HSP.html#26191" class="Bound">h</a> <a id="26193" href="Demos.HSP.html#26193" class="Bound">f</a> <a id="26195" class="Symbol">=</a> <a id="26197" class="Symbol">âˆ€</a> <a id="26199" class="Symbol">{</a><a id="26200" href="Demos.HSP.html#26200" class="Bound">a</a><a id="26201" class="Symbol">}</a> <a id="26203" class="Symbol">â†’</a> <a id="26205" href="Demos.HSP.html#26191" class="Bound">h</a> <a id="26207" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="26211" class="Symbol">(</a><a id="26212" href="Demos.HSP.html#26193" class="Bound">f</a> <a id="26214" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="26216" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a><a id="26217" class="Symbol">)</a> <a id="26219" href="Demos.HSP.html#26200" class="Bound">a</a> <a id="26221" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="26223" class="Symbol">(</a><a id="26224" href="Demos.HSP.html#26193" class="Bound">f</a> <a id="26226" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="26228" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a><a id="26229" class="Symbol">)</a> <a id="26231" class="Symbol">Î»</a> <a id="26233" href="Demos.HSP.html#26233" class="Bound">x</a> <a id="26235" class="Symbol">â†’</a> <a id="26237" href="Demos.HSP.html#26191" class="Bound">h</a> <a id="26239" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="26243" class="Symbol">(</a><a id="26244" href="Demos.HSP.html#26200" class="Bound">a</a> <a id="26246" href="Demos.HSP.html#26233" class="Bound">x</a><a id="26247" class="Symbol">)</a>
  <a id="26251" class="Keyword">where</a> <a id="26257" class="Keyword">open</a> <a id="26262" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="26269" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26272" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="26274" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="26276" class="Keyword">using</a> <a id="26282" class="Symbol">(</a> <a id="26284" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="26288" class="Symbol">)</a>

 <a id="26292" href="Demos.HSP.html#26292" class="Function">compatible-map</a> <a id="26307" class="Symbol">:</a> <a id="26309" class="Symbol">(</a><a id="26310" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26313" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="26315" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="26317" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="26319" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26322" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="26324" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="26325" class="Symbol">)</a> <a id="26327" class="Symbol">â†’</a> <a id="26329" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="26334" class="Symbol">_</a>
 <a id="26337" href="Demos.HSP.html#26292" class="Function">compatible-map</a> <a id="26352" href="Demos.HSP.html#26352" class="Bound">h</a> <a id="26354" class="Symbol">=</a> <a id="26356" class="Symbol">âˆ€</a> <a id="26358" class="Symbol">{</a><a id="26359" href="Demos.HSP.html#26359" class="Bound">f</a><a id="26360" class="Symbol">}</a> <a id="26362" class="Symbol">â†’</a> <a id="26364" href="Demos.HSP.html#26117" class="Function">compatible-map-op</a> <a id="26382" href="Demos.HSP.html#26352" class="Bound">h</a> <a id="26384" href="Demos.HSP.html#26359" class="Bound">f</a>

</pre>

Using these we define the property (`IsHom`) of being a homomorphism, and
finally the type (`hom`) of homomorphisms from `ğ‘¨` to `ğ‘©`.

<pre class="Agda">

 <a id="26548" class="Keyword">record</a> <a id="26555" href="Demos.HSP.html#26555" class="Record">IsHom</a> <a id="26561" class="Symbol">(</a><a id="26562" href="Demos.HSP.html#26562" class="Bound">h</a> <a id="26564" class="Symbol">:</a> <a id="26566" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26569" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="26571" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="26573" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="26575" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26578" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="26580" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="26581" class="Symbol">)</a> <a id="26583" class="Symbol">:</a> <a id="26585" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="26590" class="Symbol">(</a><a id="26591" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="26593" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="26595" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="26597" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="26599" href="Demos.HSP.html#26085" class="Bound">Î±</a> <a id="26601" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="26603" href="Demos.HSP.html#26105" class="Bound">Ïáµ‡</a><a id="26605" class="Symbol">)</a> <a id="26607" class="Keyword">where</a>
  <a id="26615" class="Keyword">constructor</a>  <a id="26628" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a>
  <a id="26636" class="Keyword">field</a>        <a id="26649" href="Demos.HSP.html#26649" class="Field">compatible</a> <a id="26660" class="Symbol">:</a> <a id="26662" href="Demos.HSP.html#26292" class="Function">compatible-map</a> <a id="26677" href="Demos.HSP.html#26562" class="Bound">h</a>

 <a id="26681" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="26685" class="Symbol">:</a> <a id="26687" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="26692" class="Symbol">_</a>
 <a id="26695" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="26699" class="Symbol">=</a> <a id="26701" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="26703" class="Symbol">(</a><a id="26704" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a>Â <a id="26707" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="26709" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="26711" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="26713" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="26716" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="26718" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="26719" class="Symbol">)</a> <a id="26721" href="Demos.HSP.html#26555" class="Record">IsHom</a>

</pre>

Thus, an inhabitant of `hom ğ‘¨ ğ‘©` is a pair `(h , p)` consisting of a setoid
function `h`, from the domain of `ğ‘¨` to that of `ğ‘©`, along with a proof `p` that
`h` is a homomorphism.

A *monomorphism* (resp. *epimorphism*) is an injective (resp. surjective)
homomorphism. The [agda-algebras][] library defines predicates and for these, as
well as and for the corresponding types.

<pre class="Agda">

 <a id="27133" class="Keyword">record</a> <a id="27140" href="Demos.HSP.html#27140" class="Record">IsMon</a> <a id="27146" class="Symbol">(</a><a id="27147" href="Demos.HSP.html#27147" class="Bound">h</a> <a id="27149" class="Symbol">:</a> <a id="27151" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27154" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="27156" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="27158" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="27160" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27163" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="27165" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="27166" class="Symbol">)</a> <a id="27168" class="Symbol">:</a> <a id="27170" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="27175" class="Symbol">(</a><a id="27176" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="27178" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27180" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="27182" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27184" href="Demos.HSP.html#26085" class="Bound">Î±</a> <a id="27186" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27188" href="Demos.HSP.html#26087" class="Bound">Ïáµƒ</a> <a id="27191" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27193" href="Demos.HSP.html#26105" class="Bound">Ïáµ‡</a><a id="27195" class="Symbol">)</a> <a id="27197" class="Keyword">where</a>
  <a id="27205" class="Keyword">field</a>  <a id="27212" href="Demos.HSP.html#27212" class="Field">isHom</a> <a id="27218" class="Symbol">:</a> <a id="27220" href="Demos.HSP.html#26555" class="Record">IsHom</a> <a id="27226" href="Demos.HSP.html#27147" class="Bound">h</a>
         <a id="27237" href="Demos.HSP.html#27237" class="Field">isInjective</a> <a id="27249" class="Symbol">:</a> <a id="27251" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="27263" href="Demos.HSP.html#27147" class="Bound">h</a>
  <a id="27267" href="Demos.HSP.html#27267" class="Function">HomReduct</a> <a id="27277" class="Symbol">:</a> <a id="27279" href="Demos.HSP.html#26681" class="Function">hom</a>
  <a id="27285" href="Demos.HSP.html#27267" class="Function">HomReduct</a> <a id="27295" class="Symbol">=</a> <a id="27297" href="Demos.HSP.html#27147" class="Bound">h</a> <a id="27299" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27301" href="Demos.HSP.html#27212" class="Field">isHom</a>

 <a id="27309" href="Demos.HSP.html#27309" class="Function">mon</a> <a id="27313" class="Symbol">:</a> <a id="27315" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="27320" class="Symbol">_</a>
 <a id="27323" href="Demos.HSP.html#27309" class="Function">mon</a> <a id="27327" class="Symbol">=</a> <a id="27329" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="27331" class="Symbol">(</a><a id="27332" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27335" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="27337" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="27339" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="27341" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27344" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="27346" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="27347" class="Symbol">)</a> <a id="27349" href="Demos.HSP.html#27140" class="Record">IsMon</a>

</pre>

As with `hom`, the type `mon` is a dependent product type; each inhabitant is a
pair consisting of a setoid function, say, `h`, along with a proof that `h` is a
monomorphism.

<pre class="Agda">

 <a id="27559" class="Keyword">record</a> <a id="27566" href="Demos.HSP.html#27566" class="Record">IsEpi</a> <a id="27572" class="Symbol">(</a><a id="27573" href="Demos.HSP.html#27573" class="Bound">h</a> <a id="27575" class="Symbol">:</a> <a id="27577" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27580" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="27582" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="27584" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="27586" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27589" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="27591" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="27592" class="Symbol">)</a> <a id="27594" class="Symbol">:</a> <a id="27596" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="27601" class="Symbol">(</a><a id="27602" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="27604" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27606" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="27608" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27610" href="Demos.HSP.html#26085" class="Bound">Î±</a> <a id="27612" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27614" href="Demos.HSP.html#26103" class="Bound">Î²</a> <a id="27616" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="27618" href="Demos.HSP.html#26105" class="Bound">Ïáµ‡</a><a id="27620" class="Symbol">)</a> <a id="27622" class="Keyword">where</a>
  <a id="27630" class="Keyword">field</a>  <a id="27637" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="27643" class="Symbol">:</a> <a id="27645" href="Demos.HSP.html#26555" class="Record">IsHom</a> <a id="27651" href="Demos.HSP.html#27573" class="Bound">h</a>
         <a id="27662" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="27675" class="Symbol">:</a> <a id="27677" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="27690" href="Demos.HSP.html#27573" class="Bound">h</a>
  <a id="27694" href="Demos.HSP.html#27694" class="Function">HomReduct</a> <a id="27704" class="Symbol">:</a> <a id="27706" href="Demos.HSP.html#26681" class="Function">hom</a>
  <a id="27712" href="Demos.HSP.html#27694" class="Function">HomReduct</a> <a id="27722" class="Symbol">=</a> <a id="27724" href="Demos.HSP.html#27573" class="Bound">h</a> <a id="27726" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27728" href="Demos.HSP.html#27637" class="Field">isHom</a>

 <a id="27736" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="27740" class="Symbol">:</a> <a id="27742" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="27747" class="Symbol">_</a>
 <a id="27750" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="27754" class="Symbol">=</a> <a id="27756" href="Agda.Builtin.Sigma.html#166" class="Record">Î£</a> <a id="27758" class="Symbol">(</a><a id="27759" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27762" href="Demos.HSP.html#26073" class="Bound">ğ‘¨</a> <a id="27764" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="27766" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="27768" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="27771" href="Demos.HSP.html#26091" class="Bound">ğ‘©</a> <a id="27773" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="27774" class="Symbol">)</a> <a id="27776" href="Demos.HSP.html#27566" class="Record">IsEpi</a>

</pre>

Here are two utilities that are useful for translating between types.

<pre class="Agda">

<a id="27880" class="Keyword">open</a> <a id="27885" href="Demos.HSP.html#26555" class="Module">IsHom</a> <a id="27891" class="Symbol">;</a> <a id="27893" class="Keyword">open</a> <a id="27898" href="Demos.HSP.html#27140" class="Module">IsMon</a> <a id="27904" class="Symbol">;</a> <a id="27906" class="Keyword">open</a> <a id="27911" href="Demos.HSP.html#27566" class="Module">IsEpi</a>
<a id="27917" class="Keyword">module</a> <a id="27924" href="Demos.HSP.html#27924" class="Module">_</a> <a id="27926" class="Symbol">(</a><a id="27927" href="Demos.HSP.html#27927" class="Bound">ğ‘¨</a> <a id="27929" class="Symbol">:</a> <a id="27931" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="27939" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="27941" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="27943" class="Symbol">)(</a><a id="27945" href="Demos.HSP.html#27945" class="Bound">ğ‘©</a> <a id="27947" class="Symbol">:</a> <a id="27949" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="27957" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="27959" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="27961" class="Symbol">)</a> <a id="27963" class="Keyword">where</a>
 <a id="27970" href="Demos.HSP.html#27970" class="Function">monâ†’intohom</a> <a id="27982" class="Symbol">:</a> <a id="27984" href="Demos.HSP.html#27309" class="Function">mon</a> <a id="27988" href="Demos.HSP.html#27927" class="Bound">ğ‘¨</a> <a id="27990" href="Demos.HSP.html#27945" class="Bound">ğ‘©</a> <a id="27992" class="Symbol">â†’</a> <a id="27994" href="Data.Product.html#916" class="Function">Î£[</a> <a id="27997" href="Demos.HSP.html#27997" class="Bound">h</a> <a id="27999" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="28001" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="28005" href="Demos.HSP.html#27927" class="Bound">ğ‘¨</a> <a id="28007" href="Demos.HSP.html#27945" class="Bound">ğ‘©</a> <a id="28009" href="Data.Product.html#916" class="Function">]</a> <a id="28011" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="28023" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="28025" href="Demos.HSP.html#27997" class="Bound">h</a> <a id="28027" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>
 <a id="28030" href="Demos.HSP.html#27970" class="Function">monâ†’intohom</a> <a id="28042" class="Symbol">(</a><a id="28043" href="Demos.HSP.html#28043" class="Bound">hh</a> <a id="28046" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28048" href="Demos.HSP.html#28048" class="Bound">hhM</a><a id="28051" class="Symbol">)</a> <a id="28053" class="Symbol">=</a> <a id="28055" class="Symbol">(</a><a id="28056" href="Demos.HSP.html#28043" class="Bound">hh</a> <a id="28059" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28061" href="Demos.HSP.html#27212" class="Field">isHom</a> <a id="28067" href="Demos.HSP.html#28048" class="Bound">hhM</a><a id="28070" class="Symbol">)</a> <a id="28072" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28074" href="Demos.HSP.html#27237" class="Field">isInjective</a> <a id="28086" href="Demos.HSP.html#28048" class="Bound">hhM</a>

 <a id="28092" href="Demos.HSP.html#28092" class="Function">epiâ†’ontohom</a> <a id="28104" class="Symbol">:</a> <a id="28106" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="28110" href="Demos.HSP.html#27927" class="Bound">ğ‘¨</a> <a id="28112" href="Demos.HSP.html#27945" class="Bound">ğ‘©</a> <a id="28114" class="Symbol">â†’</a> <a id="28116" href="Data.Product.html#916" class="Function">Î£[</a> <a id="28119" href="Demos.HSP.html#28119" class="Bound">h</a> <a id="28121" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="28123" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="28127" href="Demos.HSP.html#27927" class="Bound">ğ‘¨</a> <a id="28129" href="Demos.HSP.html#27945" class="Bound">ğ‘©</a> <a id="28131" href="Data.Product.html#916" class="Function">]</a> <a id="28133" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="28146" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="28148" href="Demos.HSP.html#28119" class="Bound">h</a> <a id="28150" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>
 <a id="28153" href="Demos.HSP.html#28092" class="Function">epiâ†’ontohom</a> <a id="28165" class="Symbol">(</a><a id="28166" href="Demos.HSP.html#28166" class="Bound">hh</a> <a id="28169" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28171" href="Demos.HSP.html#28171" class="Bound">hhE</a><a id="28174" class="Symbol">)</a> <a id="28176" class="Symbol">=</a> <a id="28178" class="Symbol">(</a><a id="28179" href="Demos.HSP.html#28166" class="Bound">hh</a> <a id="28182" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28184" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="28190" href="Demos.HSP.html#28171" class="Bound">hhE</a><a id="28193" class="Symbol">)</a> <a id="28195" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28197" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="28210" href="Demos.HSP.html#28171" class="Bound">hhE</a>
</pre>

##### <a id="composition-of-homomorphisms">Composition of homomorphisms</a>
 <!-- {#composition-of-homomorphisms .unnumbered} -->

The composition of homomorphisms is again a homomorphism, and similarly
for epimorphisms and monomorphisms. The proofs of these facts are
straightforward.

<pre class="Agda">

<a id="28527" class="Keyword">module</a> <a id="28534" href="Demos.HSP.html#28534" class="Module">_</a>  <a id="28537" class="Symbol">{</a><a id="28538" href="Demos.HSP.html#28538" class="Bound">ğ‘¨</a> <a id="28540" class="Symbol">:</a> <a id="28542" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="28550" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="28552" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="28554" class="Symbol">}</a> <a id="28556" class="Symbol">{</a><a id="28557" href="Demos.HSP.html#28557" class="Bound">ğ‘©</a> <a id="28559" class="Symbol">:</a> <a id="28561" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="28569" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="28571" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="28573" class="Symbol">}</a> <a id="28575" class="Symbol">{</a><a id="28576" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28578" class="Symbol">:</a> <a id="28580" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="28588" href="Demos.HSP.html#7160" class="Generalizable">Î³</a> <a id="28590" href="Demos.HSP.html#7162" class="Generalizable">Ïá¶œ</a><a id="28592" class="Symbol">}</a>
          <a id="28604" class="Symbol">{</a><a id="28605" href="Demos.HSP.html#28605" class="Bound">g</a> <a id="28607" class="Symbol">:</a> <a id="28609" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="28612" href="Demos.HSP.html#28538" class="Bound">ğ‘¨</a> <a id="28614" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="28616" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="28618" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="28621" href="Demos.HSP.html#28557" class="Bound">ğ‘©</a> <a id="28623" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="28624" class="Symbol">}{</a><a id="28626" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="28628" class="Symbol">:</a> <a id="28630" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="28633" href="Demos.HSP.html#28557" class="Bound">ğ‘©</a> <a id="28635" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="28637" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="28639" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="28642" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28644" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="28645" class="Symbol">}</a> <a id="28647" class="Keyword">where</a>
  <a id="28655" class="Keyword">open</a> <a id="28660" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="28667" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="28670" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28672" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="28674" class="Keyword">using</a> <a id="28680" class="Symbol">(</a> <a id="28682" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28688" class="Symbol">)</a>
  <a id="28692" href="Demos.HSP.html#28692" class="Function">âˆ˜-is-hom</a> <a id="28701" class="Symbol">:</a> <a id="28703" href="Demos.HSP.html#26555" class="Record">IsHom</a> <a id="28709" href="Demos.HSP.html#28538" class="Bound">ğ‘¨</a> <a id="28711" href="Demos.HSP.html#28557" class="Bound">ğ‘©</a> <a id="28713" href="Demos.HSP.html#28605" class="Bound">g</a> <a id="28715" class="Symbol">â†’</a> <a id="28717" href="Demos.HSP.html#26555" class="Record">IsHom</a> <a id="28723" href="Demos.HSP.html#28557" class="Bound">ğ‘©</a> <a id="28725" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28727" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="28729" class="Symbol">â†’</a> <a id="28731" href="Demos.HSP.html#26555" class="Record">IsHom</a> <a id="28737" href="Demos.HSP.html#28538" class="Bound">ğ‘¨</a> <a id="28739" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28741" class="Symbol">(</a><a id="28742" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="28744" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="28748" href="Demos.HSP.html#28605" class="Bound">g</a><a id="28749" class="Symbol">)</a>
  <a id="28753" href="Demos.HSP.html#28692" class="Function">âˆ˜-is-hom</a> <a id="28762" href="Demos.HSP.html#28762" class="Bound">ghom</a> <a id="28767" href="Demos.HSP.html#28767" class="Bound">hhom</a> <a id="28772" class="Symbol">=</a> <a id="28774" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="28780" href="Demos.HSP.html#28791" class="Function">c</a> <a id="28782" class="Keyword">where</a>
   <a id="28791" href="Demos.HSP.html#28791" class="Function">c</a> <a id="28793" class="Symbol">:</a> <a id="28795" href="Demos.HSP.html#26292" class="Function">compatible-map</a> <a id="28810" href="Demos.HSP.html#28538" class="Bound">ğ‘¨</a> <a id="28812" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28814" class="Symbol">(</a><a id="28815" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="28817" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="28821" href="Demos.HSP.html#28605" class="Bound">g</a><a id="28822" class="Symbol">)</a>
   <a id="28827" href="Demos.HSP.html#28791" class="Function">c</a> <a id="28829" class="Symbol">=</a> <a id="28831" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28837" class="Symbol">(</a><a id="28838" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="28843" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="28845" class="Symbol">(</a><a id="28846" href="Demos.HSP.html#26649" class="Field">compatible</a> <a id="28857" href="Demos.HSP.html#28762" class="Bound">ghom</a><a id="28861" class="Symbol">))</a> <a id="28864" class="Symbol">(</a><a id="28865" href="Demos.HSP.html#26649" class="Field">compatible</a> <a id="28876" href="Demos.HSP.html#28767" class="Bound">hhom</a><a id="28880" class="Symbol">)</a>

  <a id="28885" href="Demos.HSP.html#28885" class="Function">âˆ˜-is-epi</a> <a id="28894" class="Symbol">:</a> <a id="28896" href="Demos.HSP.html#27566" class="Record">IsEpi</a> <a id="28902" href="Demos.HSP.html#28538" class="Bound">ğ‘¨</a> <a id="28904" href="Demos.HSP.html#28557" class="Bound">ğ‘©</a> <a id="28906" href="Demos.HSP.html#28605" class="Bound">g</a> <a id="28908" class="Symbol">â†’</a> <a id="28910" href="Demos.HSP.html#27566" class="Record">IsEpi</a> <a id="28916" href="Demos.HSP.html#28557" class="Bound">ğ‘©</a> <a id="28918" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28920" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="28922" class="Symbol">â†’</a> <a id="28924" href="Demos.HSP.html#27566" class="Record">IsEpi</a> <a id="28930" href="Demos.HSP.html#28538" class="Bound">ğ‘¨</a> <a id="28932" href="Demos.HSP.html#28576" class="Bound">ğ‘ª</a> <a id="28934" class="Symbol">(</a><a id="28935" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="28937" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="28941" href="Demos.HSP.html#28605" class="Bound">g</a><a id="28942" class="Symbol">)</a>
  <a id="28946" href="Demos.HSP.html#28885" class="Function">âˆ˜-is-epi</a> <a id="28955" href="Demos.HSP.html#28955" class="Bound">gE</a> <a id="28958" href="Demos.HSP.html#28958" class="Bound">hE</a> <a id="28961" class="Symbol">=</a>
    <a id="28967" class="Keyword">record</a>  <a id="28975" class="Symbol">{</a> <a id="28977" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="28983" class="Symbol">=</a> <a id="28985" href="Demos.HSP.html#28692" class="Function">âˆ˜-is-hom</a> <a id="28994" class="Symbol">(</a><a id="28995" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="29001" href="Demos.HSP.html#28955" class="Bound">gE</a><a id="29003" class="Symbol">)</a> <a id="29005" class="Symbol">(</a><a id="29006" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="29012" href="Demos.HSP.html#28958" class="Bound">hE</a><a id="29014" class="Symbol">)</a>
            <a id="29028" class="Symbol">;</a> <a id="29030" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="29043" class="Symbol">=</a> <a id="29045" href="Demos.HSP.html#12901" class="Function">âˆ˜-IsSurjective</a> <a id="29060" href="Demos.HSP.html#28605" class="Bound">g</a> <a id="29062" href="Demos.HSP.html#28626" class="Bound">h</a> <a id="29064" class="Symbol">(</a><a id="29065" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="29078" href="Demos.HSP.html#28955" class="Bound">gE</a><a id="29080" class="Symbol">)</a> <a id="29082" class="Symbol">(</a><a id="29083" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="29096" href="Demos.HSP.html#28958" class="Bound">hE</a><a id="29098" class="Symbol">)</a>
            <a id="29112" class="Symbol">}</a>

<a id="29115" class="Keyword">module</a> <a id="29122" href="Demos.HSP.html#29122" class="Module">_</a> <a id="29124" class="Symbol">{</a><a id="29125" href="Demos.HSP.html#29125" class="Bound">ğ‘¨</a> <a id="29127" class="Symbol">:</a> <a id="29129" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="29137" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="29139" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="29141" class="Symbol">}</a> <a id="29143" class="Symbol">{</a><a id="29144" href="Demos.HSP.html#29144" class="Bound">ğ‘©</a> <a id="29146" class="Symbol">:</a> <a id="29148" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="29156" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="29158" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="29160" class="Symbol">}</a> <a id="29162" class="Symbol">{</a><a id="29163" href="Demos.HSP.html#29163" class="Bound">ğ‘ª</a> <a id="29165" class="Symbol">:</a> <a id="29167" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="29175" href="Demos.HSP.html#7160" class="Generalizable">Î³</a> <a id="29177" href="Demos.HSP.html#7162" class="Generalizable">Ïá¶œ</a><a id="29179" class="Symbol">}</a> <a id="29181" class="Keyword">where</a>
  <a id="29189" href="Demos.HSP.html#29189" class="Function">âˆ˜-hom</a> <a id="29195" class="Symbol">:</a> <a id="29197" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="29201" href="Demos.HSP.html#29125" class="Bound">ğ‘¨</a> <a id="29203" href="Demos.HSP.html#29144" class="Bound">ğ‘©</a> <a id="29205" class="Symbol">â†’</a> <a id="29207" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="29211" href="Demos.HSP.html#29144" class="Bound">ğ‘©</a> <a id="29213" href="Demos.HSP.html#29163" class="Bound">ğ‘ª</a>  <a id="29216" class="Symbol">â†’</a> <a id="29218" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="29222" href="Demos.HSP.html#29125" class="Bound">ğ‘¨</a> <a id="29224" href="Demos.HSP.html#29163" class="Bound">ğ‘ª</a>
  <a id="29228" href="Demos.HSP.html#29189" class="Function">âˆ˜-hom</a> <a id="29234" class="Symbol">(</a><a id="29235" href="Demos.HSP.html#29235" class="Bound">h</a> <a id="29237" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29239" href="Demos.HSP.html#29239" class="Bound">hhom</a><a id="29243" class="Symbol">)</a> <a id="29245" class="Symbol">(</a><a id="29246" href="Demos.HSP.html#29246" class="Bound">g</a> <a id="29248" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29250" href="Demos.HSP.html#29250" class="Bound">ghom</a><a id="29254" class="Symbol">)</a> <a id="29256" class="Symbol">=</a> <a id="29258" class="Symbol">(</a><a id="29259" href="Demos.HSP.html#29246" class="Bound">g</a> <a id="29261" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="29265" href="Demos.HSP.html#29235" class="Bound">h</a><a id="29266" class="Symbol">)</a> <a id="29268" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29270" href="Demos.HSP.html#28692" class="Function">âˆ˜-is-hom</a> <a id="29279" href="Demos.HSP.html#29239" class="Bound">hhom</a> <a id="29284" href="Demos.HSP.html#29250" class="Bound">ghom</a>

  <a id="29292" href="Demos.HSP.html#29292" class="Function">âˆ˜-epi</a> <a id="29298" class="Symbol">:</a> <a id="29300" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="29304" href="Demos.HSP.html#29125" class="Bound">ğ‘¨</a> <a id="29306" href="Demos.HSP.html#29144" class="Bound">ğ‘©</a> <a id="29308" class="Symbol">â†’</a> <a id="29310" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="29314" href="Demos.HSP.html#29144" class="Bound">ğ‘©</a> <a id="29316" href="Demos.HSP.html#29163" class="Bound">ğ‘ª</a>  <a id="29319" class="Symbol">â†’</a> <a id="29321" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="29325" href="Demos.HSP.html#29125" class="Bound">ğ‘¨</a> <a id="29327" href="Demos.HSP.html#29163" class="Bound">ğ‘ª</a>
  <a id="29331" href="Demos.HSP.html#29292" class="Function">âˆ˜-epi</a> <a id="29337" class="Symbol">(</a><a id="29338" href="Demos.HSP.html#29338" class="Bound">h</a> <a id="29340" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29342" href="Demos.HSP.html#29342" class="Bound">hepi</a><a id="29346" class="Symbol">)</a> <a id="29348" class="Symbol">(</a><a id="29349" href="Demos.HSP.html#29349" class="Bound">g</a> <a id="29351" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29353" href="Demos.HSP.html#29353" class="Bound">gepi</a><a id="29357" class="Symbol">)</a> <a id="29359" class="Symbol">=</a> <a id="29361" class="Symbol">(</a><a id="29362" href="Demos.HSP.html#29349" class="Bound">g</a> <a id="29364" href="Demos.HSP.html#9827" class="Function Operator">âŸ¨âˆ˜âŸ©</a> <a id="29368" href="Demos.HSP.html#29338" class="Bound">h</a><a id="29369" class="Symbol">)</a> <a id="29371" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29373" href="Demos.HSP.html#28885" class="Function">âˆ˜-is-epi</a> <a id="29382" href="Demos.HSP.html#29342" class="Bound">hepi</a> <a id="29387" href="Demos.HSP.html#29353" class="Bound">gepi</a>
</pre>

##### <a id="universe-lifting-of-homomorphisms">Universe lifting of homomorphisms</a>
 <!-- {#universe-lifting-of-homomorphisms .unnumbered} -->

Here we define the identity homomorphism for setoid algebras. Then we prove that
the operations of lifting and lowering of a setoid algebra are homomorphisms.

<pre class="Agda">

<a id="ğ’¾ğ’¹"></a><a id="29724" href="Demos.HSP.html#29724" class="Function">ğ’¾ğ’¹</a> <a id="29727" class="Symbol">:</a> <a id="29729" class="Symbol">{</a><a id="29730" href="Demos.HSP.html#29730" class="Bound">ğ‘¨</a> <a id="29732" class="Symbol">:</a> <a id="29734" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="29742" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="29744" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="29746" class="Symbol">}</a> <a id="29748" class="Symbol">â†’</a> <a id="29750" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="29754" href="Demos.HSP.html#29730" class="Bound">ğ‘¨</a> <a id="29756" href="Demos.HSP.html#29730" class="Bound">ğ‘¨</a>
<a id="29758" href="Demos.HSP.html#29724" class="Function">ğ’¾ğ’¹</a> <a id="29761" class="Symbol">{</a><a id="29762" class="Argument">ğ‘¨</a> <a id="29764" class="Symbol">=</a> <a id="29766" href="Demos.HSP.html#29766" class="Bound">ğ‘¨</a><a id="29767" class="Symbol">}</a> <a id="29769" class="Symbol">=</a>  <a id="29772" href="Demos.HSP.html#9756" class="Function">ğ‘–ğ‘‘</a> <a id="29775" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29777" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="29783" class="Symbol">(</a><a id="29784" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29794" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="29800" class="Symbol">)</a>
              <a id="29816" class="Keyword">where</a> <a id="29822" class="Keyword">open</a> <a id="29827" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29834" class="Symbol">(</a> <a id="29836" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="29843" href="Demos.HSP.html#29766" class="Bound">ğ‘¨</a> <a id="29845" class="Symbol">)</a> <a id="29847" class="Keyword">using</a> <a id="29853" class="Symbol">(</a> <a id="29855" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29865" class="Symbol">)</a>

<a id="29868" class="Keyword">module</a> <a id="29875" href="Demos.HSP.html#29875" class="Module">_</a> <a id="29877" class="Symbol">{</a><a id="29878" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="29880" class="Symbol">:</a> <a id="29882" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="29890" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="29892" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="29894" class="Symbol">}{</a><a id="29896" href="Demos.HSP.html#29896" class="Bound">â„“</a> <a id="29898" class="Symbol">:</a> <a id="29900" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="29905" class="Symbol">}</a> <a id="29907" class="Keyword">where</a>
 <a id="29914" class="Keyword">open</a> <a id="29919" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29926" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="29929" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="29931" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="29933" class="Keyword">using</a> <a id="29939" class="Symbol">(</a> <a id="29941" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29951" class="Symbol">)</a> <a id="29953" class="Keyword">renaming</a> <a id="29962" class="Symbol">(</a> <a id="29964" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="29968" class="Symbol">to</a> <a id="29971" class="Field Operator">_â‰ˆâ‚_</a> <a id="29976" class="Symbol">;</a> <a id="29978" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="29983" class="Symbol">to</a> <a id="29986" class="Function">reflâ‚</a> <a id="29992" class="Symbol">)</a>
 <a id="29995" class="Keyword">open</a> <a id="30000" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30007" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="30010" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="30020" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30022" href="Demos.HSP.html#29896" class="Bound">â„“</a> <a id="30024" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="30027" class="Keyword">using</a> <a id="30033" class="Symbol">()</a> <a id="30036" class="Keyword">renaming</a> <a id="30045" class="Symbol">(</a> <a id="30047" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="30051" class="Symbol">to</a> <a id="30054" class="Field Operator">_â‰ˆË¡_</a> <a id="30059" class="Symbol">;</a> <a id="30061" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="30066" class="Symbol">to</a> <a id="30069" class="Function">reflË¡</a><a id="30074" class="Symbol">)</a>
 <a id="30077" class="Keyword">open</a> <a id="30082" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30089" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="30092" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="30102" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30104" href="Demos.HSP.html#29896" class="Bound">â„“</a> <a id="30106" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="30109" class="Keyword">using</a> <a id="30115" class="Symbol">()</a> <a id="30118" class="Keyword">renaming</a> <a id="30127" class="Symbol">(</a> <a id="30129" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="30133" class="Symbol">to</a> <a id="30136" class="Field Operator">_â‰ˆÊ³_</a> <a id="30141" class="Symbol">;</a> <a id="30143" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="30148" class="Symbol">to</a> <a id="30151" class="Function">reflÊ³</a><a id="30156" class="Symbol">)</a>
 <a id="30159" class="Keyword">open</a> <a id="30164" href="Level.html" class="Module">Level</a>

 <a id="30172" href="Demos.HSP.html#30172" class="Function">ToLiftË¡</a> <a id="30180" class="Symbol">:</a> <a id="30182" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="30186" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30188" class="Symbol">(</a><a id="30189" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="30199" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30201" href="Demos.HSP.html#29896" class="Bound">â„“</a><a id="30202" class="Symbol">)</a>
 <a id="30205" href="Demos.HSP.html#30172" class="Function">ToLiftË¡</a> <a id="30213" class="Symbol">=</a> <a id="30215" class="Keyword">record</a> <a id="30222" class="Symbol">{</a> <a id="30224" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30226" class="Symbol">=</a> <a id="30228" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30233" class="Symbol">;</a> <a id="30235" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30240" class="Symbol">=</a> <a id="30242" href="Function.Base.html#615" class="Function">id</a> <a id="30245" class="Symbol">}</a> <a id="30247" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30249" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="30255" class="Symbol">(</a><a id="30256" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="30266" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="30272" class="Symbol">)</a>

 <a id="30276" href="Demos.HSP.html#30276" class="Function">FromLiftË¡</a> <a id="30286" class="Symbol">:</a> <a id="30288" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="30292" class="Symbol">(</a><a id="30293" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="30303" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30305" href="Demos.HSP.html#29896" class="Bound">â„“</a><a id="30306" class="Symbol">)</a> <a id="30308" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a>
 <a id="30311" href="Demos.HSP.html#30276" class="Function">FromLiftË¡</a> <a id="30321" class="Symbol">=</a> <a id="30323" class="Keyword">record</a> <a id="30330" class="Symbol">{</a> <a id="30332" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30334" class="Symbol">=</a> <a id="30336" href="Level.html#470" class="Field">lower</a> <a id="30342" class="Symbol">;</a> <a id="30344" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30349" class="Symbol">=</a> <a id="30351" href="Function.Base.html#615" class="Function">id</a> <a id="30354" class="Symbol">}</a> <a id="30356" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30358" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="30364" href="Demos.HSP.html#30069" class="Function">reflË¡</a>

 <a id="30372" href="Demos.HSP.html#30372" class="Function">ToFromLiftË¡</a> <a id="30384" class="Symbol">:</a> <a id="30386" class="Symbol">âˆ€</a> <a id="30388" href="Demos.HSP.html#30388" class="Bound">b</a> <a id="30390" class="Symbol">â†’</a>  <a id="30393" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30395" href="Demos.HSP.html#30172" class="Function">ToLiftË¡</a> <a id="30403" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30405" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30409" class="Symbol">(</a><a id="30410" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30412" href="Demos.HSP.html#30276" class="Function">FromLiftË¡</a> <a id="30422" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30424" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30428" href="Demos.HSP.html#30388" class="Bound">b</a><a id="30429" class="Symbol">)</a> <a id="30431" href="Demos.HSP.html#30054" class="Function Operator">â‰ˆË¡</a> <a id="30434" href="Demos.HSP.html#30388" class="Bound">b</a>
 <a id="30437" href="Demos.HSP.html#30372" class="Function">ToFromLiftË¡</a> <a id="30449" href="Demos.HSP.html#30449" class="Bound">b</a> <a id="30451" class="Symbol">=</a> <a id="30453" href="Demos.HSP.html#29986" class="Function">reflâ‚</a>

 <a id="30461" href="Demos.HSP.html#30461" class="Function">FromToLiftË¡</a> <a id="30473" class="Symbol">:</a> <a id="30475" class="Symbol">âˆ€</a> <a id="30477" href="Demos.HSP.html#30477" class="Bound">a</a> <a id="30479" class="Symbol">â†’</a> <a id="30481" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30483" href="Demos.HSP.html#30276" class="Function">FromLiftË¡</a> <a id="30493" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30495" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30499" class="Symbol">(</a><a id="30500" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30502" href="Demos.HSP.html#30172" class="Function">ToLiftË¡</a> <a id="30510" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30512" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30516" href="Demos.HSP.html#30477" class="Bound">a</a><a id="30517" class="Symbol">)</a> <a id="30519" href="Demos.HSP.html#29971" class="Function Operator">â‰ˆâ‚</a> <a id="30522" href="Demos.HSP.html#30477" class="Bound">a</a>
 <a id="30525" href="Demos.HSP.html#30461" class="Function">FromToLiftË¡</a> <a id="30537" href="Demos.HSP.html#30537" class="Bound">a</a> <a id="30539" class="Symbol">=</a> <a id="30541" href="Demos.HSP.html#29986" class="Function">reflâ‚</a>

 <a id="30549" href="Demos.HSP.html#30549" class="Function">ToLiftÊ³</a> <a id="30557" class="Symbol">:</a> <a id="30559" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="30563" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30565" class="Symbol">(</a><a id="30566" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="30576" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30578" href="Demos.HSP.html#29896" class="Bound">â„“</a><a id="30579" class="Symbol">)</a>
 <a id="30582" href="Demos.HSP.html#30549" class="Function">ToLiftÊ³</a> <a id="30590" class="Symbol">=</a> <a id="30592" class="Keyword">record</a> <a id="30599" class="Symbol">{</a> <a id="30601" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30603" class="Symbol">=</a> <a id="30605" href="Function.Base.html#615" class="Function">id</a> <a id="30608" class="Symbol">;</a> <a id="30610" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30615" class="Symbol">=</a> <a id="30617" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30622" class="Symbol">}</a> <a id="30624" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30626" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="30632" class="Symbol">(</a><a id="30633" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30638" class="Symbol">(</a><a id="30639" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="30649" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="30655" class="Symbol">))</a>

 <a id="30660" href="Demos.HSP.html#30660" class="Function">FromLiftÊ³</a> <a id="30670" class="Symbol">:</a> <a id="30672" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="30676" class="Symbol">(</a><a id="30677" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="30687" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a> <a id="30689" href="Demos.HSP.html#29896" class="Bound">â„“</a><a id="30690" class="Symbol">)</a> <a id="30692" href="Demos.HSP.html#29878" class="Bound">ğ‘¨</a>
 <a id="30695" href="Demos.HSP.html#30660" class="Function">FromLiftÊ³</a> <a id="30705" class="Symbol">=</a> <a id="30707" class="Keyword">record</a> <a id="30714" class="Symbol">{</a> <a id="30716" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30718" class="Symbol">=</a> <a id="30720" href="Function.Base.html#615" class="Function">id</a> <a id="30723" class="Symbol">;</a> <a id="30725" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30730" class="Symbol">=</a> <a id="30732" href="Level.html#470" class="Field">lower</a> <a id="30738" class="Symbol">}</a> <a id="30740" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30742" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="30748" href="Demos.HSP.html#30069" class="Function">reflË¡</a>

 <a id="30756" href="Demos.HSP.html#30756" class="Function">ToFromLiftÊ³</a> <a id="30768" class="Symbol">:</a> <a id="30770" class="Symbol">âˆ€</a> <a id="30772" href="Demos.HSP.html#30772" class="Bound">b</a> <a id="30774" class="Symbol">â†’</a> <a id="30776" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30778" href="Demos.HSP.html#30549" class="Function">ToLiftÊ³</a> <a id="30786" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30788" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30792" class="Symbol">(</a><a id="30793" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30795" href="Demos.HSP.html#30660" class="Function">FromLiftÊ³</a> <a id="30805" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30807" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30811" href="Demos.HSP.html#30772" class="Bound">b</a><a id="30812" class="Symbol">)</a> <a id="30814" href="Demos.HSP.html#30136" class="Function Operator">â‰ˆÊ³</a> <a id="30817" href="Demos.HSP.html#30772" class="Bound">b</a>
 <a id="30820" href="Demos.HSP.html#30756" class="Function">ToFromLiftÊ³</a> <a id="30832" href="Demos.HSP.html#30832" class="Bound">b</a> <a id="30834" class="Symbol">=</a> <a id="30836" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30841" href="Demos.HSP.html#29986" class="Function">reflâ‚</a>

 <a id="30849" href="Demos.HSP.html#30849" class="Function">FromToLiftÊ³</a> <a id="30861" class="Symbol">:</a> <a id="30863" class="Symbol">âˆ€</a> <a id="30865" href="Demos.HSP.html#30865" class="Bound">a</a> <a id="30867" class="Symbol">â†’</a> <a id="30869" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30871" href="Demos.HSP.html#30660" class="Function">FromLiftÊ³</a> <a id="30881" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30883" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30887" class="Symbol">(</a><a id="30888" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30890" href="Demos.HSP.html#30549" class="Function">ToLiftÊ³</a> <a id="30898" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="30900" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="30904" href="Demos.HSP.html#30865" class="Bound">a</a><a id="30905" class="Symbol">)</a> <a id="30907" href="Demos.HSP.html#29971" class="Function Operator">â‰ˆâ‚</a> <a id="30910" href="Demos.HSP.html#30865" class="Bound">a</a>
 <a id="30913" href="Demos.HSP.html#30849" class="Function">FromToLiftÊ³</a> <a id="30925" href="Demos.HSP.html#30925" class="Bound">a</a> <a id="30927" class="Symbol">=</a> <a id="30929" href="Demos.HSP.html#29986" class="Function">reflâ‚</a>


<a id="30937" class="Keyword">module</a> <a id="30944" href="Demos.HSP.html#30944" class="Module">_</a> <a id="30946" class="Symbol">{</a><a id="30947" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="30949" class="Symbol">:</a> <a id="30951" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="30959" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="30961" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="30963" class="Symbol">}{</a><a id="30965" href="Demos.HSP.html#30965" class="Bound">â„“</a> <a id="30967" href="Demos.HSP.html#30967" class="Bound">r</a> <a id="30969" class="Symbol">:</a> <a id="30971" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="30976" class="Symbol">}</a> <a id="30978" class="Keyword">where</a>
 <a id="30985" class="Keyword">open</a>  <a id="30991" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30998" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="31001" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="31003" href="Demos.HSP.html#19168" class="Function Operator">]</a>               <a id="31019" class="Keyword">using</a> <a id="31025" class="Symbol">(</a> <a id="31027" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="31032" class="Symbol">)</a>
 <a id="31035" class="Keyword">open</a>  <a id="31041" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="31048" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="31051" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="31060" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="31062" href="Demos.HSP.html#30965" class="Bound">â„“</a> <a id="31064" href="Demos.HSP.html#30967" class="Bound">r</a> <a id="31066" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="31069" class="Keyword">using</a> <a id="31075" class="Symbol">(</a> <a id="31077" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="31081" class="Symbol">)</a>
 <a id="31084" class="Keyword">open</a>  <a id="31090" href="Level.html" class="Module">Level</a>
 <a id="31097" href="Demos.HSP.html#31097" class="Function">ToLift</a> <a id="31104" class="Symbol">:</a> <a id="31106" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="31110" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="31112" class="Symbol">(</a><a id="31113" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="31122" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="31124" href="Demos.HSP.html#30965" class="Bound">â„“</a> <a id="31126" href="Demos.HSP.html#30967" class="Bound">r</a><a id="31127" class="Symbol">)</a>
 <a id="31130" href="Demos.HSP.html#31097" class="Function">ToLift</a> <a id="31137" class="Symbol">=</a> <a id="31139" href="Demos.HSP.html#29189" class="Function">âˆ˜-hom</a> <a id="31145" href="Demos.HSP.html#30172" class="Function">ToLiftË¡</a> <a id="31153" href="Demos.HSP.html#30549" class="Function">ToLiftÊ³</a>

 <a id="31163" href="Demos.HSP.html#31163" class="Function">FromLift</a> <a id="31172" class="Symbol">:</a> <a id="31174" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="31178" class="Symbol">(</a><a id="31179" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="31188" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="31190" href="Demos.HSP.html#30965" class="Bound">â„“</a> <a id="31192" href="Demos.HSP.html#30967" class="Bound">r</a><a id="31193" class="Symbol">)</a> <a id="31195" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a>
 <a id="31198" href="Demos.HSP.html#31163" class="Function">FromLift</a> <a id="31207" class="Symbol">=</a> <a id="31209" href="Demos.HSP.html#29189" class="Function">âˆ˜-hom</a> <a id="31215" href="Demos.HSP.html#30660" class="Function">FromLiftÊ³</a> <a id="31225" href="Demos.HSP.html#30276" class="Function">FromLiftË¡</a>

 <a id="31237" href="Demos.HSP.html#31237" class="Function">ToFromLift</a> <a id="31248" class="Symbol">:</a> <a id="31250" class="Symbol">âˆ€</a> <a id="31252" href="Demos.HSP.html#31252" class="Bound">b</a> <a id="31254" class="Symbol">â†’</a> <a id="31256" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31258" href="Demos.HSP.html#31097" class="Function">ToLift</a> <a id="31265" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31267" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="31271" class="Symbol">(</a><a id="31272" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31274" href="Demos.HSP.html#31163" class="Function">FromLift</a> <a id="31283" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31285" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="31289" href="Demos.HSP.html#31252" class="Bound">b</a><a id="31290" class="Symbol">)</a> <a id="31292" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="31294" href="Demos.HSP.html#31252" class="Bound">b</a>
 <a id="31297" href="Demos.HSP.html#31237" class="Function">ToFromLift</a> <a id="31308" href="Demos.HSP.html#31308" class="Bound">b</a> <a id="31310" class="Symbol">=</a> <a id="31312" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="31317" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="31324" href="Demos.HSP.html#31324" class="Function">ToLift-epi</a> <a id="31335" class="Symbol">:</a> <a id="31337" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="31341" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="31343" class="Symbol">(</a><a id="31344" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="31353" href="Demos.HSP.html#30947" class="Bound">ğ‘¨</a> <a id="31355" href="Demos.HSP.html#30965" class="Bound">â„“</a> <a id="31357" href="Demos.HSP.html#30967" class="Bound">r</a><a id="31358" class="Symbol">)</a>
 <a id="31361" href="Demos.HSP.html#31324" class="Function">ToLift-epi</a> <a id="31372" class="Symbol">=</a>
  <a id="31376" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31378" href="Demos.HSP.html#31097" class="Function">ToLift</a> <a id="31385" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31387" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="31389" class="Keyword">record</a>  <a id="31397" class="Symbol">{</a> <a id="31399" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="31405" class="Symbol">=</a> <a id="31407" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="31409" href="Demos.HSP.html#31097" class="Function">ToLift</a> <a id="31416" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a>
                       <a id="31441" class="Symbol">;</a> <a id="31443" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="31456" class="Symbol">=</a> <a id="31458" class="Symbol">Î»{</a><a id="31460" href="Demos.HSP.html#31460" class="Bound">y</a><a id="31461" class="Symbol">}</a> <a id="31463" class="Symbol">â†’</a> <a id="31465" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a><a id="31467" class="Symbol">(</a><a id="31468" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31470" href="Demos.HSP.html#31163" class="Function">FromLift</a> <a id="31479" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="31481" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="31485" href="Demos.HSP.html#31460" class="Bound">y</a><a id="31486" class="Symbol">)(</a><a id="31488" href="Demos.HSP.html#31237" class="Function">ToFromLift</a> <a id="31499" href="Demos.HSP.html#31460" class="Bound">y</a><a id="31500" class="Symbol">)</a>
                       <a id="31525" class="Symbol">}</a>
</pre>


##### <a id="homomorphisms-of-product-algebras">Homomorphisms of product algebras</a>
 <!-- {#homomorphisms-of-product-algebras .unnumbered} -->

Suppose we have an algebra `ğ‘¨`, a type `I : Type ğ“˜`, and a family
`â„¬ : I â†’ Algebra Î² Ïáµ‡` of algebras. We sometimes refer to the inhabitants of `I`
as *indices*, and call `â„¬` an *indexed family of algebras*. If in addition we have
a family `ğ’½ : (i : I) â†’ hom ğ‘¨ (â„¬ i)` of homomorphisms, then we can construct a
homomorphism from `ğ‘¨` to the product `â¨… â„¬` in the natural way.  We codify the
latter in dependent type theory as follows.

<pre class="Agda">

<a id="32132" class="Keyword">module</a> <a id="32139" href="Demos.HSP.html#32139" class="Module">_</a> <a id="32141" class="Symbol">{</a><a id="32142" href="Demos.HSP.html#32142" class="Bound">Î¹</a> <a id="32144" class="Symbol">:</a> <a id="32146" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="32151" class="Symbol">}{</a><a id="32153" href="Demos.HSP.html#32153" class="Bound">I</a> <a id="32155" class="Symbol">:</a> <a id="32157" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="32162" href="Demos.HSP.html#32142" class="Bound">Î¹</a><a id="32163" class="Symbol">}{</a><a id="32165" href="Demos.HSP.html#32165" class="Bound">ğ‘¨</a> <a id="32167" class="Symbol">:</a> <a id="32169" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="32177" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="32179" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="32181" class="Symbol">}(</a><a id="32183" href="Demos.HSP.html#32183" class="Bound">â„¬</a> <a id="32185" class="Symbol">:</a> <a id="32187" href="Demos.HSP.html#32153" class="Bound">I</a> <a id="32189" class="Symbol">â†’</a> <a id="32191" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="32199" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="32201" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="32203" class="Symbol">)</a> <a id="32205" class="Keyword">where</a>
 <a id="32212" href="Demos.HSP.html#32212" class="Function">â¨…-hom-co</a> <a id="32221" class="Symbol">:</a> <a id="32223" class="Symbol">(âˆ€(</a><a id="32226" href="Demos.HSP.html#32226" class="Bound">i</a> <a id="32228" class="Symbol">:</a> <a id="32230" href="Demos.HSP.html#32153" class="Bound">I</a><a id="32231" class="Symbol">)</a> <a id="32233" class="Symbol">â†’</a> <a id="32235" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="32239" href="Demos.HSP.html#32165" class="Bound">ğ‘¨</a> <a id="32241" class="Symbol">(</a><a id="32242" href="Demos.HSP.html#32183" class="Bound">â„¬</a> <a id="32244" href="Demos.HSP.html#32226" class="Bound">i</a><a id="32245" class="Symbol">))</a> <a id="32248" class="Symbol">â†’</a> <a id="32250" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="32254" href="Demos.HSP.html#32165" class="Bound">ğ‘¨</a> <a id="32256" class="Symbol">(</a><a id="32257" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="32259" href="Demos.HSP.html#32183" class="Bound">â„¬</a><a id="32260" class="Symbol">)</a>
 <a id="32263" href="Demos.HSP.html#32212" class="Function">â¨…-hom-co</a> <a id="32272" href="Demos.HSP.html#32272" class="Bound">ğ’½</a> <a id="32274" class="Symbol">=</a> <a id="32276" href="Demos.HSP.html#32292" class="Function">h</a> <a id="32278" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="32280" href="Demos.HSP.html#32464" class="Function">hhom</a> <a id="32285" class="Keyword">where</a>  <a id="32292" href="Demos.HSP.html#32292" class="Function">h</a> <a id="32294" class="Symbol">:</a> <a id="32296" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="32299" href="Demos.HSP.html#32165" class="Bound">ğ‘¨</a> <a id="32301" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="32303" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="32305" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="32308" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="32310" href="Demos.HSP.html#32183" class="Bound">â„¬</a> <a id="32312" href="Demos.HSP.html#19168" class="Function Operator">]</a>
                              <a id="32344" href="Demos.HSP.html#32292" class="Function">h</a> <a id="32346" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="32350" href="Demos.HSP.html#32350" class="Bound">a</a> <a id="32352" class="Symbol">=</a> <a id="32354" class="Symbol">Î»</a> <a id="32356" href="Demos.HSP.html#32356" class="Bound">i</a> <a id="32358" class="Symbol">â†’</a> <a id="32360" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="32362" href="Demos.HSP.html#32272" class="Bound">ğ’½</a> <a id="32364" href="Demos.HSP.html#32356" class="Bound">i</a> <a id="32366" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="32368" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="32372" href="Demos.HSP.html#32350" class="Bound">a</a>
                              <a id="32404" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="32409" href="Demos.HSP.html#32292" class="Function">h</a> <a id="32411" href="Demos.HSP.html#32411" class="Bound">xy</a> <a id="32414" href="Demos.HSP.html#32414" class="Bound">i</a> <a id="32416" class="Symbol">=</a> <a id="32418" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="32423" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="32425" href="Demos.HSP.html#32272" class="Bound">ğ’½</a> <a id="32427" href="Demos.HSP.html#32414" class="Bound">i</a> <a id="32429" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="32431" href="Demos.HSP.html#32411" class="Bound">xy</a>
                              <a id="32464" href="Demos.HSP.html#32464" class="Function">hhom</a> <a id="32469" class="Symbol">:</a> <a id="32471" href="Demos.HSP.html#26555" class="Record">IsHom</a> <a id="32477" href="Demos.HSP.html#32165" class="Bound">ğ‘¨</a> <a id="32479" class="Symbol">(</a><a id="32480" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="32482" href="Demos.HSP.html#32183" class="Bound">â„¬</a><a id="32483" class="Symbol">)</a> <a id="32485" href="Demos.HSP.html#32292" class="Function">h</a>
                              <a id="32517" href="Demos.HSP.html#26649" class="Field">compatible</a> <a id="32528" href="Demos.HSP.html#32464" class="Function">hhom</a> <a id="32533" class="Symbol">=</a> <a id="32535" class="Symbol">Î»</a> <a id="32537" href="Demos.HSP.html#32537" class="Bound">i</a> <a id="32539" class="Symbol">â†’</a> <a id="32541" href="Demos.HSP.html#26649" class="Field">compatible</a> <a id="32552" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="32554" href="Demos.HSP.html#32272" class="Bound">ğ’½</a> <a id="32556" href="Demos.HSP.html#32537" class="Bound">i</a> <a id="32558" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a>
</pre>

Two structures are *isomorphic* provided there are homomorphisms from each to the
other that compose to the identity. We define the following record type to
represent this concept. Note that the definition, shown below, includes a proof of
the fact that the maps `to` and `from` are bijective, which makes this fact more
accessible.

<pre class="Agda">

<a id="32920" class="Keyword">module</a> <a id="32927" href="Demos.HSP.html#32927" class="Module">_</a> <a id="32929" class="Symbol">(</a><a id="32930" href="Demos.HSP.html#32930" class="Bound">ğ‘¨</a> <a id="32932" class="Symbol">:</a> <a id="32934" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="32942" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="32944" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="32946" class="Symbol">)</a> <a id="32948" class="Symbol">(</a><a id="32949" href="Demos.HSP.html#32949" class="Bound">ğ‘©</a> <a id="32951" class="Symbol">:</a> <a id="32953" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="32961" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="32963" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="32965" class="Symbol">)</a> <a id="32967" class="Keyword">where</a>
 <a id="32974" class="Keyword">open</a> <a id="32979" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32986" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="32989" href="Demos.HSP.html#32930" class="Bound">ğ‘¨</a> <a id="32991" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="32994" class="Keyword">using</a> <a id="33000" class="Symbol">()</a>  <a id="33004" class="Keyword">renaming</a> <a id="33013" class="Symbol">(</a> <a id="33015" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="33019" class="Symbol">to</a> <a id="33022" class="Field Operator">_â‰ˆá´¬_</a> <a id="33027" class="Symbol">)</a>
 <a id="33030" class="Keyword">open</a> <a id="33035" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33042" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="33045" href="Demos.HSP.html#32949" class="Bound">ğ‘©</a> <a id="33047" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="33050" class="Keyword">using</a> <a id="33056" class="Symbol">()</a>  <a id="33060" class="Keyword">renaming</a> <a id="33069" class="Symbol">(</a> <a id="33071" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="33075" class="Symbol">to</a> <a id="33078" class="Field Operator">_â‰ˆá´®_</a> <a id="33083" class="Symbol">)</a>

 <a id="33087" class="Keyword">record</a> <a id="33094" href="Demos.HSP.html#33094" class="Record Operator">_â‰…_</a> <a id="33098" class="Symbol">:</a> <a id="33100" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="33105" class="Symbol">(</a><a id="33106" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="33108" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33110" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="33112" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33114" href="Demos.HSP.html#32942" class="Bound">Î±</a> <a id="33116" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33118" href="Demos.HSP.html#32944" class="Bound">Ïáµƒ</a> <a id="33121" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33123" href="Demos.HSP.html#32961" class="Bound">Î²</a> <a id="33125" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="33127" href="Demos.HSP.html#32963" class="Bound">Ïáµ‡</a> <a id="33130" class="Symbol">)</a> <a id="33132" class="Keyword">where</a>
  <a id="33140" class="Keyword">constructor</a>  <a id="33153" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a>
  <a id="33161" class="Keyword">field</a>        <a id="33174" href="Demos.HSP.html#33174" class="Field">to</a>    <a id="33180" class="Symbol">:</a> <a id="33182" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="33186" href="Demos.HSP.html#32930" class="Bound">ğ‘¨</a> <a id="33188" href="Demos.HSP.html#32949" class="Bound">ğ‘©</a>
               <a id="33205" href="Demos.HSP.html#33205" class="Field">from</a>  <a id="33211" class="Symbol">:</a> <a id="33213" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="33217" href="Demos.HSP.html#32949" class="Bound">ğ‘©</a> <a id="33219" href="Demos.HSP.html#32930" class="Bound">ğ‘¨</a>
               <a id="33236" href="Demos.HSP.html#33236" class="Field">toâˆ¼from</a> <a id="33244" class="Symbol">:</a> <a id="33246" class="Symbol">âˆ€</a> <a id="33248" href="Demos.HSP.html#33248" class="Bound">b</a> <a id="33250" class="Symbol">â†’</a> <a id="33252" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33254" href="Demos.HSP.html#33174" class="Field">to</a> <a id="33257" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>    <a id="33262" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33266" class="Symbol">(</a><a id="33267" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33269" href="Demos.HSP.html#33205" class="Field">from</a> <a id="33274" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>  <a id="33277" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33281" href="Demos.HSP.html#33248" class="Bound">b</a><a id="33282" class="Symbol">)</a>  <a id="33285" href="Demos.HSP.html#33078" class="Function Operator">â‰ˆá´®</a> <a id="33288" href="Demos.HSP.html#33248" class="Bound">b</a>
               <a id="33305" href="Demos.HSP.html#33305" class="Field">fromâˆ¼to</a> <a id="33313" class="Symbol">:</a> <a id="33315" class="Symbol">âˆ€</a> <a id="33317" href="Demos.HSP.html#33317" class="Bound">a</a> <a id="33319" class="Symbol">â†’</a> <a id="33321" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33323" href="Demos.HSP.html#33205" class="Field">from</a> <a id="33328" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>  <a id="33331" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33335" class="Symbol">(</a><a id="33336" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33338" href="Demos.HSP.html#33174" class="Field">to</a> <a id="33341" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>    <a id="33346" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33350" href="Demos.HSP.html#33317" class="Bound">a</a><a id="33351" class="Symbol">)</a>  <a id="33354" href="Demos.HSP.html#33022" class="Function Operator">â‰ˆá´¬</a> <a id="33357" href="Demos.HSP.html#33317" class="Bound">a</a>

  <a id="33362" href="Demos.HSP.html#33362" class="Function">toIsInjective</a> <a id="33376" class="Symbol">:</a> <a id="33378" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="33390" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33392" href="Demos.HSP.html#33174" class="Field">to</a> <a id="33395" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>
  <a id="33399" href="Demos.HSP.html#33362" class="Function">toIsInjective</a> <a id="33413" class="Symbol">{</a><a id="33414" href="Demos.HSP.html#33414" class="Bound">x</a><a id="33415" class="Symbol">}{</a><a id="33417" href="Demos.HSP.html#33417" class="Bound">y</a><a id="33418" class="Symbol">}</a> <a id="33420" href="Demos.HSP.html#33420" class="Bound">xy</a> <a id="33423" class="Symbol">=</a> <a id="33425" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33431" class="Symbol">(</a><a id="33432" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33436" class="Symbol">(</a><a id="33437" href="Demos.HSP.html#33305" class="Field">fromâˆ¼to</a> <a id="33445" href="Demos.HSP.html#33414" class="Bound">x</a><a id="33446" class="Symbol">))</a> <a id="33449" class="Symbol">(</a><a id="33450" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33456" href="Demos.HSP.html#33532" class="Function">Î¾</a> <a id="33458" class="Symbol">(</a><a id="33459" href="Demos.HSP.html#33305" class="Field">fromâˆ¼to</a> <a id="33467" href="Demos.HSP.html#33417" class="Bound">y</a><a id="33468" class="Symbol">))</a>
   <a id="33474" class="Keyword">where</a>  <a id="33481" class="Keyword">open</a> <a id="33486" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33493" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="33496" href="Demos.HSP.html#32930" class="Bound">ğ‘¨</a> <a id="33498" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="33500" class="Keyword">using</a> <a id="33506" class="Symbol">(</a> <a id="33508" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33512" class="Symbol">;</a> <a id="33514" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33520" class="Symbol">)</a>
          <a id="33532" href="Demos.HSP.html#33532" class="Function">Î¾</a> <a id="33534" class="Symbol">:</a> <a id="33536" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33538" href="Demos.HSP.html#33205" class="Field">from</a> <a id="33543" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33545" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33549" class="Symbol">(</a><a id="33550" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33552" href="Demos.HSP.html#33174" class="Field">to</a> <a id="33555" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33557" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33561" href="Demos.HSP.html#33414" class="Bound">x</a><a id="33562" class="Symbol">)</a> <a id="33564" href="Demos.HSP.html#33022" class="Function Operator">â‰ˆá´¬</a> <a id="33567" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33569" href="Demos.HSP.html#33205" class="Field">from</a> <a id="33574" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33576" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33580" class="Symbol">(</a><a id="33581" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33583" href="Demos.HSP.html#33174" class="Field">to</a> <a id="33586" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33588" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33592" href="Demos.HSP.html#33417" class="Bound">y</a><a id="33593" class="Symbol">)</a>
          <a id="33605" href="Demos.HSP.html#33532" class="Function">Î¾</a> <a id="33607" class="Symbol">=</a> <a id="33609" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="33614" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33616" href="Demos.HSP.html#33205" class="Field">from</a> <a id="33621" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33623" href="Demos.HSP.html#33420" class="Bound">xy</a>

  <a id="33629" href="Demos.HSP.html#33629" class="Function">fromIsSurjective</a> <a id="33646" class="Symbol">:</a> <a id="33648" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="33661" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33663" href="Demos.HSP.html#33205" class="Field">from</a> <a id="33668" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>
  <a id="33672" href="Demos.HSP.html#33629" class="Function">fromIsSurjective</a> <a id="33689" class="Symbol">{</a><a id="33690" href="Demos.HSP.html#33690" class="Bound">x</a><a id="33691" class="Symbol">}</a> <a id="33693" class="Symbol">=</a> <a id="33695" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="33698" class="Symbol">(</a><a id="33699" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33701" href="Demos.HSP.html#33174" class="Field">to</a> <a id="33704" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="33706" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="33710" href="Demos.HSP.html#33690" class="Bound">x</a><a id="33711" class="Symbol">)</a> <a id="33713" class="Symbol">(</a><a id="33714" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33718" class="Symbol">(</a><a id="33719" href="Demos.HSP.html#33305" class="Field">fromâˆ¼to</a> <a id="33727" href="Demos.HSP.html#33690" class="Bound">x</a><a id="33728" class="Symbol">))</a>
   <a id="33734" class="Keyword">where</a> <a id="33740" class="Keyword">open</a> <a id="33745" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33752" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="33755" href="Demos.HSP.html#32930" class="Bound">ğ‘¨</a> <a id="33757" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="33759" class="Keyword">using</a> <a id="33765" class="Symbol">(</a> <a id="33767" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33771" class="Symbol">)</a>

<a id="33774" class="Keyword">open</a> <a id="33779" href="Demos.HSP.html#33094" class="Module Operator">_â‰…_</a>

</pre>

It is easy to prove that \ar{\au{}â‰…\au{}} is an equivalence relation, as follows.

<pre class="Agda">

<a id="â‰…-refl"></a><a id="33893" href="Demos.HSP.html#33893" class="Function">â‰…-refl</a> <a id="33900" class="Symbol">:</a> <a id="33902" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="33912" class="Symbol">(</a><a id="33913" href="Demos.HSP.html#33094" class="Record Operator">_â‰…_</a> <a id="33917" class="Symbol">{</a><a id="33918" href="Demos.HSP.html#7150" class="Generalizable">Î±</a><a id="33919" class="Symbol">}{</a><a id="33921" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="33923" class="Symbol">})</a>
<a id="33926" href="Demos.HSP.html#33893" class="Function">â‰…-refl</a> <a id="33933" class="Symbol">{</a><a id="33934" href="Demos.HSP.html#33934" class="Bound">Î±</a><a id="33935" class="Symbol">}{</a><a id="33937" href="Demos.HSP.html#33937" class="Bound">Ïáµƒ</a><a id="33939" class="Symbol">}{</a><a id="33941" href="Demos.HSP.html#33941" class="Bound">ğ‘¨</a><a id="33942" class="Symbol">}</a> <a id="33944" class="Symbol">=</a>
 <a id="33947" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a> <a id="33953" href="Demos.HSP.html#29724" class="Function">ğ’¾ğ’¹</a> <a id="33956" href="Demos.HSP.html#29724" class="Function">ğ’¾ğ’¹</a> <a id="33959" class="Symbol">(Î»</a> <a id="33962" href="Demos.HSP.html#33962" class="Bound">b</a> <a id="33964" class="Symbol">â†’</a> <a id="33966" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="33970" class="Symbol">)</a> <a id="33972" class="Symbol">Î»</a> <a id="33974" href="Demos.HSP.html#33974" class="Bound">a</a> <a id="33976" class="Symbol">â†’</a> <a id="33978" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="33983" class="Keyword">where</a> <a id="33989" class="Keyword">open</a> <a id="33994" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34001" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="34004" href="Demos.HSP.html#33941" class="Bound">ğ‘¨</a> <a id="34006" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="34008" class="Keyword">using</a> <a id="34014" class="Symbol">(</a> <a id="34016" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="34021" class="Symbol">)</a>

<a id="â‰…-sym"></a><a id="34024" href="Demos.HSP.html#34024" class="Function">â‰…-sym</a> <a id="34030" class="Symbol">:</a> <a id="34032" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="34036" class="Symbol">(</a><a id="34037" href="Demos.HSP.html#33094" class="Record Operator">_â‰…_</a><a id="34040" class="Symbol">{</a><a id="34041" href="Demos.HSP.html#7155" class="Generalizable">Î²</a><a id="34042" class="Symbol">}{</a><a id="34044" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="34046" class="Symbol">})</a> <a id="34049" class="Symbol">(</a><a id="34050" href="Demos.HSP.html#33094" class="Record Operator">_â‰…_</a><a id="34053" class="Symbol">{</a><a id="34054" href="Demos.HSP.html#7150" class="Generalizable">Î±</a><a id="34055" class="Symbol">}{</a><a id="34057" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="34059" class="Symbol">})</a>
<a id="34062" href="Demos.HSP.html#34024" class="Function">â‰…-sym</a> <a id="34068" href="Demos.HSP.html#34068" class="Bound">Ï†</a> <a id="34070" class="Symbol">=</a> <a id="34072" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a> <a id="34078" class="Symbol">(</a><a id="34079" href="Demos.HSP.html#33205" class="Field">from</a> <a id="34084" href="Demos.HSP.html#34068" class="Bound">Ï†</a><a id="34085" class="Symbol">)</a> <a id="34087" class="Symbol">(</a><a id="34088" href="Demos.HSP.html#33174" class="Field">to</a> <a id="34091" href="Demos.HSP.html#34068" class="Bound">Ï†</a><a id="34092" class="Symbol">)</a> <a id="34094" class="Symbol">(</a><a id="34095" href="Demos.HSP.html#33305" class="Field">fromâˆ¼to</a> <a id="34103" href="Demos.HSP.html#34068" class="Bound">Ï†</a><a id="34104" class="Symbol">)</a> <a id="34106" class="Symbol">(</a><a id="34107" href="Demos.HSP.html#33236" class="Field">toâˆ¼from</a> <a id="34115" href="Demos.HSP.html#34068" class="Bound">Ï†</a><a id="34116" class="Symbol">)</a>

<a id="â‰…-trans"></a><a id="34119" href="Demos.HSP.html#34119" class="Function">â‰…-trans</a> <a id="34127" class="Symbol">:</a> <a id="34129" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a> <a id="34135" class="Symbol">(</a><a id="34136" href="Demos.HSP.html#33094" class="Record Operator">_â‰…_</a> <a id="34140" class="Symbol">{</a><a id="34141" href="Demos.HSP.html#7150" class="Generalizable">Î±</a><a id="34142" class="Symbol">}{</a><a id="34144" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="34146" class="Symbol">})</a> <a id="34149" class="Symbol">(</a><a id="34150" href="Demos.HSP.html#33094" class="Record Operator">_â‰…_</a><a id="34153" class="Symbol">{</a><a id="34154" href="Demos.HSP.html#7155" class="Generalizable">Î²</a><a id="34155" class="Symbol">}{</a><a id="34157" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="34159" class="Symbol">})</a> <a id="34162" class="Symbol">(</a><a id="34163" href="Demos.HSP.html#33094" class="Record Operator">_â‰…_</a><a id="34166" class="Symbol">{</a><a id="34167" href="Demos.HSP.html#7150" class="Generalizable">Î±</a><a id="34168" class="Symbol">}{</a><a id="34170" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="34172" class="Symbol">}{</a><a id="34174" href="Demos.HSP.html#7160" class="Generalizable">Î³</a><a id="34175" class="Symbol">}{</a><a id="34177" href="Demos.HSP.html#7162" class="Generalizable">Ïá¶œ</a><a id="34179" class="Symbol">})</a>
<a id="34182" href="Demos.HSP.html#34119" class="Function">â‰…-trans</a> <a id="34190" class="Symbol">{</a><a id="34191" class="Argument">Ïá¶œ</a> <a id="34194" class="Symbol">=</a> <a id="34196" href="Demos.HSP.html#34196" class="Bound">Ïá¶œ</a><a id="34198" class="Symbol">}{</a><a id="34200" href="Demos.HSP.html#34200" class="Bound">ğ‘¨</a><a id="34201" class="Symbol">}{</a><a id="34203" href="Demos.HSP.html#34203" class="Bound">ğ‘©</a><a id="34204" class="Symbol">}{</a><a id="34206" href="Demos.HSP.html#34206" class="Bound">ğ‘ª</a><a id="34207" class="Symbol">}</a> <a id="34209" href="Demos.HSP.html#34209" class="Bound">ab</a> <a id="34212" href="Demos.HSP.html#34212" class="Bound">bc</a> <a id="34215" class="Symbol">=</a> <a id="34217" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a> <a id="34223" href="Demos.HSP.html#34239" class="Function">f</a> <a id="34225" href="Demos.HSP.html#34269" class="Function">g</a> <a id="34227" href="Demos.HSP.html#34462" class="Function">Ï„</a> <a id="34229" href="Demos.HSP.html#34584" class="Function">Î½</a> <a id="34231" class="Keyword">where</a>
  <a id="34239" href="Demos.HSP.html#34239" class="Function">f</a> <a id="34241" class="Symbol">:</a> <a id="34243" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="34247" href="Demos.HSP.html#34200" class="Bound">ğ‘¨</a> <a id="34249" href="Demos.HSP.html#34206" class="Bound">ğ‘ª</a>                <a id="34266" class="Symbol">;</a>  <a id="34269" href="Demos.HSP.html#34269" class="Function">g</a> <a id="34271" class="Symbol">:</a> <a id="34273" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="34277" href="Demos.HSP.html#34206" class="Bound">ğ‘ª</a> <a id="34279" href="Demos.HSP.html#34200" class="Bound">ğ‘¨</a>
  <a id="34283" href="Demos.HSP.html#34239" class="Function">f</a> <a id="34285" class="Symbol">=</a> <a id="34287" href="Demos.HSP.html#29189" class="Function">âˆ˜-hom</a> <a id="34293" class="Symbol">(</a><a id="34294" href="Demos.HSP.html#33174" class="Field">to</a> <a id="34297" href="Demos.HSP.html#34209" class="Bound">ab</a><a id="34299" class="Symbol">)</a> <a id="34301" class="Symbol">(</a><a id="34302" href="Demos.HSP.html#33174" class="Field">to</a> <a id="34305" href="Demos.HSP.html#34212" class="Bound">bc</a><a id="34307" class="Symbol">)</a>  <a id="34310" class="Symbol">;</a>  <a id="34313" href="Demos.HSP.html#34269" class="Function">g</a> <a id="34315" class="Symbol">=</a> <a id="34317" href="Demos.HSP.html#29189" class="Function">âˆ˜-hom</a> <a id="34323" class="Symbol">(</a><a id="34324" href="Demos.HSP.html#33205" class="Field">from</a> <a id="34329" href="Demos.HSP.html#34212" class="Bound">bc</a><a id="34331" class="Symbol">)</a> <a id="34333" class="Symbol">(</a><a id="34334" href="Demos.HSP.html#33205" class="Field">from</a> <a id="34339" href="Demos.HSP.html#34209" class="Bound">ab</a><a id="34341" class="Symbol">)</a>

  <a id="34346" class="Keyword">open</a> <a id="34351" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34358" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="34361" href="Demos.HSP.html#34200" class="Bound">ğ‘¨</a> <a id="34363" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="34365" class="Keyword">using</a> <a id="34371" class="Symbol">(</a> <a id="34373" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="34377" class="Symbol">;</a> <a id="34379" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34385" class="Symbol">)</a>
  <a id="34389" class="Keyword">open</a> <a id="34394" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34401" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="34404" href="Demos.HSP.html#34206" class="Bound">ğ‘ª</a> <a id="34406" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="34408" class="Keyword">using</a> <a id="34414" class="Symbol">()</a> <a id="34417" class="Keyword">renaming</a> <a id="34426" class="Symbol">(</a> <a id="34428" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="34432" class="Symbol">to</a> <a id="34435" class="Field Operator">_â‰ˆá¶œ_</a> <a id="34440" class="Symbol">;</a> <a id="34442" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34448" class="Symbol">to</a> <a id="34451" class="Function">transá¶œ</a> <a id="34458" class="Symbol">)</a>
  <a id="34462" href="Demos.HSP.html#34462" class="Function">Ï„</a> <a id="34464" class="Symbol">:</a> <a id="34466" class="Symbol">âˆ€</a> <a id="34468" href="Demos.HSP.html#34468" class="Bound">b</a> <a id="34470" class="Symbol">â†’</a> <a id="34472" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34474" href="Demos.HSP.html#34239" class="Function">f</a> <a id="34476" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34478" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="34482" class="Symbol">(</a><a id="34483" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34485" href="Demos.HSP.html#34269" class="Function">g</a> <a id="34487" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34489" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="34493" href="Demos.HSP.html#34468" class="Bound">b</a><a id="34494" class="Symbol">)</a> <a id="34496" href="Demos.HSP.html#34435" class="Function Operator">â‰ˆá¶œ</a> <a id="34499" href="Demos.HSP.html#34468" class="Bound">b</a>
  <a id="34503" href="Demos.HSP.html#34462" class="Function">Ï„</a> <a id="34505" href="Demos.HSP.html#34505" class="Bound">b</a> <a id="34507" class="Symbol">=</a> <a id="34509" href="Demos.HSP.html#34451" class="Function">transá¶œ</a> <a id="34516" class="Symbol">(</a><a id="34517" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="34522" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34524" href="Demos.HSP.html#33174" class="Field">to</a> <a id="34527" href="Demos.HSP.html#34212" class="Bound">bc</a> <a id="34530" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34532" class="Symbol">(</a><a id="34533" href="Demos.HSP.html#33236" class="Field">toâˆ¼from</a> <a id="34541" href="Demos.HSP.html#34209" class="Bound">ab</a> <a id="34544" class="Symbol">(</a><a id="34545" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34547" href="Demos.HSP.html#33205" class="Field">from</a> <a id="34552" href="Demos.HSP.html#34212" class="Bound">bc</a> <a id="34555" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34557" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="34561" href="Demos.HSP.html#34505" class="Bound">b</a><a id="34562" class="Symbol">)))</a> <a id="34566" class="Symbol">(</a><a id="34567" href="Demos.HSP.html#33236" class="Field">toâˆ¼from</a> <a id="34575" href="Demos.HSP.html#34212" class="Bound">bc</a> <a id="34578" href="Demos.HSP.html#34505" class="Bound">b</a><a id="34579" class="Symbol">)</a>

  <a id="34584" href="Demos.HSP.html#34584" class="Function">Î½</a> <a id="34586" class="Symbol">:</a> <a id="34588" class="Symbol">âˆ€</a> <a id="34590" href="Demos.HSP.html#34590" class="Bound">a</a> <a id="34592" class="Symbol">â†’</a> <a id="34594" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34596" href="Demos.HSP.html#34269" class="Function">g</a> <a id="34598" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34600" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="34604" class="Symbol">(</a><a id="34605" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34607" href="Demos.HSP.html#34239" class="Function">f</a> <a id="34609" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34611" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="34615" href="Demos.HSP.html#34590" class="Bound">a</a><a id="34616" class="Symbol">)</a> <a id="34618" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="34620" href="Demos.HSP.html#34590" class="Bound">a</a>
  <a id="34624" href="Demos.HSP.html#34584" class="Function">Î½</a> <a id="34626" href="Demos.HSP.html#34626" class="Bound">a</a> <a id="34628" class="Symbol">=</a> <a id="34630" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34636" class="Symbol">(</a><a id="34637" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="34642" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34644" href="Demos.HSP.html#33205" class="Field">from</a> <a id="34649" href="Demos.HSP.html#34209" class="Bound">ab</a> <a id="34652" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34654" class="Symbol">(</a><a id="34655" href="Demos.HSP.html#33305" class="Field">fromâˆ¼to</a> <a id="34663" href="Demos.HSP.html#34212" class="Bound">bc</a> <a id="34666" class="Symbol">(</a><a id="34667" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34669" href="Demos.HSP.html#33174" class="Field">to</a> <a id="34672" href="Demos.HSP.html#34209" class="Bound">ab</a> <a id="34675" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="34677" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="34681" href="Demos.HSP.html#34626" class="Bound">a</a><a id="34682" class="Symbol">)))</a> <a id="34686" class="Symbol">(</a><a id="34687" href="Demos.HSP.html#33305" class="Field">fromâˆ¼to</a> <a id="34695" href="Demos.HSP.html#34209" class="Bound">ab</a> <a id="34698" href="Demos.HSP.html#34626" class="Bound">a</a><a id="34699" class="Symbol">)</a>
</pre>

##### <a id="homomorphic-images">Homomorphic images</a>
 <!-- {#homomorphic-images .unnumbered} -->

We have found that a useful way to encode the concept of *homomorphic image* is to
produce a witness, that is, a surjective hom. Thus we define the type of
surjective homs and also record the fact that an algebra is its own homomorphic
image via the identity hom.

<pre class="Agda">

<a id="ov"></a><a id="35093" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="35096" class="Symbol">:</a> <a id="35098" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="35104" class="Symbol">â†’</a> <a id="35106" href="Agda.Primitive.html#597" class="Postulate">Level</a>         <a id="35120" class="Comment">-- shorthand for a common level transformation</a>
<a id="35167" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="35170" href="Demos.HSP.html#35170" class="Bound">Î±</a> <a id="35172" class="Symbol">=</a> <a id="35174" href="Demos.HSP.html#5652" class="Bound">ğ“</a> <a id="35176" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="35178" href="Demos.HSP.html#5654" class="Bound">ğ“¥</a> <a id="35180" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="35182" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="35186" href="Demos.HSP.html#35170" class="Bound">Î±</a>

<a id="_IsHomImageOf_"></a><a id="35189" href="Demos.HSP.html#35189" class="Function Operator">_IsHomImageOf_</a> <a id="35204" class="Symbol">:</a> <a id="35206" class="Symbol">(</a><a id="35207" href="Demos.HSP.html#35207" class="Bound">ğ‘©</a> <a id="35209" class="Symbol">:</a> <a id="35211" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="35219" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="35221" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="35223" class="Symbol">)(</a><a id="35225" href="Demos.HSP.html#35225" class="Bound">ğ‘¨</a> <a id="35227" class="Symbol">:</a> <a id="35229" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="35237" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="35239" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="35241" class="Symbol">)</a> <a id="35243" class="Symbol">â†’</a> <a id="35245" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="35250" class="Symbol">_</a>
<a id="35252" href="Demos.HSP.html#35252" class="Bound">ğ‘©</a> <a id="35254" href="Demos.HSP.html#35189" class="Function Operator">IsHomImageOf</a> <a id="35267" href="Demos.HSP.html#35267" class="Bound">ğ‘¨</a> <a id="35269" class="Symbol">=</a> <a id="35271" href="Data.Product.html#916" class="Function">Î£[</a> <a id="35274" href="Demos.HSP.html#35274" class="Bound">Ï†</a> <a id="35276" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="35278" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="35282" href="Demos.HSP.html#35267" class="Bound">ğ‘¨</a> <a id="35284" href="Demos.HSP.html#35252" class="Bound">ğ‘©</a> <a id="35286" href="Data.Product.html#916" class="Function">]</a> <a id="35288" href="Demos.HSP.html#12232" class="Function">IsSurjective</a> <a id="35301" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="35303" href="Demos.HSP.html#35274" class="Bound">Ï†</a> <a id="35305" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>

<a id="IdHomImage"></a><a id="35308" href="Demos.HSP.html#35308" class="Function">IdHomImage</a> <a id="35319" class="Symbol">:</a> <a id="35321" class="Symbol">{</a><a id="35322" href="Demos.HSP.html#35322" class="Bound">ğ‘¨</a> <a id="35324" class="Symbol">:</a> <a id="35326" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="35334" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="35336" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="35338" class="Symbol">}</a> <a id="35340" class="Symbol">â†’</a> <a id="35342" href="Demos.HSP.html#35322" class="Bound">ğ‘¨</a> <a id="35344" href="Demos.HSP.html#35189" class="Function Operator">IsHomImageOf</a> <a id="35357" href="Demos.HSP.html#35322" class="Bound">ğ‘¨</a>
<a id="35359" href="Demos.HSP.html#35308" class="Function">IdHomImage</a> <a id="35370" class="Symbol">{</a><a id="35371" class="Argument">Î±</a> <a id="35373" class="Symbol">=</a> <a id="35375" href="Demos.HSP.html#35375" class="Bound">Î±</a><a id="35376" class="Symbol">}{</a><a id="35378" class="Argument">ğ‘¨</a> <a id="35380" class="Symbol">=</a> <a id="35382" href="Demos.HSP.html#35382" class="Bound">ğ‘¨</a><a id="35383" class="Symbol">}</a> <a id="35385" class="Symbol">=</a> <a id="35387" href="Demos.HSP.html#29724" class="Function">ğ’¾ğ’¹</a> <a id="35390" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35392" class="Symbol">Î»</a> <a id="35394" class="Symbol">{</a><a id="35395" href="Demos.HSP.html#35395" class="Bound">y</a><a id="35396" class="Symbol">}</a> <a id="35398" class="Symbol">â†’</a> <a id="35400" href="Demos.HSP.html#10394" class="InductiveConstructor">Image_âˆ‹_.eq</a> <a id="35412" href="Demos.HSP.html#35395" class="Bound">y</a> <a id="35414" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="35420" class="Keyword">where</a> <a id="35426" class="Keyword">open</a> <a id="35431" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="35438" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="35441" href="Demos.HSP.html#35382" class="Bound">ğ‘¨</a> <a id="35443" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="35445" class="Keyword">using</a> <a id="35451" class="Symbol">(</a> <a id="35453" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="35458" class="Symbol">)</a>
</pre>


##### <a id="factorization-of-homomorphisms">Factorization of homomorphisms</a>
 <!-- {#factorization-of-homomorphisms .unnumbered} -->

Another theorem in the [agda-algebras][] library, called `HomFactor`, formalizes
the following factorization result: if `g : hom ğ‘¨ ğ‘©`, `h : hom ğ‘¨ ğ‘ª`, `h` is
surjective, and `ker h âŠ† ker g`, then there exists `Ï† : hom ğ‘ª ğ‘©` such that `g = Ï†
âˆ˜ h`. A special case of this result that we use below is the fact that the setoid
function factorization we saw above lifts to factorization of homomorphisms.
Moreover, we associate a homomorphism `h` with its image---which is (the domain
of) a subalgebra of the codomain of `h`---using the function `HomIm` defined
below.[^8]

<pre class="Agda">

<a id="36191" class="Keyword">module</a> <a id="36198" href="Demos.HSP.html#36198" class="Module">_</a> <a id="36200" class="Symbol">{</a><a id="36201" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a> <a id="36203" class="Symbol">:</a> <a id="36205" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="36213" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="36215" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="36217" class="Symbol">}{</a><a id="36219" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a> <a id="36221" class="Symbol">:</a> <a id="36223" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="36231" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="36233" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="36235" class="Symbol">}</a> <a id="36237" class="Keyword">where</a>

 <a id="36245" href="Demos.HSP.html#36245" class="Function">HomIm</a> <a id="36251" class="Symbol">:</a> <a id="36253" class="Symbol">(</a><a id="36254" href="Demos.HSP.html#36254" class="Bound">h</a> <a id="36256" class="Symbol">:</a> <a id="36258" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="36262" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a> <a id="36264" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a><a id="36265" class="Symbol">)</a> <a id="36267" class="Symbol">â†’</a> <a id="36269" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="36277" class="Symbol">_</a> <a id="36279" class="Symbol">_</a>
 <a id="36282" href="Demos.HSP.html#18579" class="Field">Domain</a> <a id="36289" class="Symbol">(</a><a id="36290" href="Demos.HSP.html#36245" class="Function">HomIm</a> <a id="36296" href="Demos.HSP.html#36296" class="Bound">h</a><a id="36297" class="Symbol">)</a> <a id="36299" class="Symbol">=</a> <a id="36301" href="Demos.HSP.html#13610" class="Function">Im</a> <a id="36304" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="36306" href="Demos.HSP.html#36296" class="Bound">h</a> <a id="36308" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>
 <a id="36311" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="36318" class="Symbol">(</a><a id="36319" href="Demos.HSP.html#36245" class="Function">HomIm</a> <a id="36325" href="Demos.HSP.html#36325" class="Bound">h</a><a id="36326" class="Symbol">)</a> <a id="36328" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="36332" class="Symbol">(</a><a id="36333" href="Demos.HSP.html#36333" class="Bound">f</a> <a id="36335" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36337" href="Demos.HSP.html#36337" class="Bound">la</a><a id="36339" class="Symbol">)</a> <a id="36341" class="Symbol">=</a> <a id="36343" class="Symbol">(</a><a id="36344" href="Demos.HSP.html#36333" class="Bound">f</a> <a id="36346" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="36348" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a><a id="36349" class="Symbol">)</a> <a id="36351" href="Demos.HSP.html#36337" class="Bound">la</a>
 <a id="36355" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36360" class="Symbol">(</a><a id="36361" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="36368" class="Symbol">(</a><a id="36369" href="Demos.HSP.html#36245" class="Function">HomIm</a> <a id="36375" href="Demos.HSP.html#36375" class="Bound">h</a><a id="36376" class="Symbol">))</a> <a id="36379" class="Symbol">{</a><a id="36380" href="Demos.HSP.html#36380" class="Bound">x1</a> <a id="36383" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36385" href="Demos.HSP.html#36385" class="Bound">x2</a><a id="36387" class="Symbol">}</a> <a id="36389" class="Symbol">{</a><a id="36390" class="DottedPattern Symbol">.</a><a id="36391" href="Demos.HSP.html#36380" class="DottedPattern Bound">x1</a> <a id="36394" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36396" href="Demos.HSP.html#36396" class="Bound">y2</a><a id="36398" class="Symbol">}</a> <a id="36400" class="Symbol">(</a><a id="36401" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="36408" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36410" href="Demos.HSP.html#36410" class="Bound">e</a><a id="36411" class="Symbol">)</a> <a id="36413" class="Symbol">=</a>
  <a id="36417" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
      <a id="36429" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="36431" href="Demos.HSP.html#36375" class="Bound">h</a> <a id="36433" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>  <a id="36436" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>         <a id="36448" class="Symbol">(</a><a id="36449" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="36456" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a>  <a id="36459" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="36463" class="Symbol">(</a><a id="36464" href="Demos.HSP.html#36380" class="Bound">x1</a> <a id="36467" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36469" href="Demos.HSP.html#36385" class="Bound">x2</a><a id="36471" class="Symbol">))</a>  <a id="36475" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="36478" href="Demos.HSP.html#36848" class="Function">h-compatible</a>                  <a id="36508" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="36513" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="36520" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a>  <a id="36523" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="36527" class="Symbol">(</a><a id="36528" href="Demos.HSP.html#36380" class="Bound">x1</a> <a id="36531" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36533" class="Symbol">Î»</a> <a id="36535" href="Demos.HSP.html#36535" class="Bound">x</a> <a id="36537" class="Symbol">â†’</a> <a id="36539" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="36541" href="Demos.HSP.html#36375" class="Bound">h</a> <a id="36543" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>  <a id="36546" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="36550" href="Demos.HSP.html#36385" class="Bound">x2</a> <a id="36553" href="Demos.HSP.html#36535" class="Bound">x</a><a id="36554" class="Symbol">)</a>       <a id="36562" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="36565" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36570" class="Symbol">(</a><a id="36571" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="36578" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a><a id="36579" class="Symbol">)</a> <a id="36581" class="Symbol">(</a><a id="36582" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="36589" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36591" href="Demos.HSP.html#36410" class="Bound">e</a><a id="36592" class="Symbol">)</a>  <a id="36595" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="36600" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="36607" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a>  <a id="36610" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="36614" class="Symbol">(</a><a id="36615" href="Demos.HSP.html#36380" class="Bound">x1</a> <a id="36618" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36620" class="Symbol">Î»</a> <a id="36622" href="Demos.HSP.html#36622" class="Bound">x</a> <a id="36624" class="Symbol">â†’</a> <a id="36626" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="36628" href="Demos.HSP.html#36375" class="Bound">h</a> <a id="36630" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>  <a id="36633" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="36637" href="Demos.HSP.html#36396" class="Bound">y2</a> <a id="36640" href="Demos.HSP.html#36622" class="Bound">x</a><a id="36641" class="Symbol">)</a>       <a id="36649" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a> <a id="36653" href="Demos.HSP.html#36848" class="Function">h-compatible</a>                 <a id="36682" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
      <a id="36690" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="36692" href="Demos.HSP.html#36375" class="Bound">h</a> <a id="36694" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>  <a id="36697" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>         <a id="36709" class="Symbol">(</a><a id="36710" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="36717" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a>  <a id="36720" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="36724" class="Symbol">(</a><a id="36725" href="Demos.HSP.html#36380" class="Bound">x1</a> <a id="36728" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36730" href="Demos.HSP.html#36396" class="Bound">y2</a><a id="36732" class="Symbol">))</a>  <a id="36736" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
   <a id="36741" class="Keyword">where</a>  <a id="36748" class="Keyword">open</a> <a id="36753" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36760" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="36763" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a> <a id="36765" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="36767" class="Symbol">;</a> <a id="36769" class="Keyword">open</a> <a id="36774" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="36790" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="36793" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a> <a id="36795" href="Demos.HSP.html#19168" class="Function Operator">]</a>
          <a id="36807" class="Keyword">open</a> <a id="36812" href="Demos.HSP.html#26555" class="Module">IsHom</a> <a id="36818" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="36820" href="Demos.HSP.html#36375" class="Bound">h</a> <a id="36822" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="36824" class="Keyword">renaming</a> <a id="36833" class="Symbol">(</a><a id="36834" href="Demos.HSP.html#26649" class="Field">compatible</a> <a id="36845" class="Symbol">to</a> <a id="36848" class="Field">h-compatible</a><a id="36860" class="Symbol">)</a>

 <a id="36864" href="Demos.HSP.html#36864" class="Function">toHomIm</a> <a id="36872" class="Symbol">:</a> <a id="36874" class="Symbol">(</a><a id="36875" href="Demos.HSP.html#36875" class="Bound">h</a> <a id="36877" class="Symbol">:</a> <a id="36879" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="36883" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a> <a id="36885" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a><a id="36886" class="Symbol">)</a> <a id="36888" class="Symbol">â†’</a> <a id="36890" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="36894" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a> <a id="36896" class="Symbol">(</a><a id="36897" href="Demos.HSP.html#36245" class="Function">HomIm</a> <a id="36903" href="Demos.HSP.html#36875" class="Bound">h</a><a id="36904" class="Symbol">)</a>
 <a id="36907" href="Demos.HSP.html#36864" class="Function">toHomIm</a> <a id="36915" href="Demos.HSP.html#36915" class="Bound">h</a> <a id="36917" class="Symbol">=</a> <a id="36919" href="Demos.HSP.html#13828" class="Function">toIm</a> <a id="36924" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="36926" href="Demos.HSP.html#36915" class="Bound">h</a> <a id="36928" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="36930" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36932" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="36938" class="Symbol">(</a><a id="36939" href="Demos.HSP.html#6861" class="Function">reflË¢</a> <a id="36945" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="36948" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a> <a id="36950" href="Demos.HSP.html#19168" class="Function Operator">]</a><a id="36951" class="Symbol">)</a>

 <a id="36955" href="Demos.HSP.html#36955" class="Function">fromHomIm</a> <a id="36965" class="Symbol">:</a> <a id="36967" class="Symbol">(</a><a id="36968" href="Demos.HSP.html#36968" class="Bound">h</a> <a id="36970" class="Symbol">:</a> <a id="36972" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="36976" href="Demos.HSP.html#36201" class="Bound">ğ‘¨</a> <a id="36978" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a><a id="36979" class="Symbol">)</a> <a id="36981" class="Symbol">â†’</a> <a id="36983" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="36987" class="Symbol">(</a><a id="36988" href="Demos.HSP.html#36245" class="Function">HomIm</a> <a id="36994" href="Demos.HSP.html#36968" class="Bound">h</a><a id="36995" class="Symbol">)</a> <a id="36997" href="Demos.HSP.html#36219" class="Bound">ğ‘©</a>
 <a id="37000" href="Demos.HSP.html#36955" class="Function">fromHomIm</a> <a id="37010" href="Demos.HSP.html#37010" class="Bound">h</a> <a id="37012" class="Symbol">=</a> <a id="37014" href="Demos.HSP.html#13904" class="Function">fromIm</a> <a id="37021" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="37023" href="Demos.HSP.html#37010" class="Bound">h</a> <a id="37025" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="37027" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="37029" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="37035" class="Symbol">(</a><a id="37036" href="Demos.HSP.html#26649" class="Field">IsHom.compatible</a> <a id="37053" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="37055" href="Demos.HSP.html#37010" class="Bound">h</a> <a id="37057" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a><a id="37058" class="Symbol">)</a>
</pre>


##### <a id="sec:lift-al">Lift-Alg is an algebraic invariant</a>
 <!-- {#sec:lift-alg} -->

The `Lift-Alg` operation neatly resolves the technical problem of universe
non-cumulativity because isomorphism classes of algebras are closed under
`Lift-Alg`. 

<pre class="Agda">

<a id="37342" class="Keyword">module</a> <a id="37349" href="Demos.HSP.html#37349" class="Module">_</a> <a id="37351" class="Symbol">{</a><a id="37352" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a> <a id="37354" class="Symbol">:</a> <a id="37356" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="37364" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="37366" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="37368" class="Symbol">}{</a><a id="37370" href="Demos.HSP.html#37370" class="Bound">â„“</a> <a id="37372" class="Symbol">:</a> <a id="37374" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37379" class="Symbol">}</a> <a id="37381" class="Keyword">where</a>
 <a id="37388" href="Demos.HSP.html#37388" class="Function">Lift-â‰…Ë¡</a> <a id="37396" class="Symbol">:</a> <a id="37398" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a> <a id="37400" href="Demos.HSP.html#33094" class="Record Operator">â‰…</a> <a id="37402" class="Symbol">(</a><a id="37403" href="Demos.HSP.html#21444" class="Function">Lift-AlgË¡</a> <a id="37413" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a> <a id="37415" href="Demos.HSP.html#37370" class="Bound">â„“</a><a id="37416" class="Symbol">)</a>
 <a id="37419" href="Demos.HSP.html#37388" class="Function">Lift-â‰…Ë¡</a> <a id="37427" class="Symbol">=</a> <a id="37429" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a> <a id="37435" href="Demos.HSP.html#30172" class="Function">ToLiftË¡</a> <a id="37443" href="Demos.HSP.html#30276" class="Function">FromLiftË¡</a> <a id="37453" class="Symbol">(</a><a id="37454" href="Demos.HSP.html#30372" class="Function">ToFromLiftË¡</a><a id="37465" class="Symbol">{</a><a id="37466" class="Argument">ğ‘¨</a> <a id="37468" class="Symbol">=</a> <a id="37470" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a><a id="37471" class="Symbol">})</a> <a id="37474" class="Symbol">(</a><a id="37475" href="Demos.HSP.html#30461" class="Function">FromToLiftË¡</a><a id="37486" class="Symbol">{</a><a id="37487" class="Argument">ğ‘¨</a> <a id="37489" class="Symbol">=</a> <a id="37491" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a><a id="37492" class="Symbol">}{</a><a id="37494" href="Demos.HSP.html#37370" class="Bound">â„“</a><a id="37495" class="Symbol">})</a>
 <a id="37499" href="Demos.HSP.html#37499" class="Function">Lift-â‰…Ê³</a> <a id="37507" class="Symbol">:</a> <a id="37509" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a> <a id="37511" href="Demos.HSP.html#33094" class="Record Operator">â‰…</a> <a id="37513" class="Symbol">(</a><a id="37514" href="Demos.HSP.html#21849" class="Function">Lift-AlgÊ³</a> <a id="37524" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a> <a id="37526" href="Demos.HSP.html#37370" class="Bound">â„“</a><a id="37527" class="Symbol">)</a>
 <a id="37530" href="Demos.HSP.html#37499" class="Function">Lift-â‰…Ê³</a> <a id="37538" class="Symbol">=</a> <a id="37540" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a> <a id="37546" href="Demos.HSP.html#30549" class="Function">ToLiftÊ³</a> <a id="37554" href="Demos.HSP.html#30660" class="Function">FromLiftÊ³</a> <a id="37564" class="Symbol">(</a><a id="37565" href="Demos.HSP.html#30756" class="Function">ToFromLiftÊ³</a><a id="37576" class="Symbol">{</a><a id="37577" class="Argument">ğ‘¨</a> <a id="37579" class="Symbol">=</a> <a id="37581" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a><a id="37582" class="Symbol">})</a> <a id="37585" class="Symbol">(</a><a id="37586" href="Demos.HSP.html#30849" class="Function">FromToLiftÊ³</a><a id="37597" class="Symbol">{</a><a id="37598" class="Argument">ğ‘¨</a> <a id="37600" class="Symbol">=</a> <a id="37602" href="Demos.HSP.html#37352" class="Bound">ğ‘¨</a><a id="37603" class="Symbol">}{</a><a id="37605" href="Demos.HSP.html#37370" class="Bound">â„“</a><a id="37606" class="Symbol">})</a>

<a id="Lift-â‰…"></a><a id="37610" href="Demos.HSP.html#37610" class="Function">Lift-â‰…</a> <a id="37617" class="Symbol">:</a> <a id="37619" class="Symbol">{</a><a id="37620" href="Demos.HSP.html#37620" class="Bound">ğ‘¨</a> <a id="37622" class="Symbol">:</a> <a id="37624" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="37632" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="37634" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="37636" class="Symbol">}{</a><a id="37638" href="Demos.HSP.html#37638" class="Bound">â„“</a> <a id="37640" href="Demos.HSP.html#37640" class="Bound">Ï</a> <a id="37642" class="Symbol">:</a> <a id="37644" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37649" class="Symbol">}</a> <a id="37651" class="Symbol">â†’</a> <a id="37653" href="Demos.HSP.html#37620" class="Bound">ğ‘¨</a> <a id="37655" href="Demos.HSP.html#33094" class="Record Operator">â‰…</a> <a id="37657" class="Symbol">(</a><a id="37658" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="37667" href="Demos.HSP.html#37620" class="Bound">ğ‘¨</a> <a id="37669" href="Demos.HSP.html#37638" class="Bound">â„“</a> <a id="37671" href="Demos.HSP.html#37640" class="Bound">Ï</a><a id="37672" class="Symbol">)</a>
<a id="37674" href="Demos.HSP.html#37610" class="Function">Lift-â‰…</a> <a id="37681" class="Symbol">=</a> <a id="37683" href="Demos.HSP.html#34119" class="Function">â‰…-trans</a> <a id="37691" href="Demos.HSP.html#37388" class="Function">Lift-â‰…Ë¡</a> <a id="37699" href="Demos.HSP.html#37499" class="Function">Lift-â‰…Ê³</a>
</pre>

#### <a id="subalgebras">Subalgebras</a>

We say that `ğ‘¨` is a *subalgebra* of `ğ‘©` and write `ğ‘¨ â‰¤ ğ‘©` just in case `ğ‘¨` can be *homomorphically
embedded* in `ğ‘©`; in other terms, `ğ‘¨ â‰¤ ğ‘©` iff there exists an injective hom from `ğ‘¨` to `ğ‘©`.

<pre class="Agda">

<a id="_â‰¤_"></a><a id="37969" href="Demos.HSP.html#37969" class="Function Operator">_â‰¤_</a> <a id="37973" class="Symbol">:</a> <a id="37975" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="37983" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="37985" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="37988" class="Symbol">â†’</a> <a id="37990" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="37998" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="38000" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a> <a id="38003" class="Symbol">â†’</a> <a id="38005" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="38010" class="Symbol">_</a>
<a id="38012" href="Demos.HSP.html#38012" class="Bound">ğ‘¨</a> <a id="38014" href="Demos.HSP.html#37969" class="Function Operator">â‰¤</a> <a id="38016" href="Demos.HSP.html#38016" class="Bound">ğ‘©</a> <a id="38018" class="Symbol">=</a> <a id="38020" href="Data.Product.html#916" class="Function">Î£[</a> <a id="38023" href="Demos.HSP.html#38023" class="Bound">h</a> <a id="38025" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="38027" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="38031" href="Demos.HSP.html#38012" class="Bound">ğ‘¨</a> <a id="38033" href="Demos.HSP.html#38016" class="Bound">ğ‘©</a> <a id="38035" href="Data.Product.html#916" class="Function">]</a> <a id="38037" href="Demos.HSP.html#12149" class="Function">IsInjective</a> <a id="38049" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="38051" href="Demos.HSP.html#38023" class="Bound">h</a> <a id="38053" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>

</pre>
The subalgebra relation is reflexive, by the identity monomorphism (and transitive by composition of monomorphisms, hence, a *preorder*, though we won't need this fact here).

<pre class="Agda">

<a id="â‰¤-reflexive"></a><a id="38257" href="Demos.HSP.html#38257" class="Function">â‰¤-reflexive</a>   <a id="38271" class="Symbol">:</a>  <a id="38274" class="Symbol">{</a><a id="38275" href="Demos.HSP.html#38275" class="Bound">ğ‘¨</a> <a id="38277" class="Symbol">:</a> <a id="38279" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="38287" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="38289" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="38291" class="Symbol">}</a> <a id="38293" class="Symbol">â†’</a> <a id="38295" href="Demos.HSP.html#38275" class="Bound">ğ‘¨</a> <a id="38297" href="Demos.HSP.html#37969" class="Function Operator">â‰¤</a> <a id="38299" href="Demos.HSP.html#38275" class="Bound">ğ‘¨</a>
<a id="38301" href="Demos.HSP.html#38257" class="Function">â‰¤-reflexive</a> <a id="38313" class="Symbol">=</a> <a id="38315" href="Demos.HSP.html#29724" class="Function">ğ’¾ğ’¹</a> <a id="38318" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="38320" href="Function.Base.html#615" class="Function">id</a>

</pre>

<!-- If `ğ’œ : I â†’ Algebra Î± Ïáµƒ`, `â„¬ : I â†’ Algebra Î² Ïáµ‡` (families of -algebras) and if `â„¬ i â‰¤ ğ’œ i` for all `i : I`, then `â¨… â„¬` is a subalgebra of `â¨… ğ’œ`. Below we will use to denote this fact. -->

We conclude this section with an easy fact that will be useful later; it simply converts a monomorphism into a proof of a subalgebra relationship.

<pre class="Agda">

<a id="monâ†’â‰¤"></a><a id="38694" href="Demos.HSP.html#38694" class="Function">monâ†’â‰¤</a> <a id="38700" class="Symbol">:</a> <a id="38702" class="Symbol">{</a><a id="38703" href="Demos.HSP.html#38703" class="Bound">ğ‘¨</a> <a id="38705" class="Symbol">:</a> <a id="38707" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="38715" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="38717" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="38719" class="Symbol">}{</a><a id="38721" href="Demos.HSP.html#38721" class="Bound">ğ‘©</a> <a id="38723" class="Symbol">:</a> <a id="38725" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="38733" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="38735" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="38737" class="Symbol">}</a> <a id="38739" class="Symbol">â†’</a> <a id="38741" href="Demos.HSP.html#27309" class="Function">mon</a> <a id="38745" href="Demos.HSP.html#38703" class="Bound">ğ‘¨</a> <a id="38747" href="Demos.HSP.html#38721" class="Bound">ğ‘©</a> <a id="38749" class="Symbol">â†’</a> <a id="38751" href="Demos.HSP.html#38703" class="Bound">ğ‘¨</a> <a id="38753" href="Demos.HSP.html#37969" class="Function Operator">â‰¤</a> <a id="38755" href="Demos.HSP.html#38721" class="Bound">ğ‘©</a>
<a id="38757" href="Demos.HSP.html#38694" class="Function">monâ†’â‰¤</a> <a id="38763" class="Symbol">{</a><a id="38764" class="Argument">ğ‘¨</a> <a id="38766" class="Symbol">=</a> <a id="38768" href="Demos.HSP.html#38768" class="Bound">ğ‘¨</a><a id="38769" class="Symbol">}{</a><a id="38771" href="Demos.HSP.html#38771" class="Bound">ğ‘©</a><a id="38772" class="Symbol">}</a> <a id="38774" href="Demos.HSP.html#38774" class="Bound">x</a> <a id="38776" class="Symbol">=</a> <a id="38778" href="Demos.HSP.html#27970" class="Function">monâ†’intohom</a> <a id="38790" href="Demos.HSP.html#38768" class="Bound">ğ‘¨</a> <a id="38792" href="Demos.HSP.html#38771" class="Bound">ğ‘©</a> <a id="38794" href="Demos.HSP.html#38774" class="Bound">x</a>
</pre>

#### <a id="terms">Terms</a>

Fix a signature `ğ‘†` and let `X` denote an arbitrary nonempty collection of variable symbols. Such a collection is called a *context*. Assume the symbols in `X` are distinct from the operation symbols of `ğ‘†`, that is `X âˆ© âˆ£ ğ‘† âˆ£ = âˆ…`. A *word* in the language of `ğ‘†` is a finite sequence of members of `X âˆª âˆ£ ğ‘† âˆ£`. We denote the
concatenation of such sequences by simple juxtaposition. Let `Sâ‚€` denote the set of nullary operation symbols of `ğ‘†`. We define by induction on `n` the sets `Tâ‚™` of *words* over `X âˆª âˆ£ ğ‘† âˆ£` as follows: `Tâ‚€ := X âˆª Sâ‚€` and 
`Tâ‚™â‚Šâ‚ := Tâ‚™ âˆª ğ’¯â‚™`, where `ğ’¯â‚™` is the collection of all `f t` such that `f : âˆ£ ğ‘† âˆ£` and `t : âˆ¥ ğ‘† âˆ¥ f â†’ ğ‘‡â‚™`.
(Recall, `âˆ¥ ğ‘† âˆ¥ f` is the arity of the operation symbol `f`.)
An `ğ‘†`-*term* is a term in the language of `ğ‘†` and the collection of all `ğ‘†`-terms in the context `X` is `Term X := â‹ƒâ‚™ Tâ‚™`.

In type theory, this translates to two cases: variable injection and applying an operation symbol to a tuple of terms. This represents each term as a tree with an operation symbol at each `node` and a variable symbol at
each leaf `â„Š`; hence the constructor names (`â„Š` for "generator" and `node` for "node") in the following inductively defined type.

<pre class="Agda">

<a id="40046" class="Keyword">data</a> <a id="Term"></a><a id="40051" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="40056" class="Symbol">(</a><a id="40057" href="Demos.HSP.html#40057" class="Bound">X</a> <a id="40059" class="Symbol">:</a> <a id="40061" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="40066" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="40067" class="Symbol">)</a> <a id="40069" class="Symbol">:</a> <a id="40071" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="40076" class="Symbol">(</a><a id="40077" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="40080" href="Demos.HSP.html#40066" class="Bound">Ï‡</a><a id="40081" class="Symbol">)</a>  <a id="40084" class="Keyword">where</a>
 <a id="Term.â„Š"></a><a id="40091" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="40093" class="Symbol">:</a> <a id="40095" href="Demos.HSP.html#40057" class="Bound">X</a> <a id="40097" class="Symbol">â†’</a> <a id="40099" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="40104" href="Demos.HSP.html#40057" class="Bound">X</a>
 <a id="Term.node"></a><a id="40107" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="40112" class="Symbol">:</a> <a id="40114" class="Symbol">(</a><a id="40115" href="Demos.HSP.html#40115" class="Bound">f</a> <a id="40117" class="Symbol">:</a> <a id="40119" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="40121" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="40123" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a><a id="40124" class="Symbol">)(</a><a id="40126" href="Demos.HSP.html#40126" class="Bound">t</a> <a id="40128" class="Symbol">:</a> <a id="40130" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="40132" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="40134" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="40136" href="Demos.HSP.html#40115" class="Bound">f</a> <a id="40138" class="Symbol">â†’</a> <a id="40140" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="40145" href="Demos.HSP.html#40057" class="Bound">X</a><a id="40146" class="Symbol">)</a> <a id="40148" class="Symbol">â†’</a> <a id="40150" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="40155" href="Demos.HSP.html#40057" class="Bound">X</a>
</pre>

##### <a id="the-term-algebra">The term algebra</a>
 <!-- {#the-term-algebra .unnumbered} -->

We enrich the `Term` type to a setoid of `ğ‘†`-terms, which will ultimately be the domain of an algebra, called the *term algebra in the signature* `ğ‘†`. For this we need an equivalence relation on terms.

<pre class="Agda">

<a id="40481" class="Keyword">module</a> <a id="40488" href="Demos.HSP.html#40488" class="Module">_</a> <a id="40490" class="Symbol">{</a><a id="40491" href="Demos.HSP.html#40491" class="Bound">X</a> <a id="40493" class="Symbol">:</a> <a id="40495" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="40500" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a> <a id="40502" class="Symbol">}</a> <a id="40504" class="Keyword">where</a>

 <a id="40512" class="Keyword">data</a> <a id="40517" href="Demos.HSP.html#40517" class="Datatype Operator">_â‰ƒ_</a> <a id="40521" class="Symbol">:</a> <a id="40523" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="40528" href="Demos.HSP.html#40491" class="Bound">X</a> <a id="40530" class="Symbol">â†’</a> <a id="40532" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="40537" href="Demos.HSP.html#40491" class="Bound">X</a> <a id="40539" class="Symbol">â†’</a> <a id="40541" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="40546" class="Symbol">(</a><a id="40547" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="40550" href="Demos.HSP.html#40500" class="Bound">Ï‡</a><a id="40551" class="Symbol">)</a> <a id="40553" class="Keyword">where</a>
  <a id="40561" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="40565" class="Symbol">:</a> <a id="40567" class="Symbol">{</a><a id="40568" href="Demos.HSP.html#40568" class="Bound">x</a> <a id="40570" href="Demos.HSP.html#40570" class="Bound">y</a> <a id="40572" class="Symbol">:</a> <a id="40574" href="Demos.HSP.html#40491" class="Bound">X</a><a id="40575" class="Symbol">}</a> <a id="40577" class="Symbol">â†’</a> <a id="40579" href="Demos.HSP.html#40568" class="Bound">x</a> <a id="40581" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">â‰¡</a> <a id="40583" href="Demos.HSP.html#40570" class="Bound">y</a> <a id="40585" class="Symbol">â†’</a> <a id="40587" class="Symbol">(</a><a id="40588" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="40590" href="Demos.HSP.html#40568" class="Bound">x</a><a id="40591" class="Symbol">)</a> <a id="40593" href="Demos.HSP.html#40517" class="Datatype Operator">â‰ƒ</a> <a id="40595" class="Symbol">(</a><a id="40596" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="40598" href="Demos.HSP.html#40570" class="Bound">y</a><a id="40599" class="Symbol">)</a>
  <a id="40603" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="40607" class="Symbol">:</a> <a id="40609" class="Symbol">âˆ€</a> <a id="40611" class="Symbol">{</a><a id="40612" href="Demos.HSP.html#40612" class="Bound">f</a><a id="40613" class="Symbol">}{</a><a id="40615" href="Demos.HSP.html#40615" class="Bound">s</a> <a id="40617" href="Demos.HSP.html#40617" class="Bound">t</a> <a id="40619" class="Symbol">:</a> <a id="40621" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="40623" href="Demos.HSP.html#5638" class="Bound">ğ‘†</a> <a id="40625" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="40627" href="Demos.HSP.html#40612" class="Bound">f</a> <a id="40629" class="Symbol">â†’</a> <a id="40631" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="40636" href="Demos.HSP.html#40491" class="Bound">X</a><a id="40637" class="Symbol">}</a> <a id="40639" class="Symbol">â†’</a> <a id="40641" class="Symbol">(âˆ€</a> <a id="40644" href="Demos.HSP.html#40644" class="Bound">i</a> <a id="40646" class="Symbol">â†’</a> <a id="40648" class="Symbol">(</a><a id="40649" href="Demos.HSP.html#40615" class="Bound">s</a> <a id="40651" href="Demos.HSP.html#40644" class="Bound">i</a><a id="40652" class="Symbol">)</a> <a id="40654" href="Demos.HSP.html#40517" class="Datatype Operator">â‰ƒ</a> <a id="40656" class="Symbol">(</a><a id="40657" href="Demos.HSP.html#40617" class="Bound">t</a> <a id="40659" href="Demos.HSP.html#40644" class="Bound">i</a><a id="40660" class="Symbol">))</a> <a id="40663" class="Symbol">â†’</a> <a id="40665" class="Symbol">(</a><a id="40666" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="40671" href="Demos.HSP.html#40612" class="Bound">f</a> <a id="40673" href="Demos.HSP.html#40615" class="Bound">s</a><a id="40674" class="Symbol">)</a> <a id="40676" href="Demos.HSP.html#40517" class="Datatype Operator">â‰ƒ</a> <a id="40678" class="Symbol">(</a><a id="40679" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="40684" href="Demos.HSP.html#40612" class="Bound">f</a> <a id="40686" href="Demos.HSP.html#40617" class="Bound">t</a><a id="40687" class="Symbol">)</a>

</pre>

It is easy to show that `_â‰ƒ_` is an equivalence relation as follows.

<pre class="Agda">

 <a id="40787" href="Demos.HSP.html#40787" class="Function">â‰ƒ-isRefl</a>   <a id="40798" class="Symbol">:</a> <a id="40800" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a>      <a id="40815" href="Demos.HSP.html#40517" class="Datatype Operator">_â‰ƒ_</a>
 <a id="40820" href="Demos.HSP.html#40787" class="Function">â‰ƒ-isRefl</a> <a id="40829" class="Symbol">{</a><a id="40830" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="40832" class="Symbol">_}</a> <a id="40835" class="Symbol">=</a> <a id="40837" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="40841" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a>
 <a id="40849" href="Demos.HSP.html#40787" class="Function">â‰ƒ-isRefl</a> <a id="40858" class="Symbol">{</a><a id="40859" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="40864" class="Symbol">_</a> <a id="40866" class="Symbol">_}</a> <a id="40869" class="Symbol">=</a> <a id="40871" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="40875" class="Symbol">Î»</a> <a id="40877" href="Demos.HSP.html#40877" class="Bound">_</a> <a id="40879" class="Symbol">â†’</a> <a id="40881" href="Demos.HSP.html#40787" class="Function">â‰ƒ-isRefl</a>

 <a id="40892" href="Demos.HSP.html#40892" class="Function">â‰ƒ-isSym</a>    <a id="40903" class="Symbol">:</a> <a id="40905" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a>      <a id="40920" href="Demos.HSP.html#40517" class="Datatype Operator">_â‰ƒ_</a>
 <a id="40925" href="Demos.HSP.html#40892" class="Function">â‰ƒ-isSym</a> <a id="40933" class="Symbol">(</a><a id="40934" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="40938" href="Demos.HSP.html#40938" class="Bound">x</a><a id="40939" class="Symbol">)</a> <a id="40941" class="Symbol">=</a> <a id="40943" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="40947" class="Symbol">(</a><a id="40948" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">â‰¡.sym</a> <a id="40954" href="Demos.HSP.html#40938" class="Bound">x</a><a id="40955" class="Symbol">)</a>
 <a id="40958" href="Demos.HSP.html#40892" class="Function">â‰ƒ-isSym</a> <a id="40966" class="Symbol">(</a><a id="40967" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="40971" href="Demos.HSP.html#40971" class="Bound">x</a><a id="40972" class="Symbol">)</a> <a id="40974" class="Symbol">=</a> <a id="40976" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="40980" class="Symbol">Î»</a> <a id="40982" href="Demos.HSP.html#40982" class="Bound">i</a> <a id="40984" class="Symbol">â†’</a> <a id="40986" href="Demos.HSP.html#40892" class="Function">â‰ƒ-isSym</a> <a id="40994" class="Symbol">(</a><a id="40995" href="Demos.HSP.html#40971" class="Bound">x</a> <a id="40997" href="Demos.HSP.html#40982" class="Bound">i</a><a id="40998" class="Symbol">)</a>

 <a id="41002" href="Demos.HSP.html#41002" class="Function">â‰ƒ-isTrans</a>  <a id="41013" class="Symbol">:</a> <a id="41015" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a>     <a id="41030" href="Demos.HSP.html#40517" class="Datatype Operator">_â‰ƒ_</a>
 <a id="41035" href="Demos.HSP.html#41002" class="Function">â‰ƒ-isTrans</a> <a id="41045" class="Symbol">(</a><a id="41046" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="41050" href="Demos.HSP.html#41050" class="Bound">x</a><a id="41051" class="Symbol">)</a> <a id="41053" class="Symbol">(</a><a id="41054" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="41058" href="Demos.HSP.html#41058" class="Bound">y</a><a id="41059" class="Symbol">)</a> <a id="41061" class="Symbol">=</a> <a id="41063" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="41067" class="Symbol">(</a><a id="41068" href="Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">â‰¡.trans</a> <a id="41076" href="Demos.HSP.html#41050" class="Bound">x</a> <a id="41078" href="Demos.HSP.html#41058" class="Bound">y</a><a id="41079" class="Symbol">)</a>
 <a id="41082" href="Demos.HSP.html#41002" class="Function">â‰ƒ-isTrans</a> <a id="41092" class="Symbol">(</a><a id="41093" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="41097" href="Demos.HSP.html#41097" class="Bound">x</a><a id="41098" class="Symbol">)</a> <a id="41100" class="Symbol">(</a><a id="41101" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="41105" href="Demos.HSP.html#41105" class="Bound">y</a><a id="41106" class="Symbol">)</a> <a id="41108" class="Symbol">=</a> <a id="41110" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="41114" class="Symbol">Î»</a> <a id="41116" href="Demos.HSP.html#41116" class="Bound">i</a> <a id="41118" class="Symbol">â†’</a> <a id="41120" href="Demos.HSP.html#41002" class="Function">â‰ƒ-isTrans</a> <a id="41130" class="Symbol">(</a><a id="41131" href="Demos.HSP.html#41097" class="Bound">x</a> <a id="41133" href="Demos.HSP.html#41116" class="Bound">i</a><a id="41134" class="Symbol">)</a> <a id="41136" class="Symbol">(</a><a id="41137" href="Demos.HSP.html#41105" class="Bound">y</a> <a id="41139" href="Demos.HSP.html#41116" class="Bound">i</a><a id="41140" class="Symbol">)</a>

 <a id="41144" href="Demos.HSP.html#41144" class="Function">â‰ƒ-isEquiv</a>  <a id="41155" class="Symbol">:</a> <a id="41157" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>  <a id="41172" href="Demos.HSP.html#40517" class="Datatype Operator">_â‰ƒ_</a>
 <a id="41177" href="Demos.HSP.html#41144" class="Function">â‰ƒ-isEquiv</a> <a id="41187" class="Symbol">=</a> <a id="41189" class="Keyword">record</a> <a id="41196" class="Symbol">{</a> <a id="41198" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="41203" class="Symbol">=</a> <a id="41205" href="Demos.HSP.html#40787" class="Function">â‰ƒ-isRefl</a> <a id="41214" class="Symbol">;</a> <a id="41216" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="41220" class="Symbol">=</a> <a id="41222" href="Demos.HSP.html#40892" class="Function">â‰ƒ-isSym</a> <a id="41230" class="Symbol">;</a> <a id="41232" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="41238" class="Symbol">=</a> <a id="41240" href="Demos.HSP.html#41002" class="Function">â‰ƒ-isTrans</a> <a id="41250" class="Symbol">}</a>
</pre>

For a given signature `ğ‘†` and context `X`, we define the algebra `ğ‘» X`, known as the *term algebra in* 
`ğ‘†` *over* `X`. The domain of `ğ‘» X` is `Term X` and, for each operation symbol `f : âˆ£ ğ‘† âˆ£`, we define 
`f Ì‚ ğ‘» X` to be the operation which maps each tuple `t : âˆ¥ ğ‘† âˆ¥ f â†’ Term X` of terms to the formal
term `f t`.

<pre class="Agda">

<a id="TermSetoid"></a><a id="41596" href="Demos.HSP.html#41596" class="Function">TermSetoid</a> <a id="41607" class="Symbol">:</a> <a id="41609" class="Symbol">(</a><a id="41610" href="Demos.HSP.html#41610" class="Bound">X</a> <a id="41612" class="Symbol">:</a> <a id="41614" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="41619" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="41620" class="Symbol">)</a> <a id="41622" class="Symbol">â†’</a> <a id="41624" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="41631" class="Symbol">_</a> <a id="41633" class="Symbol">_</a>
<a id="41635" href="Demos.HSP.html#41596" class="Function">TermSetoid</a> <a id="41646" href="Demos.HSP.html#41646" class="Bound">X</a> <a id="41648" class="Symbol">=</a> <a id="41650" class="Keyword">record</a> <a id="41657" class="Symbol">{</a> <a id="41659" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="41667" class="Symbol">=</a> <a id="41669" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="41674" href="Demos.HSP.html#41646" class="Bound">X</a> <a id="41676" class="Symbol">;</a> <a id="41678" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="41682" class="Symbol">=</a> <a id="41684" href="Demos.HSP.html#40517" class="Datatype Operator">_â‰ƒ_</a> <a id="41688" class="Symbol">;</a> <a id="41690" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="41704" class="Symbol">=</a> <a id="41706" href="Demos.HSP.html#41144" class="Function">â‰ƒ-isEquiv</a> <a id="41716" class="Symbol">}</a>

<a id="ğ‘»"></a><a id="41719" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="41721" class="Symbol">:</a> <a id="41723" class="Symbol">(</a><a id="41724" href="Demos.HSP.html#41724" class="Bound">X</a> <a id="41726" class="Symbol">:</a> <a id="41728" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="41733" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="41734" class="Symbol">)</a> <a id="41736" class="Symbol">â†’</a> <a id="41738" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="41746" class="Symbol">(</a><a id="41747" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="41750" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="41751" class="Symbol">)</a> <a id="41753" class="Symbol">(</a><a id="41754" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="41757" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="41758" class="Symbol">)</a>
<a id="41760" href="Demos.HSP.html#18579" class="Field">Algebra.Domain</a> <a id="41775" class="Symbol">(</a><a id="41776" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="41778" href="Demos.HSP.html#41778" class="Bound">X</a><a id="41779" class="Symbol">)</a> <a id="41781" class="Symbol">=</a> <a id="41783" href="Demos.HSP.html#41596" class="Function">TermSetoid</a> <a id="41794" href="Demos.HSP.html#41778" class="Bound">X</a>
<a id="41796" href="Demos.HSP.html#18608" class="Field">Algebra.Interp</a> <a id="41811" class="Symbol">(</a><a id="41812" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="41814" href="Demos.HSP.html#41814" class="Bound">X</a><a id="41815" class="Symbol">)</a> <a id="41817" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="41821" class="Symbol">(</a><a id="41822" href="Demos.HSP.html#41822" class="Bound">f</a> <a id="41824" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="41826" href="Demos.HSP.html#41826" class="Bound">ts</a><a id="41828" class="Symbol">)</a> <a id="41830" class="Symbol">=</a> <a id="41832" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="41837" href="Demos.HSP.html#41822" class="Bound">f</a> <a id="41839" href="Demos.HSP.html#41826" class="Bound">ts</a>
<a id="41842" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="41847" class="Symbol">(</a><a id="41848" href="Demos.HSP.html#18608" class="Field">Algebra.Interp</a> <a id="41863" class="Symbol">(</a><a id="41864" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="41866" href="Demos.HSP.html#41866" class="Bound">X</a><a id="41867" class="Symbol">))</a> <a id="41870" class="Symbol">(</a><a id="41871" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="41878" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="41880" href="Demos.HSP.html#41880" class="Bound">ssâ‰ƒts</a><a id="41885" class="Symbol">)</a> <a id="41887" class="Symbol">=</a> <a id="41889" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="41893" href="Demos.HSP.html#41880" class="Bound">ssâ‰ƒts</a>
</pre>

##### <a id="environments-and-interpretation-of-terms">Environments and interpretation of terms</a>
 <!-- {#environments-and-interpretation-of-terms .unnumbered} -->

Fix a signature `ğ‘†` and a context `X`. An *environment* for `ğ‘¨` and `X` is a setoid whose carrier
is a mapping from the variable symbols `X` to the domain `ğ•Œ[ ğ´ ]` and whose equivalence relation is 
point-wise equality. Our formalization of this concept is the same as that ofÂ [@Abel:2021], which 
Abel uses to formalize Birkhoff's completeness theorem.

<pre class="Agda">

<a id="42447" class="Keyword">module</a> <a id="Environment"></a><a id="42454" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="42466" class="Symbol">(</a><a id="42467" href="Demos.HSP.html#42467" class="Bound">ğ‘¨</a> <a id="42469" class="Symbol">:</a> <a id="42471" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="42479" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="42481" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="42482" class="Symbol">)</a> <a id="42484" class="Keyword">where</a>
 <a id="42491" class="Keyword">open</a> <a id="42496" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42503" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="42506" href="Demos.HSP.html#42467" class="Bound">ğ‘¨</a> <a id="42508" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="42510" class="Keyword">using</a> <a id="42516" class="Symbol">(</a> <a id="42518" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="42522" class="Symbol">;</a> <a id="42524" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="42529" class="Symbol">;</a> <a id="42531" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42535" class="Symbol">;</a> <a id="42537" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42543" class="Symbol">)</a>

 <a id="Environment.Env"></a><a id="42547" href="Demos.HSP.html#42547" class="Function">Env</a> <a id="42551" class="Symbol">:</a> <a id="42553" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="42558" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a> <a id="42560" class="Symbol">â†’</a> <a id="42562" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="42569" class="Symbol">_</a> <a id="42571" class="Symbol">_</a>
 <a id="42574" href="Demos.HSP.html#42547" class="Function">Env</a> <a id="42578" href="Demos.HSP.html#42578" class="Bound">X</a> <a id="42580" class="Symbol">=</a> <a id="42582" class="Keyword">record</a>  <a id="42590" class="Symbol">{</a> <a id="42592" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="42600" class="Symbol">=</a> <a id="42602" href="Demos.HSP.html#42578" class="Bound">X</a> <a id="42604" class="Symbol">â†’</a> <a id="42606" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="42609" href="Demos.HSP.html#42467" class="Bound">ğ‘¨</a> <a id="42611" href="Demos.HSP.html#19222" class="Function Operator">]</a>
                 <a id="42630" class="Symbol">;</a> <a id="42632" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="42636" class="Symbol">=</a> <a id="42638" class="Symbol">Î»</a> <a id="42640" href="Demos.HSP.html#42640" class="Bound">Ï</a> <a id="42642" href="Demos.HSP.html#42642" class="Bound">Ï„</a> <a id="42644" class="Symbol">â†’</a> <a id="42646" class="Symbol">(</a><a id="42647" href="Demos.HSP.html#42647" class="Bound">x</a> <a id="42649" class="Symbol">:</a> <a id="42651" href="Demos.HSP.html#42578" class="Bound">X</a><a id="42652" class="Symbol">)</a> <a id="42654" class="Symbol">â†’</a> <a id="42656" href="Demos.HSP.html#42640" class="Bound">Ï</a> <a id="42658" href="Demos.HSP.html#42647" class="Bound">x</a> <a id="42660" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="42662" href="Demos.HSP.html#42642" class="Bound">Ï„</a> <a id="42664" href="Demos.HSP.html#42647" class="Bound">x</a>
                 <a id="42683" class="Symbol">;</a> <a id="42685" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="42699" class="Symbol">=</a> <a id="42701" class="Keyword">record</a>  <a id="42709" class="Symbol">{</a> <a id="42711" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="42718" class="Symbol">=</a> <a id="42720" class="Symbol">Î»</a> <a id="42722" href="Demos.HSP.html#42722" class="Bound">_</a>      <a id="42729" class="Symbol">â†’</a> <a id="42731" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                           <a id="42779" class="Symbol">;</a> <a id="42781" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="42788" class="Symbol">=</a> <a id="42790" class="Symbol">Î»</a> <a id="42792" href="Demos.HSP.html#42792" class="Bound">h</a> <a id="42794" href="Demos.HSP.html#42794" class="Bound">x</a>    <a id="42799" class="Symbol">â†’</a> <a id="42801" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42805" class="Symbol">(</a><a id="42806" href="Demos.HSP.html#42792" class="Bound">h</a> <a id="42808" href="Demos.HSP.html#42794" class="Bound">x</a><a id="42809" class="Symbol">)</a>
                                           <a id="42854" class="Symbol">;</a> <a id="42856" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="42863" class="Symbol">=</a> <a id="42865" class="Symbol">Î»</a> <a id="42867" href="Demos.HSP.html#42867" class="Bound">g</a> <a id="42869" href="Demos.HSP.html#42869" class="Bound">h</a> <a id="42871" href="Demos.HSP.html#42871" class="Bound">x</a>  <a id="42874" class="Symbol">â†’</a> <a id="42876" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42882" class="Symbol">(</a><a id="42883" href="Demos.HSP.html#42867" class="Bound">g</a> <a id="42885" href="Demos.HSP.html#42871" class="Bound">x</a><a id="42886" class="Symbol">)(</a><a id="42888" href="Demos.HSP.html#42869" class="Bound">h</a> <a id="42890" href="Demos.HSP.html#42871" class="Bound">x</a><a id="42891" class="Symbol">)</a> <a id="42893" class="Symbol">}}</a>

</pre>
The *interpretation* of a term *evaluated* in a particular environment is defined as follows.

<pre class="Agda">

 <a id="Environment.âŸ¦_âŸ§"></a><a id="43018" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="43022" class="Symbol">:</a> <a id="43024" class="Symbol">{</a><a id="43025" href="Demos.HSP.html#43025" class="Bound">X</a> <a id="43027" class="Symbol">:</a> <a id="43029" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="43034" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="43035" class="Symbol">}(</a><a id="43037" href="Demos.HSP.html#43037" class="Bound">t</a> <a id="43039" class="Symbol">:</a> <a id="43041" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="43046" href="Demos.HSP.html#43025" class="Bound">X</a><a id="43047" class="Symbol">)</a> <a id="43049" class="Symbol">â†’</a> <a id="43051" class="Symbol">(</a><a id="43052" href="Demos.HSP.html#42547" class="Function">Env</a> <a id="43056" href="Demos.HSP.html#43025" class="Bound">X</a><a id="43057" class="Symbol">)</a> <a id="43059" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="43061" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="43064" href="Demos.HSP.html#42467" class="Bound">ğ‘¨</a> <a id="43066" href="Demos.HSP.html#19168" class="Function Operator">]</a>
 <a id="43069" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43071" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="43073" href="Demos.HSP.html#43073" class="Bound">x</a> <a id="43075" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>          <a id="43086" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="43090" href="Demos.HSP.html#43090" class="Bound">Ï</a>    <a id="43095" class="Symbol">=</a> <a id="43097" href="Demos.HSP.html#43090" class="Bound">Ï</a> <a id="43099" href="Demos.HSP.html#43073" class="Bound">x</a>
 <a id="43102" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43104" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="43109" href="Demos.HSP.html#43109" class="Bound">f</a> <a id="43111" href="Demos.HSP.html#43111" class="Bound">args</a> <a id="43116" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>  <a id="43119" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="43123" href="Demos.HSP.html#43123" class="Bound">Ï</a>    <a id="43128" class="Symbol">=</a> <a id="43130" class="Symbol">(</a><a id="43131" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="43138" href="Demos.HSP.html#42467" class="Bound">ğ‘¨</a><a id="43139" class="Symbol">)</a> <a id="43141" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="43145" class="Symbol">(</a><a id="43146" href="Demos.HSP.html#43109" class="Bound">f</a> <a id="43148" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="43150" class="Symbol">Î»</a> <a id="43152" href="Demos.HSP.html#43152" class="Bound">i</a> <a id="43154" class="Symbol">â†’</a> <a id="43156" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43158" href="Demos.HSP.html#43111" class="Bound">args</a> <a id="43163" href="Demos.HSP.html#43152" class="Bound">i</a> <a id="43165" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="43167" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="43171" href="Demos.HSP.html#43123" class="Bound">Ï</a><a id="43172" class="Symbol">)</a>
 <a id="43175" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43180" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43182" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="43184" href="Demos.HSP.html#43184" class="Bound">x</a> <a id="43186" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="43188" href="Demos.HSP.html#43188" class="Bound">uâ‰ˆv</a>          <a id="43201" class="Symbol">=</a> <a id="43203" href="Demos.HSP.html#43188" class="Bound">uâ‰ˆv</a> <a id="43207" href="Demos.HSP.html#43184" class="Bound">x</a>
 <a id="43210" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43215" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43217" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="43222" href="Demos.HSP.html#43222" class="Bound">f</a> <a id="43224" href="Demos.HSP.html#43224" class="Bound">args</a> <a id="43229" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="43231" href="Demos.HSP.html#43231" class="Bound">xâ‰ˆy</a>  <a id="43236" class="Symbol">=</a> <a id="43238" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43243" class="Symbol">(</a><a id="43244" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="43251" href="Demos.HSP.html#42467" class="Bound">ğ‘¨</a><a id="43252" class="Symbol">)(</a><a id="43254" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="43261" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="43263" class="Symbol">Î»</a> <a id="43265" href="Demos.HSP.html#43265" class="Bound">i</a> <a id="43267" class="Symbol">â†’</a> <a id="43269" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43274" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43276" href="Demos.HSP.html#43224" class="Bound">args</a> <a id="43281" href="Demos.HSP.html#43265" class="Bound">i</a> <a id="43283" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="43285" href="Demos.HSP.html#43231" class="Bound">xâ‰ˆy</a> <a id="43289" class="Symbol">)</a>

</pre>
Two terms are proclaimed *equal* if they are equal for all environments.

<pre class="Agda">

 <a id="Environment.Equal"></a><a id="43392" href="Demos.HSP.html#43392" class="Function">Equal</a> <a id="43398" class="Symbol">:</a> <a id="43400" class="Symbol">{</a><a id="43401" href="Demos.HSP.html#43401" class="Bound">X</a> <a id="43403" class="Symbol">:</a> <a id="43405" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="43410" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="43411" class="Symbol">}(</a><a id="43413" href="Demos.HSP.html#43413" class="Bound">s</a> <a id="43415" href="Demos.HSP.html#43415" class="Bound">t</a> <a id="43417" class="Symbol">:</a> <a id="43419" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="43424" href="Demos.HSP.html#43401" class="Bound">X</a><a id="43425" class="Symbol">)</a> <a id="43427" class="Symbol">â†’</a> <a id="43429" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="43434" class="Symbol">_</a>
 <a id="43437" href="Demos.HSP.html#43392" class="Function">Equal</a> <a id="43443" class="Symbol">{</a><a id="43444" class="Argument">X</a> <a id="43446" class="Symbol">=</a> <a id="43448" href="Demos.HSP.html#43448" class="Bound">X</a><a id="43449" class="Symbol">}</a> <a id="43451" href="Demos.HSP.html#43451" class="Bound">s</a> <a id="43453" href="Demos.HSP.html#43453" class="Bound">t</a> <a id="43455" class="Symbol">=</a> <a id="43457" class="Symbol">âˆ€</a> <a id="43459" class="Symbol">(</a><a id="43460" href="Demos.HSP.html#43460" class="Bound">Ï</a> <a id="43462" class="Symbol">:</a> <a id="43464" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="43472" class="Symbol">(</a><a id="43473" href="Demos.HSP.html#42547" class="Function">Env</a> <a id="43477" href="Demos.HSP.html#43448" class="Bound">X</a><a id="43478" class="Symbol">))</a> <a id="43481" class="Symbol">â†’</a> <a id="43483" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43485" href="Demos.HSP.html#43451" class="Bound">s</a> <a id="43487" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="43489" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="43493" href="Demos.HSP.html#43460" class="Bound">Ï</a> <a id="43495" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="43497" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="43499" href="Demos.HSP.html#43453" class="Bound">t</a> <a id="43501" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="43503" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="43507" href="Demos.HSP.html#43460" class="Bound">Ï</a>

</pre>
Proof that `Equal` is an equivalence relation, and that the implication `s â‰ƒ t â†’ Equal s t` holds for all terms `s` and `t`, are also found inÂ [@Abel:2021]. We reproduce them here to keep the presentation self-contained.

<pre class="Agda">

 <a id="Environment.â‰ƒâ†’Equal"></a><a id="43758" href="Demos.HSP.html#43758" class="Function">â‰ƒâ†’Equal</a> <a id="43766" class="Symbol">:</a> <a id="43768" class="Symbol">{</a><a id="43769" href="Demos.HSP.html#43769" class="Bound">X</a> <a id="43771" class="Symbol">:</a> <a id="43773" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="43778" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="43779" class="Symbol">}(</a><a id="43781" href="Demos.HSP.html#43781" class="Bound">s</a> <a id="43783" href="Demos.HSP.html#43783" class="Bound">t</a> <a id="43785" class="Symbol">:</a> <a id="43787" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="43792" href="Demos.HSP.html#43769" class="Bound">X</a><a id="43793" class="Symbol">)</a> <a id="43795" class="Symbol">â†’</a> <a id="43797" href="Demos.HSP.html#43781" class="Bound">s</a> <a id="43799" href="Demos.HSP.html#40517" class="Datatype Operator">â‰ƒ</a> <a id="43801" href="Demos.HSP.html#43783" class="Bound">t</a> <a id="43803" class="Symbol">â†’</a> <a id="43805" href="Demos.HSP.html#43392" class="Function">Equal</a> <a id="43811" href="Demos.HSP.html#43781" class="Bound">s</a> <a id="43813" href="Demos.HSP.html#43783" class="Bound">t</a>
 <a id="43816" href="Demos.HSP.html#43758" class="Function">â‰ƒâ†’Equal</a> <a id="43824" class="DottedPattern Symbol">.(</a><a id="43826" href="Demos.HSP.html#40091" class="DottedPattern InductiveConstructor">â„Š</a> <a id="43828" class="DottedPattern Symbol">_)</a> <a id="43831" class="DottedPattern Symbol">.(</a><a id="43833" href="Demos.HSP.html#40091" class="DottedPattern InductiveConstructor">â„Š</a> <a id="43835" class="DottedPattern Symbol">_)</a> <a id="43838" class="Symbol">(</a><a id="43839" href="Demos.HSP.html#40561" class="InductiveConstructor">rfl</a> <a id="43843" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a><a id="43849" class="Symbol">)</a> <a id="43851" class="Symbol">=</a> <a id="43853" class="Symbol">Î»</a> <a id="43855" href="Demos.HSP.html#43855" class="Bound">_</a> <a id="43857" class="Symbol">â†’</a> <a id="43859" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="43865" href="Demos.HSP.html#43758" class="Function">â‰ƒâ†’Equal</a> <a id="43873" class="Symbol">(</a><a id="43874" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="43879" class="Symbol">_</a> <a id="43881" href="Demos.HSP.html#43881" class="Bound">s</a><a id="43882" class="Symbol">)(</a><a id="43884" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="43889" class="Symbol">_</a> <a id="43891" href="Demos.HSP.html#43891" class="Bound">t</a><a id="43892" class="Symbol">)(</a><a id="43894" href="Demos.HSP.html#40603" class="InductiveConstructor">gnl</a> <a id="43898" href="Demos.HSP.html#43898" class="Bound">x</a><a id="43899" class="Symbol">)</a> <a id="43901" class="Symbol">=</a>
  <a id="43905" class="Symbol">Î»</a> <a id="43907" href="Demos.HSP.html#43907" class="Bound">Ï</a> <a id="43909" class="Symbol">â†’</a> <a id="43911" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43916" class="Symbol">(</a><a id="43917" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="43924" href="Demos.HSP.html#42467" class="Bound">ğ‘¨</a><a id="43925" class="Symbol">)(</a><a id="43927" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="43934" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="43936" class="Symbol">Î»</a> <a id="43938" href="Demos.HSP.html#43938" class="Bound">i</a> <a id="43940" class="Symbol">â†’</a> <a id="43942" href="Demos.HSP.html#43758" class="Function">â‰ƒâ†’Equal</a><a id="43949" class="Symbol">(</a><a id="43950" href="Demos.HSP.html#43881" class="Bound">s</a> <a id="43952" href="Demos.HSP.html#43938" class="Bound">i</a><a id="43953" class="Symbol">)(</a><a id="43955" href="Demos.HSP.html#43891" class="Bound">t</a> <a id="43957" href="Demos.HSP.html#43938" class="Bound">i</a><a id="43958" class="Symbol">)(</a><a id="43960" href="Demos.HSP.html#43898" class="Bound">x</a> <a id="43962" href="Demos.HSP.html#43938" class="Bound">i</a><a id="43963" class="Symbol">)</a><a id="43964" href="Demos.HSP.html#43907" class="Bound">Ï</a> <a id="43966" class="Symbol">)</a>

 <a id="Environment.EqualIsEquiv"></a><a id="43970" href="Demos.HSP.html#43970" class="Function">EqualIsEquiv</a> <a id="43983" class="Symbol">:</a> <a id="43985" class="Symbol">{</a><a id="43986" href="Demos.HSP.html#43986" class="Bound">Î“</a> <a id="43988" class="Symbol">:</a> <a id="43990" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="43995" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="43996" class="Symbol">}</a> <a id="43998" class="Symbol">â†’</a> <a id="44000" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="44014" class="Symbol">(</a><a id="44015" href="Demos.HSP.html#43392" class="Function">Equal</a> <a id="44021" class="Symbol">{</a><a id="44022" class="Argument">X</a> <a id="44024" class="Symbol">=</a> <a id="44026" href="Demos.HSP.html#43986" class="Bound">Î“</a><a id="44027" class="Symbol">})</a>
 <a id="44031" href="Demos.HSP.html#6703" class="Field">refláµ‰</a>   <a id="44039" href="Demos.HSP.html#43970" class="Function">EqualIsEquiv</a> <a id="44052" class="Symbol">=</a> <a id="44054" class="Symbol">Î»</a> <a id="44056" href="Demos.HSP.html#44056" class="Bound">_</a>        <a id="44065" class="Symbol">â†’</a> <a id="44067" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="44073" href="Demos.HSP.html#6718" class="Field">symáµ‰</a>    <a id="44081" href="Demos.HSP.html#43970" class="Function">EqualIsEquiv</a> <a id="44094" class="Symbol">=</a> <a id="44096" class="Symbol">Î»</a> <a id="44098" href="Demos.HSP.html#44098" class="Bound">x=y</a> <a id="44102" href="Demos.HSP.html#44102" class="Bound">Ï</a>    <a id="44107" class="Symbol">â†’</a> <a id="44109" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="44113" class="Symbol">(</a><a id="44114" href="Demos.HSP.html#44098" class="Bound">x=y</a> <a id="44118" href="Demos.HSP.html#44102" class="Bound">Ï</a><a id="44119" class="Symbol">)</a>
 <a id="44122" href="Demos.HSP.html#6734" class="Field">transáµ‰</a>  <a id="44130" href="Demos.HSP.html#43970" class="Function">EqualIsEquiv</a> <a id="44143" class="Symbol">=</a> <a id="44145" class="Symbol">Î»</a> <a id="44147" href="Demos.HSP.html#44147" class="Bound">ij</a> <a id="44150" href="Demos.HSP.html#44150" class="Bound">jk</a> <a id="44153" href="Demos.HSP.html#44153" class="Bound">Ï</a>  <a id="44156" class="Symbol">â†’</a> <a id="44158" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="44164" class="Symbol">(</a><a id="44165" href="Demos.HSP.html#44147" class="Bound">ij</a> <a id="44168" href="Demos.HSP.html#44153" class="Bound">Ï</a><a id="44169" class="Symbol">)</a> <a id="44171" class="Symbol">(</a><a id="44172" href="Demos.HSP.html#44150" class="Bound">jk</a> <a id="44175" href="Demos.HSP.html#44153" class="Bound">Ï</a><a id="44176" class="Symbol">)</a>
</pre>



##### <a id="compatibility-of-terms">Compatibility of terms</a>
 <!-- {#compatibility-of-terms .unnumbered} -->

We need to formalize two more concepts involving terms.
The first (`comm-hom-term`) is the assertion that every term commutes with every homomorphism, and
the second (`interp-prod`) is the interpretation of a term in a product algebra.

<pre class="Agda">

<a id="44556" class="Keyword">module</a> <a id="44563" href="Demos.HSP.html#44563" class="Module">_</a> <a id="44565" class="Symbol">{</a><a id="44566" href="Demos.HSP.html#44566" class="Bound">X</a> <a id="44568" class="Symbol">:</a> <a id="44570" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="44575" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="44576" class="Symbol">}{</a><a id="44578" href="Demos.HSP.html#44578" class="Bound">ğ‘¨</a> <a id="44580" class="Symbol">:</a> <a id="44582" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="44590" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="44592" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="44594" class="Symbol">}{</a><a id="44596" href="Demos.HSP.html#44596" class="Bound">ğ‘©</a> <a id="44598" class="Symbol">:</a> <a id="44600" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="44608" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="44610" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="44612" class="Symbol">}(</a><a id="44614" href="Demos.HSP.html#44614" class="Bound">hh</a> <a id="44617" class="Symbol">:</a> <a id="44619" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="44623" href="Demos.HSP.html#44578" class="Bound">ğ‘¨</a> <a id="44625" href="Demos.HSP.html#44596" class="Bound">ğ‘©</a><a id="44626" class="Symbol">)</a> <a id="44628" class="Keyword">where</a>
 <a id="44635" class="Keyword">open</a> <a id="44640" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="44652" href="Demos.HSP.html#44578" class="Bound">ğ‘¨</a>  <a id="44655" class="Keyword">using</a> <a id="44661" class="Symbol">(</a> <a id="44663" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="44667" class="Symbol">)</a>
 <a id="44670" class="Keyword">open</a> <a id="44675" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="44687" href="Demos.HSP.html#44596" class="Bound">ğ‘©</a>  <a id="44690" class="Keyword">using</a> <a id="44696" class="Symbol">()</a> <a id="44699" class="Keyword">renaming</a> <a id="44708" class="Symbol">(</a> <a id="44710" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="44714" class="Symbol">to</a> <a id="44717" class="Function Operator">âŸ¦_âŸ§á´®</a> <a id="44722" class="Symbol">)</a>
 <a id="44725" class="Keyword">open</a> <a id="44730" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="44737" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="44740" href="Demos.HSP.html#44596" class="Bound">ğ‘©</a> <a id="44742" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="44745" class="Keyword">using</a> <a id="44751" class="Symbol">(</a> <a id="44753" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="44757" class="Symbol">;</a> <a id="44759" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>  <a id="44765" class="Symbol">)</a>
 <a id="44768" class="Keyword">private</a> <a id="44776" href="Demos.HSP.html#44776" class="Function">hfunc</a> <a id="44782" class="Symbol">=</a> <a id="44784" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="44786" href="Demos.HSP.html#44614" class="Bound">hh</a> <a id="44789" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="44791" class="Symbol">;</a> <a id="44793" href="Demos.HSP.html#44793" class="Function">h</a> <a id="44795" class="Symbol">=</a> <a id="44797" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="44803" href="Demos.HSP.html#44776" class="Function">hfunc</a>

 <a id="44811" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="44825" class="Symbol">:</a> <a id="44827" class="Symbol">(</a><a id="44828" href="Demos.HSP.html#44828" class="Bound">t</a> <a id="44830" class="Symbol">:</a> <a id="44832" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="44837" href="Demos.HSP.html#44566" class="Bound">X</a><a id="44838" class="Symbol">)</a> <a id="44840" class="Symbol">(</a><a id="44841" href="Demos.HSP.html#44841" class="Bound">a</a> <a id="44843" class="Symbol">:</a> <a id="44845" href="Demos.HSP.html#44566" class="Bound">X</a> <a id="44847" class="Symbol">â†’</a> <a id="44849" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="44852" href="Demos.HSP.html#44578" class="Bound">ğ‘¨</a> <a id="44854" href="Demos.HSP.html#19222" class="Function Operator">]</a><a id="44855" class="Symbol">)</a> <a id="44857" class="Symbol">â†’</a> <a id="44859" href="Demos.HSP.html#44793" class="Function">h</a> <a id="44861" class="Symbol">(</a><a id="44862" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="44864" href="Demos.HSP.html#44828" class="Bound">t</a> <a id="44866" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="44868" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="44872" href="Demos.HSP.html#44841" class="Bound">a</a><a id="44873" class="Symbol">)</a> <a id="44875" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="44877" href="Demos.HSP.html#44717" class="Function Operator">âŸ¦</a> <a id="44879" href="Demos.HSP.html#44828" class="Bound">t</a> <a id="44881" href="Demos.HSP.html#44717" class="Function Operator">âŸ§á´®</a> <a id="44884" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="44888" class="Symbol">(</a><a id="44889" href="Demos.HSP.html#44793" class="Function">h</a> <a id="44891" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="44893" href="Demos.HSP.html#44841" class="Bound">a</a><a id="44894" class="Symbol">)</a>
 <a id="44897" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="44911" class="Symbol">(</a><a id="44912" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="44914" href="Demos.HSP.html#44914" class="Bound">x</a><a id="44915" class="Symbol">)</a> <a id="44917" href="Demos.HSP.html#44917" class="Bound">a</a> <a id="44919" class="Symbol">=</a> <a id="44921" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="44927" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="44941" class="Symbol">(</a><a id="44942" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="44947" href="Demos.HSP.html#44947" class="Bound">f</a> <a id="44949" href="Demos.HSP.html#44949" class="Bound">t</a><a id="44950" class="Symbol">)</a> <a id="44952" href="Demos.HSP.html#44952" class="Bound">a</a> <a id="44954" class="Symbol">=</a>  <a id="44957" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="44966" href="Demos.HSP.html#44793" class="Function">h</a><a id="44967" class="Symbol">(</a><a id="44968" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="44970" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="44975" href="Demos.HSP.html#44947" class="Bound">f</a> <a id="44977" href="Demos.HSP.html#44949" class="Bound">t</a> <a id="44979" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="44981" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="44985" href="Demos.HSP.html#44952" class="Bound">a</a><a id="44986" class="Symbol">)</a>            <a id="44999" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="45002" href="Demos.HSP.html#26649" class="Field">compatible</a> <a id="45013" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="45015" href="Demos.HSP.html#44614" class="Bound">hh</a> <a id="45018" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="45020" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="45025" class="Symbol">(</a><a id="45026" href="Demos.HSP.html#44947" class="Bound">f</a> <a id="45028" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="45030" href="Demos.HSP.html#44596" class="Bound">ğ‘©</a><a id="45031" class="Symbol">)(Î»</a> <a id="45035" href="Demos.HSP.html#45035" class="Bound">i</a> <a id="45037" class="Symbol">â†’</a> <a id="45039" href="Demos.HSP.html#44793" class="Function">h</a><a id="45040" class="Symbol">(</a><a id="45041" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="45043" href="Demos.HSP.html#44949" class="Bound">t</a> <a id="45045" href="Demos.HSP.html#45035" class="Bound">i</a> <a id="45047" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="45049" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="45053" href="Demos.HSP.html#44952" class="Bound">a</a><a id="45054" class="Symbol">))</a>  <a id="45058" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="45061" href="Function.Bundles.html#1938" class="Field">cong</a><a id="45065" class="Symbol">(</a><a id="45066" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="45073" href="Demos.HSP.html#44596" class="Bound">ğ‘©</a><a id="45074" class="Symbol">)(</a><a id="45076" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="45083" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="45085" class="Symbol">Î»</a> <a id="45087" href="Demos.HSP.html#45087" class="Bound">i</a> <a id="45089" class="Symbol">â†’</a> <a id="45091" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a><a id="45104" class="Symbol">(</a><a id="45105" href="Demos.HSP.html#44949" class="Bound">t</a> <a id="45107" href="Demos.HSP.html#45087" class="Bound">i</a><a id="45108" class="Symbol">)</a> <a id="45110" href="Demos.HSP.html#44952" class="Bound">a</a><a id="45111" class="Symbol">)</a> <a id="45113" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="45118" href="Demos.HSP.html#44717" class="Function Operator">âŸ¦</a> <a id="45120" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="45125" href="Demos.HSP.html#44947" class="Bound">f</a> <a id="45127" href="Demos.HSP.html#44949" class="Bound">t</a> <a id="45129" href="Demos.HSP.html#44717" class="Function Operator">âŸ§á´®</a> <a id="45132" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="45136" class="Symbol">(</a><a id="45137" href="Demos.HSP.html#44793" class="Function">h</a> <a id="45139" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="45141" href="Demos.HSP.html#44952" class="Bound">a</a><a id="45142" class="Symbol">)</a>   <a id="45146" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a> <a id="45148" class="Keyword">where</a> <a id="45154" class="Keyword">open</a> <a id="45159" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="45175" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="45178" href="Demos.HSP.html#44596" class="Bound">ğ‘©</a> <a id="45180" href="Demos.HSP.html#19168" class="Function Operator">]</a>

<a id="45183" class="Keyword">module</a> <a id="45190" href="Demos.HSP.html#45190" class="Module">_</a> <a id="45192" class="Symbol">{</a><a id="45193" href="Demos.HSP.html#45193" class="Bound">X</a> <a id="45195" class="Symbol">:</a> <a id="45197" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="45202" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="45203" class="Symbol">}{</a><a id="45205" href="Demos.HSP.html#45205" class="Bound">Î¹</a> <a id="45207" class="Symbol">:</a> <a id="45209" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="45214" class="Symbol">}</a> <a id="45216" class="Symbol">{</a><a id="45217" href="Demos.HSP.html#45217" class="Bound">I</a> <a id="45219" class="Symbol">:</a> <a id="45221" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="45226" href="Demos.HSP.html#45205" class="Bound">Î¹</a><a id="45227" class="Symbol">}</a> <a id="45229" class="Symbol">(</a><a id="45230" href="Demos.HSP.html#45230" class="Bound">ğ’œ</a> <a id="45232" class="Symbol">:</a> <a id="45234" href="Demos.HSP.html#45217" class="Bound">I</a> <a id="45236" class="Symbol">â†’</a> <a id="45238" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="45246" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="45248" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="45250" class="Symbol">)</a> <a id="45252" class="Keyword">where</a>
 <a id="45259" class="Keyword">open</a> <a id="45264" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="45271" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="45274" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="45276" href="Demos.HSP.html#45230" class="Bound">ğ’œ</a> <a id="45278" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="45281" class="Keyword">using</a> <a id="45287" class="Symbol">(</a> <a id="45289" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="45293" class="Symbol">)</a>
 <a id="45296" class="Keyword">open</a> <a id="45301" href="Demos.HSP.html#42454" class="Module">Environment</a>      <a id="45318" class="Keyword">using</a> <a id="45324" class="Symbol">(</a> <a id="45326" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="45330" class="Symbol">;</a> <a id="45332" href="Demos.HSP.html#43758" class="Function">â‰ƒâ†’Equal</a> <a id="45340" class="Symbol">)</a>

 <a id="45344" href="Demos.HSP.html#45344" class="Function">interp-prod</a> <a id="45356" class="Symbol">:</a> <a id="45358" class="Symbol">(</a><a id="45359" href="Demos.HSP.html#45359" class="Bound">p</a> <a id="45361" class="Symbol">:</a> <a id="45363" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="45368" href="Demos.HSP.html#45193" class="Bound">X</a><a id="45369" class="Symbol">)</a> <a id="45371" class="Symbol">â†’</a> <a id="45373" class="Symbol">âˆ€</a> <a id="45375" href="Demos.HSP.html#45375" class="Bound">Ï</a> <a id="45377" class="Symbol">â†’</a>  <a id="45380" class="Symbol">(</a><a id="45381" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="45383" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="45385" href="Demos.HSP.html#45230" class="Bound">ğ’œ</a> <a id="45387" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="45389" href="Demos.HSP.html#45359" class="Bound">p</a><a id="45390" class="Symbol">)</a> <a id="45392" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="45396" href="Demos.HSP.html#45375" class="Bound">Ï</a>   <a id="45400" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a>   <a id="45404" class="Symbol">Î»</a> <a id="45406" href="Demos.HSP.html#45406" class="Bound">i</a> <a id="45408" class="Symbol">â†’</a> <a id="45410" class="Symbol">(</a><a id="45411" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="45413" href="Demos.HSP.html#45230" class="Bound">ğ’œ</a> <a id="45415" href="Demos.HSP.html#45406" class="Bound">i</a> <a id="45417" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="45419" href="Demos.HSP.html#45359" class="Bound">p</a><a id="45420" class="Symbol">)</a> <a id="45422" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="45426" class="Symbol">Î»</a> <a id="45428" href="Demos.HSP.html#45428" class="Bound">x</a> <a id="45430" class="Symbol">â†’</a> <a id="45432" class="Symbol">(</a><a id="45433" href="Demos.HSP.html#45375" class="Bound">Ï</a> <a id="45435" href="Demos.HSP.html#45428" class="Bound">x</a><a id="45436" class="Symbol">)</a> <a id="45438" href="Demos.HSP.html#45406" class="Bound">i</a>
 <a id="45441" href="Demos.HSP.html#45344" class="Function">interp-prod</a> <a id="45453" class="Symbol">(</a><a id="45454" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="45456" href="Demos.HSP.html#45456" class="Bound">x</a><a id="45457" class="Symbol">)</a>       <a id="45465" class="Symbol">=</a> <a id="45467" class="Symbol">Î»</a> <a id="45469" href="Demos.HSP.html#45469" class="Bound">Ï</a> <a id="45471" href="Demos.HSP.html#45471" class="Bound">i</a>  <a id="45474" class="Symbol">â†’</a> <a id="45476" href="Demos.HSP.html#43758" class="Function">â‰ƒâ†’Equal</a> <a id="45484" class="Symbol">(</a><a id="45485" href="Demos.HSP.html#45230" class="Bound">ğ’œ</a> <a id="45487" href="Demos.HSP.html#45471" class="Bound">i</a><a id="45488" class="Symbol">)</a> <a id="45490" class="Symbol">(</a><a id="45491" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="45493" href="Demos.HSP.html#45456" class="Bound">x</a><a id="45494" class="Symbol">)</a> <a id="45496" class="Symbol">(</a><a id="45497" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="45499" href="Demos.HSP.html#45456" class="Bound">x</a><a id="45500" class="Symbol">)</a> <a id="45502" href="Demos.HSP.html#40787" class="Function">â‰ƒ-isRefl</a> <a id="45511" class="Symbol">Î»</a> <a id="45513" href="Demos.HSP.html#45513" class="Bound">_</a> <a id="45515" class="Symbol">â†’</a> <a id="45517" class="Symbol">(</a><a id="45518" href="Demos.HSP.html#45469" class="Bound">Ï</a> <a id="45520" href="Demos.HSP.html#45456" class="Bound">x</a><a id="45521" class="Symbol">)</a> <a id="45523" href="Demos.HSP.html#45471" class="Bound">i</a>
 <a id="45526" href="Demos.HSP.html#45344" class="Function">interp-prod</a> <a id="45538" class="Symbol">(</a><a id="45539" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="45544" href="Demos.HSP.html#45544" class="Bound">f</a> <a id="45546" href="Demos.HSP.html#45546" class="Bound">t</a><a id="45547" class="Symbol">)</a>  <a id="45550" class="Symbol">=</a> <a id="45552" class="Symbol">Î»</a> <a id="45554" href="Demos.HSP.html#45554" class="Bound">Ï</a>    <a id="45559" class="Symbol">â†’</a> <a id="45561" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="45566" class="Symbol">(</a><a id="45567" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="45574" class="Symbol">(</a><a id="45575" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="45577" href="Demos.HSP.html#45230" class="Bound">ğ’œ</a><a id="45578" class="Symbol">))</a> <a id="45581" class="Symbol">(</a> <a id="45583" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="45590" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="45592" class="Symbol">Î»</a> <a id="45594" href="Demos.HSP.html#45594" class="Bound">j</a> <a id="45596" href="Demos.HSP.html#45596" class="Bound">k</a> <a id="45598" class="Symbol">â†’</a> <a id="45600" href="Demos.HSP.html#45344" class="Function">interp-prod</a> <a id="45612" class="Symbol">(</a><a id="45613" href="Demos.HSP.html#45546" class="Bound">t</a> <a id="45615" href="Demos.HSP.html#45594" class="Bound">j</a><a id="45616" class="Symbol">)</a> <a id="45618" href="Demos.HSP.html#45554" class="Bound">Ï</a> <a id="45620" href="Demos.HSP.html#45596" class="Bound">k</a> <a id="45622" class="Symbol">)</a>
</pre>

### <a id="equational-logic">Equational Logic</a>

#### <a id="term-identities-equational-theories-and-the-relation">Term identities, equational theories, and the âŠ§ relation</a>
 <!-- {#term-identities-equational-theories-and-the-relation .unnumbered} -->

An `ğ‘†`-*term equation* (or `ğ‘†`-*term identity*) is an ordered pair `(p , q)` of `ğ‘†`-terms, also denoted by `p â‰ˆ q`. They are often simply called *equations* or *identities*, especially when the signature `ğ‘†` is evident.
We define an *equational theory* (or *algebraic theory*) to be a pair `T = (ğ‘† , â„°)` consisting of a signature `ğ‘†` and a collection `â„°` of `ğ‘†`-term equations.[^9]

We say that the algebra `ğ‘¨` *models* the identity `p â‰ˆ q` and we write `ğ‘¨ âŠ§ p â‰ˆ q`
if for all `Ï : X â†’ ğ”»[ ğ‘¨ ]` we have `âŸ¦ p âŸ§ âŸ¨$âŸ© Ï â‰ˆ âŸ¦ q âŸ§ âŸ¨$âŸ© Ï`.
In other words, when interpreted in the algebra `ğ‘¨`, the terms `p` and `q` are equal no matter what values are assigned to variable symbols occurring in `p` and `q`.

If `ğ’¦` is a class of algebras of a given signature, then we write `ğ’¦ âŠ« p â‰ˆ q` and say that `ğ’¦` *models* the identity `p â‰ˆ q` provided `ğ‘¨ âŠ§ p â‰ˆ q` for every `ğ‘¨ âˆˆ ğ’¦`.

<pre class="Agda">

<a id="46771" class="Keyword">module</a> <a id="46778" href="Demos.HSP.html#46778" class="Module">_</a> <a id="46780" class="Symbol">{</a><a id="46781" href="Demos.HSP.html#46781" class="Bound">X</a> <a id="46783" class="Symbol">:</a> <a id="46785" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="46790" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="46791" class="Symbol">}</a> <a id="46793" class="Keyword">where</a>
 <a id="46800" href="Demos.HSP.html#46800" class="Function Operator">_âŠ§_â‰ˆ_</a> <a id="46806" class="Symbol">:</a> <a id="46808" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="46816" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="46818" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="46821" class="Symbol">â†’</a> <a id="46823" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="46828" href="Demos.HSP.html#46781" class="Bound">X</a> <a id="46830" class="Symbol">â†’</a> <a id="46832" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="46837" href="Demos.HSP.html#46781" class="Bound">X</a> <a id="46839" class="Symbol">â†’</a> <a id="46841" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="46846" class="Symbol">_</a>
 <a id="46849" href="Demos.HSP.html#46849" class="Bound">ğ‘¨</a> <a id="46851" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="46853" href="Demos.HSP.html#46853" class="Bound">p</a> <a id="46855" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="46857" href="Demos.HSP.html#46857" class="Bound">q</a> <a id="46859" class="Symbol">=</a> <a id="46861" href="Demos.HSP.html#43392" class="Function">Equal</a> <a id="46867" href="Demos.HSP.html#46853" class="Bound">p</a> <a id="46869" href="Demos.HSP.html#46857" class="Bound">q</a> <a id="46871" class="Keyword">where</a> <a id="46877" class="Keyword">open</a> <a id="46882" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="46894" href="Demos.HSP.html#46849" class="Bound">ğ‘¨</a>

 <a id="46898" href="Demos.HSP.html#46898" class="Function Operator">_âŠ«_â‰ˆ_</a> <a id="46904" class="Symbol">:</a> <a id="46906" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="46911" class="Symbol">(</a><a id="46912" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="46920" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="46922" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="46924" class="Symbol">)</a> <a id="46926" href="Demos.HSP.html#7174" class="Generalizable">â„“</a> <a id="46928" class="Symbol">â†’</a> <a id="46930" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="46935" href="Demos.HSP.html#46781" class="Bound">X</a> <a id="46937" class="Symbol">â†’</a> <a id="46939" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="46944" href="Demos.HSP.html#46781" class="Bound">X</a> <a id="46946" class="Symbol">â†’</a> <a id="46948" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="46953" class="Symbol">_</a>
 <a id="46956" href="Demos.HSP.html#46956" class="Bound">ğ’¦</a> <a id="46958" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="46960" href="Demos.HSP.html#46960" class="Bound">p</a> <a id="46962" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="46964" href="Demos.HSP.html#46964" class="Bound">q</a> <a id="46966" class="Symbol">=</a> <a id="46968" class="Symbol">âˆ€</a> <a id="46970" href="Demos.HSP.html#46970" class="Bound">ğ‘¨</a> <a id="46972" class="Symbol">â†’</a> <a id="46974" href="Demos.HSP.html#46956" class="Bound">ğ’¦</a> <a id="46976" href="Demos.HSP.html#46970" class="Bound">ğ‘¨</a> <a id="46978" class="Symbol">â†’</a> <a id="46980" href="Demos.HSP.html#46970" class="Bound">ğ‘¨</a> <a id="46982" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="46984" href="Demos.HSP.html#46960" class="Bound">p</a> <a id="46986" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="46988" href="Demos.HSP.html#46964" class="Bound">q</a>

</pre>
We represent a set of term identities as a predicate over pairs of terms, say, `â„° :  Pred(Term X Ã— Term X)`, and we denote by `ğ‘¨ âŠ¨ â„°` the assertion that `ğ‘¨` models `p â‰ˆ q` for all `(p, q) âˆˆ â„°`.

<pre class="Agda">

 <a id="47212" href="Demos.HSP.html#47212" class="Function Operator">_âŠ¨_</a> <a id="47216" class="Symbol">:</a> <a id="47218" class="Symbol">(</a><a id="47219" href="Demos.HSP.html#47219" class="Bound">ğ‘¨</a> <a id="47221" class="Symbol">:</a> <a id="47223" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="47231" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="47233" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="47235" class="Symbol">)</a> <a id="47237" class="Symbol">â†’</a> <a id="47239" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="47243" class="Symbol">(</a><a id="47244" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="47249" href="Demos.HSP.html#46781" class="Bound">X</a> <a id="47251" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="47253" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="47258" href="Demos.HSP.html#46781" class="Bound">X</a><a id="47259" class="Symbol">)(</a><a id="47261" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="47264" href="Demos.HSP.html#46790" class="Bound">Ï‡</a><a id="47265" class="Symbol">)</a> <a id="47267" class="Symbol">â†’</a> <a id="47269" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="47274" class="Symbol">_</a>
 <a id="47277" href="Demos.HSP.html#47277" class="Bound">ğ‘¨</a> <a id="47279" href="Demos.HSP.html#47212" class="Function Operator">âŠ¨</a> <a id="47281" href="Demos.HSP.html#47281" class="Bound">â„°</a> <a id="47283" class="Symbol">=</a> <a id="47285" class="Symbol">âˆ€</a> <a id="47287" class="Symbol">{</a><a id="47288" href="Demos.HSP.html#47288" class="Bound">p</a> <a id="47290" href="Demos.HSP.html#47290" class="Bound">q</a><a id="47291" class="Symbol">}</a> <a id="47293" class="Symbol">â†’</a> <a id="47295" class="Symbol">(</a><a id="47296" href="Demos.HSP.html#47288" class="Bound">p</a> <a id="47298" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="47300" href="Demos.HSP.html#47290" class="Bound">q</a><a id="47301" class="Symbol">)</a> <a id="47303" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="47305" href="Demos.HSP.html#47281" class="Bound">â„°</a> <a id="47307" class="Symbol">â†’</a> <a id="47309" href="Demos.HSP.html#43392" class="Function">Equal</a> <a id="47315" href="Demos.HSP.html#47288" class="Bound">p</a> <a id="47317" href="Demos.HSP.html#47290" class="Bound">q</a> <a id="47319" class="Keyword">where</a> <a id="47325" class="Keyword">open</a> <a id="47330" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="47342" href="Demos.HSP.html#47277" class="Bound">ğ‘¨</a>

</pre>
(The symbol `âŠ¨` is a stretched version of the models symbol `âŠ§`,
so [Agda][] can distinguish between the two and parse expressions involving the types
`_âŠ¨_` and `_âŠ§_â‰ˆ_`. In Emacs `agda2-mode`, the symbol `âŠ¨` is produced by typing
`\|=`, while `âŠ§` is produced with `\models`.)

An important property of the binary relation `âŠ§` is *algebraic invariance* (i.e.,
invariance under isomorphism).  We formalize this property as follows.

<pre class="Agda">

<a id="47801" class="Keyword">module</a> <a id="47808" href="Demos.HSP.html#47808" class="Module">_</a> <a id="47810" class="Symbol">{</a><a id="47811" href="Demos.HSP.html#47811" class="Bound">X</a> <a id="47813" class="Symbol">:</a> <a id="47815" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="47820" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="47821" class="Symbol">}{</a><a id="47823" href="Demos.HSP.html#47823" class="Bound">ğ‘¨</a> <a id="47825" class="Symbol">:</a> <a id="47827" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="47835" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="47837" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="47839" class="Symbol">}(</a><a id="47841" href="Demos.HSP.html#47841" class="Bound">ğ‘©</a> <a id="47843" class="Symbol">:</a> <a id="47845" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="47853" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="47855" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="47857" class="Symbol">)(</a><a id="47859" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="47861" href="Demos.HSP.html#47861" class="Bound">q</a> <a id="47863" class="Symbol">:</a> <a id="47865" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="47870" href="Demos.HSP.html#47811" class="Bound">X</a><a id="47871" class="Symbol">)</a> <a id="47873" class="Keyword">where</a>
 <a id="47880" href="Demos.HSP.html#47880" class="Function">âŠ§-I-invar</a> <a id="47890" class="Symbol">:</a> <a id="47892" href="Demos.HSP.html#47823" class="Bound">ğ‘¨</a> <a id="47894" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="47896" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="47898" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="47900" href="Demos.HSP.html#47861" class="Bound">q</a>  <a id="47903" class="Symbol">â†’</a>  <a id="47906" href="Demos.HSP.html#47823" class="Bound">ğ‘¨</a> <a id="47908" href="Demos.HSP.html#33094" class="Record Operator">â‰…</a> <a id="47910" href="Demos.HSP.html#47841" class="Bound">ğ‘©</a>  <a id="47913" class="Symbol">â†’</a>  <a id="47916" href="Demos.HSP.html#47841" class="Bound">ğ‘©</a> <a id="47918" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="47920" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="47922" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="47924" href="Demos.HSP.html#47861" class="Bound">q</a>
 <a id="47927" href="Demos.HSP.html#47880" class="Function">âŠ§-I-invar</a> <a id="47937" href="Demos.HSP.html#47937" class="Bound">Apq</a> <a id="47941" class="Symbol">(</a><a id="47942" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a> <a id="47948" href="Demos.HSP.html#47948" class="Bound">fh</a> <a id="47951" href="Demos.HSP.html#47951" class="Bound">gh</a> <a id="47954" href="Demos.HSP.html#47954" class="Bound">fâˆ¼g</a> <a id="47958" href="Demos.HSP.html#47958" class="Bound">gâˆ¼f</a><a id="47961" class="Symbol">)</a> <a id="47963" href="Demos.HSP.html#47963" class="Bound">Ï</a> <a id="47965" class="Symbol">=</a> <a id="47967" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
  <a id="47975" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="47977" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="47979" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>     <a id="47985" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>             <a id="48001" href="Demos.HSP.html#47963" class="Bound">Ï</a>    <a id="48006" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="48011" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="48016" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="48018" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="48020" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="48022" class="Symbol">(</a><a id="48023" href="Demos.HSP.html#47954" class="Bound">fâˆ¼g</a> <a id="48027" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="48029" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48030" class="Symbol">)</a>        <a id="48039" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
  <a id="48043" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="48045" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="48047" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>     <a id="48053" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="48057" class="Symbol">(</a><a id="48058" href="Demos.HSP.html#48365" class="Function">f</a> <a id="48060" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="48063" class="Symbol">(</a><a id="48064" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48066" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="48069" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48070" class="Symbol">))</a>  <a id="48074" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="48079" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="48093" href="Demos.HSP.html#47948" class="Bound">fh</a> <a id="48096" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="48098" class="Symbol">(</a><a id="48099" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48101" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="48103" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48104" class="Symbol">)</a>  <a id="48107" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
  <a id="48111" href="Demos.HSP.html#48365" class="Function">f</a><a id="48112" class="Symbol">(</a><a id="48113" href="Demos.HSP.html#48457" class="Function Operator">âŸ¦</a> <a id="48115" href="Demos.HSP.html#47859" class="Bound">p</a> <a id="48117" href="Demos.HSP.html#48457" class="Function Operator">âŸ§á´¬</a>  <a id="48121" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>       <a id="48131" class="Symbol">(</a><a id="48132" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48134" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="48137" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48138" class="Symbol">))</a>  <a id="48142" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="48147" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="48152" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="48154" href="Demos.HSP.html#47948" class="Bound">fh</a> <a id="48157" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="48159" class="Symbol">(</a><a id="48160" href="Demos.HSP.html#47937" class="Bound">Apq</a> <a id="48164" class="Symbol">(</a><a id="48165" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48167" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="48169" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48170" class="Symbol">))</a>   <a id="48175" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="48179" href="Demos.HSP.html#48365" class="Function">f</a><a id="48180" class="Symbol">(</a><a id="48181" href="Demos.HSP.html#48457" class="Function Operator">âŸ¦</a> <a id="48183" href="Demos.HSP.html#47861" class="Bound">q</a> <a id="48185" href="Demos.HSP.html#48457" class="Function Operator">âŸ§á´¬</a>  <a id="48189" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>       <a id="48199" class="Symbol">(</a><a id="48200" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48202" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="48205" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48206" class="Symbol">))</a>  <a id="48210" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="48215" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="48229" href="Demos.HSP.html#47948" class="Bound">fh</a> <a id="48232" href="Demos.HSP.html#47861" class="Bound">q</a> <a id="48234" class="Symbol">(</a><a id="48235" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48237" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="48239" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48240" class="Symbol">)</a>  <a id="48243" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="48247" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="48249" href="Demos.HSP.html#47861" class="Bound">q</a> <a id="48251" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>     <a id="48257" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="48261" class="Symbol">(</a><a id="48262" href="Demos.HSP.html#48365" class="Function">f</a> <a id="48264" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="48267" class="Symbol">(</a><a id="48268" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48270" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="48273" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48274" class="Symbol">))</a>  <a id="48278" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="48283" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="48288" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="48290" href="Demos.HSP.html#47861" class="Bound">q</a> <a id="48292" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="48294" class="Symbol">(</a><a id="48295" href="Demos.HSP.html#47954" class="Bound">fâˆ¼g</a> <a id="48299" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="48301" href="Demos.HSP.html#47963" class="Bound">Ï</a><a id="48302" class="Symbol">)</a>        <a id="48311" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
  <a id="48315" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="48317" href="Demos.HSP.html#47861" class="Bound">q</a> <a id="48319" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>     <a id="48325" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>             <a id="48341" href="Demos.HSP.html#47963" class="Bound">Ï</a>    <a id="48346" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
  <a id="48350" class="Keyword">where</a>  <a id="48357" class="Keyword">private</a> <a id="48365" href="Demos.HSP.html#48365" class="Function">f</a> <a id="48367" class="Symbol">=</a> <a id="48369" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="48375" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="48377" href="Demos.HSP.html#47948" class="Bound">fh</a> <a id="48380" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="48382" class="Symbol">;</a> <a id="48384" href="Demos.HSP.html#48384" class="Function">g</a> <a id="48386" class="Symbol">=</a> <a id="48388" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="48394" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="48396" href="Demos.HSP.html#47951" class="Bound">gh</a> <a id="48399" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>
         <a id="48410" class="Keyword">open</a> <a id="48415" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="48427" href="Demos.HSP.html#47823" class="Bound">ğ‘¨</a>  <a id="48430" class="Keyword">using</a> <a id="48436" class="Symbol">()</a> <a id="48439" class="Keyword">renaming</a> <a id="48448" class="Symbol">(</a> <a id="48450" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="48454" class="Symbol">to</a> <a id="48457" class="Function Operator">âŸ¦_âŸ§á´¬</a> <a id="48462" class="Symbol">)</a>
         <a id="48473" class="Keyword">open</a> <a id="48478" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="48490" href="Demos.HSP.html#47841" class="Bound">ğ‘©</a>  <a id="48493" class="Keyword">using</a> <a id="48499" class="Symbol">(</a> <a id="48501" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="48505" class="Symbol">)</a> <a id="48507" class="Symbol">;</a> <a id="48509" class="Keyword">open</a> <a id="48514" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="48530" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="48533" href="Demos.HSP.html#47841" class="Bound">ğ‘©</a> <a id="48535" href="Demos.HSP.html#19168" class="Function Operator">]</a>

</pre>
If `ğ’¦` is a class of `ğ‘†`-algebras, the set of identities modeled by `ğ’¦`, denoted `Th ğ’¦`, is called the *equational theory* of `ğ’¦`. If `â„°` is a set of `ğ‘†`-term identities,
the class of algebras modeling `â„°`, denoted `Mod â„°`, is called the *equational class axiomatized* by `â„°`. We codify these notions in the next two definitions.

<pre class="Agda">

<a id="Th"></a><a id="48894" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="48897" class="Symbol">:</a> <a id="48899" class="Symbol">{</a><a id="48900" href="Demos.HSP.html#48900" class="Bound">X</a> <a id="48902" class="Symbol">:</a> <a id="48904" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="48909" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="48910" class="Symbol">}</a> <a id="48912" class="Symbol">â†’</a> <a id="48914" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="48919" class="Symbol">(</a><a id="48920" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="48928" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="48930" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="48932" class="Symbol">)</a> <a id="48934" href="Demos.HSP.html#7174" class="Generalizable">â„“</a> <a id="48936" class="Symbol">â†’</a> <a id="48938" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="48942" class="Symbol">(</a><a id="48943" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="48948" href="Demos.HSP.html#48900" class="Bound">X</a> <a id="48950" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="48952" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="48957" href="Demos.HSP.html#48900" class="Bound">X</a><a id="48958" class="Symbol">)</a> <a id="48960" class="Symbol">_</a>
<a id="48962" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="48965" href="Demos.HSP.html#48965" class="Bound">ğ’¦</a> <a id="48967" class="Symbol">=</a> <a id="48969" class="Symbol">Î»</a> <a id="48971" class="Symbol">(</a><a id="48972" href="Demos.HSP.html#48972" class="Bound">p</a> <a id="48974" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="48976" href="Demos.HSP.html#48976" class="Bound">q</a><a id="48977" class="Symbol">)</a> <a id="48979" class="Symbol">â†’</a> <a id="48981" href="Demos.HSP.html#48965" class="Bound">ğ’¦</a> <a id="48983" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="48985" href="Demos.HSP.html#48972" class="Bound">p</a> <a id="48987" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="48989" href="Demos.HSP.html#48976" class="Bound">q</a>

<a id="Mod"></a><a id="48992" href="Demos.HSP.html#48992" class="Function">Mod</a> <a id="48996" class="Symbol">:</a> <a id="48998" class="Symbol">{</a><a id="48999" href="Demos.HSP.html#48999" class="Bound">X</a> <a id="49001" class="Symbol">:</a> <a id="49003" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="49008" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="49009" class="Symbol">}</a> <a id="49011" class="Symbol">â†’</a> <a id="49013" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49017" class="Symbol">(</a><a id="49018" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="49023" href="Demos.HSP.html#48999" class="Bound">X</a> <a id="49025" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="49027" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="49032" href="Demos.HSP.html#48999" class="Bound">X</a><a id="49033" class="Symbol">)</a> <a id="49035" href="Demos.HSP.html#7174" class="Generalizable">â„“</a> <a id="49037" class="Symbol">â†’</a> <a id="49039" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="49044" class="Symbol">(</a><a id="49045" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="49053" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="49055" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="49057" class="Symbol">)</a> <a id="49059" class="Symbol">_</a>
<a id="49061" href="Demos.HSP.html#48992" class="Function">Mod</a> <a id="49065" href="Demos.HSP.html#49065" class="Bound">â„°</a> <a id="49067" href="Demos.HSP.html#49067" class="Bound">ğ‘¨</a> <a id="49069" class="Symbol">=</a> <a id="49071" class="Symbol">âˆ€</a> <a id="49073" class="Symbol">{</a><a id="49074" href="Demos.HSP.html#49074" class="Bound">p</a> <a id="49076" href="Demos.HSP.html#49076" class="Bound">q</a><a id="49077" class="Symbol">}</a> <a id="49079" class="Symbol">â†’</a> <a id="49081" class="Symbol">(</a><a id="49082" href="Demos.HSP.html#49074" class="Bound">p</a> <a id="49084" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="49086" href="Demos.HSP.html#49076" class="Bound">q</a><a id="49087" class="Symbol">)</a> <a id="49089" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="49091" href="Demos.HSP.html#49065" class="Bound">â„°</a> <a id="49093" class="Symbol">â†’</a> <a id="49095" href="Demos.HSP.html#43392" class="Function">Equal</a> <a id="49101" href="Demos.HSP.html#49074" class="Bound">p</a> <a id="49103" href="Demos.HSP.html#49076" class="Bound">q</a> <a id="49105" class="Keyword">where</a> <a id="49111" class="Keyword">open</a> <a id="49116" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="49128" href="Demos.HSP.html#49067" class="Bound">ğ‘¨</a>
</pre>

#### <a id="the-closure-operators-h-s-p-and-v">The Closure Operators H, S, P and V</a>
 <!-- {#the-closure-operators-h-s-p-and-v .unnumbered} -->

Fix a signature `ğ‘†`, let `ğ’¦` be a class of `ğ‘†`-algebras, and define
* `H ğ’¦` := the class of all homomorphic images of members of `ğ’¦`;
* `S ğ’¦` := the class of all subalgebras of members of `ğ’¦`;
* `P ğ’¦` := the class of all products of members of `ğ’¦`.

`H`, `S`, and `P` are *closure operators* (expansive, monotone, and idempotent).  
A class `ğ’¦` of `ğ‘†`-algebras is said to be *closed under the taking of homomorphic images* 
provided `H ğ’¦ âŠ† ğ’¦`. Similarly, `ğ’¦` is *closed under the taking of subalgebras* (resp., *arbitrary products*) provided `S ğ’¦ âŠ† ğ’¦` (resp., `P ğ’¦ âŠ† ğ’¦`). The operators `H`, `S`, and `P` can be composed with one another repeatedly, forming yet more closure operators. We represent these three closure operators in type theory as follows.

<pre class="Agda">

<a id="50059" class="Keyword">module</a> <a id="50066" href="Demos.HSP.html#50066" class="Module">_</a> <a id="50068" class="Symbol">{</a><a id="50069" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50071" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a> <a id="50074" href="Demos.HSP.html#50074" class="Bound">Î²</a> <a id="50076" href="Demos.HSP.html#50076" class="Bound">Ïáµ‡</a> <a id="50079" class="Symbol">:</a> <a id="50081" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="50086" class="Symbol">}</a> <a id="50088" class="Keyword">where</a>
 <a id="50095" class="Keyword">private</a> <a id="50103" href="Demos.HSP.html#50103" class="Function">a</a> <a id="50105" class="Symbol">=</a> <a id="50107" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50109" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="50111" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a>
 <a id="50115" href="Demos.HSP.html#50115" class="Function">H</a> <a id="50117" class="Symbol">:</a> <a id="50119" class="Symbol">âˆ€</a> <a id="50121" href="Demos.HSP.html#50121" class="Bound">â„“</a> <a id="50123" class="Symbol">â†’</a> <a id="50125" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="50129" class="Symbol">(</a><a id="50130" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50138" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50140" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a><a id="50142" class="Symbol">)</a> <a id="50144" class="Symbol">(</a><a id="50145" href="Demos.HSP.html#50103" class="Function">a</a> <a id="50147" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="50149" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="50152" href="Demos.HSP.html#50121" class="Bound">â„“</a><a id="50153" class="Symbol">)</a> <a id="50155" class="Symbol">â†’</a> <a id="50157" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="50161" class="Symbol">(</a><a id="50162" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50170" href="Demos.HSP.html#50074" class="Bound">Î²</a> <a id="50172" href="Demos.HSP.html#50076" class="Bound">Ïáµ‡</a><a id="50174" class="Symbol">)</a> <a id="50176" class="Symbol">_</a>
 <a id="50179" href="Demos.HSP.html#50115" class="Function">H</a> <a id="50181" class="Symbol">_</a> <a id="50183" href="Demos.HSP.html#50183" class="Bound">ğ’¦</a> <a id="50185" href="Demos.HSP.html#50185" class="Bound">ğ‘©</a> <a id="50187" class="Symbol">=</a> <a id="50189" href="Data.Product.html#916" class="Function">Î£[</a> <a id="50192" href="Demos.HSP.html#50192" class="Bound">ğ‘¨</a> <a id="50194" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="50196" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50204" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50206" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a> <a id="50209" href="Data.Product.html#916" class="Function">]</a> <a id="50211" href="Demos.HSP.html#50192" class="Bound">ğ‘¨</a> <a id="50213" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="50215" href="Demos.HSP.html#50183" class="Bound">ğ’¦</a> <a id="50217" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="50219" href="Demos.HSP.html#50185" class="Bound">ğ‘©</a> <a id="50221" href="Demos.HSP.html#35189" class="Function Operator">IsHomImageOf</a> <a id="50234" href="Demos.HSP.html#50192" class="Bound">ğ‘¨</a>

 <a id="50238" href="Demos.HSP.html#50238" class="Function">S</a> <a id="50240" class="Symbol">:</a> <a id="50242" class="Symbol">âˆ€</a> <a id="50244" href="Demos.HSP.html#50244" class="Bound">â„“</a> <a id="50246" class="Symbol">â†’</a> <a id="50248" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="50252" class="Symbol">(</a><a id="50253" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50261" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50263" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a><a id="50265" class="Symbol">)</a> <a id="50267" class="Symbol">(</a><a id="50268" href="Demos.HSP.html#50103" class="Function">a</a> <a id="50270" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="50272" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="50275" href="Demos.HSP.html#50244" class="Bound">â„“</a><a id="50276" class="Symbol">)</a> <a id="50278" class="Symbol">â†’</a> <a id="50280" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="50284" class="Symbol">(</a><a id="50285" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50293" href="Demos.HSP.html#50074" class="Bound">Î²</a> <a id="50295" href="Demos.HSP.html#50076" class="Bound">Ïáµ‡</a><a id="50297" class="Symbol">)</a> <a id="50299" class="Symbol">_</a>
 <a id="50302" href="Demos.HSP.html#50238" class="Function">S</a> <a id="50304" class="Symbol">_</a> <a id="50306" href="Demos.HSP.html#50306" class="Bound">ğ’¦</a> <a id="50308" href="Demos.HSP.html#50308" class="Bound">ğ‘©</a> <a id="50310" class="Symbol">=</a> <a id="50312" href="Data.Product.html#916" class="Function">Î£[</a> <a id="50315" href="Demos.HSP.html#50315" class="Bound">ğ‘¨</a> <a id="50317" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="50319" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50327" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50329" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a> <a id="50332" href="Data.Product.html#916" class="Function">]</a> <a id="50334" href="Demos.HSP.html#50315" class="Bound">ğ‘¨</a> <a id="50336" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="50338" href="Demos.HSP.html#50306" class="Bound">ğ’¦</a> <a id="50340" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="50342" href="Demos.HSP.html#50308" class="Bound">ğ‘©</a> <a id="50344" href="Demos.HSP.html#37969" class="Function Operator">â‰¤</a> <a id="50346" href="Demos.HSP.html#50315" class="Bound">ğ‘¨</a>

 <a id="50350" href="Demos.HSP.html#50350" class="Function">P</a> <a id="50352" class="Symbol">:</a> <a id="50354" class="Symbol">âˆ€</a> <a id="50356" href="Demos.HSP.html#50356" class="Bound">â„“</a> <a id="50358" href="Demos.HSP.html#50358" class="Bound">Î¹</a> <a id="50360" class="Symbol">â†’</a> <a id="50362" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="50366" class="Symbol">(</a><a id="50367" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50375" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50377" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a><a id="50379" class="Symbol">)</a> <a id="50381" class="Symbol">(</a><a id="50382" href="Demos.HSP.html#50103" class="Function">a</a> <a id="50384" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="50386" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="50389" href="Demos.HSP.html#50356" class="Bound">â„“</a><a id="50390" class="Symbol">)</a> <a id="50392" class="Symbol">â†’</a> <a id="50394" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="50398" class="Symbol">(</a><a id="50399" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50407" href="Demos.HSP.html#50074" class="Bound">Î²</a> <a id="50409" href="Demos.HSP.html#50076" class="Bound">Ïáµ‡</a><a id="50411" class="Symbol">)</a> <a id="50413" class="Symbol">_</a>
 <a id="50416" href="Demos.HSP.html#50350" class="Function">P</a> <a id="50418" class="Symbol">_</a> <a id="50420" href="Demos.HSP.html#50420" class="Bound">Î¹</a> <a id="50422" href="Demos.HSP.html#50422" class="Bound">ğ’¦</a> <a id="50424" href="Demos.HSP.html#50424" class="Bound">ğ‘©</a> <a id="50426" class="Symbol">=</a> <a id="50428" href="Data.Product.html#916" class="Function">Î£[</a> <a id="50431" href="Demos.HSP.html#50431" class="Bound">I</a> <a id="50433" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="50435" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="50440" href="Demos.HSP.html#50420" class="Bound">Î¹</a> <a id="50442" href="Data.Product.html#916" class="Function">]</a> <a id="50444" class="Symbol">(</a><a id="50445" href="Data.Product.html#916" class="Function">Î£[</a> <a id="50448" href="Demos.HSP.html#50448" class="Bound">ğ’œ</a> <a id="50450" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="50452" class="Symbol">(</a><a id="50453" href="Demos.HSP.html#50431" class="Bound">I</a> <a id="50455" class="Symbol">â†’</a> <a id="50457" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50465" href="Demos.HSP.html#50069" class="Bound">Î±</a> <a id="50467" href="Demos.HSP.html#50071" class="Bound">Ïáµƒ</a><a id="50469" class="Symbol">)</a> <a id="50471" href="Data.Product.html#916" class="Function">]</a> <a id="50473" class="Symbol">(âˆ€</a> <a id="50476" href="Demos.HSP.html#50476" class="Bound">i</a> <a id="50478" class="Symbol">â†’</a> <a id="50480" href="Demos.HSP.html#50448" class="Bound">ğ’œ</a> <a id="50482" href="Demos.HSP.html#50476" class="Bound">i</a> <a id="50484" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="50486" href="Demos.HSP.html#50422" class="Bound">ğ’¦</a><a id="50487" class="Symbol">)</a> <a id="50489" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="50491" class="Symbol">(</a><a id="50492" href="Demos.HSP.html#50424" class="Bound">ğ‘©</a> <a id="50494" href="Demos.HSP.html#33094" class="Record Operator">â‰…</a> <a id="50496" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="50498" href="Demos.HSP.html#50448" class="Bound">ğ’œ</a><a id="50499" class="Symbol">))</a>

</pre>
Identities modeled by an algebra `ğ‘¨` are also modeled by every homomorphic image of
`ğ‘¨` and by every subalgebra of `ğ‘¨`. These facts are formalized in [Agda][] as follows.

<pre class="Agda">

<a id="50700" class="Keyword">module</a> <a id="50707" href="Demos.HSP.html#50707" class="Module">_</a> <a id="50709" class="Symbol">{</a><a id="50710" href="Demos.HSP.html#50710" class="Bound">X</a> <a id="50712" class="Symbol">:</a> <a id="50714" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="50719" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="50720" class="Symbol">}{</a><a id="50722" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="50724" class="Symbol">:</a> <a id="50726" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50734" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="50736" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="50738" class="Symbol">}{</a><a id="50740" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a> <a id="50742" class="Symbol">:</a> <a id="50744" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="50752" href="Demos.HSP.html#7155" class="Generalizable">Î²</a> <a id="50754" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="50756" class="Symbol">}{</a><a id="50758" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="50760" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="50762" class="Symbol">:</a> <a id="50764" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="50769" href="Demos.HSP.html#50710" class="Bound">X</a><a id="50770" class="Symbol">}</a> <a id="50772" class="Keyword">where</a>
 <a id="50779" href="Demos.HSP.html#50779" class="Function">âŠ§-H-invar</a> <a id="50789" class="Symbol">:</a> <a id="50791" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="50793" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="50795" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="50797" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="50799" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="50801" class="Symbol">â†’</a> <a id="50803" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a> <a id="50805" href="Demos.HSP.html#35189" class="Function Operator">IsHomImageOf</a> <a id="50818" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="50820" class="Symbol">â†’</a> <a id="50822" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a> <a id="50824" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="50826" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="50828" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="50830" href="Demos.HSP.html#50760" class="Bound">q</a>
 <a id="50833" href="Demos.HSP.html#50779" class="Function">âŠ§-H-invar</a> <a id="50843" href="Demos.HSP.html#50843" class="Bound">Apq</a> <a id="50847" class="Symbol">(</a><a id="50848" href="Demos.HSP.html#50848" class="Bound">Ï†h</a> <a id="50851" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="50853" href="Demos.HSP.html#50853" class="Bound">Ï†E</a><a id="50855" class="Symbol">)</a> <a id="50857" href="Demos.HSP.html#50857" class="Bound">Ï</a> <a id="50859" class="Symbol">=</a> <a id="50861" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
       <a id="50874" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="50876" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="50878" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>   <a id="50882" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>               <a id="50900" href="Demos.HSP.html#50857" class="Bound">Ï</a>    <a id="50905" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="50910" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50915" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="50917" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="50919" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a><a id="50920" class="Symbol">(Î»</a> <a id="50923" href="Demos.HSP.html#50923" class="Bound">_</a> <a id="50925" class="Symbol">â†’</a> <a id="50927" href="Demos.HSP.html#10940" class="Function">InvIsInverseÊ³</a> <a id="50941" href="Demos.HSP.html#50853" class="Bound">Ï†E</a><a id="50943" class="Symbol">)</a>  <a id="50946" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
       <a id="50955" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="50957" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="50959" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>   <a id="50963" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="50967" class="Symbol">(</a><a id="50968" href="Demos.HSP.html#51381" class="Function">Ï†</a> <a id="50970" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="50973" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a>  <a id="50978" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="50981" href="Demos.HSP.html#50857" class="Bound">Ï</a><a id="50982" class="Symbol">)</a>   <a id="50986" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="50991" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="51005" href="Demos.HSP.html#50848" class="Bound">Ï†h</a> <a id="51008" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="51010" class="Symbol">(</a><a id="51011" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a> <a id="51015" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="51017" href="Demos.HSP.html#50857" class="Bound">Ï</a><a id="51018" class="Symbol">)</a>        <a id="51027" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
   <a id="51032" href="Demos.HSP.html#51381" class="Function">Ï†</a><a id="51033" class="Symbol">(</a>  <a id="51036" href="Demos.HSP.html#51450" class="Function Operator">âŸ¦</a> <a id="51038" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="51040" href="Demos.HSP.html#51450" class="Function Operator">âŸ§á´¬</a>  <a id="51044" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="51048" class="Symbol">(</a>     <a id="51054" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a>  <a id="51059" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="51062" href="Demos.HSP.html#50857" class="Bound">Ï</a><a id="51063" class="Symbol">))</a>  <a id="51067" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="51072" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="51077" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="51079" href="Demos.HSP.html#50848" class="Bound">Ï†h</a> <a id="51082" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="51084" class="Symbol">(</a><a id="51085" href="Demos.HSP.html#50843" class="Bound">Apq</a> <a id="51089" class="Symbol">(</a><a id="51090" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a> <a id="51094" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="51096" href="Demos.HSP.html#50857" class="Bound">Ï</a><a id="51097" class="Symbol">))</a>         <a id="51108" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="51113" href="Demos.HSP.html#51381" class="Function">Ï†</a><a id="51114" class="Symbol">(</a>  <a id="51117" href="Demos.HSP.html#51450" class="Function Operator">âŸ¦</a> <a id="51119" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51121" href="Demos.HSP.html#51450" class="Function Operator">âŸ§á´¬</a>  <a id="51125" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="51129" class="Symbol">(</a>     <a id="51135" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a>  <a id="51140" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="51143" href="Demos.HSP.html#50857" class="Bound">Ï</a><a id="51144" class="Symbol">))</a>  <a id="51148" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="51153" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="51167" href="Demos.HSP.html#50848" class="Bound">Ï†h</a> <a id="51170" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51172" class="Symbol">(</a><a id="51173" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a> <a id="51177" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="51179" href="Demos.HSP.html#50857" class="Bound">Ï</a><a id="51180" class="Symbol">)</a>        <a id="51189" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
       <a id="51198" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="51200" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51202" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>   <a id="51206" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="51210" class="Symbol">(</a><a id="51211" href="Demos.HSP.html#51381" class="Function">Ï†</a> <a id="51213" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="51216" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a>  <a id="51221" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="51224" href="Demos.HSP.html#50857" class="Bound">Ï</a><a id="51225" class="Symbol">)</a>   <a id="51229" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="51234" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="51239" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="51241" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51243" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a><a id="51244" class="Symbol">(Î»</a> <a id="51247" href="Demos.HSP.html#51247" class="Bound">_</a> <a id="51249" class="Symbol">â†’</a> <a id="51251" href="Demos.HSP.html#10940" class="Function">InvIsInverseÊ³</a> <a id="51265" href="Demos.HSP.html#50853" class="Bound">Ï†E</a><a id="51267" class="Symbol">)</a>  <a id="51270" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
       <a id="51279" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="51281" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51283" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>   <a id="51287" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>               <a id="51305" href="Demos.HSP.html#50857" class="Bound">Ï</a>    <a id="51310" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a> <a id="51312" class="Keyword">where</a>
   <a id="51321" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a> <a id="51325" class="Symbol">:</a> <a id="51327" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="51330" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a> <a id="51332" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="51334" class="Symbol">â†’</a> <a id="51336" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="51339" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="51341" href="Demos.HSP.html#19222" class="Function Operator">]</a>
   <a id="51346" href="Demos.HSP.html#51321" class="Function">Ï†â»Â¹</a> <a id="51350" class="Symbol">=</a> <a id="51352" href="Demos.HSP.html#12316" class="Function">SurjInv</a> <a id="51360" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="51362" href="Demos.HSP.html#50848" class="Bound">Ï†h</a> <a id="51365" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="51367" href="Demos.HSP.html#50853" class="Bound">Ï†E</a>
   <a id="51373" class="Keyword">private</a> <a id="51381" href="Demos.HSP.html#51381" class="Function">Ï†</a> <a id="51383" class="Symbol">=</a> <a id="51385" class="Symbol">(</a><a id="51386" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="51392" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="51394" href="Demos.HSP.html#50848" class="Bound">Ï†h</a> <a id="51397" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a><a id="51398" class="Symbol">)</a>
   <a id="51403" class="Keyword">open</a> <a id="51408" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="51420" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a>  <a id="51423" class="Keyword">using</a> <a id="51429" class="Symbol">()</a> <a id="51432" class="Keyword">renaming</a> <a id="51441" class="Symbol">(</a> <a id="51443" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="51447" class="Symbol">to</a> <a id="51450" class="Function Operator">âŸ¦_âŸ§á´¬</a><a id="51454" class="Symbol">)</a>
   <a id="51459" class="Keyword">open</a> <a id="51464" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="51476" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a>  <a id="51479" class="Keyword">using</a> <a id="51485" class="Symbol">(</a> <a id="51487" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="51491" class="Symbol">)</a> <a id="51493" class="Symbol">;</a> <a id="51495" class="Keyword">open</a> <a id="51500" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="51516" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="51519" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a> <a id="51521" href="Demos.HSP.html#19168" class="Function Operator">]</a>

 <a id="51525" href="Demos.HSP.html#51525" class="Function">âŠ§-S-invar</a> <a id="51535" class="Symbol">:</a> <a id="51537" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="51539" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="51541" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="51543" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="51545" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51547" class="Symbol">â†’</a> <a id="51549" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a> <a id="51551" href="Demos.HSP.html#37969" class="Function Operator">â‰¤</a> <a id="51553" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="51555" class="Symbol">â†’</a> <a id="51557" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a> <a id="51559" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="51561" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="51563" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="51565" href="Demos.HSP.html#50760" class="Bound">q</a>
 <a id="51568" href="Demos.HSP.html#51525" class="Function">âŠ§-S-invar</a> <a id="51578" href="Demos.HSP.html#51578" class="Bound">Apq</a> <a id="51582" href="Demos.HSP.html#51582" class="Bound">Bâ‰¤A</a> <a id="51586" href="Demos.HSP.html#51586" class="Bound">b</a> <a id="51588" class="Symbol">=</a> <a id="51590" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="51592" href="Demos.HSP.html#51582" class="Bound">Bâ‰¤A</a> <a id="51596" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a>
  <a id="51600" class="Symbol">(</a> <a id="51602" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="51612" href="Demos.HSP.html#52014" class="Function">h</a> <a id="51614" class="Symbol">(</a>  <a id="51617" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="51619" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="51621" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>   <a id="51625" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>       <a id="51635" href="Demos.HSP.html#51586" class="Bound">b</a><a id="51636" class="Symbol">)</a>  <a id="51639" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="51644" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="51658" href="Demos.HSP.html#51999" class="Function">hh</a> <a id="51661" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="51663" href="Demos.HSP.html#51586" class="Bound">b</a>  <a id="51666" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
         <a id="51677" href="Demos.HSP.html#51946" class="Function Operator">âŸ¦</a> <a id="51679" href="Demos.HSP.html#50758" class="Bound">p</a> <a id="51681" href="Demos.HSP.html#51946" class="Function Operator">âŸ§á´¬</a>  <a id="51685" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="51689" class="Symbol">(</a><a id="51690" href="Demos.HSP.html#52014" class="Function">h</a> <a id="51692" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="51695" href="Demos.HSP.html#51586" class="Bound">b</a><a id="51696" class="Symbol">)</a>  <a id="51699" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="51704" href="Demos.HSP.html#51578" class="Bound">Apq</a> <a id="51708" class="Symbol">(</a><a id="51709" href="Demos.HSP.html#52014" class="Function">h</a> <a id="51711" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="51713" href="Demos.HSP.html#51586" class="Bound">b</a><a id="51714" class="Symbol">)</a>           <a id="51726" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
         <a id="51737" href="Demos.HSP.html#51946" class="Function Operator">âŸ¦</a> <a id="51739" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51741" href="Demos.HSP.html#51946" class="Function Operator">âŸ§á´¬</a>  <a id="51745" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="51749" class="Symbol">(</a><a id="51750" href="Demos.HSP.html#52014" class="Function">h</a> <a id="51752" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a>  <a id="51755" href="Demos.HSP.html#51586" class="Bound">b</a><a id="51756" class="Symbol">)</a>  <a id="51759" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="51764" href="Demos.HSP.html#44811" class="Function">comm-hom-term</a> <a id="51778" href="Demos.HSP.html#51999" class="Function">hh</a> <a id="51781" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51783" href="Demos.HSP.html#51586" class="Bound">b</a>  <a id="51786" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
    <a id="51792" href="Demos.HSP.html#52014" class="Function">h</a> <a id="51794" class="Symbol">(</a>  <a id="51797" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="51799" href="Demos.HSP.html#50760" class="Bound">q</a> <a id="51801" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a>   <a id="51805" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>       <a id="51815" href="Demos.HSP.html#51586" class="Bound">b</a><a id="51816" class="Symbol">)</a>  <a id="51819" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a> <a id="51821" class="Symbol">)</a>
  <a id="51825" class="Keyword">where</a>
  <a id="51833" class="Keyword">open</a> <a id="51838" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="51854" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="51857" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="51859" href="Demos.HSP.html#19168" class="Function Operator">]</a>
  <a id="51863" class="Keyword">open</a> <a id="51868" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="51875" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="51878" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a> <a id="51880" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="51883" class="Keyword">using</a> <a id="51889" class="Symbol">(</a> <a id="51891" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="51895" class="Symbol">)</a>
  <a id="51899" class="Keyword">open</a> <a id="51904" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="51916" href="Demos.HSP.html#50722" class="Bound">ğ‘¨</a>  <a id="51919" class="Keyword">using</a> <a id="51925" class="Symbol">()</a> <a id="51928" class="Keyword">renaming</a> <a id="51937" class="Symbol">(</a> <a id="51939" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="51943" class="Symbol">to</a> <a id="51946" class="Function Operator">âŸ¦_âŸ§á´¬</a> <a id="51951" class="Symbol">)</a>
  <a id="51955" class="Keyword">open</a> <a id="51960" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="51972" href="Demos.HSP.html#50740" class="Bound">ğ‘©</a>  <a id="51975" class="Keyword">using</a> <a id="51981" class="Symbol">(</a> <a id="51983" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="51987" class="Symbol">)</a>
  <a id="51991" class="Keyword">private</a> <a id="51999" href="Demos.HSP.html#51999" class="Function">hh</a> <a id="52002" class="Symbol">=</a> <a id="52004" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="52006" href="Demos.HSP.html#51582" class="Bound">Bâ‰¤A</a> <a id="52010" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="52012" class="Symbol">;</a> <a id="52014" href="Demos.HSP.html#52014" class="Function">h</a> <a id="52016" class="Symbol">=</a> <a id="52018" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="52024" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="52026" href="Demos.HSP.html#51999" class="Function">hh</a> <a id="52029" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a>

</pre>
An identity satisfied by all algebras in an indexed collection is also satisfied by the product of algebras in the collection.

<pre class="Agda">

<a id="52185" class="Keyword">module</a> <a id="52192" href="Demos.HSP.html#52192" class="Module">_</a> <a id="52194" class="Symbol">{</a><a id="52195" href="Demos.HSP.html#52195" class="Bound">X</a> <a id="52197" class="Symbol">:</a> <a id="52199" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="52204" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="52205" class="Symbol">}{</a><a id="52207" href="Demos.HSP.html#52207" class="Bound">I</a> <a id="52209" class="Symbol">:</a> <a id="52211" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="52216" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="52217" class="Symbol">}(</a><a id="52219" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52221" class="Symbol">:</a> <a id="52223" href="Demos.HSP.html#52207" class="Bound">I</a> <a id="52225" class="Symbol">â†’</a> <a id="52227" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="52235" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="52237" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="52239" class="Symbol">){</a><a id="52241" href="Demos.HSP.html#52241" class="Bound">p</a> <a id="52243" href="Demos.HSP.html#52243" class="Bound">q</a> <a id="52245" class="Symbol">:</a> <a id="52247" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="52252" href="Demos.HSP.html#52195" class="Bound">X</a><a id="52253" class="Symbol">}</a> <a id="52255" class="Keyword">where</a>
 <a id="52262" href="Demos.HSP.html#52262" class="Function">âŠ§-P-invar</a> <a id="52272" class="Symbol">:</a> <a id="52274" class="Symbol">(âˆ€</a> <a id="52277" href="Demos.HSP.html#52277" class="Bound">i</a> <a id="52279" class="Symbol">â†’</a> <a id="52281" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52283" href="Demos.HSP.html#52277" class="Bound">i</a> <a id="52285" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="52287" href="Demos.HSP.html#52241" class="Bound">p</a> <a id="52289" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="52291" href="Demos.HSP.html#52243" class="Bound">q</a><a id="52292" class="Symbol">)</a> <a id="52294" class="Symbol">â†’</a> <a id="52296" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="52298" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52300" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="52302" href="Demos.HSP.html#52241" class="Bound">p</a> <a id="52304" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="52306" href="Demos.HSP.html#52243" class="Bound">q</a>
 <a id="52309" href="Demos.HSP.html#52262" class="Function">âŠ§-P-invar</a> <a id="52319" href="Demos.HSP.html#52319" class="Bound">ğ’œpq</a> <a id="52323" href="Demos.HSP.html#52323" class="Bound">a</a> <a id="52325" class="Symbol">=</a> <a id="52327" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="52336" href="Demos.HSP.html#52686" class="Function Operator">âŸ¦</a> <a id="52338" href="Demos.HSP.html#52241" class="Bound">p</a> <a id="52340" href="Demos.HSP.html#52686" class="Function Operator">âŸ§â‚</a>               <a id="52357" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>  <a id="52362" href="Demos.HSP.html#52323" class="Bound">a</a>                <a id="52379" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a>   <a id="52384" href="Demos.HSP.html#45344" class="Function">interp-prod</a> <a id="52396" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52398" href="Demos.HSP.html#52241" class="Bound">p</a> <a id="52400" href="Demos.HSP.html#52323" class="Bound">a</a>            <a id="52413" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="52418" class="Symbol">(</a> <a id="52420" class="Symbol">Î»</a> <a id="52422" href="Demos.HSP.html#52422" class="Bound">i</a> <a id="52424" class="Symbol">â†’</a> <a id="52426" class="Symbol">(</a><a id="52427" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="52429" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52431" href="Demos.HSP.html#52422" class="Bound">i</a> <a id="52433" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="52435" href="Demos.HSP.html#52241" class="Bound">p</a><a id="52436" class="Symbol">)</a>  <a id="52439" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>  <a id="52444" class="Symbol">Î»</a> <a id="52446" href="Demos.HSP.html#52446" class="Bound">x</a> <a id="52448" class="Symbol">â†’</a> <a id="52450" class="Symbol">(</a><a id="52451" href="Demos.HSP.html#52323" class="Bound">a</a> <a id="52453" href="Demos.HSP.html#52446" class="Bound">x</a><a id="52454" class="Symbol">)</a> <a id="52456" href="Demos.HSP.html#52422" class="Bound">i</a> <a id="52458" class="Symbol">)</a>  <a id="52461" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="52464" class="Symbol">(Î»</a> <a id="52467" href="Demos.HSP.html#52467" class="Bound">i</a> <a id="52469" class="Symbol">â†’</a> <a id="52471" href="Demos.HSP.html#52319" class="Bound">ğ’œpq</a> <a id="52475" href="Demos.HSP.html#52467" class="Bound">i</a> <a id="52477" class="Symbol">(Î»</a> <a id="52480" href="Demos.HSP.html#52480" class="Bound">x</a> <a id="52482" class="Symbol">â†’</a> <a id="52484" class="Symbol">(</a><a id="52485" href="Demos.HSP.html#52323" class="Bound">a</a> <a id="52487" href="Demos.HSP.html#52480" class="Bound">x</a><a id="52488" class="Symbol">)</a> <a id="52490" href="Demos.HSP.html#52467" class="Bound">i</a><a id="52491" class="Symbol">))</a>  <a id="52495" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
   <a id="52500" class="Symbol">(</a> <a id="52502" class="Symbol">Î»</a> <a id="52504" href="Demos.HSP.html#52504" class="Bound">i</a> <a id="52506" class="Symbol">â†’</a> <a id="52508" class="Symbol">(</a><a id="52509" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="52511" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52513" href="Demos.HSP.html#52504" class="Bound">i</a> <a id="52515" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="52517" href="Demos.HSP.html#52243" class="Bound">q</a><a id="52518" class="Symbol">)</a>  <a id="52521" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>  <a id="52526" class="Symbol">Î»</a> <a id="52528" href="Demos.HSP.html#52528" class="Bound">x</a> <a id="52530" class="Symbol">â†’</a> <a id="52532" class="Symbol">(</a><a id="52533" href="Demos.HSP.html#52323" class="Bound">a</a> <a id="52535" href="Demos.HSP.html#52528" class="Bound">x</a><a id="52536" class="Symbol">)</a> <a id="52538" href="Demos.HSP.html#52504" class="Bound">i</a> <a id="52540" class="Symbol">)</a>  <a id="52543" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a>  <a id="52548" href="Demos.HSP.html#45344" class="Function">interp-prod</a> <a id="52560" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52562" href="Demos.HSP.html#52243" class="Bound">q</a> <a id="52564" href="Demos.HSP.html#52323" class="Bound">a</a>            <a id="52577" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
   <a id="52582" href="Demos.HSP.html#52686" class="Function Operator">âŸ¦</a> <a id="52584" href="Demos.HSP.html#52243" class="Bound">q</a> <a id="52586" href="Demos.HSP.html#52686" class="Function Operator">âŸ§â‚</a>               <a id="52603" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a>  <a id="52608" href="Demos.HSP.html#52323" class="Bound">a</a>                <a id="52625" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a> <a id="52627" class="Keyword">where</a>
  <a id="52635" class="Keyword">open</a> <a id="52640" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="52652" class="Symbol">(</a><a id="52653" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="52655" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a><a id="52656" class="Symbol">)</a>  <a id="52659" class="Keyword">using</a> <a id="52665" class="Symbol">()</a> <a id="52668" class="Keyword">renaming</a> <a id="52677" class="Symbol">(</a> <a id="52679" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="52683" class="Symbol">to</a> <a id="52686" class="Function Operator">âŸ¦_âŸ§â‚</a> <a id="52691" class="Symbol">)</a>
  <a id="52695" class="Keyword">open</a> <a id="52700" href="Demos.HSP.html#42454" class="Module">Environment</a>        <a id="52719" class="Keyword">using</a> <a id="52725" class="Symbol">(</a> <a id="52727" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="52731" class="Symbol">)</a>
  <a id="52735" class="Keyword">open</a> <a id="52740" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="52747" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="52750" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="52752" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52754" href="Demos.HSP.html#19168" class="Function Operator">]</a>    <a id="52759" class="Keyword">using</a> <a id="52765" class="Symbol">(</a> <a id="52767" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="52771" class="Symbol">)</a>
  <a id="52775" class="Keyword">open</a> <a id="52780" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="52796" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="52799" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="52801" href="Demos.HSP.html#52219" class="Bound">ğ’œ</a> <a id="52803" href="Demos.HSP.html#19168" class="Function Operator">]</a>

</pre>

A *variety* is a class of `ğ‘†`-algebras that is closed under the taking of homomorphic images, subalgebras, and arbitrary products. If we define `V ğ’¦ := H (S (P ğ’¦))`, then `ğ’¦` is a variety iff `V ğ’¦  âŠ† ğ’¦`.
(The converse inclusion holds by virtue of the fact that `V` is a composition of closure operators.)
The class `V ğ’¦` is called the *varietal closure* of `ğ’¦`. Here is how we define `V` in type theory.
(The explicit universe level declarations that appear in the definition are needed for disambiguation.)

<pre class="Agda">

<a id="53341" class="Keyword">module</a> <a id="53348" href="Demos.HSP.html#53348" class="Module">_</a>  <a id="53351" class="Symbol">{</a><a id="53352" href="Demos.HSP.html#53352" class="Bound">Î±</a> <a id="53354" href="Demos.HSP.html#53354" class="Bound">Ïáµƒ</a> <a id="53357" href="Demos.HSP.html#53357" class="Bound">Î²</a> <a id="53359" href="Demos.HSP.html#53359" class="Bound">Ïáµ‡</a> <a id="53362" href="Demos.HSP.html#53362" class="Bound">Î³</a> <a id="53364" href="Demos.HSP.html#53364" class="Bound">Ïá¶œ</a> <a id="53367" href="Demos.HSP.html#53367" class="Bound">Î´</a> <a id="53369" href="Demos.HSP.html#53369" class="Bound">Ïáµˆ</a> <a id="53372" class="Symbol">:</a> <a id="53374" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="53379" class="Symbol">}</a> <a id="53381" class="Keyword">where</a>
 <a id="53388" class="Keyword">private</a> <a id="53396" href="Demos.HSP.html#53396" class="Function">a</a> <a id="53398" class="Symbol">=</a> <a id="53400" href="Demos.HSP.html#53352" class="Bound">Î±</a> <a id="53402" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53404" href="Demos.HSP.html#53354" class="Bound">Ïáµƒ</a> <a id="53407" class="Symbol">;</a> <a id="53409" href="Demos.HSP.html#53409" class="Function">b</a> <a id="53411" class="Symbol">=</a> <a id="53413" href="Demos.HSP.html#53357" class="Bound">Î²</a> <a id="53415" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53417" href="Demos.HSP.html#53359" class="Bound">Ïáµ‡</a>
 <a id="53421" href="Demos.HSP.html#53421" class="Function">V</a> <a id="53423" class="Symbol">:</a> <a id="53425" class="Symbol">âˆ€</a> <a id="53427" href="Demos.HSP.html#53427" class="Bound">â„“</a> <a id="53429" href="Demos.HSP.html#53429" class="Bound">Î¹</a> <a id="53431" class="Symbol">â†’</a> <a id="53433" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="53437" class="Symbol">(</a><a id="53438" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="53446" href="Demos.HSP.html#53352" class="Bound">Î±</a> <a id="53448" href="Demos.HSP.html#53354" class="Bound">Ïáµƒ</a><a id="53450" class="Symbol">)</a> <a id="53452" class="Symbol">(</a><a id="53453" href="Demos.HSP.html#53396" class="Function">a</a> <a id="53455" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53457" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="53460" href="Demos.HSP.html#53427" class="Bound">â„“</a><a id="53461" class="Symbol">)</a> <a id="53463" class="Symbol">â†’</a>  <a id="53466" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="53470" class="Symbol">(</a><a id="53471" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="53479" href="Demos.HSP.html#53367" class="Bound">Î´</a> <a id="53481" href="Demos.HSP.html#53369" class="Bound">Ïáµˆ</a><a id="53483" class="Symbol">)</a> <a id="53485" class="Symbol">_</a>
 <a id="53488" href="Demos.HSP.html#53421" class="Function">V</a> <a id="53490" href="Demos.HSP.html#53490" class="Bound">â„“</a> <a id="53492" href="Demos.HSP.html#53492" class="Bound">Î¹</a> <a id="53494" href="Demos.HSP.html#53494" class="Bound">ğ’¦</a> <a id="53496" class="Symbol">=</a> <a id="53498" href="Demos.HSP.html#50115" class="Function">H</a><a id="53499" class="Symbol">{</a><a id="53500" href="Demos.HSP.html#53362" class="Bound">Î³</a><a id="53501" class="Symbol">}{</a><a id="53503" href="Demos.HSP.html#53364" class="Bound">Ïá¶œ</a><a id="53505" class="Symbol">}{</a><a id="53507" href="Demos.HSP.html#53367" class="Bound">Î´</a><a id="53508" class="Symbol">}{</a><a id="53510" href="Demos.HSP.html#53369" class="Bound">Ïáµˆ</a><a id="53512" class="Symbol">}</a> <a id="53514" class="Symbol">(</a><a id="53515" href="Demos.HSP.html#53396" class="Function">a</a> <a id="53517" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53519" href="Demos.HSP.html#53409" class="Function">b</a> <a id="53521" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53523" href="Demos.HSP.html#53490" class="Bound">â„“</a> <a id="53525" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53527" href="Demos.HSP.html#53492" class="Bound">Î¹</a><a id="53528" class="Symbol">)</a> <a id="53530" class="Symbol">(</a><a id="53531" href="Demos.HSP.html#50238" class="Function">S</a><a id="53532" class="Symbol">{</a><a id="53533" href="Demos.HSP.html#53357" class="Bound">Î²</a><a id="53534" class="Symbol">}{</a><a id="53536" href="Demos.HSP.html#53359" class="Bound">Ïáµ‡</a><a id="53538" class="Symbol">}</a> <a id="53540" class="Symbol">(</a><a id="53541" href="Demos.HSP.html#53396" class="Function">a</a> <a id="53543" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53545" href="Demos.HSP.html#53490" class="Bound">â„“</a> <a id="53547" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="53549" href="Demos.HSP.html#53492" class="Bound">Î¹</a><a id="53550" class="Symbol">)</a> <a id="53552" class="Symbol">(</a><a id="53553" href="Demos.HSP.html#50350" class="Function">P</a> <a id="53555" href="Demos.HSP.html#53490" class="Bound">â„“</a> <a id="53557" href="Demos.HSP.html#53492" class="Bound">Î¹</a> <a id="53559" href="Demos.HSP.html#53494" class="Bound">ğ’¦</a><a id="53560" class="Symbol">))</a>

</pre>

The classes `H ğ’¦`, `S ğ’¦`, `P ğ’¦`, and `V ğ’¦` all satisfy the
same term identities.  We will only use a subset of the inclusions needed to prove this
assertion. (The others are included in the `Setoid.Varieties.Preservation` module of the [agda-algebras][] library.) First, the closure operator `H` preserves the identities modeled by the given class; this follows almost immediately from the invariance lemma `âŠ§-H-invar`.

<pre class="Agda">

<a id="54011" class="Keyword">module</a> <a id="54018" href="Demos.HSP.html#54018" class="Module">_</a>  <a id="54021" class="Symbol">{</a><a id="54022" href="Demos.HSP.html#54022" class="Bound">X</a> <a id="54024" class="Symbol">:</a> <a id="54026" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="54031" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="54032" class="Symbol">}{</a><a id="54034" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54036" class="Symbol">:</a> <a id="54038" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="54042" class="Symbol">(</a><a id="54043" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="54051" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="54053" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="54055" class="Symbol">)</a> <a id="54057" class="Symbol">(</a><a id="54058" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="54060" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="54062" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="54065" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="54067" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="54070" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="54071" class="Symbol">)}{</a><a id="54074" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54076" href="Demos.HSP.html#54076" class="Bound">q</a> <a id="54078" class="Symbol">:</a> <a id="54080" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="54085" href="Demos.HSP.html#54022" class="Bound">X</a><a id="54086" class="Symbol">}</a> <a id="54088" class="Keyword">where</a>
 <a id="54095" href="Demos.HSP.html#54095" class="Function">H-id1</a> <a id="54101" class="Symbol">:</a> <a id="54103" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54105" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54107" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54109" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54111" href="Demos.HSP.html#54076" class="Bound">q</a> <a id="54113" class="Symbol">â†’</a> <a id="54115" href="Demos.HSP.html#50115" class="Function">H</a><a id="54116" class="Symbol">{</a><a id="54117" class="Argument">Î²</a> <a id="54119" class="Symbol">=</a> <a id="54121" href="Demos.HSP.html#54051" class="Bound">Î±</a><a id="54122" class="Symbol">}{</a><a id="54124" href="Demos.HSP.html#54053" class="Bound">Ïáµƒ</a><a id="54126" class="Symbol">}</a><a id="54127" href="Demos.HSP.html#54070" class="Bound">â„“</a> <a id="54129" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54131" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54133" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54135" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54137" href="Demos.HSP.html#54076" class="Bound">q</a>
 <a id="54140" href="Demos.HSP.html#54095" class="Function">H-id1</a> <a id="54146" href="Demos.HSP.html#54146" class="Bound">Ïƒ</a> <a id="54148" href="Demos.HSP.html#54148" class="Bound">ğ‘©</a> <a id="54150" class="Symbol">(</a><a id="54151" href="Demos.HSP.html#54151" class="Bound">ğ‘¨</a> <a id="54153" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54155" href="Demos.HSP.html#54155" class="Bound">kA</a> <a id="54158" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54160" href="Demos.HSP.html#54160" class="Bound">BimgA</a><a id="54165" class="Symbol">)</a> <a id="54167" class="Symbol">=</a> <a id="54169" href="Demos.HSP.html#50779" class="Function">âŠ§-H-invar</a><a id="54178" class="Symbol">{</a><a id="54179" class="Argument">p</a> <a id="54181" class="Symbol">=</a> <a id="54183" href="Demos.HSP.html#54074" class="Bound">p</a><a id="54184" class="Symbol">}{</a><a id="54186" href="Demos.HSP.html#54076" class="Bound">q</a><a id="54187" class="Symbol">}</a> <a id="54189" class="Symbol">(</a><a id="54190" href="Demos.HSP.html#54146" class="Bound">Ïƒ</a> <a id="54192" href="Demos.HSP.html#54151" class="Bound">ğ‘¨</a> <a id="54194" href="Demos.HSP.html#54155" class="Bound">kA</a><a id="54196" class="Symbol">)</a> <a id="54198" href="Demos.HSP.html#54160" class="Bound">BimgA</a>

</pre>
The analogous preservation result for `S` is a consequence of the invariance lemma `âŠ§-S-invar`; the converse, which we call `S-id2`, has an equally straightforward proof.

<pre class="Agda">

 <a id="54403" href="Demos.HSP.html#54403" class="Function">S-id1</a> <a id="54409" class="Symbol">:</a> <a id="54411" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54413" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54415" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54417" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54419" href="Demos.HSP.html#54076" class="Bound">q</a> <a id="54421" class="Symbol">â†’</a> <a id="54423" href="Demos.HSP.html#50238" class="Function">S</a><a id="54424" class="Symbol">{</a><a id="54425" class="Argument">Î²</a> <a id="54427" class="Symbol">=</a> <a id="54429" href="Demos.HSP.html#54051" class="Bound">Î±</a><a id="54430" class="Symbol">}{</a><a id="54432" href="Demos.HSP.html#54053" class="Bound">Ïáµƒ</a><a id="54434" class="Symbol">}</a><a id="54435" href="Demos.HSP.html#54070" class="Bound">â„“</a> <a id="54437" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54439" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54441" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54443" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54445" href="Demos.HSP.html#54076" class="Bound">q</a>
 <a id="54448" href="Demos.HSP.html#54403" class="Function">S-id1</a> <a id="54454" href="Demos.HSP.html#54454" class="Bound">Ïƒ</a> <a id="54456" href="Demos.HSP.html#54456" class="Bound">ğ‘©</a> <a id="54458" class="Symbol">(</a><a id="54459" href="Demos.HSP.html#54459" class="Bound">ğ‘¨</a> <a id="54461" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54463" href="Demos.HSP.html#54463" class="Bound">kA</a> <a id="54466" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54468" href="Demos.HSP.html#54468" class="Bound">Bâ‰¤A</a><a id="54471" class="Symbol">)</a> <a id="54473" class="Symbol">=</a> <a id="54475" href="Demos.HSP.html#51525" class="Function">âŠ§-S-invar</a><a id="54484" class="Symbol">{</a><a id="54485" class="Argument">p</a> <a id="54487" class="Symbol">=</a> <a id="54489" href="Demos.HSP.html#54074" class="Bound">p</a><a id="54490" class="Symbol">}{</a><a id="54492" href="Demos.HSP.html#54076" class="Bound">q</a><a id="54493" class="Symbol">}</a> <a id="54495" class="Symbol">(</a><a id="54496" href="Demos.HSP.html#54454" class="Bound">Ïƒ</a> <a id="54498" href="Demos.HSP.html#54459" class="Bound">ğ‘¨</a> <a id="54500" href="Demos.HSP.html#54463" class="Bound">kA</a><a id="54502" class="Symbol">)</a> <a id="54504" href="Demos.HSP.html#54468" class="Bound">Bâ‰¤A</a>

 <a id="54510" href="Demos.HSP.html#54510" class="Function">S-id2</a> <a id="54516" class="Symbol">:</a> <a id="54518" href="Demos.HSP.html#50238" class="Function">S</a> <a id="54520" href="Demos.HSP.html#54070" class="Bound">â„“</a> <a id="54522" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54524" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54526" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54528" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54530" href="Demos.HSP.html#54076" class="Bound">q</a> <a id="54532" class="Symbol">â†’</a> <a id="54534" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54536" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54538" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54540" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54542" href="Demos.HSP.html#54076" class="Bound">q</a>
 <a id="54545" href="Demos.HSP.html#54510" class="Function">S-id2</a> <a id="54551" href="Demos.HSP.html#54551" class="Bound">Spq</a> <a id="54555" href="Demos.HSP.html#54555" class="Bound">ğ‘¨</a> <a id="54557" href="Demos.HSP.html#54557" class="Bound">kA</a> <a id="54560" class="Symbol">=</a> <a id="54562" href="Demos.HSP.html#54551" class="Bound">Spq</a> <a id="54566" href="Demos.HSP.html#54555" class="Bound">ğ‘¨</a> <a id="54568" class="Symbol">(</a><a id="54569" href="Demos.HSP.html#54555" class="Bound">ğ‘¨</a> <a id="54571" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54573" class="Symbol">(</a><a id="54574" href="Demos.HSP.html#54557" class="Bound">kA</a> <a id="54577" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54579" href="Demos.HSP.html#38257" class="Function">â‰¤-reflexive</a><a id="54590" class="Symbol">))</a>

</pre>
The [agda-algebras][] library includes analogous pairs of implications for `P`, `H`, and `V`, called `P-id1`, `P-id2`, `H-id1`, etc. Here we only need the first implication in each case, so we omit the others.

<pre class="Agda">

 <a id="54831" href="Demos.HSP.html#54831" class="Function">P-id1</a> <a id="54837" class="Symbol">:</a> <a id="54839" class="Symbol">âˆ€{</a><a id="54841" href="Demos.HSP.html#54841" class="Bound">Î¹</a><a id="54842" class="Symbol">}</a> <a id="54844" class="Symbol">â†’</a> <a id="54846" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54848" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54850" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54852" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54854" href="Demos.HSP.html#54076" class="Bound">q</a> <a id="54856" class="Symbol">â†’</a> <a id="54858" href="Demos.HSP.html#50350" class="Function">P</a><a id="54859" class="Symbol">{</a><a id="54860" class="Argument">Î²</a> <a id="54862" class="Symbol">=</a> <a id="54864" href="Demos.HSP.html#54051" class="Bound">Î±</a><a id="54865" class="Symbol">}{</a><a id="54867" href="Demos.HSP.html#54053" class="Bound">Ïáµƒ</a><a id="54869" class="Symbol">}</a><a id="54870" href="Demos.HSP.html#54070" class="Bound">â„“</a> <a id="54872" href="Demos.HSP.html#54841" class="Bound">Î¹</a> <a id="54874" href="Demos.HSP.html#54034" class="Bound">ğ’¦</a> <a id="54876" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="54878" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54880" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="54882" href="Demos.HSP.html#54076" class="Bound">q</a>
 <a id="54885" href="Demos.HSP.html#54831" class="Function">P-id1</a> <a id="54891" href="Demos.HSP.html#54891" class="Bound">Ïƒ</a> <a id="54893" href="Demos.HSP.html#54893" class="Bound">ğ‘¨</a> <a id="54895" class="Symbol">(</a><a id="54896" href="Demos.HSP.html#54896" class="Bound">I</a> <a id="54898" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54900" href="Demos.HSP.html#54900" class="Bound">ğ’œ</a> <a id="54902" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54904" href="Demos.HSP.html#54904" class="Bound">kA</a> <a id="54907" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54909" href="Demos.HSP.html#54909" class="Bound">Aâ‰…â¨…A</a><a id="54913" class="Symbol">)</a> <a id="54915" class="Symbol">=</a> <a id="54917" href="Demos.HSP.html#47880" class="Function">âŠ§-I-invar</a> <a id="54927" href="Demos.HSP.html#54893" class="Bound">ğ‘¨</a> <a id="54929" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54931" href="Demos.HSP.html#54076" class="Bound">q</a> <a id="54933" href="Demos.HSP.html#54957" class="Function">IH</a> <a id="54936" class="Symbol">(</a><a id="54937" href="Demos.HSP.html#34024" class="Function">â‰…-sym</a> <a id="54943" href="Demos.HSP.html#54909" class="Bound">Aâ‰…â¨…A</a><a id="54947" class="Symbol">)</a> <a id="54949" class="Keyword">where</a>
  <a id="54957" href="Demos.HSP.html#54957" class="Function">IH</a> <a id="54960" class="Symbol">:</a> <a id="54962" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="54964" href="Demos.HSP.html#54900" class="Bound">ğ’œ</a> <a id="54966" href="Demos.HSP.html#46800" class="Function Operator">âŠ§</a> <a id="54968" href="Demos.HSP.html#54074" class="Bound">p</a> <a id="54970" href="Demos.HSP.html#46800" class="Function Operator">â‰ˆ</a> <a id="54972" href="Demos.HSP.html#54076" class="Bound">q</a>
  <a id="54976" href="Demos.HSP.html#54957" class="Function">IH</a> <a id="54979" class="Symbol">=</a> <a id="54981" href="Demos.HSP.html#52262" class="Function">âŠ§-P-invar</a> <a id="54991" href="Demos.HSP.html#54900" class="Bound">ğ’œ</a> <a id="54993" class="Symbol">{</a><a id="54994" href="Demos.HSP.html#54074" class="Bound">p</a><a id="54995" class="Symbol">}{</a><a id="54997" href="Demos.HSP.html#54076" class="Bound">q</a><a id="54998" class="Symbol">}</a> <a id="55000" class="Symbol">Î»</a> <a id="55002" href="Demos.HSP.html#55002" class="Bound">i</a> <a id="55004" class="Symbol">â†’</a> <a id="55006" href="Demos.HSP.html#54891" class="Bound">Ïƒ</a> <a id="55008" class="Symbol">(</a><a id="55009" href="Demos.HSP.html#54900" class="Bound">ğ’œ</a> <a id="55011" href="Demos.HSP.html#55002" class="Bound">i</a><a id="55012" class="Symbol">)</a> <a id="55014" class="Symbol">(</a><a id="55015" href="Demos.HSP.html#54904" class="Bound">kA</a> <a id="55018" href="Demos.HSP.html#55002" class="Bound">i</a><a id="55019" class="Symbol">)</a>

<a id="55022" class="Keyword">module</a> <a id="55029" href="Demos.HSP.html#55029" class="Module">_</a> <a id="55031" class="Symbol">{</a><a id="55032" href="Demos.HSP.html#55032" class="Bound">X</a> <a id="55034" class="Symbol">:</a> <a id="55036" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="55041" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="55042" class="Symbol">}{</a><a id="55044" href="Demos.HSP.html#55044" class="Bound">Î¹</a> <a id="55046" class="Symbol">:</a> <a id="55048" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="55053" class="Symbol">}(</a><a id="55055" href="Demos.HSP.html#55055" class="Bound">â„“</a> <a id="55057" class="Symbol">:</a> <a id="55059" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="55064" class="Symbol">){</a><a id="55066" href="Demos.HSP.html#55066" class="Bound">ğ’¦</a> <a id="55068" class="Symbol">:</a> <a id="55070" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="55074" class="Symbol">(</a><a id="55075" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="55083" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="55085" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="55087" class="Symbol">)(</a><a id="55089" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="55091" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="55093" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="55096" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="55098" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="55101" href="Demos.HSP.html#55055" class="Bound">â„“</a><a id="55102" class="Symbol">)}{</a><a id="55105" href="Demos.HSP.html#55105" class="Bound">p</a> <a id="55107" href="Demos.HSP.html#55107" class="Bound">q</a> <a id="55109" class="Symbol">:</a> <a id="55111" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="55116" href="Demos.HSP.html#55032" class="Bound">X</a><a id="55117" class="Symbol">}</a> <a id="55119" class="Keyword">where</a>
 <a id="55126" class="Keyword">private</a> <a id="55134" href="Demos.HSP.html#55134" class="Function">aâ„“Î¹</a> <a id="55138" class="Symbol">=</a> <a id="55140" href="Demos.HSP.html#55083" class="Bound">Î±</a> <a id="55142" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="55144" href="Demos.HSP.html#55085" class="Bound">Ïáµƒ</a> <a id="55147" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="55149" href="Demos.HSP.html#55055" class="Bound">â„“</a> <a id="55151" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="55153" href="Demos.HSP.html#55044" class="Bound">Î¹</a>
 <a id="55156" href="Demos.HSP.html#55156" class="Function">V-id1</a> <a id="55162" class="Symbol">:</a> <a id="55164" href="Demos.HSP.html#55066" class="Bound">ğ’¦</a> <a id="55166" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="55168" href="Demos.HSP.html#55105" class="Bound">p</a> <a id="55170" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="55172" href="Demos.HSP.html#55107" class="Bound">q</a> <a id="55174" class="Symbol">â†’</a> <a id="55176" href="Demos.HSP.html#53421" class="Function">V</a> <a id="55178" href="Demos.HSP.html#55055" class="Bound">â„“</a> <a id="55180" href="Demos.HSP.html#55044" class="Bound">Î¹</a> <a id="55182" href="Demos.HSP.html#55066" class="Bound">ğ’¦</a> <a id="55184" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="55186" href="Demos.HSP.html#55105" class="Bound">p</a> <a id="55188" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="55190" href="Demos.HSP.html#55107" class="Bound">q</a>
 <a id="55193" href="Demos.HSP.html#55156" class="Function">V-id1</a> <a id="55199" href="Demos.HSP.html#55199" class="Bound">Ïƒ</a> <a id="55201" href="Demos.HSP.html#55201" class="Bound">ğ‘©</a> <a id="55203" class="Symbol">(</a><a id="55204" href="Demos.HSP.html#55204" class="Bound">ğ‘¨</a> <a id="55206" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55208" class="Symbol">(</a><a id="55209" href="Demos.HSP.html#55209" class="Bound">â¨…A</a> <a id="55212" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55214" href="Demos.HSP.html#55214" class="Bound">pâ¨…A</a> <a id="55218" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55220" href="Demos.HSP.html#55220" class="Bound">Aâ‰¤â¨…A</a><a id="55224" class="Symbol">)</a> <a id="55226" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55228" href="Demos.HSP.html#55228" class="Bound">BimgA</a><a id="55233" class="Symbol">)</a> <a id="55235" class="Symbol">=</a>
  <a id="55239" href="Demos.HSP.html#54095" class="Function">H-id1</a><a id="55244" class="Symbol">{</a><a id="55245" class="Argument">â„“</a> <a id="55247" class="Symbol">=</a> <a id="55249" href="Demos.HSP.html#55134" class="Function">aâ„“Î¹</a><a id="55252" class="Symbol">}{</a><a id="55254" class="Argument">ğ’¦</a> <a id="55256" class="Symbol">=</a> <a id="55258" href="Demos.HSP.html#50238" class="Function">S</a> <a id="55260" href="Demos.HSP.html#55134" class="Function">aâ„“Î¹</a> <a id="55264" class="Symbol">(</a><a id="55265" href="Demos.HSP.html#50350" class="Function">P</a> <a id="55267" class="Symbol">{</a><a id="55268" class="Argument">Î²</a> <a id="55270" class="Symbol">=</a> <a id="55272" href="Demos.HSP.html#55083" class="Bound">Î±</a><a id="55273" class="Symbol">}{</a><a id="55275" href="Demos.HSP.html#55085" class="Bound">Ïáµƒ</a><a id="55277" class="Symbol">}</a><a id="55278" href="Demos.HSP.html#55055" class="Bound">â„“</a> <a id="55280" href="Demos.HSP.html#55044" class="Bound">Î¹</a> <a id="55282" href="Demos.HSP.html#55066" class="Bound">ğ’¦</a><a id="55283" class="Symbol">)}{</a><a id="55286" class="Argument">p</a> <a id="55288" class="Symbol">=</a> <a id="55290" href="Demos.HSP.html#55105" class="Bound">p</a><a id="55291" class="Symbol">}{</a><a id="55293" href="Demos.HSP.html#55107" class="Bound">q</a><a id="55294" class="Symbol">}</a> <a id="55296" href="Demos.HSP.html#55401" class="Function">spKâŠ§pq</a> <a id="55303" href="Demos.HSP.html#55201" class="Bound">ğ‘©</a> <a id="55305" class="Symbol">(</a><a id="55306" href="Demos.HSP.html#55204" class="Bound">ğ‘¨</a> <a id="55308" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55310" class="Symbol">(</a><a id="55311" href="Demos.HSP.html#55334" class="Function">spA</a> <a id="55315" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55317" href="Demos.HSP.html#55228" class="Bound">BimgA</a><a id="55322" class="Symbol">))</a> <a id="55325" class="Keyword">where</a>
   <a id="55334" href="Demos.HSP.html#55334" class="Function">spA</a> <a id="55338" class="Symbol">:</a> <a id="55340" href="Demos.HSP.html#55204" class="Bound">ğ‘¨</a> <a id="55342" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="55344" href="Demos.HSP.html#50238" class="Function">S</a> <a id="55346" href="Demos.HSP.html#55134" class="Function">aâ„“Î¹</a> <a id="55350" class="Symbol">(</a><a id="55351" href="Demos.HSP.html#50350" class="Function">P</a> <a id="55353" class="Symbol">{</a><a id="55354" class="Argument">Î²</a> <a id="55356" class="Symbol">=</a> <a id="55358" href="Demos.HSP.html#55083" class="Bound">Î±</a><a id="55359" class="Symbol">}{</a><a id="55361" href="Demos.HSP.html#55085" class="Bound">Ïáµƒ</a><a id="55363" class="Symbol">}</a><a id="55364" href="Demos.HSP.html#55055" class="Bound">â„“</a> <a id="55366" href="Demos.HSP.html#55044" class="Bound">Î¹</a> <a id="55368" href="Demos.HSP.html#55066" class="Bound">ğ’¦</a><a id="55369" class="Symbol">)</a>
   <a id="55374" href="Demos.HSP.html#55334" class="Function">spA</a> <a id="55378" class="Symbol">=</a> <a id="55380" href="Demos.HSP.html#55209" class="Bound">â¨…A</a> <a id="55383" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55385" class="Symbol">(</a><a id="55386" href="Demos.HSP.html#55214" class="Bound">pâ¨…A</a> <a id="55390" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55392" href="Demos.HSP.html#55220" class="Bound">Aâ‰¤â¨…A</a><a id="55396" class="Symbol">)</a>
   <a id="55401" href="Demos.HSP.html#55401" class="Function">spKâŠ§pq</a> <a id="55408" class="Symbol">:</a> <a id="55410" href="Demos.HSP.html#50238" class="Function">S</a> <a id="55412" href="Demos.HSP.html#55134" class="Function">aâ„“Î¹</a> <a id="55416" class="Symbol">(</a><a id="55417" href="Demos.HSP.html#50350" class="Function">P</a> <a id="55419" href="Demos.HSP.html#55055" class="Bound">â„“</a> <a id="55421" href="Demos.HSP.html#55044" class="Bound">Î¹</a> <a id="55423" href="Demos.HSP.html#55066" class="Bound">ğ’¦</a><a id="55424" class="Symbol">)</a> <a id="55426" href="Demos.HSP.html#46898" class="Function Operator">âŠ«</a> <a id="55428" href="Demos.HSP.html#55105" class="Bound">p</a> <a id="55430" href="Demos.HSP.html#46898" class="Function Operator">â‰ˆ</a> <a id="55432" href="Demos.HSP.html#55107" class="Bound">q</a>
   <a id="55437" href="Demos.HSP.html#55401" class="Function">spKâŠ§pq</a> <a id="55444" class="Symbol">=</a> <a id="55446" href="Demos.HSP.html#54403" class="Function">S-id1</a><a id="55451" class="Symbol">{</a><a id="55452" class="Argument">â„“</a> <a id="55454" class="Symbol">=</a> <a id="55456" href="Demos.HSP.html#55134" class="Function">aâ„“Î¹</a><a id="55459" class="Symbol">}{</a><a id="55461" class="Argument">p</a> <a id="55463" class="Symbol">=</a> <a id="55465" href="Demos.HSP.html#55105" class="Bound">p</a><a id="55466" class="Symbol">}{</a><a id="55468" href="Demos.HSP.html#55107" class="Bound">q</a><a id="55469" class="Symbol">}</a> <a id="55471" class="Symbol">(</a><a id="55472" href="Demos.HSP.html#54831" class="Function">P-id1</a><a id="55477" class="Symbol">{</a><a id="55478" class="Argument">â„“</a> <a id="55480" class="Symbol">=</a> <a id="55482" href="Demos.HSP.html#55055" class="Bound">â„“</a><a id="55483" class="Symbol">}</a> <a id="55485" class="Symbol">{</a><a id="55486" class="Argument">ğ’¦</a> <a id="55488" class="Symbol">=</a> <a id="55490" href="Demos.HSP.html#55066" class="Bound">ğ’¦</a><a id="55491" class="Symbol">}{</a><a id="55493" class="Argument">p</a> <a id="55495" class="Symbol">=</a> <a id="55497" href="Demos.HSP.html#55105" class="Bound">p</a><a id="55498" class="Symbol">}{</a><a id="55500" href="Demos.HSP.html#55107" class="Bound">q</a><a id="55501" class="Symbol">}</a> <a id="55503" href="Demos.HSP.html#55199" class="Bound">Ïƒ</a><a id="55504" class="Symbol">)</a>
</pre>


### <a id="free-algebras">Free Algebras</a>

#### <a id="the-absolutely-free-algebra">The absolutely free algebra</a>
 <!-- {#the-absolutely-free-algebra .unnumbered} -->

The term algebra `ğ‘» X` is the *absolutely free* `ğ‘†`-algebra over `X`.
That is, for every `ğ‘†`-algebra `ğ‘¨`, the following hold.
* Every function from `X` to `ğ•Œ[ ğ‘¨ ]` lifts to a homomorphism from `ğ‘» X` to `ğ‘¨`.
* That homomorphism is unique.
Here we formalize the first of these properties by defining the lifting function `free-lift`
and its setoid analog `free-lift-func`, and then proving the latter is a homomorphism.
(For the proof of uniqueness, see the `Setoid.Terms.Properties` module of the [agda-algebras][] library.)

<pre class="Agda">

<a id="56230" class="Keyword">module</a> <a id="56237" href="Demos.HSP.html#56237" class="Module">_</a> <a id="56239" class="Symbol">{</a><a id="56240" href="Demos.HSP.html#56240" class="Bound">X</a> <a id="56242" class="Symbol">:</a> <a id="56244" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="56249" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="56250" class="Symbol">}{</a><a id="56252" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a> <a id="56254" class="Symbol">:</a> <a id="56256" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="56264" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="56266" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="56268" class="Symbol">}(</a><a id="56270" href="Demos.HSP.html#56270" class="Bound">h</a> <a id="56272" class="Symbol">:</a> <a id="56274" href="Demos.HSP.html#56240" class="Bound">X</a> <a id="56276" class="Symbol">â†’</a> <a id="56278" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="56281" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a> <a id="56283" href="Demos.HSP.html#19222" class="Function Operator">]</a><a id="56284" class="Symbol">)</a> <a id="56286" class="Keyword">where</a>
 <a id="56293" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="56303" class="Symbol">:</a> <a id="56305" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="56308" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="56310" href="Demos.HSP.html#56240" class="Bound">X</a> <a id="56312" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="56314" class="Symbol">â†’</a> <a id="56316" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="56319" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a> <a id="56321" href="Demos.HSP.html#19222" class="Function Operator">]</a>
 <a id="56324" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="56334" class="Symbol">(</a><a id="56335" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="56337" href="Demos.HSP.html#56337" class="Bound">x</a><a id="56338" class="Symbol">)</a>       <a id="56346" class="Symbol">=</a> <a id="56348" href="Demos.HSP.html#56270" class="Bound">h</a> <a id="56350" href="Demos.HSP.html#56337" class="Bound">x</a>
 <a id="56353" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="56363" class="Symbol">(</a><a id="56364" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="56369" href="Demos.HSP.html#56369" class="Bound">f</a> <a id="56371" href="Demos.HSP.html#56371" class="Bound">t</a><a id="56372" class="Symbol">)</a>  <a id="56375" class="Symbol">=</a> <a id="56377" class="Symbol">(</a><a id="56378" href="Demos.HSP.html#56369" class="Bound">f</a> <a id="56380" href="Demos.HSP.html#19281" class="Function Operator">Ì‚</a> <a id="56382" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a><a id="56383" class="Symbol">)</a> <a id="56385" class="Symbol">Î»</a> <a id="56387" href="Demos.HSP.html#56387" class="Bound">i</a> <a id="56389" class="Symbol">â†’</a> <a id="56391" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="56401" class="Symbol">(</a><a id="56402" href="Demos.HSP.html#56371" class="Bound">t</a> <a id="56404" href="Demos.HSP.html#56387" class="Bound">i</a><a id="56405" class="Symbol">)</a>

 <a id="56409" href="Demos.HSP.html#56409" class="Function">free-lift-func</a> <a id="56424" class="Symbol">:</a> <a id="56426" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="56429" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="56431" href="Demos.HSP.html#56240" class="Bound">X</a> <a id="56433" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="56435" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="56437" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="56440" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a> <a id="56442" href="Demos.HSP.html#19168" class="Function Operator">]</a>
 <a id="56445" href="Demos.HSP.html#56409" class="Function">free-lift-func</a> <a id="56460" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="56464" href="Demos.HSP.html#56464" class="Bound">x</a> <a id="56466" class="Symbol">=</a> <a id="56468" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="56478" href="Demos.HSP.html#56464" class="Bound">x</a>
 <a id="56481" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56486" href="Demos.HSP.html#56409" class="Function">free-lift-func</a> <a id="56501" class="Symbol">=</a> <a id="56503" href="Demos.HSP.html#56590" class="Function">flcong</a> <a id="56510" class="Keyword">where</a>
  <a id="56518" class="Keyword">open</a> <a id="56523" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="56530" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="56533" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a> <a id="56535" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="56537" class="Keyword">using</a> <a id="56543" class="Symbol">(</a> <a id="56545" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="56549" class="Symbol">)</a> <a id="56551" class="Keyword">renaming</a> <a id="56560" class="Symbol">(</a> <a id="56562" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="56572" class="Symbol">to</a> <a id="56575" class="Function">reflexiveá´¬</a> <a id="56586" class="Symbol">)</a>
  <a id="56590" href="Demos.HSP.html#56590" class="Function">flcong</a> <a id="56597" class="Symbol">:</a> <a id="56599" class="Symbol">âˆ€</a> <a id="56601" class="Symbol">{</a><a id="56602" href="Demos.HSP.html#56602" class="Bound">s</a> <a id="56604" href="Demos.HSP.html#56604" class="Bound">t</a><a id="56605" class="Symbol">}</a> <a id="56607" class="Symbol">â†’</a> <a id="56609" href="Demos.HSP.html#56602" class="Bound">s</a> <a id="56611" href="Demos.HSP.html#40517" class="Datatype Operator">â‰ƒ</a> <a id="56613" href="Demos.HSP.html#56604" class="Bound">t</a> <a id="56615" class="Symbol">â†’</a> <a id="56617" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="56627" href="Demos.HSP.html#56602" class="Bound">s</a> <a id="56629" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="56631" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="56641" href="Demos.HSP.html#56604" class="Bound">t</a>
  <a id="56645" href="Demos.HSP.html#56590" class="Function">flcong</a> <a id="56652" class="Symbol">(</a><a id="56653" href="Demos.HSP.html#40561" class="InductiveConstructor">_â‰ƒ_.rfl</a> <a id="56661" href="Demos.HSP.html#56661" class="Bound">x</a><a id="56662" class="Symbol">)</a> <a id="56664" class="Symbol">=</a> <a id="56666" href="Demos.HSP.html#56575" class="Function">reflexiveá´¬</a> <a id="56677" class="Symbol">(</a><a id="56678" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">â‰¡.cong</a> <a id="56685" href="Demos.HSP.html#56270" class="Bound">h</a> <a id="56687" href="Demos.HSP.html#56661" class="Bound">x</a><a id="56688" class="Symbol">)</a>
  <a id="56692" href="Demos.HSP.html#56590" class="Function">flcong</a> <a id="56699" class="Symbol">(</a><a id="56700" href="Demos.HSP.html#40603" class="InductiveConstructor">_â‰ƒ_.gnl</a> <a id="56708" href="Demos.HSP.html#56708" class="Bound">x</a><a id="56709" class="Symbol">)</a> <a id="56711" class="Symbol">=</a> <a id="56713" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56718" class="Symbol">(</a><a id="56719" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="56726" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a><a id="56727" class="Symbol">)</a> <a id="56729" class="Symbol">(</a><a id="56730" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="56737" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56739" class="Symbol">Î»</a> <a id="56741" href="Demos.HSP.html#56741" class="Bound">i</a> <a id="56743" class="Symbol">â†’</a> <a id="56745" href="Demos.HSP.html#56590" class="Function">flcong</a> <a id="56752" class="Symbol">(</a><a id="56753" href="Demos.HSP.html#56708" class="Bound">x</a> <a id="56755" href="Demos.HSP.html#56741" class="Bound">i</a><a id="56756" class="Symbol">))</a>

 <a id="56761" href="Demos.HSP.html#56761" class="Function">lift-hom</a> <a id="56770" class="Symbol">:</a> <a id="56772" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="56776" class="Symbol">(</a><a id="56777" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="56779" href="Demos.HSP.html#56240" class="Bound">X</a><a id="56780" class="Symbol">)</a> <a id="56782" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a>
 <a id="56785" href="Demos.HSP.html#56761" class="Function">lift-hom</a> <a id="56794" class="Symbol">=</a> <a id="56796" href="Demos.HSP.html#56409" class="Function">free-lift-func</a> <a id="56811" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>
   <a id="56816" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="56822" class="Symbol">Î»{</a><a id="56824" href="Demos.HSP.html#56824" class="Bound">_</a><a id="56825" class="Symbol">}{</a><a id="56827" href="Demos.HSP.html#56827" class="Bound">a</a><a id="56828" class="Symbol">}</a> <a id="56830" class="Symbol">â†’</a> <a id="56832" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56837" class="Symbol">(</a><a id="56838" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="56845" href="Demos.HSP.html#56252" class="Bound">ğ‘¨</a><a id="56846" class="Symbol">)</a> <a id="56848" class="Symbol">(</a><a id="56849" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="56856" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56858" class="Symbol">Î»</a> <a id="56860" href="Demos.HSP.html#56860" class="Bound">i</a> <a id="56862" class="Symbol">â†’</a> <a id="56864" class="Symbol">(</a><a id="56865" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56870" href="Demos.HSP.html#56409" class="Function">free-lift-func</a><a id="56884" class="Symbol">){</a><a id="56886" href="Demos.HSP.html#56827" class="Bound">a</a> <a id="56888" href="Demos.HSP.html#56860" class="Bound">i</a><a id="56889" class="Symbol">}</a> <a id="56891" href="Demos.HSP.html#40787" class="Function">â‰ƒ-isRefl</a><a id="56899" class="Symbol">)</a>

</pre>

It turns out that the interpretation of a term `p` in an environment `Î·` is the same
as the free lift of `Î·` evaluated at `p`. We apply this fact a number of times in the sequel.

<pre class="Agda">

<a id="57108" class="Keyword">module</a> <a id="57115" href="Demos.HSP.html#57115" class="Module">_</a>  <a id="57118" class="Symbol">{</a><a id="57119" href="Demos.HSP.html#57119" class="Bound">X</a> <a id="57121" class="Symbol">:</a> <a id="57123" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="57128" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="57129" class="Symbol">}</a> <a id="57131" class="Symbol">{</a><a id="57132" href="Demos.HSP.html#57132" class="Bound">ğ‘¨</a> <a id="57134" class="Symbol">:</a> <a id="57136" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="57144" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="57146" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="57148" class="Symbol">}</a>   <a id="57152" class="Keyword">where</a>
 <a id="57159" class="Keyword">open</a> <a id="57164" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="57171" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="57174" href="Demos.HSP.html#57132" class="Bound">ğ‘¨</a> <a id="57176" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="57179" class="Keyword">using</a> <a id="57185" class="Symbol">(</a> <a id="57187" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="57191" class="Symbol">;</a> <a id="57193" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="57198" class="Symbol">)</a>
 <a id="57201" class="Keyword">open</a> <a id="57206" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="57218" href="Demos.HSP.html#57132" class="Bound">ğ‘¨</a>  <a id="57221" class="Keyword">using</a> <a id="57227" class="Symbol">(</a> <a id="57229" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="57233" class="Symbol">)</a>

 <a id="57237" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a> <a id="57254" class="Symbol">:</a> <a id="57256" class="Symbol">(</a><a id="57257" href="Demos.HSP.html#57257" class="Bound">Î·</a> <a id="57259" class="Symbol">:</a> <a id="57261" href="Demos.HSP.html#57119" class="Bound">X</a> <a id="57263" class="Symbol">â†’</a> <a id="57265" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="57268" href="Demos.HSP.html#57132" class="Bound">ğ‘¨</a> <a id="57270" href="Demos.HSP.html#19222" class="Function Operator">]</a><a id="57271" class="Symbol">)(</a><a id="57273" href="Demos.HSP.html#57273" class="Bound">p</a> <a id="57275" class="Symbol">:</a> <a id="57277" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="57282" href="Demos.HSP.html#57119" class="Bound">X</a><a id="57283" class="Symbol">)</a> <a id="57285" class="Symbol">â†’</a> <a id="57287" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="57289" href="Demos.HSP.html#57273" class="Bound">p</a> <a id="57291" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="57293" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="57297" href="Demos.HSP.html#57257" class="Bound">Î·</a> <a id="57299" href="Relation.Binary.Bundles.html#1098" class="Function Operator">â‰ˆ</a> <a id="57301" class="Symbol">(</a><a id="57302" href="Demos.HSP.html#56293" class="Function">free-lift</a><a id="57311" class="Symbol">{</a><a id="57312" class="Argument">ğ‘¨</a> <a id="57314" class="Symbol">=</a> <a id="57316" href="Demos.HSP.html#57132" class="Bound">ğ‘¨</a><a id="57317" class="Symbol">}</a> <a id="57319" href="Demos.HSP.html#57257" class="Bound">Î·</a><a id="57320" class="Symbol">)</a> <a id="57322" href="Demos.HSP.html#57273" class="Bound">p</a>
 <a id="57325" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a> <a id="57342" href="Demos.HSP.html#57342" class="Bound">Î·</a> <a id="57344" class="Symbol">(</a><a id="57345" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="57347" href="Demos.HSP.html#57347" class="Bound">x</a><a id="57348" class="Symbol">)</a>       <a id="57356" class="Symbol">=</a> <a id="57358" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="57364" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a> <a id="57381" href="Demos.HSP.html#57381" class="Bound">Î·</a> <a id="57383" class="Symbol">(</a><a id="57384" href="Demos.HSP.html#40107" class="InductiveConstructor">node</a> <a id="57389" href="Demos.HSP.html#57389" class="Bound">f</a> <a id="57391" href="Demos.HSP.html#57391" class="Bound">t</a><a id="57392" class="Symbol">)</a>  <a id="57395" class="Symbol">=</a> <a id="57397" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="57402" class="Symbol">(</a><a id="57403" href="Demos.HSP.html#18608" class="Field">Interp</a> <a id="57410" href="Demos.HSP.html#57132" class="Bound">ğ‘¨</a><a id="57411" class="Symbol">)</a> <a id="57413" class="Symbol">(</a><a id="57414" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">â‰¡.refl</a> <a id="57421" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="57423" class="Symbol">(</a><a id="57424" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a> <a id="57441" href="Demos.HSP.html#57381" class="Bound">Î·</a><a id="57442" class="Symbol">)</a> <a id="57444" href="Function.Base.html#1031" class="Function Operator">âˆ˜</a> <a id="57446" href="Demos.HSP.html#57391" class="Bound">t</a><a id="57447" class="Symbol">)</a>
</pre>

#### <a id="the-relatively-free-algebra">The relatively free algebra</a>
 <!-- {#the-relatively-free-algebra .unnumbered} -->

Given an arbitrary class `ğ’¦` of `ğ‘†`-algebras, we cannot expect that `ğ‘» X` belongs to `ğ’¦`.
Indeed, there may be no free algebra in `ğ’¦`.
Nonetheless, it is always possible to construct an algebra that is free for `ğ’¦` and belongs to the class `S (P ğ’¦`).
Such an algebra is called a *relatively free algebra over* `X` (relative to `ğ’¦`).
There are several informal approaches to defining this algebra.
We now describe the approach on which our formal construction is based and then we present the formalization.

Let `ğ”½[ X ]` denote the relatively free algebra over `X`.  We represent `ğ”½[ X ]` as the quotient `ğ‘» X / â‰ˆ` where `x â‰ˆ y` if and only if `h x = h y` for every homomorphism `h` from `ğ‘» X` into a member of `ğ’¦`.
More precisely, if `ğ‘¨ âˆˆ ğ’¦` and `h : hom (ğ‘» X) ğ‘¨`, then `h` factors as `ğ‘» X â†’ HomIm h  â†’ ğ‘¨` and `ğ‘» X / ker h â‰… HomIm h â‰¤ ğ‘¨`; that is, `ğ‘» X / ker h` is (isomorphic to) an algebra in `S ğ’¦`. Letting

`â‰ˆ := â‹‚ \{Î¸ âˆˆ Con(ğ‘» X) âˆ£ ğ‘» X / Î¸ âˆˆ S ğ’¦\}`,

observe that `ğ”½[ X ] := ğ‘» X / â‰ˆ` is a subdirect product of the algebras `ğ‘» X / ker h`
as `h` ranges over all homomorphisms from `ğ‘» X` to algebras in `ğ’¦`.  Thus, `ğ”½[ X ] âˆˆ P (S ğ’¦) âŠ† S (P ğ’¦)`.
As we have seen, every map `Ï : X â†’ ğ•Œ[ ğ‘¨ ]` extends uniquely to a homomorphism `h : hom (ğ‘» X) ğ‘¨` and `h`
factors through the natural projection `ğ‘» X â†’ ğ”½[ X ]` (since `â‰ˆ âŠ† ker h`) yielding a unique homomorphism from `ğ”½[ X ]` to `ğ‘¨` extending `Ï`.

In [Agda][] we construct `ğ”½[ X ]` as a homomorphic image of `ğ‘» X` in the following way.
First, given `X` we define `ğ‘ª` as the product of pairs `(ğ‘¨, Ï)` of
algebras `ğ‘¨ âˆˆ ğ’¦` along with environments `Ï : X â†’ ğ•Œ[ ğ‘¨ ]`.
To do so, we contrive an index type for the product; each index is a triple `(ğ‘¨, p, Ï)` where `ğ‘¨` is an algebra, `p` is proof of `ğ‘¨ âˆˆ ğ’¦`, and `Ï : X â†’ ğ•Œ[ ğ‘¨ ]` is an arbitrary environment.

<pre class="Agda">

<a id="59399" class="Keyword">module</a> <a id="FreeAlgebra"></a><a id="59406" href="Demos.HSP.html#59406" class="Module">FreeAlgebra</a> <a id="59418" class="Symbol">(</a><a id="59419" href="Demos.HSP.html#59419" class="Bound">ğ’¦</a> <a id="59421" class="Symbol">:</a> <a id="59423" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="59428" class="Symbol">(</a><a id="59429" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="59437" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="59439" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="59441" class="Symbol">)</a> <a id="59443" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="59444" class="Symbol">)</a> <a id="59446" class="Keyword">where</a>
 <a id="59453" class="Keyword">private</a> <a id="FreeAlgebra.c"></a><a id="59461" href="Demos.HSP.html#59461" class="Function">c</a> <a id="59463" class="Symbol">=</a> <a id="59465" href="Demos.HSP.html#59437" class="Bound">Î±</a> <a id="59467" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="59469" href="Demos.HSP.html#59439" class="Bound">Ïáµƒ</a> <a id="59472" class="Symbol">;</a> <a id="FreeAlgebra.Î¹"></a><a id="59474" href="Demos.HSP.html#59474" class="Function">Î¹</a> <a id="59476" class="Symbol">=</a> <a id="59478" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="59481" href="Demos.HSP.html#59461" class="Function">c</a> <a id="59483" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="59485" href="Demos.HSP.html#59443" class="Bound">â„“</a>
 <a id="FreeAlgebra.â„‘"></a><a id="59488" href="Demos.HSP.html#59488" class="Function">â„‘</a> <a id="59490" class="Symbol">:</a> <a id="59492" class="Symbol">{</a><a id="59493" href="Demos.HSP.html#59493" class="Bound">Ï‡</a> <a id="59495" class="Symbol">:</a> <a id="59497" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="59502" class="Symbol">}</a> <a id="59504" class="Symbol">â†’</a> <a id="59506" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="59511" href="Demos.HSP.html#59493" class="Bound">Ï‡</a> <a id="59513" class="Symbol">â†’</a> <a id="59515" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="59520" class="Symbol">(</a><a id="59521" href="Demos.HSP.html#59474" class="Function">Î¹</a> <a id="59523" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="59525" href="Demos.HSP.html#59493" class="Bound">Ï‡</a><a id="59526" class="Symbol">)</a>
 <a id="59529" href="Demos.HSP.html#59488" class="Function">â„‘</a> <a id="59531" href="Demos.HSP.html#59531" class="Bound">X</a> <a id="59533" class="Symbol">=</a> <a id="59535" href="Data.Product.html#916" class="Function">Î£[</a> <a id="59538" href="Demos.HSP.html#59538" class="Bound">ğ‘¨</a> <a id="59540" href="Data.Product.html#916" class="Function">âˆˆ</a> <a id="59542" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="59550" href="Demos.HSP.html#59437" class="Bound">Î±</a> <a id="59552" href="Demos.HSP.html#59439" class="Bound">Ïáµƒ</a> <a id="59555" href="Data.Product.html#916" class="Function">]</a> <a id="59557" href="Demos.HSP.html#59538" class="Bound">ğ‘¨</a> <a id="59559" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="59561" href="Demos.HSP.html#59419" class="Bound">ğ’¦</a> <a id="59563" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="59565" class="Symbol">(</a><a id="59566" href="Demos.HSP.html#59531" class="Bound">X</a> <a id="59568" class="Symbol">â†’</a> <a id="59570" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="59573" href="Demos.HSP.html#59538" class="Bound">ğ‘¨</a> <a id="59575" href="Demos.HSP.html#19222" class="Function Operator">]</a><a id="59576" class="Symbol">)</a>

 <a id="FreeAlgebra.ğ‘ª"></a><a id="59580" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="59582" class="Symbol">:</a> <a id="59584" class="Symbol">{</a><a id="59585" href="Demos.HSP.html#59585" class="Bound">Ï‡</a> <a id="59587" class="Symbol">:</a> <a id="59589" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="59594" class="Symbol">}</a> <a id="59596" class="Symbol">â†’</a> <a id="59598" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="59603" href="Demos.HSP.html#59585" class="Bound">Ï‡</a> <a id="59605" class="Symbol">â†’</a> <a id="59607" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="59615" class="Symbol">(</a><a id="59616" href="Demos.HSP.html#59474" class="Function">Î¹</a> <a id="59618" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="59620" href="Demos.HSP.html#59585" class="Bound">Ï‡</a><a id="59621" class="Symbol">)(</a><a id="59623" href="Demos.HSP.html#59474" class="Function">Î¹</a> <a id="59625" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="59627" href="Demos.HSP.html#59585" class="Bound">Ï‡</a><a id="59628" class="Symbol">)</a>
 <a id="59631" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="59633" href="Demos.HSP.html#59633" class="Bound">X</a> <a id="59635" class="Symbol">=</a> <a id="59637" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="59639" class="Symbol">{</a><a id="59640" class="Argument">I</a> <a id="59642" class="Symbol">=</a> <a id="59644" href="Demos.HSP.html#59488" class="Function">â„‘</a> <a id="59646" href="Demos.HSP.html#59633" class="Bound">X</a><a id="59647" class="Symbol">}</a> <a id="59649" href="Demos.HSP.html#7794" class="Function Operator">âˆ£_âˆ£</a>

</pre>
We then define `ğ”½[ X ]` to be the image of a homomorphism from `ğ‘» X` to `ğ‘ª` as follows.

<pre class="Agda">

 <a id="FreeAlgebra.homC"></a><a id="59769" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="59774" class="Symbol">:</a> <a id="59776" class="Symbol">(</a><a id="59777" href="Demos.HSP.html#59777" class="Bound">X</a> <a id="59779" class="Symbol">:</a> <a id="59781" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="59786" href="Demos.HSP.html#7172" class="Generalizable">Ï‡</a><a id="59787" class="Symbol">)</a> <a id="59789" class="Symbol">â†’</a> <a id="59791" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="59795" class="Symbol">(</a><a id="59796" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="59798" href="Demos.HSP.html#59777" class="Bound">X</a><a id="59799" class="Symbol">)</a> <a id="59801" class="Symbol">(</a><a id="59802" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="59804" href="Demos.HSP.html#59777" class="Bound">X</a><a id="59805" class="Symbol">)</a>
 <a id="59808" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="59813" href="Demos.HSP.html#59813" class="Bound">X</a> <a id="59815" class="Symbol">=</a> <a id="59817" href="Demos.HSP.html#32212" class="Function">â¨…-hom-co</a> <a id="59826" class="Symbol">_</a> <a id="59828" class="Symbol">(Î»</a> <a id="59831" href="Demos.HSP.html#59831" class="Bound">i</a> <a id="59833" class="Symbol">â†’</a> <a id="59835" href="Demos.HSP.html#56761" class="Function">lift-hom</a> <a id="59844" class="Symbol">(</a><a id="59845" href="Demos.HSP.html#6507" class="Field">snd</a> <a id="59849" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="59851" href="Demos.HSP.html#59831" class="Bound">i</a> <a id="59853" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a><a id="59854" class="Symbol">))</a>

 <a id="FreeAlgebra.ğ”½[_]"></a><a id="59859" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[_]</a> <a id="59864" class="Symbol">:</a> <a id="59866" class="Symbol">{</a><a id="59867" href="Demos.HSP.html#59867" class="Bound">Ï‡</a> <a id="59869" class="Symbol">:</a> <a id="59871" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="59876" class="Symbol">}</a> <a id="59878" class="Symbol">â†’</a> <a id="59880" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="59885" href="Demos.HSP.html#59867" class="Bound">Ï‡</a> <a id="59887" class="Symbol">â†’</a> <a id="59889" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="59897" class="Symbol">(</a><a id="59898" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="59901" href="Demos.HSP.html#59867" class="Bound">Ï‡</a><a id="59902" class="Symbol">)</a> <a id="59904" class="Symbol">(</a><a id="59905" href="Demos.HSP.html#59474" class="Function">Î¹</a> <a id="59907" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="59909" href="Demos.HSP.html#59867" class="Bound">Ï‡</a><a id="59910" class="Symbol">)</a>
 <a id="59913" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="59916" href="Demos.HSP.html#59916" class="Bound">X</a> <a id="59918" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="59920" class="Symbol">=</a> <a id="59922" href="Demos.HSP.html#36245" class="Function">HomIm</a> <a id="59928" class="Symbol">(</a><a id="59929" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="59934" href="Demos.HSP.html#59916" class="Bound">X</a><a id="59935" class="Symbol">)</a>

</pre>
Observe that if the identity `p â‰ˆ q` holds in all `ğ‘¨ âˆˆ ğ’¦` (for all environments), then `p â‰ˆ q` holds in `ğ”½[ X ]`; equivalently, the pair `(p , q)` belongs to the kernel of the natural homomorphism from `ğ‘» X` onto `ğ”½[ X ]`. This natural epimorphism from `ğ‘» X` onto `ğ”½[ X ]`
is defined as follows.

<pre class="Agda">

<a id="60260" class="Keyword">module</a> <a id="FreeHom"></a><a id="60267" href="Demos.HSP.html#60267" class="Module">FreeHom</a> <a id="60275" class="Symbol">{</a><a id="60276" href="Demos.HSP.html#60276" class="Bound">ğ’¦</a> <a id="60278" class="Symbol">:</a> <a id="60280" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60284" class="Symbol">(</a><a id="60285" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="60293" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="60295" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="60297" class="Symbol">)</a> <a id="60299" class="Symbol">(</a><a id="60300" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="60302" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="60304" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="60307" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="60309" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="60312" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="60313" class="Symbol">)}</a> <a id="60316" class="Keyword">where</a>
 <a id="60323" class="Keyword">private</a> <a id="FreeHom.c"></a><a id="60331" href="Demos.HSP.html#60331" class="Function">c</a> <a id="60333" class="Symbol">=</a> <a id="60335" href="Demos.HSP.html#60293" class="Bound">Î±</a> <a id="60337" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="60339" href="Demos.HSP.html#60295" class="Bound">Ïáµƒ</a> <a id="60342" class="Symbol">;</a> <a id="FreeHom.Î¹"></a><a id="60344" href="Demos.HSP.html#60344" class="Function">Î¹</a> <a id="60346" class="Symbol">=</a> <a id="60348" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="60351" href="Demos.HSP.html#60331" class="Function">c</a> <a id="60353" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="60355" href="Demos.HSP.html#60312" class="Bound">â„“</a>
 <a id="60358" class="Keyword">open</a> <a id="60363" href="Demos.HSP.html#59406" class="Module">FreeAlgebra</a> <a id="60375" href="Demos.HSP.html#60276" class="Bound">ğ’¦</a> <a id="60377" class="Keyword">using</a> <a id="60383" class="Symbol">(</a> <a id="60385" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[_]</a> <a id="60390" class="Symbol">;</a> <a id="60392" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="60397" class="Symbol">)</a>

 <a id="FreeHom.epiF[_]"></a><a id="60401" href="Demos.HSP.html#60401" class="Function Operator">epiF[_]</a> <a id="60409" class="Symbol">:</a> <a id="60411" class="Symbol">(</a><a id="60412" href="Demos.HSP.html#60412" class="Bound">X</a> <a id="60414" class="Symbol">:</a> <a id="60416" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="60421" href="Demos.HSP.html#60331" class="Function">c</a><a id="60422" class="Symbol">)</a> <a id="60424" class="Symbol">â†’</a> <a id="60426" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="60430" class="Symbol">(</a><a id="60431" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="60433" href="Demos.HSP.html#60412" class="Bound">X</a><a id="60434" class="Symbol">)</a> <a id="60436" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="60439" href="Demos.HSP.html#60412" class="Bound">X</a> <a id="60441" href="Demos.HSP.html#59859" class="Function Operator">]</a>
 <a id="60444" href="Demos.HSP.html#60401" class="Function Operator">epiF[</a> <a id="60450" href="Demos.HSP.html#60450" class="Bound">X</a> <a id="60452" href="Demos.HSP.html#60401" class="Function Operator">]</a> <a id="60454" class="Symbol">=</a> <a id="60456" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="60458" href="Demos.HSP.html#36864" class="Function">toHomIm</a> <a id="60466" class="Symbol">(</a><a id="60467" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="60472" href="Demos.HSP.html#60450" class="Bound">X</a><a id="60473" class="Symbol">)</a> <a id="60475" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="60477" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60479" class="Keyword">record</a>  <a id="60487" class="Symbol">{</a> <a id="60489" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="60495" class="Symbol">=</a> <a id="60497" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="60499" href="Demos.HSP.html#36864" class="Function">toHomIm</a> <a id="60507" class="Symbol">(</a><a id="60508" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="60513" href="Demos.HSP.html#60450" class="Bound">X</a><a id="60514" class="Symbol">)</a> <a id="60516" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a>
                                            <a id="60562" class="Symbol">;</a> <a id="60564" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="60577" class="Symbol">=</a> <a id="60579" href="Demos.HSP.html#14062" class="Function">toIm-surj</a> <a id="60589" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="60591" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="60596" href="Demos.HSP.html#60450" class="Bound">X</a> <a id="60598" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="60600" class="Symbol">}</a>

 <a id="FreeHom.homF[_]"></a><a id="60604" href="Demos.HSP.html#60604" class="Function Operator">homF[_]</a> <a id="60612" class="Symbol">:</a> <a id="60614" class="Symbol">(</a><a id="60615" href="Demos.HSP.html#60615" class="Bound">X</a> <a id="60617" class="Symbol">:</a> <a id="60619" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="60624" href="Demos.HSP.html#60331" class="Function">c</a><a id="60625" class="Symbol">)</a> <a id="60627" class="Symbol">â†’</a> <a id="60629" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="60633" class="Symbol">(</a><a id="60634" href="Demos.HSP.html#41719" class="Function">ğ‘»</a> <a id="60636" href="Demos.HSP.html#60615" class="Bound">X</a><a id="60637" class="Symbol">)</a> <a id="60639" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="60642" href="Demos.HSP.html#60615" class="Bound">X</a> <a id="60644" href="Demos.HSP.html#59859" class="Function Operator">]</a>
 <a id="60647" href="Demos.HSP.html#60604" class="Function Operator">homF[</a> <a id="60653" href="Demos.HSP.html#60653" class="Bound">X</a> <a id="60655" href="Demos.HSP.html#60604" class="Function Operator">]</a> <a id="60657" class="Symbol">=</a> <a id="60659" href="Demos.HSP.html#27694" class="Function">IsEpi.HomReduct</a> <a id="60675" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="60677" href="Demos.HSP.html#60401" class="Function Operator">epiF[</a> <a id="60683" href="Demos.HSP.html#60653" class="Bound">X</a> <a id="60685" href="Demos.HSP.html#60401" class="Function Operator">]</a> <a id="60687" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a>

</pre>

Before formalizing the HSP theorem in the next section, we need to prove the following important property of the relatively free algebra: For every algebra `ğ‘¨`, if `ğ‘¨ âŠ¨ Th (V ğ’¦)`,
then there exists an epimorphism from `ğ”½[ A ]` onto `ğ‘¨`, where `A` denotes the carrier of `ğ‘¨`.

<pre class="Agda">

<a id="60992" class="Keyword">module</a> <a id="60999" href="Demos.HSP.html#60999" class="Module">_</a> <a id="61001" class="Symbol">{</a><a id="61002" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="61004" class="Symbol">:</a> <a id="61006" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="61014" class="Symbol">(</a><a id="61015" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="61017" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61019" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="61022" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61024" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="61025" class="Symbol">)(</a><a id="61027" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="61029" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61031" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="61034" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61036" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="61037" class="Symbol">)}{</a><a id="61040" href="Demos.HSP.html#61040" class="Bound">ğ’¦</a> <a id="61042" class="Symbol">:</a> <a id="61044" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="61048" class="Symbol">(</a><a id="61049" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="61057" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="61059" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="61061" class="Symbol">)(</a><a id="61063" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="61065" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61067" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="61070" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61072" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="61075" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="61076" class="Symbol">)}</a> <a id="61079" class="Keyword">where</a>
 <a id="61086" class="Keyword">private</a> <a id="61094" href="Demos.HSP.html#61094" class="Function">c</a> <a id="61096" class="Symbol">=</a> <a id="61098" href="Demos.HSP.html#61015" class="Bound">Î±</a> <a id="61100" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61102" href="Demos.HSP.html#61019" class="Bound">Ïáµƒ</a> <a id="61105" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="61107" href="Demos.HSP.html#61024" class="Bound">â„“</a> <a id="61109" class="Symbol">;</a> <a id="61111" href="Demos.HSP.html#61111" class="Function">Î¹</a> <a id="61113" class="Symbol">=</a> <a id="61115" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="61118" href="Demos.HSP.html#61094" class="Function">c</a>
 <a id="61121" class="Keyword">open</a> <a id="61126" href="Demos.HSP.html#59406" class="Module">FreeAlgebra</a> <a id="61138" href="Demos.HSP.html#61040" class="Bound">ğ’¦</a> <a id="61140" class="Keyword">using</a> <a id="61146" class="Symbol">(</a> <a id="61148" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[_]</a> <a id="61153" class="Symbol">;</a> <a id="61155" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="61157" class="Symbol">)</a>
 <a id="61160" class="Keyword">open</a> <a id="61165" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="61172" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="61175" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="61177" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="61179" class="Keyword">using</a> <a id="61185" class="Symbol">(</a> <a id="61187" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="61192" class="Symbol">;</a> <a id="61194" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="61198" class="Symbol">;</a> <a id="61200" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="61206" class="Symbol">)</a> <a id="61208" class="Keyword">renaming</a> <a id="61217" class="Symbol">(</a> <a id="61219" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="61227" class="Symbol">to</a> <a id="61230" class="Field">A</a> <a id="61232" class="Symbol">;</a> <a id="61234" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_â‰ˆ_</a> <a id="61238" class="Symbol">to</a> <a id="61241" class="Field Operator">_â‰ˆá´¬_</a> <a id="61246" class="Symbol">)</a>

 <a id="61250" href="Demos.HSP.html#61250" class="Function">F-ModTh-epi</a> <a id="61262" class="Symbol">:</a> <a id="61264" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="61266" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="61268" href="Demos.HSP.html#48992" class="Function">Mod</a> <a id="61272" class="Symbol">(</a><a id="61273" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="61276" href="Demos.HSP.html#61040" class="Bound">ğ’¦</a><a id="61277" class="Symbol">)</a> <a id="61279" class="Symbol">â†’</a> <a id="61281" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="61285" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="61288" href="Demos.HSP.html#61230" class="Function">A</a> <a id="61290" href="Demos.HSP.html#59859" class="Function Operator">]</a>  <a id="61293" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a>
 <a id="61296" href="Demos.HSP.html#61250" class="Function">F-ModTh-epi</a> <a id="61308" href="Demos.HSP.html#61308" class="Bound">AâˆˆModThK</a> <a id="61317" class="Symbol">=</a> <a id="61319" href="Demos.HSP.html#61338" class="Function">Ï†</a> <a id="61321" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="61323" href="Demos.HSP.html#62086" class="Function">isEpi</a> <a id="61329" class="Keyword">where</a>

  <a id="61338" href="Demos.HSP.html#61338" class="Function">Ï†</a> <a id="61340" class="Symbol">:</a> <a id="61342" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="61345" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="61348" href="Demos.HSP.html#61230" class="Function">A</a> <a id="61350" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="61352" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="61354" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="61356" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="61359" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="61361" href="Demos.HSP.html#19168" class="Function Operator">]</a>
  <a id="61365" href="Demos.HSP.html#6627" class="Field Operator">_âŸ¨$âŸ©_</a> <a id="61371" href="Demos.HSP.html#61338" class="Function">Ï†</a>            <a id="61384" class="Symbol">=</a> <a id="61386" href="Demos.HSP.html#56293" class="Function">free-lift</a><a id="61395" class="Symbol">{</a><a id="61396" class="Argument">ğ‘¨</a> <a id="61398" class="Symbol">=</a> <a id="61400" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a><a id="61401" class="Symbol">}</a> <a id="61403" href="Function.Base.html#615" class="Function">id</a>
  <a id="61408" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="61413" href="Demos.HSP.html#61338" class="Function">Ï†</a> <a id="61415" class="Symbol">{</a><a id="61416" href="Demos.HSP.html#61416" class="Bound">p</a><a id="61417" class="Symbol">}</a> <a id="61419" class="Symbol">{</a><a id="61420" href="Demos.HSP.html#61420" class="Bound">q</a><a id="61421" class="Symbol">}</a> <a id="61423" href="Demos.HSP.html#61423" class="Bound">pq</a>  <a id="61427" class="Symbol">=</a> <a id="61429" href="Demos.HSP.html#61757" class="Function">Goal</a>
   <a id="61437" class="Keyword">where</a>
   <a id="61446" href="Demos.HSP.html#61446" class="Function">lift-pq</a> <a id="61454" class="Symbol">:</a> <a id="61456" class="Symbol">(</a><a id="61457" href="Demos.HSP.html#61416" class="Bound">p</a> <a id="61459" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="61461" href="Demos.HSP.html#61420" class="Bound">q</a><a id="61462" class="Symbol">)</a> <a id="61464" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="61466" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="61469" href="Demos.HSP.html#61040" class="Bound">ğ’¦</a>
   <a id="61474" href="Demos.HSP.html#61446" class="Function">lift-pq</a> <a id="61482" href="Demos.HSP.html#61482" class="Bound">ğ‘©</a> <a id="61484" href="Demos.HSP.html#61484" class="Bound">x</a> <a id="61486" href="Demos.HSP.html#61486" class="Bound">Ï</a> <a id="61488" class="Symbol">=</a> <a id="61490" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="61500" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="61502" href="Demos.HSP.html#61416" class="Bound">p</a> <a id="61504" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="61506" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="61510" href="Demos.HSP.html#61486" class="Bound">Ï</a>    <a id="61515" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="61518" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a> <a id="61535" class="Symbol">{</a><a id="61536" class="Argument">ğ‘¨</a> <a id="61538" class="Symbol">=</a> <a id="61540" href="Demos.HSP.html#61482" class="Bound">ğ‘©</a><a id="61541" class="Symbol">}</a> <a id="61543" href="Demos.HSP.html#61486" class="Bound">Ï</a> <a id="61545" href="Demos.HSP.html#61416" class="Bound">p</a>  <a id="61548" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
    <a id="61554" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="61564" href="Demos.HSP.html#61486" class="Bound">Ï</a> <a id="61566" href="Demos.HSP.html#61416" class="Bound">p</a>  <a id="61569" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="61572" href="Demos.HSP.html#61423" class="Bound">pq</a> <a id="61575" class="Symbol">(</a><a id="61576" href="Demos.HSP.html#61482" class="Bound">ğ‘©</a> <a id="61578" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="61580" href="Demos.HSP.html#61484" class="Bound">x</a> <a id="61582" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="61584" href="Demos.HSP.html#61486" class="Bound">Ï</a><a id="61585" class="Symbol">)</a>                <a id="61602" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
    <a id="61608" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="61618" href="Demos.HSP.html#61486" class="Bound">Ï</a> <a id="61620" href="Demos.HSP.html#61420" class="Bound">q</a>  <a id="61623" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a> <a id="61627" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a><a id="61643" class="Symbol">{</a><a id="61644" class="Argument">ğ‘¨</a> <a id="61646" class="Symbol">=</a> <a id="61648" href="Demos.HSP.html#61482" class="Bound">ğ‘©</a><a id="61649" class="Symbol">}</a> <a id="61651" href="Demos.HSP.html#61486" class="Bound">Ï</a> <a id="61653" href="Demos.HSP.html#61420" class="Bound">q</a>  <a id="61656" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
    <a id="61662" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="61664" href="Demos.HSP.html#61420" class="Bound">q</a> <a id="61666" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="61668" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="61672" href="Demos.HSP.html#61486" class="Bound">Ï</a>    <a id="61677" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
     <a id="61684" class="Keyword">where</a> <a id="61690" class="Keyword">open</a> <a id="61695" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="61711" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="61714" href="Demos.HSP.html#61482" class="Bound">ğ‘©</a> <a id="61716" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="61718" class="Symbol">;</a> <a id="61720" class="Keyword">open</a> <a id="61725" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="61737" href="Demos.HSP.html#61482" class="Bound">ğ‘©</a> <a id="61739" class="Keyword">using</a> <a id="61745" class="Symbol">(</a> <a id="61747" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="61751" class="Symbol">)</a>

   <a id="61757" href="Demos.HSP.html#61757" class="Function">Goal</a> <a id="61762" class="Symbol">:</a> <a id="61764" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="61774" href="Function.Base.html#615" class="Function">id</a> <a id="61777" href="Demos.HSP.html#61416" class="Bound">p</a> <a id="61779" href="Demos.HSP.html#61241" class="Function Operator">â‰ˆá´¬</a> <a id="61782" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="61792" href="Function.Base.html#615" class="Function">id</a> <a id="61795" href="Demos.HSP.html#61420" class="Bound">q</a>
   <a id="61800" href="Demos.HSP.html#61757" class="Function">Goal</a> <a id="61805" class="Symbol">=</a> <a id="61807" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="61817" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="61827" href="Function.Base.html#615" class="Function">id</a> <a id="61830" href="Demos.HSP.html#61416" class="Bound">p</a>  <a id="61833" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">â‰ˆË˜âŸ¨</a> <a id="61837" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a> <a id="61854" class="Symbol">{</a><a id="61855" class="Argument">ğ‘¨</a> <a id="61857" class="Symbol">=</a> <a id="61859" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a><a id="61860" class="Symbol">}</a> <a id="61862" href="Function.Base.html#615" class="Function">id</a> <a id="61865" href="Demos.HSP.html#61416" class="Bound">p</a>   <a id="61869" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">âŸ©</a>
    <a id="61875" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="61877" href="Demos.HSP.html#61416" class="Bound">p</a> <a id="61879" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="61881" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="61885" href="Function.Base.html#615" class="Function">id</a>    <a id="61891" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="61894" href="Demos.HSP.html#61308" class="Bound">AâˆˆModThK</a> <a id="61903" class="Symbol">{</a><a id="61904" class="Argument">p</a> <a id="61906" class="Symbol">=</a> <a id="61908" href="Demos.HSP.html#61416" class="Bound">p</a><a id="61909" class="Symbol">}</a> <a id="61911" class="Symbol">{</a><a id="61912" href="Demos.HSP.html#61420" class="Bound">q</a><a id="61913" class="Symbol">}</a> <a id="61915" href="Demos.HSP.html#61446" class="Function">lift-pq</a> <a id="61923" href="Function.Base.html#615" class="Function">id</a>  <a id="61927" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
    <a id="61933" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦</a> <a id="61935" href="Demos.HSP.html#61420" class="Bound">q</a> <a id="61937" href="Demos.HSP.html#43018" class="Function Operator">âŸ§</a> <a id="61939" href="Demos.HSP.html#6627" class="Field Operator">âŸ¨$âŸ©</a> <a id="61943" href="Function.Base.html#615" class="Function">id</a>    <a id="61949" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">â‰ˆâŸ¨</a> <a id="61952" href="Demos.HSP.html#57237" class="Function">free-lift-interp</a> <a id="61969" class="Symbol">{</a><a id="61970" class="Argument">ğ‘¨</a> <a id="61972" class="Symbol">=</a> <a id="61974" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a><a id="61975" class="Symbol">}</a> <a id="61977" href="Function.Base.html#615" class="Function">id</a> <a id="61980" href="Demos.HSP.html#61420" class="Bound">q</a>    <a id="61985" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">âŸ©</a>
    <a id="61991" href="Demos.HSP.html#56293" class="Function">free-lift</a> <a id="62001" href="Function.Base.html#615" class="Function">id</a> <a id="62004" href="Demos.HSP.html#61420" class="Bound">q</a>  <a id="62007" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">âˆ</a>
     <a id="62014" class="Keyword">where</a> <a id="62020" class="Keyword">open</a> <a id="62025" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="62041" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="62044" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="62046" href="Demos.HSP.html#19168" class="Function Operator">]</a> <a id="62048" class="Symbol">;</a> <a id="62050" class="Keyword">open</a> <a id="62055" href="Demos.HSP.html#42454" class="Module">Environment</a> <a id="62067" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="62069" class="Keyword">using</a> <a id="62075" class="Symbol">(</a> <a id="62077" href="Demos.HSP.html#43018" class="Function Operator">âŸ¦_âŸ§</a> <a id="62081" class="Symbol">)</a>

  <a id="62086" href="Demos.HSP.html#62086" class="Function">isEpi</a> <a id="62092" class="Symbol">:</a> <a id="62094" href="Demos.HSP.html#27566" class="Record">IsEpi</a> <a id="62100" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="62103" href="Demos.HSP.html#61230" class="Function">A</a> <a id="62105" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="62107" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="62109" href="Demos.HSP.html#61338" class="Function">Ï†</a>
  <a id="62113" href="Demos.HSP.html#62086" class="Function">isEpi</a> <a id="62119" class="Symbol">=</a> <a id="62121" class="Keyword">record</a> <a id="62128" class="Symbol">{</a> <a id="62130" href="Demos.HSP.html#27637" class="Field">isHom</a> <a id="62136" class="Symbol">=</a> <a id="62138" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="62144" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="62149" class="Symbol">;</a> <a id="62151" href="Demos.HSP.html#27662" class="Field">isSurjective</a> <a id="62164" class="Symbol">=</a> <a id="62166" href="Demos.HSP.html#10394" class="InductiveConstructor">eq</a> <a id="62169" class="Symbol">(</a><a id="62170" href="Demos.HSP.html#40091" class="InductiveConstructor">â„Š</a> <a id="62172" class="Symbol">_)</a> <a id="62175" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="62180" class="Symbol">}</a>

 <a id="62184" href="Demos.HSP.html#62184" class="Function">F-ModThV-epi</a> <a id="62197" class="Symbol">:</a> <a id="62199" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="62201" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="62203" href="Demos.HSP.html#48992" class="Function">Mod</a> <a id="62207" class="Symbol">(</a><a id="62208" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="62211" class="Symbol">(</a><a id="62212" href="Demos.HSP.html#53421" class="Function">V</a> <a id="62214" href="Demos.HSP.html#61024" class="Bound">â„“</a> <a id="62216" href="Demos.HSP.html#61111" class="Function">Î¹</a> <a id="62218" href="Demos.HSP.html#61040" class="Bound">ğ’¦</a><a id="62219" class="Symbol">))</a> <a id="62222" class="Symbol">â†’</a> <a id="62224" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="62228" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="62231" href="Demos.HSP.html#61230" class="Function">A</a> <a id="62233" href="Demos.HSP.html#59859" class="Function Operator">]</a>  <a id="62236" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a>
 <a id="62239" href="Demos.HSP.html#62184" class="Function">F-ModThV-epi</a> <a id="62252" href="Demos.HSP.html#62252" class="Bound">AâˆˆModThVK</a> <a id="62262" class="Symbol">=</a> <a id="62264" href="Demos.HSP.html#61250" class="Function">F-ModTh-epi</a> <a id="62276" class="Symbol">Î»</a> <a id="62278" class="Symbol">{</a><a id="62279" href="Demos.HSP.html#62279" class="Bound">p</a><a id="62280" class="Symbol">}{</a><a id="62282" href="Demos.HSP.html#62282" class="Bound">q</a><a id="62283" class="Symbol">}</a> <a id="62285" class="Symbol">â†’</a> <a id="62287" href="Demos.HSP.html#62309" class="Function">Goal</a> <a id="62292" class="Symbol">{</a><a id="62293" href="Demos.HSP.html#62279" class="Bound">p</a><a id="62294" class="Symbol">}{</a><a id="62296" href="Demos.HSP.html#62282" class="Bound">q</a><a id="62297" class="Symbol">}</a>
  <a id="62301" class="Keyword">where</a>
  <a id="62309" href="Demos.HSP.html#62309" class="Function">Goal</a> <a id="62314" class="Symbol">:</a> <a id="62316" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="62318" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="62320" href="Demos.HSP.html#48992" class="Function">Mod</a> <a id="62324" class="Symbol">(</a><a id="62325" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="62328" href="Demos.HSP.html#61040" class="Bound">ğ’¦</a><a id="62329" class="Symbol">)</a>
  <a id="62333" href="Demos.HSP.html#62309" class="Function">Goal</a> <a id="62338" class="Symbol">{</a><a id="62339" href="Demos.HSP.html#62339" class="Bound">p</a><a id="62340" class="Symbol">}{</a><a id="62342" href="Demos.HSP.html#62342" class="Bound">q</a><a id="62343" class="Symbol">}</a> <a id="62345" href="Demos.HSP.html#62345" class="Bound">x</a> <a id="62347" href="Demos.HSP.html#62347" class="Bound">Ï</a> <a id="62349" class="Symbol">=</a> <a id="62351" href="Demos.HSP.html#62252" class="Bound">AâˆˆModThVK</a><a id="62360" class="Symbol">{</a><a id="62361" href="Demos.HSP.html#62339" class="Bound">p</a><a id="62362" class="Symbol">}{</a><a id="62364" href="Demos.HSP.html#62342" class="Bound">q</a><a id="62365" class="Symbol">}</a> <a id="62367" class="Symbol">(</a><a id="62368" href="Demos.HSP.html#55156" class="Function">V-id1</a> <a id="62374" href="Demos.HSP.html#61024" class="Bound">â„“</a> <a id="62376" class="Symbol">{</a><a id="62377" class="Argument">p</a> <a id="62379" class="Symbol">=</a> <a id="62381" href="Demos.HSP.html#62339" class="Bound">p</a><a id="62382" class="Symbol">}{</a><a id="62384" href="Demos.HSP.html#62342" class="Bound">q</a><a id="62385" class="Symbol">}</a> <a id="62387" href="Demos.HSP.html#62345" class="Bound">x</a><a id="62388" class="Symbol">)</a> <a id="62390" href="Demos.HSP.html#62347" class="Bound">Ï</a>

</pre>
Actually, we will need the following lifted version of this result.

<pre class="Agda">

 <a id="62488" href="Demos.HSP.html#62488" class="Function">F-ModTh-epi-lift</a> <a id="62505" class="Symbol">:</a> <a id="62507" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="62509" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="62511" href="Demos.HSP.html#48992" class="Function">Mod</a> <a id="62515" class="Symbol">(</a><a id="62516" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="62519" class="Symbol">(</a><a id="62520" href="Demos.HSP.html#53421" class="Function">V</a> <a id="62522" href="Demos.HSP.html#61024" class="Bound">â„“</a> <a id="62524" href="Demos.HSP.html#61111" class="Function">Î¹</a> <a id="62526" href="Demos.HSP.html#61040" class="Bound">ğ’¦</a><a id="62527" class="Symbol">))</a> <a id="62530" class="Symbol">â†’</a> <a id="62532" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="62536" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="62539" href="Demos.HSP.html#61230" class="Function">A</a> <a id="62541" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="62543" class="Symbol">(</a><a id="62544" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="62553" href="Demos.HSP.html#61002" class="Bound">ğ‘¨</a> <a id="62555" href="Demos.HSP.html#61111" class="Function">Î¹</a> <a id="62557" href="Demos.HSP.html#61111" class="Function">Î¹</a><a id="62558" class="Symbol">)</a>
 <a id="62561" href="Demos.HSP.html#62488" class="Function">F-ModTh-epi-lift</a> <a id="62578" href="Demos.HSP.html#62578" class="Bound">AâˆˆModThK</a> <a id="62587" class="Symbol">=</a> <a id="62589" href="Demos.HSP.html#29292" class="Function">âˆ˜-epi</a> <a id="62595" class="Symbol">(</a><a id="62596" href="Demos.HSP.html#62184" class="Function">F-ModThV-epi</a> <a id="62609" class="Symbol">Î»</a> <a id="62611" class="Symbol">{</a><a id="62612" href="Demos.HSP.html#62612" class="Bound">p</a> <a id="62614" href="Demos.HSP.html#62614" class="Bound">q</a><a id="62615" class="Symbol">}</a> <a id="62617" class="Symbol">â†’</a> <a id="62619" href="Demos.HSP.html#62578" class="Bound">AâˆˆModThK</a><a id="62627" class="Symbol">{</a><a id="62628" class="Argument">p</a> <a id="62630" class="Symbol">=</a> <a id="62632" href="Demos.HSP.html#62612" class="Bound">p</a><a id="62633" class="Symbol">}{</a><a id="62635" href="Demos.HSP.html#62614" class="Bound">q</a><a id="62636" class="Symbol">}</a> <a id="62638" class="Symbol">)</a> <a id="62640" href="Demos.HSP.html#31324" class="Function">ToLift-epi</a>
</pre>


### <a id="birkhoffs-variety-theorem">Birkhoff's Variety Theorem</a>

Let `ğ’¦` be a class of algebras and recall that `ğ’¦` is a *variety* provided
it is closed under homomorphisms, subalgebras and products; equivalently,
`V ğ’¦ âŠ† ğ’¦`.
(Observe that `ğ’¦ âŠ† V ğ’¦` holds for all `ğ’¦` since `V` is a closure operator.)
We call `ğ’¦` an *equational class* if it is the class of all models of some set of identities.

Birkhoff's variety theorem, also known as the HSP theorem, asserts that `ğ’¦` is an equational class if and only if it is a variety.  In this section, we present the statement and proof of this theorem---first in a style similar to what one finds in textbooks (e.g.,Â [@Bergman:2012 Theorem 4.41]), and then formally in the language of [MLTT][].


#### <a id="informal-proof">Informal proof</a>
 <!-- {#informal-proof .unnumbered} -->

(â‡’) *Every equational class is a variety*. Indeed, suppose `ğ’¦` is an equational class axiomatized by term identities `â„°`; that is, `ğ‘¨ âˆˆ ğ’¦` iff `ğ‘¨ âŠ¨ â„°`. Since the classes `H ğ’¦`, `S ğ’¦`, `P ğ’¦` and `ğ’¦` all satisfy the same set of equations, we have `V ğ’¦ âŠ« p â‰ˆ q` for all `(p , q) âˆˆ â„°`, so `V ğ’¦ âŠ† ğ’¦`.

(â‡) *Every variety is an equational class*.[^10] Let `ğ’¦` be an arbitrary variety.  We will describe a set of equations that axiomatizes `ğ’¦`.  A natural choice is to take `Th ğ’¦` and try to prove that `ğ’¦ = Mod (Th ğ’¦)`. Clearly, `ğ’¦ âŠ† Mod (Th ğ’¦)`.  To prove the converse inclusion, let `ğ‘¨ âˆˆ Mod (Th ğ’¦)`. It suffices to find an algebra `ğ‘­ âˆˆ S (P ğ’¦)` such that `ğ‘¨` is a homomorphic image of `ğ‘­`, as this will show that `ğ‘¨ âˆˆ H (S (P ğ’¦)) = ğ’¦`.

Let `X` be such that there exists a surjective environment `Ï : X â†’ ğ•Œ[ ğ‘¨ ]`.[^11]
By the `lift-hom` lemma, there is an epimorphism `h : ğ‘» X â†’ ğ•Œ[ ğ‘¨ ]` that extends `Ï`. Put  `ğ”½[ X ] := ğ‘» X / â‰ˆ` and let `g : ğ‘» X  â†’ ğ”½[ X ]` be the natural epimorphism with kernel `â‰ˆ`. We claim `ker g âŠ† ker h`. 
If the claim is true, then there is a map `f : ğ”½[ X ] â†’ ğ‘¨` such that `f âˆ˜ g = h`, and since `h`
is surjective so is `f`. Therefore, `ğ‘¨ âˆˆ ğ–§ (ğ”½[ X ]) âŠ† Mod (Th ğ’¦)` completing the proof.

It remains to prove the claim `ker g âŠ† ker h`. Let `u`, `v` be terms and assume `g u = g v`. Since `ğ‘» X` is generated by `X`, there are terms `p`, `q` such that `u = âŸ¦ ğ‘» X âŸ§ p` and `v = âŸ¦ ğ‘» X âŸ§ q`.[^12]
Therefore, `âŸ¦ ğ”½[ X ] âŸ§ p = g (âŸ¦ ğ‘» X âŸ§ p) = g u = g v = g (âŸ¦ ğ‘» X âŸ§ q) = âŸ¦ ğ”½[ X ]âŸ§ q`,
so `ğ’¦ âŠ« p â‰ˆ q`; thus, `(p , q) âˆˆ Th ğ’¦`. Since `ğ‘¨ âˆˆ Mod (Th ğ’¦)`, we obtain `ğ‘¨ âŠ§ p â‰ˆ q`, which implies
that `h u = (âŸ¦ ğ‘¨ âŸ§ p) âŸ¨$âŸ© Ï = (âŸ¦ ğ‘¨ âŸ§ q) âŸ¨$âŸ© Ï = h v`, as desired.

#### <a id="formal-proof">Formal proof</a>
 <!-- {#formal-proof .unnumbered} -->

(â‡’) *Every equational class is a variety*.
We need an arbitrary equational class, which we obtain by starting with an arbitrary collection `â„°` of equations and then defining `ğ’¦ = Mod â„°`, the class axiomatized by `â„°`. We prove that `ğ’¦` is a variety by showing that `ğ’¦ = V ğ’¦`. The inclusion `ğ’¦ âŠ† V ğ’¦`, which holds for all classes `ğ’¦`, is called the *expansive* property of `V`.

<pre class="Agda">

<a id="65638" class="Keyword">module</a> <a id="65645" href="Demos.HSP.html#65645" class="Module">_</a> <a id="65647" class="Symbol">(</a><a id="65648" href="Demos.HSP.html#65648" class="Bound">ğ’¦</a> <a id="65650" class="Symbol">:</a> <a id="65652" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="65656" class="Symbol">(</a><a id="65657" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="65665" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="65667" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="65669" class="Symbol">)</a> <a id="65671" class="Symbol">(</a><a id="65672" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="65674" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="65676" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="65679" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="65681" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="65684" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="65685" class="Symbol">))</a> <a id="65688" class="Keyword">where</a>
 <a id="65695" href="Demos.HSP.html#65695" class="Function">V-expa</a> <a id="65702" class="Symbol">:</a> <a id="65704" href="Demos.HSP.html#65648" class="Bound">ğ’¦</a> <a id="65706" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="65708" href="Demos.HSP.html#53421" class="Function">V</a> <a id="65710" href="Demos.HSP.html#65684" class="Bound">â„“</a> <a id="65712" class="Symbol">(</a><a id="65713" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="65716" class="Symbol">(</a><a id="65717" href="Demos.HSP.html#65665" class="Bound">Î±</a> <a id="65719" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="65721" href="Demos.HSP.html#65667" class="Bound">Ïáµƒ</a> <a id="65724" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="65726" href="Demos.HSP.html#65684" class="Bound">â„“</a><a id="65727" class="Symbol">))</a> <a id="65730" href="Demos.HSP.html#65648" class="Bound">ğ’¦</a>
 <a id="65733" href="Demos.HSP.html#65695" class="Function">V-expa</a> <a id="65740" class="Symbol">{</a><a id="65741" class="Argument">x</a> <a id="65743" class="Symbol">=</a> <a id="65745" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a><a id="65746" class="Symbol">}</a><a id="65747" href="Demos.HSP.html#65747" class="Bound">kA</a> <a id="65750" class="Symbol">=</a> <a id="65752" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a> <a id="65754" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65756" class="Symbol">(</a><a id="65757" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a> <a id="65759" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65761" class="Symbol">(</a><a id="65762" href="Data.Unit.Polymorphic.Base.html#480" class="Function">âŠ¤</a> <a id="65764" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65766" class="Symbol">(Î»</a> <a id="65769" href="Demos.HSP.html#65769" class="Bound">_</a> <a id="65771" class="Symbol">â†’</a> <a id="65773" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a><a id="65774" class="Symbol">)</a><a id="65775" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65777" class="Symbol">(Î»</a> <a id="65780" href="Demos.HSP.html#65780" class="Bound">_</a> <a id="65782" class="Symbol">â†’</a> <a id="65784" href="Demos.HSP.html#65747" class="Bound">kA</a><a id="65786" class="Symbol">)</a><a id="65787" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65789" href="Demos.HSP.html#66151" class="Function">Goal</a><a id="65793" class="Symbol">)</a><a id="65794" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65796" href="Demos.HSP.html#38257" class="Function">â‰¤-reflexive</a><a id="65807" class="Symbol">)</a><a id="65808" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65810" href="Demos.HSP.html#35308" class="Function">IdHomImage</a>
  <a id="65823" class="Keyword">where</a>
  <a id="65831" class="Keyword">open</a> <a id="65836" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="65843" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="65846" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a> <a id="65848" href="Demos.HSP.html#19168" class="Function Operator">]</a>            <a id="65861" class="Keyword">using</a> <a id="65867" class="Symbol">(</a> <a id="65869" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="65874" class="Symbol">)</a>
  <a id="65878" class="Keyword">open</a> <a id="65883" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="65890" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="65893" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="65895" class="Symbol">(Î»</a> <a id="65898" href="Demos.HSP.html#65898" class="Bound">_</a> <a id="65900" class="Symbol">â†’</a> <a id="65902" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a><a id="65903" class="Symbol">)</a> <a id="65905" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="65908" class="Keyword">using</a> <a id="65914" class="Symbol">()</a> <a id="65917" class="Keyword">renaming</a> <a id="65926" class="Symbol">(</a> <a id="65928" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="65933" class="Symbol">to</a> <a id="65936" class="Function">reflâ¨…</a> <a id="65942" class="Symbol">)</a>
  <a id="65946" href="Demos.HSP.html#65946" class="Function">toâ¨…</a>    <a id="65953" class="Symbol">:</a> <a id="65955" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="65958" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a> <a id="65960" href="Demos.HSP.html#19168" class="Function Operator">]</a>            <a id="65973" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="65975" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="65978" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="65980" class="Symbol">(Î»</a> <a id="65983" href="Demos.HSP.html#65983" class="Bound">_</a> <a id="65985" class="Symbol">â†’</a> <a id="65987" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a><a id="65988" class="Symbol">)</a> <a id="65990" href="Demos.HSP.html#19168" class="Function Operator">]</a>
  <a id="65994" href="Demos.HSP.html#65946" class="Function">toâ¨…</a>    <a id="66001" class="Symbol">=</a> <a id="66003" class="Keyword">record</a> <a id="66010" class="Symbol">{</a> <a id="66012" href="Function.Bundles.html#1919" class="Field">f</a> <a id="66014" class="Symbol">=</a> <a id="66016" class="Symbol">Î»</a> <a id="66018" href="Demos.HSP.html#66018" class="Bound">x</a> <a id="66020" href="Demos.HSP.html#66020" class="Bound">_</a> <a id="66022" class="Symbol">â†’</a> <a id="66024" href="Demos.HSP.html#66018" class="Bound">x</a>   <a id="66028" class="Symbol">;</a> <a id="66030" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="66035" class="Symbol">=</a> <a id="66037" class="Symbol">Î»</a> <a id="66039" href="Demos.HSP.html#66039" class="Bound">xy</a> <a id="66042" href="Demos.HSP.html#66042" class="Bound">_</a> <a id="66044" class="Symbol">â†’</a> <a id="66046" href="Demos.HSP.html#66039" class="Bound">xy</a> <a id="66049" class="Symbol">}</a>
  <a id="66053" href="Demos.HSP.html#66053" class="Function">fromâ¨…</a>  <a id="66060" class="Symbol">:</a> <a id="66062" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="66065" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="66067" class="Symbol">(Î»</a> <a id="66070" href="Demos.HSP.html#66070" class="Bound">_</a> <a id="66072" class="Symbol">â†’</a> <a id="66074" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a><a id="66075" class="Symbol">)</a> <a id="66077" href="Demos.HSP.html#19168" class="Function Operator">]</a>  <a id="66080" href="Demos.HSP.html#6569" class="Record Operator">âŸ¶</a> <a id="66082" href="Demos.HSP.html#19168" class="Function Operator">ğ”»[</a> <a id="66085" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a> <a id="66087" href="Demos.HSP.html#19168" class="Function Operator">]</a>
  <a id="66091" href="Demos.HSP.html#66053" class="Function">fromâ¨…</a>  <a id="66098" class="Symbol">=</a> <a id="66100" class="Keyword">record</a> <a id="66107" class="Symbol">{</a> <a id="66109" href="Function.Bundles.html#1919" class="Field">f</a> <a id="66111" class="Symbol">=</a> <a id="66113" class="Symbol">Î»</a> <a id="66115" href="Demos.HSP.html#66115" class="Bound">x</a> <a id="66117" class="Symbol">â†’</a> <a id="66119" href="Demos.HSP.html#66115" class="Bound">x</a> <a id="66121" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>  <a id="66125" class="Symbol">;</a> <a id="66127" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="66132" class="Symbol">=</a> <a id="66134" class="Symbol">Î»</a> <a id="66136" href="Demos.HSP.html#66136" class="Bound">xy</a> <a id="66139" class="Symbol">â†’</a> <a id="66141" href="Demos.HSP.html#66136" class="Bound">xy</a> <a id="66144" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="66147" class="Symbol">}</a>
  <a id="66151" href="Demos.HSP.html#66151" class="Function">Goal</a>   <a id="66158" class="Symbol">:</a> <a id="66160" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a> <a id="66162" href="Demos.HSP.html#33094" class="Record Operator">â‰…</a> <a id="66164" href="Demos.HSP.html#24289" class="Function">â¨…</a> <a id="66166" class="Symbol">(Î»</a> <a id="66169" href="Demos.HSP.html#66169" class="Bound">x</a> <a id="66171" class="Symbol">â†’</a> <a id="66173" href="Demos.HSP.html#65745" class="Bound">ğ‘¨</a><a id="66174" class="Symbol">)</a>
  <a id="66178" href="Demos.HSP.html#66151" class="Function">Goal</a>   <a id="66185" class="Symbol">=</a> <a id="66187" href="Demos.HSP.html#33153" class="InductiveConstructor">mkiso</a> <a id="66193" class="Symbol">(</a><a id="66194" href="Demos.HSP.html#65946" class="Function">toâ¨…</a> <a id="66198" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="66200" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="66206" href="Demos.HSP.html#65936" class="Function">reflâ¨…</a><a id="66211" class="Symbol">)</a> <a id="66213" class="Symbol">(</a><a id="66214" href="Demos.HSP.html#66053" class="Function">fromâ¨…</a> <a id="66220" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="66222" href="Demos.HSP.html#26628" class="InductiveConstructor">mkhom</a> <a id="66228" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="66232" class="Symbol">)</a> <a id="66234" class="Symbol">(Î»</a> <a id="66237" href="Demos.HSP.html#66237" class="Bound">_</a> <a id="66239" href="Demos.HSP.html#66239" class="Bound">_</a> <a id="66241" class="Symbol">â†’</a> <a id="66243" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="66247" class="Symbol">)</a> <a id="66249" class="Symbol">(Î»</a> <a id="66252" href="Demos.HSP.html#66252" class="Bound">_</a> <a id="66254" class="Symbol">â†’</a> <a id="66256" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="66260" class="Symbol">)</a>

</pre>
Observe how `ğ‘¨` is expressed as (isomorphic to) a product with just one factor (itself), that is, the product
`â¨… (Î» x â†’ ğ‘¨)` indexed over the one-element type `âŠ¤`.

For the inclusion `V ğ’¦ âŠ† ğ’¦`, recall lemma `V-id1` which asserts that `ğ’¦ âŠ« p â‰ˆ q` implies
`V â„“ Î¹ ğ’¦ âŠ« p â‰ˆ q`; whence, if `ğ’¦` is an equational class, then `V ğ’¦ âŠ† ğ’¦`, as we now confirm.

<pre class="Agda">

<a id="66635" class="Keyword">module</a> <a id="66642" href="Demos.HSP.html#66642" class="Module">_</a> <a id="66644" class="Symbol">{</a><a id="66645" href="Demos.HSP.html#66645" class="Bound">â„“</a> <a id="66647" class="Symbol">:</a> <a id="66649" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="66654" class="Symbol">}{</a><a id="66656" href="Demos.HSP.html#66656" class="Bound">X</a> <a id="66658" class="Symbol">:</a> <a id="66660" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="66665" href="Demos.HSP.html#66645" class="Bound">â„“</a><a id="66666" class="Symbol">}{</a><a id="66668" href="Demos.HSP.html#66668" class="Bound">â„°</a> <a id="66670" class="Symbol">:</a> <a id="66672" class="Symbol">{</a><a id="66673" href="Demos.HSP.html#66673" class="Bound">Y</a> <a id="66675" class="Symbol">:</a> <a id="66677" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="66682" href="Demos.HSP.html#66645" class="Bound">â„“</a><a id="66683" class="Symbol">}</a> <a id="66685" class="Symbol">â†’</a> <a id="66687" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="66692" class="Symbol">(</a><a id="66693" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="66698" href="Demos.HSP.html#66673" class="Bound">Y</a> <a id="66700" href="Data.Product.html#1167" class="Function Operator">Ã—</a> <a id="66702" href="Demos.HSP.html#40051" class="Datatype">Term</a> <a id="66707" href="Demos.HSP.html#66673" class="Bound">Y</a><a id="66708" class="Symbol">)</a> <a id="66710" class="Symbol">(</a><a id="66711" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="66714" href="Demos.HSP.html#66645" class="Bound">â„“</a><a id="66715" class="Symbol">)}</a> <a id="66718" class="Keyword">where</a>
 <a id="66725" class="Keyword">private</a> <a id="66733" href="Demos.HSP.html#66733" class="Function">ğ’¦</a> <a id="66735" class="Symbol">=</a> <a id="66737" href="Demos.HSP.html#48992" class="Function">Mod</a><a id="66740" class="Symbol">{</a><a id="66741" class="Argument">Î±</a> <a id="66743" class="Symbol">=</a> <a id="66745" href="Demos.HSP.html#66645" class="Bound">â„“</a><a id="66746" class="Symbol">}{</a><a id="66748" href="Demos.HSP.html#66645" class="Bound">â„“</a><a id="66749" class="Symbol">}{</a><a id="66751" href="Demos.HSP.html#66656" class="Bound">X</a><a id="66752" class="Symbol">}</a> <a id="66754" href="Demos.HSP.html#66668" class="Bound">â„°</a>     <a id="66760" class="Comment">-- an arbitrary equational class</a>

 <a id="66795" href="Demos.HSP.html#66795" class="Function">EqClâ‡’Var</a> <a id="66804" class="Symbol">:</a> <a id="66806" href="Demos.HSP.html#53421" class="Function">V</a> <a id="66808" href="Demos.HSP.html#66645" class="Bound">â„“</a> <a id="66810" class="Symbol">(</a><a id="66811" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="66814" href="Demos.HSP.html#66645" class="Bound">â„“</a><a id="66815" class="Symbol">)</a> <a id="66817" href="Demos.HSP.html#66733" class="Function">ğ’¦</a> <a id="66819" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="66821" href="Demos.HSP.html#66733" class="Function">ğ’¦</a>
 <a id="66824" href="Demos.HSP.html#66795" class="Function">EqClâ‡’Var</a> <a id="66833" class="Symbol">{</a><a id="66834" href="Demos.HSP.html#66834" class="Bound">ğ‘¨</a><a id="66835" class="Symbol">}</a> <a id="66837" href="Demos.HSP.html#66837" class="Bound">vA</a> <a id="66840" class="Symbol">{</a><a id="66841" href="Demos.HSP.html#66841" class="Bound">p</a><a id="66842" class="Symbol">}</a> <a id="66844" class="Symbol">{</a><a id="66845" href="Demos.HSP.html#66845" class="Bound">q</a><a id="66846" class="Symbol">}</a> <a id="66848" href="Demos.HSP.html#66848" class="Bound">pâ„°q</a> <a id="66852" href="Demos.HSP.html#66852" class="Bound">Ï</a> <a id="66854" class="Symbol">=</a> <a id="66856" href="Demos.HSP.html#55156" class="Function">V-id1</a> <a id="66862" href="Demos.HSP.html#66645" class="Bound">â„“</a> <a id="66864" class="Symbol">{</a><a id="66865" href="Demos.HSP.html#66733" class="Function">ğ’¦</a><a id="66866" class="Symbol">}</a> <a id="66868" class="Symbol">{</a><a id="66869" href="Demos.HSP.html#66841" class="Bound">p</a><a id="66870" class="Symbol">}</a> <a id="66872" class="Symbol">{</a><a id="66873" href="Demos.HSP.html#66845" class="Bound">q</a><a id="66874" class="Symbol">}</a> <a id="66876" class="Symbol">(Î»</a> <a id="66879" href="Demos.HSP.html#66879" class="Bound">_</a> <a id="66881" href="Demos.HSP.html#66881" class="Bound">x</a> <a id="66883" href="Demos.HSP.html#66883" class="Bound">Ï„</a> <a id="66885" class="Symbol">â†’</a> <a id="66887" href="Demos.HSP.html#66881" class="Bound">x</a> <a id="66889" href="Demos.HSP.html#66848" class="Bound">pâ„°q</a> <a id="66893" href="Demos.HSP.html#66883" class="Bound">Ï„</a><a id="66894" class="Symbol">)</a> <a id="66896" href="Demos.HSP.html#66834" class="Bound">ğ‘¨</a> <a id="66898" href="Demos.HSP.html#66837" class="Bound">vA</a> <a id="66901" href="Demos.HSP.html#66852" class="Bound">Ï</a>

</pre>
By `V-expa` and `Eqclâ‡’Var`, every equational class is a variety.

(â‡) *Every variety is an equational class*.
To fix an arbitrary variety, start with an arbitrary class `ğ’¦` of `ğ‘†`-algebras and take the *varietal closure*, `V ğ’¦`. We prove that `V ğ’¦` is precisely the collection of algebras that model `Th (V ğ’¦)`; that is, `V ğ’¦ = Mod (Th (V ğ’¦))`.  The inclusion `V ğ’¦ âŠ† Mod (Th (V ğ’¦))` is a consequence of the fact that `Mod Th` is a closure operator.

<pre class="Agda">

<a id="67379" class="Keyword">module</a> <a id="67386" href="Demos.HSP.html#67386" class="Module">_</a> <a id="67388" class="Symbol">(</a><a id="67389" href="Demos.HSP.html#67389" class="Bound">ğ’¦</a> <a id="67391" class="Symbol">:</a> <a id="67393" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="67397" class="Symbol">(</a><a id="67398" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="67406" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="67408" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="67410" class="Symbol">)</a> <a id="67412" class="Symbol">(</a><a id="67413" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="67415" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="67417" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="67420" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="67422" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="67425" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="67426" class="Symbol">)){</a><a id="67429" href="Demos.HSP.html#67429" class="Bound">X</a> <a id="67431" class="Symbol">:</a> <a id="67433" href="Demos.HSP.html#6374" class="Primitive">Type</a> <a id="67438" class="Symbol">(</a><a id="67439" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="67441" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="67443" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="67446" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="67448" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="67449" class="Symbol">)}</a> <a id="67452" class="Keyword">where</a>
 <a id="67459" class="Keyword">private</a> <a id="67467" href="Demos.HSP.html#67467" class="Function">c</a> <a id="67469" class="Symbol">=</a> <a id="67471" href="Demos.HSP.html#67406" class="Bound">Î±</a> <a id="67473" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="67475" href="Demos.HSP.html#67408" class="Bound">Ïáµƒ</a> <a id="67478" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="67480" href="Demos.HSP.html#67425" class="Bound">â„“</a> <a id="67482" class="Symbol">;</a> <a id="67484" href="Demos.HSP.html#67484" class="Function">Î¹</a> <a id="67486" class="Symbol">=</a> <a id="67488" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="67491" href="Demos.HSP.html#67467" class="Function">c</a>

 <a id="67495" href="Demos.HSP.html#67495" class="Function">ModTh-closure</a> <a id="67509" class="Symbol">:</a> <a id="67511" href="Demos.HSP.html#53421" class="Function">V</a><a id="67512" class="Symbol">{</a><a id="67513" class="Argument">Î²</a> <a id="67515" class="Symbol">=</a> <a id="67517" href="Demos.HSP.html#7155" class="Generalizable">Î²</a><a id="67518" class="Symbol">}{</a><a id="67520" href="Demos.HSP.html#7157" class="Generalizable">Ïáµ‡</a><a id="67522" class="Symbol">}{</a><a id="67524" href="Demos.HSP.html#7160" class="Generalizable">Î³</a><a id="67525" class="Symbol">}{</a><a id="67527" href="Demos.HSP.html#7162" class="Generalizable">Ïá¶œ</a><a id="67529" class="Symbol">}{</a><a id="67531" href="Demos.HSP.html#7165" class="Generalizable">Î´</a><a id="67532" class="Symbol">}{</a><a id="67534" href="Demos.HSP.html#7167" class="Generalizable">Ïáµˆ</a><a id="67536" class="Symbol">}</a> <a id="67538" href="Demos.HSP.html#67425" class="Bound">â„“</a> <a id="67540" href="Demos.HSP.html#67484" class="Function">Î¹</a> <a id="67542" href="Demos.HSP.html#67389" class="Bound">ğ’¦</a> <a id="67544" href="Relation.Unary.html#1742" class="Function Operator">âŠ†</a> <a id="67546" href="Demos.HSP.html#48992" class="Function">Mod</a><a id="67549" class="Symbol">{</a><a id="67550" class="Argument">X</a> <a id="67552" class="Symbol">=</a> <a id="67554" href="Demos.HSP.html#67429" class="Bound">X</a><a id="67555" class="Symbol">}</a> <a id="67557" class="Symbol">(</a><a id="67558" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="67561" class="Symbol">(</a><a id="67562" href="Demos.HSP.html#53421" class="Function">V</a> <a id="67564" href="Demos.HSP.html#67425" class="Bound">â„“</a> <a id="67566" href="Demos.HSP.html#67484" class="Function">Î¹</a> <a id="67568" href="Demos.HSP.html#67389" class="Bound">ğ’¦</a><a id="67569" class="Symbol">))</a>
 <a id="67573" href="Demos.HSP.html#67495" class="Function">ModTh-closure</a> <a id="67587" class="Symbol">{</a><a id="67588" class="Argument">x</a> <a id="67590" class="Symbol">=</a> <a id="67592" href="Demos.HSP.html#67592" class="Bound">ğ‘¨</a><a id="67593" class="Symbol">}</a> <a id="67595" href="Demos.HSP.html#67595" class="Bound">vA</a> <a id="67598" class="Symbol">{</a><a id="67599" href="Demos.HSP.html#67599" class="Bound">p</a><a id="67600" class="Symbol">}</a> <a id="67602" class="Symbol">{</a><a id="67603" href="Demos.HSP.html#67603" class="Bound">q</a><a id="67604" class="Symbol">}</a> <a id="67606" href="Demos.HSP.html#67606" class="Bound">x</a> <a id="67608" href="Demos.HSP.html#67608" class="Bound">Ï</a> <a id="67610" class="Symbol">=</a> <a id="67612" href="Demos.HSP.html#67606" class="Bound">x</a> <a id="67614" href="Demos.HSP.html#67592" class="Bound">ğ‘¨</a> <a id="67616" href="Demos.HSP.html#67595" class="Bound">vA</a> <a id="67619" href="Demos.HSP.html#67608" class="Bound">Ï</a>

</pre>

Our proof of the inclusion `Mod( Th( V ğ’¦)) âŠ† V ğ’¦` is carried out in two steps.

* Prove  `ğ”½[ X ] â‰¤ ğ‘ª X`.
* Prove that every algebra in `Mod (Th (V ğ’¦))` is a homomorphic image of `ğ”½[ X ]`.

From the first item we have `ğ”½[ X ] âˆˆ S( P ğ’¦))`, since `ğ‘ª X` is a product of algebras in `ğ’¦`. From this and the second item will follow `Mod (Th (V ğ’¦)) âŠ† H (S (P ğ’¦))` (= `V ğ’¦`), as desired.

To prove `ğ”½[ X ] â‰¤ ğ‘ª X`, we construct a homomorphism from `ğ”½[ X ]` to `ğ‘ª X` and then show it is injective,
so `ğ”½[ X ]` is (isomorphic to) a subalgebra of `ğ‘ª X`.

<pre class="Agda">

 <a id="68191" class="Keyword">open</a> <a id="68196" href="Demos.HSP.html#60267" class="Module">FreeHom</a> <a id="68204" class="Symbol">{</a><a id="68205" class="Argument">â„“</a> <a id="68207" class="Symbol">=</a> <a id="68209" href="Demos.HSP.html#67425" class="Bound">â„“</a><a id="68210" class="Symbol">}{</a><a id="68212" href="Demos.HSP.html#67389" class="Bound">ğ’¦</a><a id="68213" class="Symbol">}</a>
 <a id="68216" class="Keyword">open</a> <a id="68221" href="Demos.HSP.html#59406" class="Module">FreeAlgebra</a> <a id="68233" href="Demos.HSP.html#67389" class="Bound">ğ’¦</a> <a id="68235" class="Keyword">using</a> <a id="68241" class="Symbol">(</a><a id="68242" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="68247" class="Symbol">;</a>  <a id="68250" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[_]</a> <a id="68255" class="Symbol">;</a> <a id="68257" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="68259" class="Symbol">)</a>
 <a id="68262" href="Demos.HSP.html#68262" class="Function">homFC</a> <a id="68268" class="Symbol">:</a> <a id="68270" href="Demos.HSP.html#26681" class="Function">hom</a> <a id="68274" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="68277" href="Demos.HSP.html#67429" class="Bound">X</a> <a id="68279" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="68281" class="Symbol">(</a><a id="68282" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="68284" href="Demos.HSP.html#67429" class="Bound">X</a><a id="68285" class="Symbol">)</a>
 <a id="68288" href="Demos.HSP.html#68262" class="Function">homFC</a> <a id="68294" class="Symbol">=</a> <a id="68296" href="Demos.HSP.html#36955" class="Function">fromHomIm</a> <a id="68306" class="Symbol">(</a><a id="68307" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="68312" href="Demos.HSP.html#67429" class="Bound">X</a><a id="68313" class="Symbol">)</a>

 <a id="68317" href="Demos.HSP.html#68317" class="Function">monFC</a> <a id="68323" class="Symbol">:</a> <a id="68325" href="Demos.HSP.html#27309" class="Function">mon</a> <a id="68329" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="68332" href="Demos.HSP.html#67429" class="Bound">X</a> <a id="68334" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="68336" class="Symbol">(</a><a id="68337" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="68339" href="Demos.HSP.html#67429" class="Bound">X</a><a id="68340" class="Symbol">)</a>
 <a id="68343" href="Demos.HSP.html#68317" class="Function">monFC</a> <a id="68349" class="Symbol">=</a> <a id="68351" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="68353" href="Demos.HSP.html#68262" class="Function">homFC</a> <a id="68359" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="68361" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68363" class="Keyword">record</a> <a id="68370" class="Symbol">{</a> <a id="68372" href="Demos.HSP.html#27212" class="Field">isHom</a> <a id="68378" class="Symbol">=</a> <a id="68380" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="68382" href="Demos.HSP.html#68262" class="Function">homFC</a> <a id="68388" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a>
                            <a id="68418" class="Symbol">;</a> <a id="68420" href="Demos.HSP.html#27237" class="Field">isInjective</a> <a id="68432" class="Symbol">=</a>  <a id="68435" class="Symbol">Î»</a> <a id="68437" class="Symbol">{</a><a id="68438" href="Demos.HSP.html#68438" class="Bound">x</a><a id="68439" class="Symbol">}{</a><a id="68441" href="Demos.HSP.html#68441" class="Bound">y</a><a id="68442" class="Symbol">}â†’</a> <a id="68445" href="Demos.HSP.html#13991" class="Function">fromIm-inj</a> <a id="68456" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="68458" href="Demos.HSP.html#59769" class="Function">homC</a> <a id="68463" href="Demos.HSP.html#67429" class="Bound">X</a> <a id="68465" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="68467" class="Symbol">{</a><a id="68468" href="Demos.HSP.html#68438" class="Bound">x</a><a id="68469" class="Symbol">}{</a><a id="68471" href="Demos.HSP.html#68441" class="Bound">y</a><a id="68472" class="Symbol">}</a>   <a id="68476" class="Symbol">}</a>
 <a id="68479" href="Demos.HSP.html#68479" class="Function">Fâ‰¤C</a> <a id="68483" class="Symbol">:</a> <a id="68485" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="68488" href="Demos.HSP.html#67429" class="Bound">X</a> <a id="68490" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="68492" href="Demos.HSP.html#37969" class="Function Operator">â‰¤</a> <a id="68494" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="68496" href="Demos.HSP.html#67429" class="Bound">X</a>
 <a id="68499" href="Demos.HSP.html#68479" class="Function">Fâ‰¤C</a> <a id="68503" class="Symbol">=</a> <a id="68505" href="Demos.HSP.html#38694" class="Function">monâ†’â‰¤</a> <a id="68511" href="Demos.HSP.html#68317" class="Function">monFC</a>

 <a id="68519" class="Keyword">open</a> <a id="68524" href="Demos.HSP.html#59406" class="Module">FreeAlgebra</a> <a id="68536" href="Demos.HSP.html#67389" class="Bound">ğ’¦</a> <a id="68538" class="Keyword">using</a> <a id="68544" class="Symbol">(</a> <a id="68546" href="Demos.HSP.html#59488" class="Function">â„‘</a> <a id="68548" class="Symbol">)</a>

 <a id="68552" href="Demos.HSP.html#68552" class="Function">SPF</a> <a id="68556" class="Symbol">:</a> <a id="68558" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="68561" href="Demos.HSP.html#67429" class="Bound">X</a> <a id="68563" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="68565" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="68567" href="Demos.HSP.html#50238" class="Function">S</a> <a id="68569" href="Demos.HSP.html#67484" class="Function">Î¹</a> <a id="68571" class="Symbol">(</a><a id="68572" href="Demos.HSP.html#50350" class="Function">P</a> <a id="68574" href="Demos.HSP.html#67425" class="Bound">â„“</a> <a id="68576" href="Demos.HSP.html#67484" class="Function">Î¹</a> <a id="68578" href="Demos.HSP.html#67389" class="Bound">ğ’¦</a><a id="68579" class="Symbol">)</a>
 <a id="68582" href="Demos.HSP.html#68552" class="Function">SPF</a> <a id="68586" class="Symbol">=</a> <a id="68588" href="Demos.HSP.html#59580" class="Function">ğ‘ª</a> <a id="68590" href="Demos.HSP.html#67429" class="Bound">X</a> <a id="68592" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68594" class="Symbol">((</a><a id="68596" href="Demos.HSP.html#59488" class="Function">â„‘</a> <a id="68598" href="Demos.HSP.html#67429" class="Bound">X</a><a id="68599" class="Symbol">)</a> <a id="68601" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68603" class="Symbol">(</a><a id="68604" href="Demos.HSP.html#7794" class="Function Operator">âˆ£_âˆ£</a> <a id="68608" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68610" class="Symbol">((Î»</a> <a id="68614" href="Demos.HSP.html#68614" class="Bound">i</a> <a id="68616" class="Symbol">â†’</a> <a id="68618" href="Demos.HSP.html#6492" class="Field">fst</a> <a id="68622" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="68624" href="Demos.HSP.html#68614" class="Bound">i</a> <a id="68626" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a><a id="68627" class="Symbol">)</a> <a id="68629" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68631" href="Demos.HSP.html#33893" class="Function">â‰…-refl</a><a id="68637" class="Symbol">)))</a> <a id="68641" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="68644" href="Demos.HSP.html#68479" class="Function">Fâ‰¤C</a>
</pre>

Next we prove that every algebra in `Mod (Th (V ğ’¦))` is a homomorphic image of `ğ”½[ X ]`. Indeed,

<pre class="Agda">

<a id="68772" class="Keyword">module</a> <a id="68779" href="Demos.HSP.html#68779" class="Module">_</a> <a id="68781" class="Symbol">{</a><a id="68782" href="Demos.HSP.html#68782" class="Bound">ğ’¦</a> <a id="68784" class="Symbol">:</a> <a id="68786" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="68790" class="Symbol">(</a><a id="68791" href="Demos.HSP.html#18524" class="Record">Algebra</a> <a id="68799" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="68801" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a><a id="68803" class="Symbol">)</a> <a id="68805" class="Symbol">(</a><a id="68806" href="Demos.HSP.html#7150" class="Generalizable">Î±</a> <a id="68808" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="68810" href="Demos.HSP.html#7152" class="Generalizable">Ïáµƒ</a> <a id="68813" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="68815" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="68818" href="Demos.HSP.html#7174" class="Generalizable">â„“</a><a id="68819" class="Symbol">)}</a> <a id="68822" class="Keyword">where</a>
 <a id="68829" class="Keyword">private</a> <a id="68837" href="Demos.HSP.html#68837" class="Function">c</a> <a id="68839" class="Symbol">=</a> <a id="68841" href="Demos.HSP.html#68799" class="Bound">Î±</a> <a id="68843" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="68845" href="Demos.HSP.html#68801" class="Bound">Ïáµƒ</a> <a id="68848" href="Agda.Primitive.html#810" class="Primitive Operator">âŠ”</a> <a id="68850" href="Demos.HSP.html#68818" class="Bound">â„“</a> <a id="68852" class="Symbol">;</a> <a id="68854" href="Demos.HSP.html#68854" class="Function">Î¹</a> <a id="68856" class="Symbol">=</a> <a id="68858" href="Demos.HSP.html#35093" class="Function">ov</a> <a id="68861" href="Demos.HSP.html#68837" class="Function">c</a>

 <a id="68865" href="Demos.HSP.html#68865" class="Function">Varâ‡’EqCl</a> <a id="68874" class="Symbol">:</a> <a id="68876" class="Symbol">âˆ€</a> <a id="68878" href="Demos.HSP.html#68878" class="Bound">ğ‘¨</a> <a id="68880" class="Symbol">â†’</a> <a id="68882" href="Demos.HSP.html#68878" class="Bound">ğ‘¨</a> <a id="68884" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="68886" href="Demos.HSP.html#48992" class="Function">Mod</a> <a id="68890" class="Symbol">(</a><a id="68891" href="Demos.HSP.html#48894" class="Function">Th</a> <a id="68894" class="Symbol">(</a><a id="68895" href="Demos.HSP.html#53421" class="Function">V</a> <a id="68897" href="Demos.HSP.html#68818" class="Bound">â„“</a> <a id="68899" href="Demos.HSP.html#68854" class="Function">Î¹</a> <a id="68901" href="Demos.HSP.html#68782" class="Bound">ğ’¦</a><a id="68902" class="Symbol">))</a> <a id="68905" class="Symbol">â†’</a> <a id="68907" href="Demos.HSP.html#68878" class="Bound">ğ‘¨</a> <a id="68909" href="Relation.Unary.html#1523" class="Function Operator">âˆˆ</a> <a id="68911" href="Demos.HSP.html#53421" class="Function">V</a> <a id="68913" href="Demos.HSP.html#68818" class="Bound">â„“</a> <a id="68915" href="Demos.HSP.html#68854" class="Function">Î¹</a> <a id="68917" href="Demos.HSP.html#68782" class="Bound">ğ’¦</a>
 <a id="68920" href="Demos.HSP.html#68865" class="Function">Varâ‡’EqCl</a> <a id="68929" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="68931" href="Demos.HSP.html#68931" class="Bound">ModThA</a> <a id="68938" class="Symbol">=</a> <a id="68940" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="68943" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="68946" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="68948" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="68950" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="68952" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68954" class="Symbol">(</a><a id="68955" href="Demos.HSP.html#68552" class="Function">SPF</a><a id="68958" class="Symbol">{</a><a id="68959" class="Argument">â„“</a> <a id="68961" class="Symbol">=</a> <a id="68963" href="Demos.HSP.html#68818" class="Bound">â„“</a><a id="68964" class="Symbol">}</a> <a id="68966" href="Demos.HSP.html#68782" class="Bound">ğ’¦</a> <a id="68968" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68970" href="Demos.HSP.html#69229" class="Function">Aim</a><a id="68973" class="Symbol">)</a>
  <a id="68977" class="Keyword">where</a>
  <a id="68985" class="Keyword">open</a> <a id="68990" href="Demos.HSP.html#59406" class="Module">FreeAlgebra</a> <a id="69002" href="Demos.HSP.html#68782" class="Bound">ğ’¦</a> <a id="69004" class="Keyword">using</a> <a id="69010" class="Symbol">(</a> <a id="69012" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[_]</a> <a id="69017" class="Symbol">)</a>
  <a id="69021" href="Demos.HSP.html#69021" class="Function">epiFlA</a> <a id="69028" class="Symbol">:</a> <a id="69030" href="Demos.HSP.html#27736" class="Function">epi</a> <a id="69034" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="69037" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="69040" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69042" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="69044" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="69046" class="Symbol">(</a><a id="69047" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="69056" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69058" href="Demos.HSP.html#68854" class="Function">Î¹</a> <a id="69060" href="Demos.HSP.html#68854" class="Function">Î¹</a><a id="69061" class="Symbol">)</a>
  <a id="69065" href="Demos.HSP.html#69021" class="Function">epiFlA</a> <a id="69072" class="Symbol">=</a> <a id="69074" href="Demos.HSP.html#62488" class="Function">F-ModTh-epi-lift</a><a id="69090" class="Symbol">{</a><a id="69091" class="Argument">â„“</a> <a id="69093" class="Symbol">=</a> <a id="69095" href="Demos.HSP.html#68818" class="Bound">â„“</a><a id="69096" class="Symbol">}</a> <a id="69098" class="Symbol">Î»</a> <a id="69100" class="Symbol">{</a><a id="69101" href="Demos.HSP.html#69101" class="Bound">p</a> <a id="69103" href="Demos.HSP.html#69103" class="Bound">q</a><a id="69104" class="Symbol">}</a> <a id="69106" class="Symbol">â†’</a> <a id="69108" href="Demos.HSP.html#68931" class="Bound">ModThA</a><a id="69114" class="Symbol">{</a><a id="69115" class="Argument">p</a> <a id="69117" class="Symbol">=</a> <a id="69119" href="Demos.HSP.html#69101" class="Bound">p</a><a id="69120" class="Symbol">}{</a><a id="69122" href="Demos.HSP.html#69103" class="Bound">q</a><a id="69123" class="Symbol">}</a>

  <a id="69128" href="Demos.HSP.html#69128" class="Function">Ï†</a> <a id="69130" class="Symbol">:</a> <a id="69132" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="69141" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69143" href="Demos.HSP.html#68854" class="Function">Î¹</a> <a id="69145" href="Demos.HSP.html#68854" class="Function">Î¹</a> <a id="69147" href="Demos.HSP.html#35189" class="Function Operator">IsHomImageOf</a> <a id="69160" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="69163" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="69166" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69168" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="69170" href="Demos.HSP.html#59859" class="Function Operator">]</a>
  <a id="69174" href="Demos.HSP.html#69128" class="Function">Ï†</a> <a id="69176" class="Symbol">=</a> <a id="69178" href="Demos.HSP.html#28092" class="Function">epiâ†’ontohom</a> <a id="69190" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="69193" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="69196" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69198" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="69200" href="Demos.HSP.html#59859" class="Function Operator">]</a> <a id="69202" class="Symbol">(</a><a id="69203" href="Demos.HSP.html#22422" class="Function">Lift-Alg</a> <a id="69212" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69214" href="Demos.HSP.html#68854" class="Function">Î¹</a> <a id="69216" href="Demos.HSP.html#68854" class="Function">Î¹</a><a id="69217" class="Symbol">)</a> <a id="69219" href="Demos.HSP.html#69021" class="Function">epiFlA</a>

  <a id="69229" href="Demos.HSP.html#69229" class="Function">Aim</a> <a id="69233" class="Symbol">:</a> <a id="69235" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69237" href="Demos.HSP.html#35189" class="Function Operator">IsHomImageOf</a> <a id="69250" href="Demos.HSP.html#59859" class="Function Operator">ğ”½[</a> <a id="69253" href="Demos.HSP.html#19222" class="Function Operator">ğ•Œ[</a> <a id="69256" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a> <a id="69258" href="Demos.HSP.html#19222" class="Function Operator">]</a> <a id="69260" href="Demos.HSP.html#59859" class="Function Operator">]</a>
  <a id="69264" href="Demos.HSP.html#69229" class="Function">Aim</a> <a id="69268" class="Symbol">=</a> <a id="69270" href="Demos.HSP.html#29189" class="Function">âˆ˜-hom</a> <a id="69276" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a> <a id="69278" href="Demos.HSP.html#69128" class="Function">Ï†</a> <a id="69280" href="Demos.HSP.html#7794" class="Function Operator">âˆ£</a><a id="69281" class="Symbol">(</a><a id="69282" href="Demos.HSP.html#33205" class="Field">from</a> <a id="69287" href="Demos.HSP.html#37610" class="Function">Lift-â‰…</a><a id="69293" class="Symbol">)</a><a id="69294" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="69296" href="Demos.HSP.html#12901" class="Function">âˆ˜-IsSurjective</a> <a id="69311" class="Symbol">_</a> <a id="69313" class="Symbol">_</a> <a id="69315" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a> <a id="69317" href="Demos.HSP.html#69128" class="Function">Ï†</a> <a id="69319" href="Demos.HSP.html#7831" class="Function Operator">âˆ¥</a><a id="69320" class="Symbol">(</a><a id="69321" href="Demos.HSP.html#33629" class="Function">fromIsSurjective</a><a id="69337" class="Symbol">(</a><a id="69338" href="Demos.HSP.html#37610" class="Function">Lift-â‰…</a><a id="69344" class="Symbol">{</a><a id="69345" class="Argument">ğ‘¨</a> <a id="69347" class="Symbol">=</a> <a id="69349" href="Demos.HSP.html#68929" class="Bound">ğ‘¨</a><a id="69350" class="Symbol">}))</a>

</pre>
By `ModTh-closure` and `Varâ‡’EqCl`, we have `V ğ’¦ = Mod (Th (V ğ’¦))` for every class `ğ’¦` of `ğ‘†`-algebras.
Thus, every variety is an equational class.

This completes the formal proof of Birkhoff's variety theorem. âˆ

### <a id="discussion">Discussion</a>
 <!-- {#sec:discussion} -->


How do we differ from the classical, set-theoretic approach? Most noticeable is our avoidance of all *size* issues. By using universe levels and level polymorphism, we always make sure we are in a *large enough* universe. So we can easily talk about "all algebras such that..." because these are always taken from a bounded (but arbitrary) universe.

Our use of setoids introduces nothing new: all the equivalence relations we use were already present in the classical proofs. The only "new" material is that we have to prove that functions respect those equivalences.

Our first attempt to formalize Birkhoff's theorem was not sufficiently careful in its handling of variable symbols `X`. Specifically, this type was unconstrained; it is meant to represent the informal notion of a "sufficiently large" collection of variable symbols. Consequently, we postulated surjections from `X` onto the domains of all algebras in the class under consideration. But then, given a signature `ğ‘º` and a one-element `ğ‘†`-algebra `ğ‘¨`, by choosing `X` to be the empty type `âŠ¥`, our surjectivity postulate gives a map from `âŠ¥` onto the singleton domain of `ğ‘¨`. (For details, see the [Demos.ContraX](https://github.com/ualib/agda-algebras/blob/master/src/Demos/ContraX.lagda) module which constructs the counterexample in [Agda][].)

### <a id="related-work">Related work</a>

There have been a number of efforts to formalize parts of universal algebra in type theory besides ours. The Coq proof assistant, based on the Calculus of Inductive Constructions, was used by Capretta, inÂ [@Capretta:1999], and Spitters and Van der Weegen, inÂ [@Spitters:2011], to formalized the basics of universal algebra and some classical algebraic structures. InÂ [@Gunther:2018] Gunther et al developed what seemed (prior to the library) the most extensive libraryof formalized universal algebra to date. Like ,Â [@Gunther:2018] is based on dependent type theory, is programmed in , and goes beyond the basic isomorphism theorems to include some equational logic. Although their coverage is less extensive than that of , Gunther et al do treat *multi-sorted* algebras, whereas is currently limited to single-sorted structures.

As noted by AbelÂ [@Abel:2021], Amato et al, in [@Amato:2021], have formalized multi-sorted algebras with finitary operators in UniMath. The restriction to finitary operations was due to limitations of the UniMath type theory, which does not have W-types nor user-defined inductive types. Abel also notes that Lynge and Spitters, inÂ [@Lynge:2019], formalize multi-sorted algebras with finitary operators in *Homotopy type theory* ([@HoTT]) using Coq. HoTT's higher inductive types enable them to define quotients as types, without the need for setoids. Lynge and Spitters prove three isomorphism theorems concerning subalgebras and quotient algebras, but do not formalize universal algebras nor varieties. Finally, inÂ [@Abel:2021], Abel gives a new formal proof of the soundness and completeness theorem for multi-sorted algebraic structures.

-----------------------------------

### <a id="footnotes">Footnotes</a>

[^1]: An alternative formalization based on classical set-theory was achieved inÂ [@birkhoff-in-mizar:1999].

[^2]: See the [[Birkhoff.lagda]{.sans-serif}](https://github.com/ualib/ualib.github.io/blob/71f173858701398d56224dd79d152c380c0c2b5e/src/lagda/UALib/Birkhoff.lagda) file in the [[ualib/ualib.gitlab.io]{.sans-serif}](https://github.com/ualib/ualib.github.io) repository ([15 Jan 2021 commit 71f1738](https://github.com/ualib/ualib.github.io/commit/71f173858701398d56224dd79d152c380c0c2b5e))Â [@ualib_v1.0.0].

[^3]: [[src/Demos/HSP.lagda]{.sans-serif}](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) in the [agda-algebras][] repository: [[github.com/ualib/agda-algebras]{.sans-serif}](https://github.com/ualib/agda-algebras).

[^4]: the axiom asserting that two point-wise equal functions are equal

[^5]: All submodules of the module in the library are also fully constructive in this sense.

[^6]: The code in this paragraph was suggested by an anonymous referee.

[^7]: `suc â„“` denotes the successor of `â„“` in the universe hierarchy.

[^8]: The definition of was provided by an anonymous referee; it is indeed simpler than trying to apply the general `HomFactor` theorem found in the [agda-algebras][] library.

[^9]: Some authors reserve the term for a *deductively closed* set of equations, that is, a set of equations that is closed under entailment.

[^10]: The proof we present here is based onÂ [@Bergman:2012 Theorem 4.41].

[^11]: Informally, this is done by assuming `X` has cardinality at least `max(| ğ•Œ[ ğ‘¨ ] |, Ï‰)`. Later we will see how to construct an `X` with the required property in type theory.

[^12]: `âŸ¦ ğ‘¨ âŸ§ t` denotes the interpretation of the term `t` in the algebra `ğ‘¨`.


{% include UALib.Links.md %}

