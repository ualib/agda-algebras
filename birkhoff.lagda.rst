.. File: birkhoff.lagda.rst
.. Author: William DeMeo <williamdemeo@gmail.com>
.. Date: 27 Oct 2019
.. Updated: 13 Feb 2020
.. Copyright (c) 2019 William DeMeo

.. .. include:: _static/math_macros.rst

----------------------------------

.. _birkhoffs-hsp-theorem:

=============================
Birkhoff's HSP theorem
=============================

The following is Birkhoff's celebrated HSP theorem. (See also :cite:`Bergman:2012`, Thm 4.41.)

.. proof:theorem:: 

   Every variety is an equational class.

   .. container:: toggle
 
      .. container:: header
 
         *Proof*.
      
      Let ğ’² be a variety. We must find a set of equations that axiomatizes ğ’². The obvious choice is to use the set of all equations that hold in ğ’².

      To this end, take :math:`Î£ = \mathsf{Th}(ğ’²)`. Let :math:`ğ’²^â€  := \mathsf{Mod}(Î£)`.  
  
      Clearly, :math:`ğ’² âŠ† ğ’²^â€ `. We shall prove the reverse inclusion.

      Let :math:`ğ”¸ âˆˆ ğ’²^â€ ` and :math:`Y` a set of cardinality :math:`\max(|A|, Ï‰)`. *Choose* a surjection :math:`h_0 : Y â†’ A`. [1]_
  
      By :numref:`Obs %s <obs 6>` (which is essentially Thm. 4.21 of :cite:`Bergman:2012`), :math:`h_0` extends to an epimorphism :math:`h: ğ•‹(Y) â†’ ğ”¸`.

      Furthermore, since :math:`ğ”½_ğ’²(Y) = ğ•‹(Y)/Î˜_ğ’²`, there is an epimorphism :math:`g: ğ•‹(Y) â†’ ğ”½_ğ’²`. [2]_

      We claim that :math:`\ker g âŠ† \ker h`. If the claim is true, then by :numref:`Obs %s <obs 4>` there is a map :math:`f: ğ”½_ğ’²(Y) â†’ ğ”¸` such that :math:`f âˆ˜ g = h`.
   
      Since :math:`h` is epic, so is :math:`f`. Hence :math:`ğ”¸ âˆˆ ğ–§ (ğ”½_{ğ’²}(Y)) âŠ† ğ’²` completing the proof. â˜

Let :math:`u,v âˆˆ T(Y)` and assume that :math:`g(u) = g(v)`. Since :math:`ğ•‹(Y)` is generated by :math:`Y`, then by :numref:`Obs %s <obs 6>` there is an integer :math:`n`, terms :math:`p, q âˆˆ T(X_n)`, and :math:`y_1, \dots, y_n âˆˆ Y` such that :math:`u = p^{ğ•‹(Y)}(y_1, \dots, y_n)` and :math:`v = q^{ğ•‹(Y)}(y_1,\dots, y_n)`, by TheoremÂ 4.32 of :cite:`Bergman:2012`.

Applying the homomorphism :math:`g`,

.. math:: p^{ğ”½_{ğ’²}(Y)}(y_1, \dots, y_n) = g(u) = g(v) = q^{ğ”½_{ğ’²}(Y)}(y_1,\dots, y_n).

Then by :numref:`Obs %s <obs 15>` above (CorollaryÂ 4.39 of :cite:`Bergman:2012`), we have :math:`ğ’² âŠ§ p â‰ˆ q`, hence :math:`(p â‰ˆ q) \in Î£`.

Since :math:`ğ”¸ âˆˆ ğ’²^â€  = \mathsf{Mod}(Î£)`, we obtain :math:`ğ”¸ âŠ§ p â‰ˆ q`. Therefore,

.. math:: h(u) = p^{ğ”¸}(h_0(y_1), \dots, h_0(y_n)) = q^{ğ”¸}(h_0(y_1), \dots, h_0(y_n)) = h(v),

as desired.

--------------------------

.. rubric:: Footnotes

.. [1]
   **AoC**. Some :term:`Choice` axiom is needed here.

.. [2]
   **AoC**. Some :term:`Choice` axiom is needed here.

.. include:: hyperlink_references.rst
