---
layout: default
title : Birkhoff.FreeAlgebra (The Agda Universal Algebra Library)
date : 2021-01-14
author: William DeMeo
---

### <a id="the-free-algebra">The Free Algebra</a>

#### <a id="the-free-algebra-in-theory">The free algebra in theory</a>

Recall, we proved in [the universal property](Terms.Free.html#the-universal-property) section of the [Terms.Free][] module that the term algebra `ğ‘» X` is the absolutely free algebra in the class ğ’œğ“â„Š(ğ‘†) of all ğ‘†-structures. In this section, we formalize, for a given class ğ’¦ of ğ‘†-algebras, the (relatively) free algebra in `S(P ğ’¦)` over X.

We use the next definition to take a free algebra *for* a class ğ’¦ and produce the free algebra *in* ğ’¦.

Î˜(ğ’¦, ğ‘¨) := {Î¸ âˆˆ Con ğ‘¨ : ğ‘¨ / Î¸ âˆˆ (S ğ’¦)} &nbsp; &nbsp; and &nbsp; &nbsp; Ïˆ(ğ’¦, ğ‘¨) := â‹‚ Î˜(ğ’¦, ğ‘¨).

Notice that Î˜(ğ’¦, ğ‘¨) may be empty, in which case Ïˆ(ğ’¦, ğ‘¨) = 1 and then ğ‘¨ / Ïˆ(ğ’¦, ğ‘¨) is trivial.

The free algebra is constructed by applying the above definitions to the special case in which ğ‘¨ is the term algebra `ğ‘» X` of ğ‘†-terms over X.

Since `ğ‘» X` is free for (and in) the class ğ’œğ“â„Š(ğ‘†) of all ğ‘†-algebras, it follows that `ğ‘» X` is free for every subclass ğ’¦ of ğ’œğ“â„Š(ğ‘†). Of course, `ğ‘» X` is not necessarily a member of ğ’¦, but if we form the quotient of `ğ‘» X` modulo the congruence Ïˆ(ğ’¦, ğ‘» X), which we denote by `ğ”‰ = (ğ‘» X) / Ïˆ(ğ’¦, ğ‘» X)`, then it's not hard to see that ğ”‰ is a subdirect product of the algebras in `{(ğ‘» ğ‘‹) / Î¸}`, where Î¸ ranges over Î˜(ğ’¦, ğ‘» X), so ğ”‰ belongs to `S(P ğ’¦)`, and it follows that ğ”‰ satisfies all the identities satisfied by all members of ğ’¦.  Indeed, for each pair `p q : ğ‘» X`, if `ğ’¦ âŠ§ p â‰ˆ q`, then p and q must belong to the same Ïˆ(ğ’¦, ğ‘» X)-class, so p and q are identified in the quotient ğ”‰.

The ğ”‰ that we have just defined is called the **free algebra over** ğ’¦ **generated by** `X` and (because of what we just observed) we may say that ğ”‰ is free *in* `S(P ğ’¦)`.


#### <a id="the-free-algebra-in-agda">The free algebra in Agda</a>

This section presents the [Birkhoff.FreeAlgebra][] module of the [Agda Universal Algebra Library][].  Here we represent ğ”‰ as a type in Agda by first constructing the congruence Ïˆ(ğ’¦, ğ‘» ğ‘‹) described above.

<pre class="Agda">

<a id="2167" class="Symbol">{-#</a> <a id="2171" class="Keyword">OPTIONS</a> <a id="2179" class="Pragma">--without-K</a> <a id="2191" class="Pragma">--exact-split</a> <a id="2205" class="Pragma">--safe</a> <a id="2212" class="Symbol">#-}</a>

<a id="2217" class="Keyword">open</a> <a id="2222" class="Keyword">import</a> <a id="2229" href="Algebras.Signatures.html" class="Module">Algebras.Signatures</a> <a id="2249" class="Keyword">using</a> <a id="2255" class="Symbol">(</a><a id="2256" href="Algebras.Signatures.html#1299" class="Function">Signature</a><a id="2265" class="Symbol">;</a> <a id="2267" href="universes.html#613" class="Generalizable">ğ“</a><a id="2268" class="Symbol">;</a> <a id="2270" href="universes.html#617" class="Generalizable">ğ“¥</a><a id="2271" class="Symbol">)</a>
<a id="2273" class="Keyword">open</a> <a id="2278" class="Keyword">import</a> <a id="2285" href="MGS-Subsingleton-Theorems.html" class="Module">MGS-Subsingleton-Theorems</a> <a id="2311" class="Keyword">using</a> <a id="2317" class="Symbol">(</a><a id="2318" href="MGS-Subsingleton-Theorems.html#3468" class="Function">global-dfunext</a><a id="2332" class="Symbol">)</a>

<a id="2335" class="Keyword">module</a> <a id="2342" href="Birkhoff.FreeAlgebra.html" class="Module">Birkhoff.FreeAlgebra</a> <a id="2363" class="Symbol">{</a><a id="2364" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a> <a id="2366" class="Symbol">:</a> <a id="2368" href="Algebras.Signatures.html#1299" class="Function">Signature</a> <a id="2378" href="universes.html#613" class="Generalizable">ğ“</a> <a id="2380" href="universes.html#617" class="Generalizable">ğ“¥</a><a id="2381" class="Symbol">}{</a><a id="2383" href="Birkhoff.FreeAlgebra.html#2383" class="Bound">gfe</a> <a id="2387" class="Symbol">:</a> <a id="2389" href="MGS-Subsingleton-Theorems.html#3468" class="Function">global-dfunext</a><a id="2403" class="Symbol">}</a> <a id="2405" class="Keyword">where</a>

<a id="2412" class="Keyword">open</a> <a id="2417" class="Keyword">import</a> <a id="2424" href="Varieties.Preservation.html" class="Module">Varieties.Preservation</a> <a id="2447" class="Symbol">{</a><a id="2448" class="Argument">ğ‘†</a> <a id="2450" class="Symbol">=</a> <a id="2452" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="2453" class="Symbol">}{</a><a id="2455" href="Birkhoff.FreeAlgebra.html#2383" class="Bound">gfe</a><a id="2458" class="Symbol">}</a> <a id="2460" class="Keyword">public</a>

</pre>

We assume two ambient universes ğ“¤ and ğ“§, as well as a type `X : ğ“§ Ì‡`. As usual, this is accomplished with the `module` directive.

<pre class="Agda">

<a id="2625" class="Keyword">module</a> <a id="the-free-algebra"></a><a id="2632" href="Birkhoff.FreeAlgebra.html#2632" class="Module">the-free-algebra</a> <a id="2649" class="Symbol">{</a><a id="2650" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="2652" href="Birkhoff.FreeAlgebra.html#2652" class="Bound">ğ“§</a> <a id="2654" class="Symbol">:</a> <a id="2656" href="universes.html#551" class="Function">Universe</a><a id="2664" class="Symbol">}{</a><a id="2666" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a> <a id="2668" class="Symbol">:</a> <a id="2670" href="Birkhoff.FreeAlgebra.html#2652" class="Bound">ğ“§</a> <a id="2672" href="universes.html#758" class="Function Operator">Ì‡</a><a id="2673" class="Symbol">}</a> <a id="2675" class="Keyword">where</a>

 <a id="2683" class="Comment">-- NOTATION (universe aliases for convenience and readability).</a>
 <a id="the-free-algebra.ğ“¸ğ“¿ğ“¾"></a><a id="2748" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a> <a id="the-free-algebra.ğ“¸ğ“¿ğ“¾+"></a><a id="2752" href="Birkhoff.FreeAlgebra.html#2752" class="Function">ğ“¸ğ“¿ğ“¾+</a> <a id="the-free-algebra.ğ“¸ğ“¿ğ“¾++"></a><a id="2757" href="Birkhoff.FreeAlgebra.html#2757" class="Function">ğ“¸ğ“¿ğ“¾++</a> <a id="2763" class="Symbol">:</a> <a id="2765" href="universes.html#551" class="Function">Universe</a>
 <a id="2775" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a> <a id="2779" class="Symbol">=</a> <a id="2781" href="Algebras.Products.html#1999" class="Function">ov</a> <a id="2784" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a>
 <a id="2787" href="Birkhoff.FreeAlgebra.html#2752" class="Function">ğ“¸ğ“¿ğ“¾+</a> <a id="2792" class="Symbol">=</a> <a id="2794" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a> <a id="2798" href="universes.html#527" class="Function Operator">âº</a>
 <a id="2801" href="Birkhoff.FreeAlgebra.html#2757" class="Function">ğ“¸ğ“¿ğ“¾++</a> <a id="2807" class="Symbol">=</a> <a id="2809" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a> <a id="2813" href="universes.html#527" class="Function Operator">âº</a> <a id="2815" href="universes.html#527" class="Function Operator">âº</a>
</pre>

One could define the collection `ğ‘»img` of all homomorphic images of the term algebra that belong to a given class ğ’¦ as follows.

<pre class="Agda">

 <a id="2973" class="Comment">-- H (ğ‘» X)  (hom images of ğ‘» X)</a>
 <a id="the-free-algebra.ğ‘»img"></a><a id="3006" href="Birkhoff.FreeAlgebra.html#3006" class="Function">ğ‘»img</a> <a id="3011" class="Symbol">:</a> <a id="3013" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="3018" class="Symbol">(</a><a id="3019" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="3027" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="3029" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="3030" class="Symbol">)</a> <a id="3032" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a> <a id="3036" class="Symbol">â†’</a> <a id="3038" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a> <a id="3042" href="Agda.Primitive.html#636" class="Function Operator">âŠ”</a> <a id="3044" href="Birkhoff.FreeAlgebra.html#2652" class="Bound">ğ“§</a> <a id="3046" href="universes.html#527" class="Function Operator">âº</a> <a id="3048" href="universes.html#758" class="Function Operator">Ì‡</a>
 <a id="3051" href="Birkhoff.FreeAlgebra.html#3006" class="Function">ğ‘»img</a> <a id="3056" href="Birkhoff.FreeAlgebra.html#3056" class="Bound">ğ’¦</a> <a id="3058" class="Symbol">=</a> <a id="3060" href="MGS-MLTT.html#3074" class="Function">Î£</a> <a id="3062" href="Birkhoff.FreeAlgebra.html#3062" class="Bound">ğ‘¨</a> <a id="3064" href="MGS-MLTT.html#3074" class="Function">ê‰</a> <a id="3066" class="Symbol">(</a><a id="3067" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="3075" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="3077" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="3078" class="Symbol">)</a> <a id="3080" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="3082" href="MGS-MLTT.html#3074" class="Function">Î£</a> <a id="3084" href="Birkhoff.FreeAlgebra.html#3084" class="Bound">Ï•</a> <a id="3086" href="MGS-MLTT.html#3074" class="Function">ê‰</a> <a id="3088" href="Homomorphisms.Basic.html#2268" class="Function">hom</a> <a id="3092" class="Symbol">(</a><a id="3093" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="3095" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="3096" class="Symbol">)</a> <a id="3098" href="Birkhoff.FreeAlgebra.html#3062" class="Bound">ğ‘¨</a> <a id="3100" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="3102" class="Symbol">(</a><a id="3103" href="Birkhoff.FreeAlgebra.html#3062" class="Bound">ğ‘¨</a> <a id="3105" href="Relations.Unary.html#2061" class="Function Operator">âˆˆ</a> <a id="3107" href="Birkhoff.FreeAlgebra.html#3056" class="Bound">ğ’¦</a><a id="3108" class="Symbol">)</a> <a id="3110" href="MGS-MLTT.html#3515" class="Function Operator">Ã—</a> <a id="3112" href="Prelude.Inverses.html#2632" class="Function">Epic</a> <a id="3117" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="3119" href="Birkhoff.FreeAlgebra.html#3084" class="Bound">Ï•</a> <a id="3121" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a>

</pre>

The inhabitants of this Sigma type represent algebras ğ‘¨ âˆˆ ğ’¦ such that there exists a surjective homomorphism Ï• : hom (ğ‘» X) ğ‘¨. Thus, ğ‘»img represents the collection of all homomorphic images of ğ‘» X that belong to ğ’¦.  Of course, this is the entire class ğ’¦, since the term algebra is absolutely free. Nonetheless, this representation of ğ’¦ is useful since it endows each element with extra information.  Indeed, each inhabitant of ğ‘»img ğ’¦ is a quadruple, (ğ‘¨ , Ï• , ka, p), where ğ‘¨ is an ğ‘†-algebra, Ï• is a homomorphism from ğ‘» X to ğ‘¨, ka is a proof that ğ‘¨ belongs to ğ’¦, and p is a proof that the underlying map âˆ£ Ï• âˆ£ is epic.

The next function, `mkti`, that takes an arbitrary algebra ğ‘¨ in ğ’¦ and a mapping X â†’ âˆ£ ğ‘¨ âˆ£ and returns the corresponding quadruple in `ğ‘»img ğ’¦`.

<pre class="Agda">

 <a id="the-free-algebra.mkti"></a><a id="3913" href="Birkhoff.FreeAlgebra.html#3913" class="Function">mkti</a> <a id="3918" class="Symbol">:</a> <a id="3920" class="Symbol">{</a><a id="3921" href="Birkhoff.FreeAlgebra.html#3921" class="Bound">ğ’¦</a> <a id="3923" class="Symbol">:</a> <a id="3925" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="3930" class="Symbol">(</a><a id="3931" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="3939" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="3941" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="3942" class="Symbol">)</a><a id="3943" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="3946" class="Symbol">}(</a><a id="3948" href="Birkhoff.FreeAlgebra.html#3948" class="Bound">ğ‘¨</a> <a id="3950" class="Symbol">:</a> <a id="3952" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="3960" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="3962" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="3963" class="Symbol">)(</a><a id="3965" href="Birkhoff.FreeAlgebra.html#3965" class="Bound">h</a> <a id="3967" class="Symbol">:</a> <a id="3969" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a> <a id="3971" class="Symbol">â†’</a> <a id="3973" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="3975" href="Birkhoff.FreeAlgebra.html#3948" class="Bound">ğ‘¨</a> <a id="3977" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a><a id="3978" class="Symbol">)</a> <a id="3980" class="Symbol">â†’</a> <a id="3982" href="Prelude.Inverses.html#2632" class="Function">Epic</a> <a id="3987" href="Birkhoff.FreeAlgebra.html#3965" class="Bound">h</a> <a id="3989" class="Symbol">â†’</a> <a id="3991" href="Birkhoff.FreeAlgebra.html#3948" class="Bound">ğ‘¨</a> <a id="3993" href="Relations.Unary.html#2061" class="Function Operator">âˆˆ</a> <a id="3995" href="Birkhoff.FreeAlgebra.html#3921" class="Bound">ğ’¦</a> <a id="3997" class="Symbol">â†’</a> <a id="3999" href="Birkhoff.FreeAlgebra.html#3006" class="Function">ğ‘»img</a> <a id="4004" href="Birkhoff.FreeAlgebra.html#3921" class="Bound">ğ’¦</a>
 <a id="4007" href="Birkhoff.FreeAlgebra.html#3913" class="Function">mkti</a> <a id="4012" href="Birkhoff.FreeAlgebra.html#4012" class="Bound">ğ‘¨</a> <a id="4014" href="Birkhoff.FreeAlgebra.html#4014" class="Bound">h</a> <a id="4016" href="Birkhoff.FreeAlgebra.html#4016" class="Bound">hE</a> <a id="4019" href="Birkhoff.FreeAlgebra.html#4019" class="Bound">ka</a> <a id="4022" class="Symbol">=</a> <a id="4024" class="Symbol">(</a><a id="4025" href="Birkhoff.FreeAlgebra.html#4012" class="Bound">ğ‘¨</a> <a id="4027" href="Prelude.Equality.html#493" class="InductiveConstructor Operator">,</a> <a id="4029" href="Terms.Basic.html#4495" class="Function">lift-hom</a> <a id="4038" href="Birkhoff.FreeAlgebra.html#4012" class="Bound">ğ‘¨</a> <a id="4040" href="Birkhoff.FreeAlgebra.html#4014" class="Bound">h</a> <a id="4042" href="Prelude.Equality.html#493" class="InductiveConstructor Operator">,</a> <a id="4044" href="Birkhoff.FreeAlgebra.html#4019" class="Bound">ka</a> <a id="4047" href="Prelude.Equality.html#493" class="InductiveConstructor Operator">,</a> <a id="4049" href="Terms.Basic.html#5688" class="Function">lift-of-epi-is-epi</a> <a id="4068" href="Birkhoff.FreeAlgebra.html#4012" class="Bound">ğ‘¨</a> <a id="4070" href="Birkhoff.FreeAlgebra.html#4014" class="Bound">h</a> <a id="4072" href="Birkhoff.FreeAlgebra.html#4016" class="Bound">hE</a><a id="4074" class="Symbol">)</a>

</pre>

We now construct the congruence relation `ÏˆCon`, modulo which `ğ‘» X` will yield the relatively free algebra, `ğ”‰ ğ’¦ X := ğ‘» X â•± ÏˆCon`. We start by letting Ïˆ be the collection of all identities (p, q) satisfied by all subalgebras of algebras in ğ’¦.

<pre class="Agda">

 <a id="the-free-algebra.Ïˆ"></a><a id="4348" href="Birkhoff.FreeAlgebra.html#4348" class="Function">Ïˆ</a> <a id="4350" class="Symbol">:</a> <a id="4352" class="Symbol">(</a><a id="4353" href="Birkhoff.FreeAlgebra.html#4353" class="Bound">ğ’¦</a> <a id="4355" class="Symbol">:</a> <a id="4357" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="4362" class="Symbol">(</a><a id="4363" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="4371" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="4373" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="4374" class="Symbol">)</a> <a id="4376" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="4379" class="Symbol">)</a> <a id="4381" class="Symbol">â†’</a> <a id="4383" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="4388" class="Symbol">(</a><a id="4389" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="4391" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="4393" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a> <a id="4395" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="4397" href="MGS-MLTT.html#3515" class="Function Operator">Ã—</a> <a id="4399" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="4401" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="4403" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a> <a id="4405" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a><a id="4406" class="Symbol">)</a> <a id="4408" class="Symbol">(</a><a id="4409" href="Birkhoff.FreeAlgebra.html#2652" class="Bound">ğ“§</a> <a id="4411" href="Agda.Primitive.html#636" class="Function Operator">âŠ”</a> <a id="4413" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="4416" class="Symbol">)</a>
 <a id="4419" href="Birkhoff.FreeAlgebra.html#4348" class="Function">Ïˆ</a> <a id="4421" href="Birkhoff.FreeAlgebra.html#4421" class="Bound">ğ’¦</a> <a id="4423" class="Symbol">(</a><a id="4424" href="Birkhoff.FreeAlgebra.html#4424" class="Bound">p</a> <a id="4426" href="Prelude.Equality.html#493" class="InductiveConstructor Operator">,</a> <a id="4428" href="Birkhoff.FreeAlgebra.html#4428" class="Bound">q</a><a id="4429" class="Symbol">)</a> <a id="4431" class="Symbol">=</a> <a id="4433" class="Symbol">âˆ€(</a><a id="4435" href="Birkhoff.FreeAlgebra.html#4435" class="Bound">ğ‘¨</a> <a id="4437" class="Symbol">:</a> <a id="4439" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="4447" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="4449" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="4450" class="Symbol">)(</a><a id="4452" href="Birkhoff.FreeAlgebra.html#4452" class="Bound">sA</a> <a id="4455" class="Symbol">:</a> <a id="4457" href="Birkhoff.FreeAlgebra.html#4435" class="Bound">ğ‘¨</a> <a id="4459" href="Relations.Unary.html#2061" class="Function Operator">âˆˆ</a> <a id="4461" href="Varieties.Varieties.html#2944" class="Datatype">S</a><a id="4462" class="Symbol">{</a><a id="4463" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a><a id="4464" class="Symbol">}{</a><a id="4466" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a><a id="4467" class="Symbol">}</a> <a id="4469" href="Birkhoff.FreeAlgebra.html#4421" class="Bound">ğ’¦</a><a id="4470" class="Symbol">)(</a><a id="4472" href="Birkhoff.FreeAlgebra.html#4472" class="Bound">h</a> <a id="4474" class="Symbol">:</a> <a id="4476" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a> <a id="4478" class="Symbol">â†’</a> <a id="4480" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="4482" href="Birkhoff.FreeAlgebra.html#4435" class="Bound">ğ‘¨</a> <a id="4484" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="4486" class="Symbol">)</a>
                 <a id="4505" class="Symbol">â†’</a>  <a id="4508" class="Symbol">(</a><a id="4509" href="Terms.Basic.html#4221" class="Function">free-lift</a> <a id="4519" href="Birkhoff.FreeAlgebra.html#4435" class="Bound">ğ‘¨</a> <a id="4521" href="Birkhoff.FreeAlgebra.html#4472" class="Bound">h</a><a id="4522" class="Symbol">)</a> <a id="4524" href="Birkhoff.FreeAlgebra.html#4424" class="Bound">p</a> <a id="4526" href="Prelude.Inverses.html#620" class="Datatype Operator">â‰¡</a> <a id="4528" class="Symbol">(</a><a id="4529" href="Terms.Basic.html#4221" class="Function">free-lift</a> <a id="4539" href="Birkhoff.FreeAlgebra.html#4435" class="Bound">ğ‘¨</a> <a id="4541" href="Birkhoff.FreeAlgebra.html#4472" class="Bound">h</a><a id="4542" class="Symbol">)</a> <a id="4544" href="Birkhoff.FreeAlgebra.html#4428" class="Bound">q</a>

</pre>

We convert the predicate Ïˆ into a relation by [currying](https://en.wikipedia.org/wiki/Currying).

<pre class="Agda">

 <a id="the-free-algebra.ÏˆRel"></a><a id="4673" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="4678" class="Symbol">:</a> <a id="4680" class="Symbol">(</a><a id="4681" href="Birkhoff.FreeAlgebra.html#4681" class="Bound">ğ’¦</a> <a id="4683" class="Symbol">:</a> <a id="4685" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="4690" class="Symbol">(</a><a id="4691" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="4699" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="4701" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="4702" class="Symbol">)</a> <a id="4704" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="4707" class="Symbol">)</a> <a id="4709" class="Symbol">â†’</a> <a id="4711" href="Relations.Binary.html#1464" class="Function">Rel</a> <a id="4715" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="4717" class="Symbol">(</a><a id="4718" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="4720" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="4721" class="Symbol">)</a> <a id="4723" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="4725" class="Symbol">(</a><a id="4726" href="Birkhoff.FreeAlgebra.html#2652" class="Bound">ğ“§</a> <a id="4728" href="Agda.Primitive.html#636" class="Function Operator">âŠ”</a> <a id="4730" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="4733" class="Symbol">)</a>
 <a id="4736" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="4741" href="Birkhoff.FreeAlgebra.html#4741" class="Bound">ğ’¦</a> <a id="4743" href="Birkhoff.FreeAlgebra.html#4743" class="Bound">p</a> <a id="4745" href="Birkhoff.FreeAlgebra.html#4745" class="Bound">q</a> <a id="4747" class="Symbol">=</a> <a id="4749" href="Birkhoff.FreeAlgebra.html#4348" class="Function">Ïˆ</a> <a id="4751" href="Birkhoff.FreeAlgebra.html#4741" class="Bound">ğ’¦</a> <a id="4753" class="Symbol">(</a><a id="4754" href="Birkhoff.FreeAlgebra.html#4743" class="Bound">p</a> <a id="4756" href="Prelude.Equality.html#493" class="InductiveConstructor Operator">,</a> <a id="4758" href="Birkhoff.FreeAlgebra.html#4745" class="Bound">q</a><a id="4759" class="Symbol">)</a>

</pre>

To express `ÏˆRel` as a congruence of the term algebra `ğ‘» X`, we must prove that

1. `ÏˆRel` is compatible with the operations of `ğ‘» X` (which are jsut the terms themselves) and
2. `ÏˆRel` it is an equivalence relation.

<pre class="Agda">

 <a id="the-free-algebra.Ïˆcompatible"></a><a id="5007" href="Birkhoff.FreeAlgebra.html#5007" class="Function">Ïˆcompatible</a> <a id="5019" class="Symbol">:</a> <a id="5021" class="Symbol">(</a><a id="5022" href="Birkhoff.FreeAlgebra.html#5022" class="Bound">ğ’¦</a> <a id="5024" class="Symbol">:</a> <a id="5026" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="5031" class="Symbol">(</a><a id="5032" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5040" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="5042" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="5043" class="Symbol">)</a> <a id="5045" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="5048" class="Symbol">)</a> <a id="5050" class="Symbol">â†’</a> <a id="5052" href="Algebras.Algebras.html#5347" class="Function">compatible</a> <a id="5063" class="Symbol">(</a><a id="5064" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="5066" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="5067" class="Symbol">)(</a><a id="5069" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="5074" href="Birkhoff.FreeAlgebra.html#5022" class="Bound">ğ’¦</a><a id="5075" class="Symbol">)</a>
 <a id="5078" href="Birkhoff.FreeAlgebra.html#5007" class="Function">Ïˆcompatible</a> <a id="5090" href="Birkhoff.FreeAlgebra.html#5090" class="Bound">ğ’¦</a> <a id="5092" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5094" class="Symbol">{</a><a id="5095" href="Birkhoff.FreeAlgebra.html#5095" class="Bound">i</a><a id="5096" class="Symbol">}</a> <a id="5098" class="Symbol">{</a><a id="5099" href="Birkhoff.FreeAlgebra.html#5099" class="Bound">j</a><a id="5100" class="Symbol">}</a> <a id="5102" href="Birkhoff.FreeAlgebra.html#5102" class="Bound">iÏˆj</a> <a id="5106" href="Birkhoff.FreeAlgebra.html#5106" class="Bound">ğ‘¨</a> <a id="5108" href="Birkhoff.FreeAlgebra.html#5108" class="Bound">sA</a> <a id="5111" href="Birkhoff.FreeAlgebra.html#5111" class="Bound">h</a> <a id="5113" class="Symbol">=</a> <a id="5115" href="Birkhoff.FreeAlgebra.html#5168" class="Function">Î³</a>
  <a id="5119" class="Keyword">where</a>
   <a id="5128" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5130" class="Symbol">:</a> <a id="5132" href="Homomorphisms.Basic.html#2268" class="Function">hom</a> <a id="5136" class="Symbol">(</a><a id="5137" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="5139" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="5140" class="Symbol">)</a> <a id="5142" href="Birkhoff.FreeAlgebra.html#5106" class="Bound">ğ‘¨</a>
   <a id="5147" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5149" class="Symbol">=</a> <a id="5151" href="Terms.Basic.html#4495" class="Function">lift-hom</a> <a id="5160" href="Birkhoff.FreeAlgebra.html#5106" class="Bound">ğ‘¨</a> <a id="5162" href="Birkhoff.FreeAlgebra.html#5111" class="Bound">h</a>

   <a id="5168" href="Birkhoff.FreeAlgebra.html#5168" class="Function">Î³</a> <a id="5170" class="Symbol">:</a> <a id="5172" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5174" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5176" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5178" class="Symbol">((</a><a id="5180" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5182" href="Algebras.Algebras.html#2844" class="Function Operator">Ì‚</a> <a id="5184" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="5186" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="5187" class="Symbol">)</a> <a id="5189" href="Birkhoff.FreeAlgebra.html#5095" class="Bound">i</a><a id="5190" class="Symbol">)</a> <a id="5192" href="Prelude.Inverses.html#620" class="Datatype Operator">â‰¡</a> <a id="5194" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5196" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5198" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5200" class="Symbol">((</a><a id="5202" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5204" href="Algebras.Algebras.html#2844" class="Function Operator">Ì‚</a> <a id="5206" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="5208" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="5209" class="Symbol">)</a> <a id="5211" href="Birkhoff.FreeAlgebra.html#5099" class="Bound">j</a><a id="5212" class="Symbol">)</a>
   <a id="5217" href="Birkhoff.FreeAlgebra.html#5168" class="Function">Î³</a> <a id="5219" class="Symbol">=</a> <a id="5221" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5223" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5225" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5227" class="Symbol">((</a><a id="5229" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5231" href="Algebras.Algebras.html#2844" class="Function Operator">Ì‚</a> <a id="5233" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="5235" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="5236" class="Symbol">)</a> <a id="5238" href="Birkhoff.FreeAlgebra.html#5095" class="Bound">i</a><a id="5239" class="Symbol">)</a> <a id="5241" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="5244" href="Prelude.Preliminaries.html#12700" class="Function Operator">âˆ¥</a> <a id="5246" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5248" href="Prelude.Preliminaries.html#12700" class="Function Operator">âˆ¥</a> <a id="5250" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5252" href="Birkhoff.FreeAlgebra.html#5095" class="Bound">i</a> <a id="5254" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="5263" class="Symbol">(</a><a id="5264" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5266" href="Algebras.Algebras.html#2844" class="Function Operator">Ì‚</a> <a id="5268" href="Birkhoff.FreeAlgebra.html#5106" class="Bound">ğ‘¨</a><a id="5269" class="Symbol">)</a> <a id="5271" class="Symbol">(</a><a id="5272" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5274" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5276" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5278" href="MGS-MLTT.html#3813" class="Function Operator">âˆ˜</a> <a id="5280" href="Birkhoff.FreeAlgebra.html#5095" class="Bound">i</a><a id="5281" class="Symbol">)</a> <a id="5283" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="5286" href="MGS-MLTT.html#6613" class="Function">ap</a> <a id="5289" class="Symbol">(</a><a id="5290" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5292" href="Algebras.Algebras.html#2844" class="Function Operator">Ì‚</a> <a id="5294" href="Birkhoff.FreeAlgebra.html#5106" class="Bound">ğ‘¨</a><a id="5295" class="Symbol">)</a> <a id="5297" class="Symbol">(</a><a id="5298" href="Birkhoff.FreeAlgebra.html#2383" class="Bound">gfe</a> <a id="5302" class="Symbol">Î»</a> <a id="5304" href="Birkhoff.FreeAlgebra.html#5304" class="Bound">x</a> <a id="5306" class="Symbol">â†’</a> <a id="5308" class="Symbol">((</a><a id="5310" href="Birkhoff.FreeAlgebra.html#5102" class="Bound">iÏˆj</a> <a id="5314" href="Birkhoff.FreeAlgebra.html#5304" class="Bound">x</a><a id="5315" class="Symbol">)</a> <a id="5317" href="Birkhoff.FreeAlgebra.html#5106" class="Bound">ğ‘¨</a> <a id="5319" href="Birkhoff.FreeAlgebra.html#5108" class="Bound">sA</a> <a id="5322" href="Birkhoff.FreeAlgebra.html#5111" class="Bound">h</a><a id="5323" class="Symbol">))</a> <a id="5326" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="5335" class="Symbol">(</a><a id="5336" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5338" href="Algebras.Algebras.html#2844" class="Function Operator">Ì‚</a> <a id="5340" href="Birkhoff.FreeAlgebra.html#5106" class="Bound">ğ‘¨</a><a id="5341" class="Symbol">)</a> <a id="5343" class="Symbol">(</a><a id="5344" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5346" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5348" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5350" href="MGS-MLTT.html#3813" class="Function Operator">âˆ˜</a> <a id="5352" href="Birkhoff.FreeAlgebra.html#5099" class="Bound">j</a><a id="5353" class="Symbol">)</a> <a id="5355" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="5358" class="Symbol">(</a><a id="5359" href="Prelude.Preliminaries.html#12700" class="Function Operator">âˆ¥</a> <a id="5361" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5363" href="Prelude.Preliminaries.html#12700" class="Function Operator">âˆ¥</a> <a id="5365" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5367" href="Birkhoff.FreeAlgebra.html#5099" class="Bound">j</a><a id="5368" class="Symbol">)</a><a id="5369" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a> <a id="5372" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="5381" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5383" href="Birkhoff.FreeAlgebra.html#5128" class="Function">Ï•</a> <a id="5385" href="Prelude.Preliminaries.html#12622" class="Function Operator">âˆ£</a> <a id="5387" class="Symbol">((</a><a id="5389" href="Birkhoff.FreeAlgebra.html#5092" class="Bound">f</a> <a id="5391" href="Algebras.Algebras.html#2844" class="Function Operator">Ì‚</a> <a id="5393" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="5395" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="5396" class="Symbol">)</a> <a id="5398" href="Birkhoff.FreeAlgebra.html#5099" class="Bound">j</a><a id="5399" class="Symbol">)</a> <a id="5401" href="MGS-MLTT.html#6079" class="Function Operator">âˆ</a>

 <a id="the-free-algebra.ÏˆRefl"></a><a id="5405" href="Birkhoff.FreeAlgebra.html#5405" class="Function">ÏˆRefl</a> <a id="5411" class="Symbol">:</a> <a id="5413" class="Symbol">{</a><a id="5414" href="Birkhoff.FreeAlgebra.html#5414" class="Bound">ğ’¦</a> <a id="5416" class="Symbol">:</a> <a id="5418" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="5423" class="Symbol">(</a><a id="5424" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5432" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="5434" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="5435" class="Symbol">)</a> <a id="5437" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="5440" class="Symbol">}</a> <a id="5442" class="Symbol">â†’</a> <a id="5444" href="Relations.Quotients.html#983" class="Function">reflexive</a> <a id="5454" class="Symbol">(</a><a id="5455" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="5460" href="Birkhoff.FreeAlgebra.html#5414" class="Bound">ğ’¦</a><a id="5461" class="Symbol">)</a>
 <a id="5464" href="Birkhoff.FreeAlgebra.html#5405" class="Function">ÏˆRefl</a> <a id="5470" class="Symbol">=</a> <a id="5472" class="Symbol">Î»</a> <a id="5474" href="Birkhoff.FreeAlgebra.html#5474" class="Bound">x</a> <a id="5476" href="Birkhoff.FreeAlgebra.html#5476" class="Bound">ğ‘ª</a> <a id="5478" href="Birkhoff.FreeAlgebra.html#5478" class="Bound">Ï•</a> <a id="5480" href="Birkhoff.FreeAlgebra.html#5480" class="Bound">h</a> <a id="5482" class="Symbol">â†’</a> <a id="5484" href="Prelude.Inverses.html#634" class="InductiveConstructor">ğ“‡â„¯ğ’»ğ“</a>

 <a id="the-free-algebra.ÏˆSymm"></a><a id="5491" href="Birkhoff.FreeAlgebra.html#5491" class="Function">ÏˆSymm</a> <a id="5497" class="Symbol">:</a> <a id="5499" class="Symbol">{</a><a id="5500" href="Birkhoff.FreeAlgebra.html#5500" class="Bound">ğ’¦</a> <a id="5502" class="Symbol">:</a> <a id="5504" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="5509" class="Symbol">(</a><a id="5510" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5518" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="5520" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="5521" class="Symbol">)</a> <a id="5523" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="5526" class="Symbol">}</a> <a id="5528" class="Symbol">â†’</a> <a id="5530" href="Relations.Quotients.html#1071" class="Function">symmetric</a> <a id="5540" class="Symbol">(</a><a id="5541" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="5546" href="Birkhoff.FreeAlgebra.html#5500" class="Bound">ğ’¦</a><a id="5547" class="Symbol">)</a>
 <a id="5550" href="Birkhoff.FreeAlgebra.html#5491" class="Function">ÏˆSymm</a> <a id="5556" href="Birkhoff.FreeAlgebra.html#5556" class="Bound">p</a> <a id="5558" href="Birkhoff.FreeAlgebra.html#5558" class="Bound">q</a> <a id="5560" href="Birkhoff.FreeAlgebra.html#5560" class="Bound">pÏˆRelq</a> <a id="5567" href="Birkhoff.FreeAlgebra.html#5567" class="Bound">ğ‘ª</a> <a id="5569" href="Birkhoff.FreeAlgebra.html#5569" class="Bound">Ï•</a> <a id="5571" href="Birkhoff.FreeAlgebra.html#5571" class="Bound">h</a> <a id="5573" class="Symbol">=</a> <a id="5575" class="Symbol">(</a><a id="5576" href="Birkhoff.FreeAlgebra.html#5560" class="Bound">pÏˆRelq</a> <a id="5583" href="Birkhoff.FreeAlgebra.html#5567" class="Bound">ğ‘ª</a> <a id="5585" href="Birkhoff.FreeAlgebra.html#5569" class="Bound">Ï•</a> <a id="5587" href="Birkhoff.FreeAlgebra.html#5571" class="Bound">h</a><a id="5588" class="Symbol">)</a><a id="5589" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a>

 <a id="the-free-algebra.ÏˆTrans"></a><a id="5594" href="Birkhoff.FreeAlgebra.html#5594" class="Function">ÏˆTrans</a> <a id="5601" class="Symbol">:</a> <a id="5603" class="Symbol">{</a><a id="5604" href="Birkhoff.FreeAlgebra.html#5604" class="Bound">ğ’¦</a> <a id="5606" class="Symbol">:</a> <a id="5608" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="5613" class="Symbol">(</a><a id="5614" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5622" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="5624" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="5625" class="Symbol">)</a> <a id="5627" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="5630" class="Symbol">}</a> <a id="5632" class="Symbol">â†’</a> <a id="5634" href="Relations.Quotients.html#1283" class="Function">transitive</a> <a id="5645" class="Symbol">(</a><a id="5646" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="5651" href="Birkhoff.FreeAlgebra.html#5604" class="Bound">ğ’¦</a><a id="5652" class="Symbol">)</a>
 <a id="5655" href="Birkhoff.FreeAlgebra.html#5594" class="Function">ÏˆTrans</a> <a id="5662" href="Birkhoff.FreeAlgebra.html#5662" class="Bound">p</a> <a id="5664" href="Birkhoff.FreeAlgebra.html#5664" class="Bound">q</a> <a id="5666" href="Birkhoff.FreeAlgebra.html#5666" class="Bound">r</a> <a id="5668" href="Birkhoff.FreeAlgebra.html#5668" class="Bound">pÏˆq</a> <a id="5672" href="Birkhoff.FreeAlgebra.html#5672" class="Bound">qÏˆr</a> <a id="5676" href="Birkhoff.FreeAlgebra.html#5676" class="Bound">ğ‘ª</a> <a id="5678" href="Birkhoff.FreeAlgebra.html#5678" class="Bound">Ï•</a> <a id="5680" href="Birkhoff.FreeAlgebra.html#5680" class="Bound">h</a> <a id="5682" class="Symbol">=</a> <a id="5684" class="Symbol">(</a><a id="5685" href="Birkhoff.FreeAlgebra.html#5668" class="Bound">pÏˆq</a> <a id="5689" href="Birkhoff.FreeAlgebra.html#5676" class="Bound">ğ‘ª</a> <a id="5691" href="Birkhoff.FreeAlgebra.html#5678" class="Bound">Ï•</a> <a id="5693" href="Birkhoff.FreeAlgebra.html#5680" class="Bound">h</a><a id="5694" class="Symbol">)</a> <a id="5696" href="MGS-MLTT.html#5910" class="Function Operator">âˆ™</a> <a id="5698" class="Symbol">(</a><a id="5699" href="Birkhoff.FreeAlgebra.html#5672" class="Bound">qÏˆr</a> <a id="5703" href="Birkhoff.FreeAlgebra.html#5676" class="Bound">ğ‘ª</a> <a id="5705" href="Birkhoff.FreeAlgebra.html#5678" class="Bound">Ï•</a> <a id="5707" href="Birkhoff.FreeAlgebra.html#5680" class="Bound">h</a><a id="5708" class="Symbol">)</a>

 <a id="the-free-algebra.ÏˆIsEquivalence"></a><a id="5712" href="Birkhoff.FreeAlgebra.html#5712" class="Function">ÏˆIsEquivalence</a> <a id="5727" class="Symbol">:</a> <a id="5729" class="Symbol">{</a><a id="5730" href="Birkhoff.FreeAlgebra.html#5730" class="Bound">ğ’¦</a> <a id="5732" class="Symbol">:</a> <a id="5734" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="5739" class="Symbol">(</a><a id="5740" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5748" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="5750" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="5751" class="Symbol">)</a> <a id="5753" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="5756" class="Symbol">}</a> <a id="5758" class="Symbol">â†’</a> <a id="5760" href="Relations.Quotients.html#1978" class="Record">IsEquivalence</a> <a id="5774" class="Symbol">(</a><a id="5775" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="5780" href="Birkhoff.FreeAlgebra.html#5730" class="Bound">ğ’¦</a><a id="5781" class="Symbol">)</a>
 <a id="5784" href="Birkhoff.FreeAlgebra.html#5712" class="Function">ÏˆIsEquivalence</a> <a id="5799" class="Symbol">=</a> <a id="5801" class="Keyword">record</a> <a id="5808" class="Symbol">{</a> <a id="5810" href="Relations.Quotients.html#2046" class="Field">rfl</a> <a id="5814" class="Symbol">=</a> <a id="5816" href="Birkhoff.FreeAlgebra.html#5405" class="Function">ÏˆRefl</a> <a id="5822" class="Symbol">;</a> <a id="5824" href="Relations.Quotients.html#2071" class="Field">sym</a> <a id="5828" class="Symbol">=</a> <a id="5830" href="Birkhoff.FreeAlgebra.html#5491" class="Function">ÏˆSymm</a> <a id="5836" class="Symbol">;</a> <a id="5838" href="Relations.Quotients.html#2096" class="Field">trans</a> <a id="5844" class="Symbol">=</a> <a id="5846" href="Birkhoff.FreeAlgebra.html#5594" class="Function">ÏˆTrans</a> <a id="5853" class="Symbol">}</a>

</pre>

We have collected all the pieces necessary to express the collection of identities satisfied by all subalgebras of algebras in the class as a congruence relation of the term algebra. We call this congruence `ÏˆCon` and define it using the Congruence constructor `mkcon`.

<pre class="Agda">

 <a id="the-free-algebra.ÏˆCon"></a><a id="6154" href="Birkhoff.FreeAlgebra.html#6154" class="Function">ÏˆCon</a> <a id="6159" class="Symbol">:</a> <a id="6161" class="Symbol">(</a><a id="6162" href="Birkhoff.FreeAlgebra.html#6162" class="Bound">ğ’¦</a> <a id="6164" class="Symbol">:</a> <a id="6166" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="6171" class="Symbol">(</a><a id="6172" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="6180" href="Birkhoff.FreeAlgebra.html#2650" class="Bound">ğ“¤</a> <a id="6182" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="6183" class="Symbol">)</a> <a id="6185" href="Birkhoff.FreeAlgebra.html#2748" class="Function">ğ“¸ğ“¿ğ“¾</a><a id="6188" class="Symbol">)</a> <a id="6190" class="Symbol">â†’</a> <a id="6192" href="Algebras.Congruences.html#1106" class="Record">Congruence</a> <a id="6203" class="Symbol">(</a><a id="6204" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="6206" href="Birkhoff.FreeAlgebra.html#2666" class="Bound">X</a><a id="6207" class="Symbol">)</a>
 <a id="6210" href="Birkhoff.FreeAlgebra.html#6154" class="Function">ÏˆCon</a> <a id="6215" href="Birkhoff.FreeAlgebra.html#6215" class="Bound">ğ’¦</a> <a id="6217" class="Symbol">=</a> <a id="6219" href="Algebras.Congruences.html#1185" class="InductiveConstructor">mkcon</a> <a id="6225" class="Symbol">(</a><a id="6226" href="Birkhoff.FreeAlgebra.html#4673" class="Function">ÏˆRel</a> <a id="6231" href="Birkhoff.FreeAlgebra.html#6215" class="Bound">ğ’¦</a><a id="6232" class="Symbol">)</a> <a id="6234" class="Symbol">(</a><a id="6235" href="Birkhoff.FreeAlgebra.html#5007" class="Function">Ïˆcompatible</a> <a id="6247" href="Birkhoff.FreeAlgebra.html#6215" class="Bound">ğ’¦</a><a id="6248" class="Symbol">)</a> <a id="6250" href="Birkhoff.FreeAlgebra.html#5712" class="Function">ÏˆIsEquivalence</a>

</pre>


Finally, we are ready to define the type representing the relatively free algebra in Agda.  We denote this type by ğ”‰ and define it as the quotient `ğ‘» X â•± (ÏˆCon ğ’¦)`.

<pre class="Agda">

<a id="6459" class="Keyword">module</a> <a id="the-relatively-free-algebra"></a><a id="6466" href="Birkhoff.FreeAlgebra.html#6466" class="Module">the-relatively-free-algebra</a>
 <a id="6495" class="Symbol">{</a><a id="6496" href="Birkhoff.FreeAlgebra.html#6496" class="Bound">ğ“¤</a> <a id="6498" href="Birkhoff.FreeAlgebra.html#6498" class="Bound">ğ“§</a> <a id="6500" class="Symbol">:</a> <a id="6502" href="universes.html#551" class="Function">Universe</a><a id="6510" class="Symbol">}{</a><a id="6512" href="Birkhoff.FreeAlgebra.html#6512" class="Bound">X</a> <a id="6514" class="Symbol">:</a> <a id="6516" href="Birkhoff.FreeAlgebra.html#6498" class="Bound">ğ“§</a> <a id="6518" href="universes.html#758" class="Function Operator">Ì‡</a><a id="6519" class="Symbol">}</a> <a id="6521" class="Symbol">{</a><a id="6522" href="Birkhoff.FreeAlgebra.html#6522" class="Bound">ğ’¦</a> <a id="6524" class="Symbol">:</a> <a id="6526" href="Relations.Unary.html#1062" class="Function">Pred</a> <a id="6531" class="Symbol">(</a><a id="6532" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="6540" href="Birkhoff.FreeAlgebra.html#6496" class="Bound">ğ“¤</a> <a id="6542" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a><a id="6543" class="Symbol">)</a> <a id="6545" class="Symbol">(</a><a id="6546" href="Algebras.Products.html#1999" class="Function">ov</a> <a id="6549" href="Birkhoff.FreeAlgebra.html#6496" class="Bound">ğ“¤</a><a id="6550" class="Symbol">)}</a> <a id="6553" class="Keyword">where</a>

 <a id="6561" class="Keyword">open</a> <a id="6566" href="Birkhoff.FreeAlgebra.html#2632" class="Module">the-free-algebra</a><a id="6582" class="Symbol">{</a><a id="6583" class="Argument">ğ“¤</a> <a id="6585" class="Symbol">=</a> <a id="6587" href="Birkhoff.FreeAlgebra.html#6496" class="Bound">ğ“¤</a><a id="6588" class="Symbol">}{</a><a id="6590" class="Argument">ğ“§</a> <a id="6592" class="Symbol">=</a> <a id="6594" href="Birkhoff.FreeAlgebra.html#6498" class="Bound">ğ“§</a><a id="6595" class="Symbol">}{</a><a id="6597" class="Argument">X</a> <a id="6599" class="Symbol">=</a> <a id="6601" href="Birkhoff.FreeAlgebra.html#6512" class="Bound">X</a><a id="6602" class="Symbol">}</a>

 <a id="the-relatively-free-algebra.ğ“•"></a><a id="6606" href="Birkhoff.FreeAlgebra.html#6606" class="Function">ğ“•</a> <a id="6608" class="Symbol">:</a> <a id="6610" href="universes.html#551" class="Function">Universe</a> <a id="6619" class="Comment">-- (universe level of the relatively free algebra)</a>
 <a id="6671" href="Birkhoff.FreeAlgebra.html#6606" class="Function">ğ“•</a> <a id="6673" class="Symbol">=</a> <a id="6675" class="Symbol">(</a><a id="6676" href="Birkhoff.FreeAlgebra.html#6498" class="Bound">ğ“§</a> <a id="6678" href="Agda.Primitive.html#636" class="Function Operator">âŠ”</a> <a id="6680" href="Algebras.Products.html#1999" class="Function">ov</a> <a id="6683" href="Birkhoff.FreeAlgebra.html#6496" class="Bound">ğ“¤</a><a id="6684" class="Symbol">)</a> <a id="6686" href="universes.html#527" class="Function Operator">âº</a>

 <a id="the-relatively-free-algebra.ğ”‰"></a><a id="6690" href="Birkhoff.FreeAlgebra.html#6690" class="Function">ğ”‰</a> <a id="6692" class="Symbol">:</a> <a id="6694" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="6702" href="Birkhoff.FreeAlgebra.html#6606" class="Function">ğ“•</a> <a id="6704" href="Birkhoff.FreeAlgebra.html#2364" class="Bound">ğ‘†</a>
 <a id="6707" href="Birkhoff.FreeAlgebra.html#6690" class="Function">ğ”‰</a> <a id="6709" class="Symbol">=</a>  <a id="6712" href="Terms.Basic.html#3603" class="Function">ğ‘»</a> <a id="6714" href="Birkhoff.FreeAlgebra.html#6512" class="Bound">X</a> <a id="6716" href="Algebras.Congruences.html#3363" class="Function Operator">â•±</a> <a id="6718" class="Symbol">(</a><a id="6719" href="Birkhoff.FreeAlgebra.html#6154" class="Function">ÏˆCon</a> <a id="6724" href="Birkhoff.FreeAlgebra.html#6522" class="Bound">ğ’¦</a><a id="6725" class="Symbol">)</a>

</pre>

The domain âˆ£ ğ”‰ âˆ£ is

`âˆ£ ğ‘» X âˆ£ / âŸ¨ ÏˆCon ğ’¦ âŸ© = Î£ C ê‰ _ ,  Î£ p ê‰ âˆ£ ğ‘» X âˆ£ ,  C â‰¡ ( [ p ] âŸ¨ ÏˆCon ğ’¦ âŸ© )`,

which is the collection `{ C : âˆƒ p âˆˆ âˆ£ ğ‘» X âˆ£, C â‰¡ [ p ]âŸ¨ ÏˆCon ğ’¦ âŸ© }` of `âŸ¨ ÏˆCon ğ’¦ âŸ©`-classses of `ğ‘» X`, as desired.


----------------------------

<span class="footnote"><sup>1</sup>Since `X` is not a subset of ğ”‰, technically it doesn't make sense to say "`X` generates ğ”‰." But as long as ğ’¦ contains a nontrivial algebra, we will have `Ïˆ(ğ’¦, ğ‘» ğ‘‹) âˆ© XÂ² â‰  âˆ…`, and we can identify `X` with `X / Ïˆ(ğ’¦, ğ‘» X)` which does belong to ğ”‰.</span>

[â†‘ Birkhoff](Birkhoff.html)
<span style="float:right;">[Birkhoff.HSPTheorem â†’](Birkhoff.HSPTheorem.html)</span>

{% include UALib.Links.md %}

<!--

Lemma 4.27. (Bergman) Let ğ’¦ be a class of algebras, and ÏˆCon defined as above.
                     Then ğ”½ := ğ‘» / ÏˆCon is isomorphic to an algebra in SP(ğ’¦).

Proof. ğ”½ â†ª â¨… ğ’œ, where ğ’œ = {ğ‘¨ / Î¸ : ğ‘¨ / Î¸ âˆˆ S ğ’¦}.
       Therefore, ğ”½ â‰… ğ‘©, where ğ‘© is a subalgebra of â¨… ğ’œ âˆˆ PS(ğ’¦).
       Thus ğ”½ is isomorphic to an algebra in SPS(ğ’¦).
       By SPSâŠ†SP, ğ”½ is isomorphic to an algebra in SP(ğ’¦).

-->



