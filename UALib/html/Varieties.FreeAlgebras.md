---
layout: default
title : UALib.Varieties.FreeAlgebras module (Agda Universal Algebra Library)
date : 2021-03-01
author: William DeMeo
---

## <a id="free-algebras-and-birkhoffs-theorem">Free Algebras and Birkhoff's Theorem</a>

This section presents the [UALib.Varieties.FreeAlgebras][] module of the [Agda Universal Algebra Library][].

First we will define the relatively free algebra in a variety, which is the "freest" algebra among (universal for) those algebras that model all identities holding in the variety. Then we give a formal proof of Birkhoff's theorem which says that a variety is an equational class. In other terms, a class `ğ’¦` of algebras is closed under the operators `H`, `S`, and `P` if and only if ğ’¦ is the class of algebras that satisfy some set of identities.

<pre class="Agda">

<a id="804" class="Symbol">{-#</a> <a id="808" class="Keyword">OPTIONS</a> <a id="816" class="Pragma">--without-K</a> <a id="828" class="Pragma">--exact-split</a> <a id="842" class="Pragma">--safe</a> <a id="849" class="Symbol">#-}</a>

<a id="854" class="Keyword">open</a> <a id="859" class="Keyword">import</a> <a id="866" href="Algebras.Signatures.html" class="Module">Algebras.Signatures</a> <a id="886" class="Keyword">using</a> <a id="892" class="Symbol">(</a><a id="893" href="Algebras.Signatures.html#622" class="Function">Signature</a><a id="902" class="Symbol">;</a> <a id="904" href="Overture.Preliminaries.html#8157" class="Generalizable">ğ“</a><a id="905" class="Symbol">;</a> <a id="907" href="Universes.html#262" class="Generalizable">ğ“¥</a><a id="908" class="Symbol">)</a>
<a id="910" class="Keyword">open</a> <a id="915" class="Keyword">import</a> <a id="922" href="MGS-Subsingleton-Theorems.html" class="Module">MGS-Subsingleton-Theorems</a> <a id="948" class="Keyword">using</a> <a id="954" class="Symbol">(</a><a id="955" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="963" class="Symbol">;</a> <a id="965" href="Universes.html#403" class="Function Operator">_Ì‡</a><a id="967" class="Symbol">)</a>

<a id="970" class="Keyword">module</a> <a id="977" href="Varieties.FreeAlgebras.html" class="Module">Varieties.FreeAlgebras</a> <a id="1000" class="Symbol">{</a><a id="1001" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a> <a id="1003" class="Symbol">:</a> <a id="1005" href="Algebras.Signatures.html#622" class="Function">Signature</a> <a id="1015" href="Overture.Preliminaries.html#8157" class="Generalizable">ğ“</a> <a id="1017" href="Universes.html#262" class="Generalizable">ğ“¥</a><a id="1018" class="Symbol">}</a> <a id="1020" class="Symbol">{</a><a id="1021" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="1023" class="Symbol">:</a> <a id="1025" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="1033" class="Symbol">}{</a><a id="1035" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="1037" class="Symbol">:</a> <a id="1039" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="1041" href="Universes.html#403" class="Function Operator">Ì‡</a><a id="1042" class="Symbol">}</a> <a id="1044" class="Keyword">where</a>

<a id="1051" class="Keyword">open</a> <a id="1056" class="Keyword">import</a> <a id="1063" href="Varieties.Preservation.html" class="Module">Varieties.Preservation</a> <a id="1086" class="Symbol">{</a><a id="1087" class="Argument">ğ‘†</a> <a id="1089" class="Symbol">=</a> <a id="1091" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="1092" class="Symbol">}{</a><a id="1094" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="1095" class="Symbol">}{</a><a id="1097" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="1098" class="Symbol">}{</a><a id="1100" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="1101" class="Symbol">}</a> <a id="1103" class="Keyword">public</a>

</pre>


#### <a id="the-free-algebra-in-theory">The free algebra in theory</a>

Recall, we proved in [the universal property](Terms.Basic.html#the-universal-property) section of the [Terms.Basic][] module that the term algebra `ğ‘» X` is the absolutely free algebra in the class of all `ğ‘†`-structures. In this section, we formalize, for a given class `ğ’¦` of `ğ‘†`-algebras, the (relatively) free algebra in `S(P ğ’¦)` over `X`.

We use the next definition to take a free algebra *for* a class `ğ’¦` and produce the free algebra *in* `ğ’¦`.

`Î˜(ğ’¦, ğ‘¨) := {Î¸ âˆˆ Con ğ‘¨ : ğ‘¨ / Î¸ âˆˆ (S ğ’¦)}` &nbsp; &nbsp; and &nbsp; &nbsp; `Ïˆ(ğ’¦, ğ‘¨) := â‹‚ Î˜(ğ’¦, ğ‘¨)`.

Notice that `Î˜(ğ’¦, ğ‘¨)` may be empty, in which case `Ïˆ(ğ’¦, ğ‘¨) = 1` and then `ğ‘¨ / Ïˆ(ğ’¦, ğ‘¨)` is trivial.

The free algebra is constructed by applying the above definitions to the special case in which `ğ‘¨` is the term algebra `ğ‘» X` of `ğ‘†`-terms over `X`.

Since `ğ‘» X` is free for (and in) the class of all `ğ‘†`-algebras, it follows that `ğ‘» X` is free for every class `ğ’¦` of `ğ‘†`-algebras. Of course, `ğ‘» X` is not necessarily a member of `ğ’¦`, but if we form the quotient of `ğ‘» X` modulo the congruence `Ïˆ(ğ’¦, ğ‘» X)`, which we denote by `ğ”‰ := (ğ‘» X) / Ïˆ(ğ’¦, ğ‘» X)`, then it's not hard to see that `ğ”‰` is a subdirect product of the algebras in `{(ğ‘» ğ‘‹) / Î¸}`, where `Î¸` ranges over `Î˜(ğ’¦, ğ‘» X)`, so `ğ”‰` belongs to `S(P ğ’¦)`, and it follows that `ğ”‰` satisfies all the identities satisfied by all members of `ğ’¦`.  Indeed, for each pair `p q : ğ‘» X`, if `ğ’¦ âŠ§ p â‰ˆ q`, then `p` and `q` must belong to the same `Ïˆ(ğ’¦, ğ‘» X)`-class, so `p` and `q` are identified in the quotient `ğ”‰`.

The `ğ”‰` that we have just defined is called the **free algebra over** `ğ’¦` **generated by** `X` and (because of what we just observed) we may say that `ğ”‰` is free *in* `S(P ğ’¦)`.<sup>[1](Varieties.FreeAlgebras.html#fn1)</sup>

#### <a id="the-free-algebra-in-agda">The free algebra in Agda</a>

Before we attempt to represent the free algebra in Agda we construct the congruence `Ïˆ(ğ’¦, ğ‘» ğ‘‹)` described above.
First, we represent the congruence relation `ÏˆCon`, modulo which `ğ‘» X` yields the relatively free algebra, `ğ”‰ ğ’¦ X := ğ‘» X â•± ÏˆCon`.  We let `Ïˆ` be the collection of identities `(p, q)` satisfied by all subalgebras of algebras in `ğ’¦`.

<pre class="Agda">

<a id="Ïˆ"></a><a id="3353" href="Varieties.FreeAlgebras.html#3353" class="Function">Ïˆ</a> <a id="3355" class="Symbol">:</a> <a id="3357" class="Symbol">(</a><a id="3358" href="Varieties.FreeAlgebras.html#3358" class="Bound">ğ’¦</a> <a id="3360" class="Symbol">:</a> <a id="3362" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="3367" class="Symbol">(</a><a id="3368" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="3376" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="3378" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="3379" class="Symbol">)</a> <a id="3381" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="3382" class="Symbol">)</a> <a id="3384" class="Symbol">â†’</a> <a id="3386" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="3391" class="Symbol">(</a><a id="3392" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="3394" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="3396" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="3398" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="3400" href="MGS-MLTT.html#3515" class="Function Operator">Ã—</a> <a id="3402" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="3404" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="3406" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="3408" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="3409" class="Symbol">)</a> <a id="3411" href="Varieties.Preservation.html#756" class="Function">ğ“•</a>
<a id="3413" href="Varieties.FreeAlgebras.html#3353" class="Function">Ïˆ</a> <a id="3415" href="Varieties.FreeAlgebras.html#3415" class="Bound">ğ’¦</a> <a id="3417" class="Symbol">(</a><a id="3418" href="Varieties.FreeAlgebras.html#3418" class="Bound">p</a> <a id="3420" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="3422" href="Varieties.FreeAlgebras.html#3422" class="Bound">q</a><a id="3423" class="Symbol">)</a> <a id="3425" class="Symbol">=</a> <a id="3427" class="Symbol">âˆ€(</a><a id="3429" href="Varieties.FreeAlgebras.html#3429" class="Bound">ğ‘¨</a> <a id="3431" class="Symbol">:</a> <a id="3433" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="3441" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="3443" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="3444" class="Symbol">)(</a><a id="3446" href="Varieties.FreeAlgebras.html#3446" class="Bound">sA</a> <a id="3449" class="Symbol">:</a> <a id="3451" href="Varieties.FreeAlgebras.html#3429" class="Bound">ğ‘¨</a> <a id="3453" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="3455" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="3456" class="Symbol">{</a><a id="3457" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="3458" class="Symbol">}{</a><a id="3460" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="3461" class="Symbol">}</a> <a id="3463" href="Varieties.FreeAlgebras.html#3415" class="Bound">ğ’¦</a><a id="3464" class="Symbol">)(</a><a id="3466" href="Varieties.FreeAlgebras.html#3466" class="Bound">h</a> <a id="3468" class="Symbol">:</a> <a id="3470" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="3472" class="Symbol">â†’</a> <a id="3474" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="3476" href="Varieties.FreeAlgebras.html#3429" class="Bound">ğ‘¨</a> <a id="3478" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="3480" class="Symbol">)</a>
                 <a id="3499" class="Symbol">â†’</a>  <a id="3502" class="Symbol">(</a><a id="3503" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="3513" href="Varieties.FreeAlgebras.html#3429" class="Bound">ğ‘¨</a> <a id="3515" href="Varieties.FreeAlgebras.html#3466" class="Bound">h</a><a id="3516" class="Symbol">)</a> <a id="3518" href="Varieties.FreeAlgebras.html#3418" class="Bound">p</a> <a id="3520" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="3522" class="Symbol">(</a><a id="3523" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="3533" href="Varieties.FreeAlgebras.html#3429" class="Bound">ğ‘¨</a> <a id="3535" href="Varieties.FreeAlgebras.html#3466" class="Bound">h</a><a id="3536" class="Symbol">)</a> <a id="3538" href="Varieties.FreeAlgebras.html#3422" class="Bound">q</a>

</pre>

We convert the predicate Ïˆ into a relation by [currying](https://en.wikipedia.org/wiki/Currying).

<pre class="Agda">

<a id="ÏˆRel"></a><a id="3666" href="Varieties.FreeAlgebras.html#3666" class="Function">ÏˆRel</a> <a id="3671" class="Symbol">:</a> <a id="3673" class="Symbol">(</a><a id="3674" href="Varieties.FreeAlgebras.html#3674" class="Bound">ğ’¦</a> <a id="3676" class="Symbol">:</a> <a id="3678" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="3683" class="Symbol">(</a><a id="3684" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="3692" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="3694" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="3695" class="Symbol">)</a> <a id="3697" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="3698" class="Symbol">)</a> <a id="3700" class="Symbol">â†’</a> <a id="3702" href="Relations.Discrete.html#6780" class="Function">Rel</a> <a id="3706" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="3708" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="3710" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="3712" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="3714" href="Varieties.Preservation.html#756" class="Function">ğ“•</a>
<a id="3716" href="Varieties.FreeAlgebras.html#3666" class="Function">ÏˆRel</a> <a id="3721" href="Varieties.FreeAlgebras.html#3721" class="Bound">ğ’¦</a> <a id="3723" href="Varieties.FreeAlgebras.html#3723" class="Bound">p</a> <a id="3725" href="Varieties.FreeAlgebras.html#3725" class="Bound">q</a> <a id="3727" class="Symbol">=</a> <a id="3729" href="Varieties.FreeAlgebras.html#3353" class="Function">Ïˆ</a> <a id="3731" href="Varieties.FreeAlgebras.html#3721" class="Bound">ğ’¦</a> <a id="3733" class="Symbol">(</a><a id="3734" href="Varieties.FreeAlgebras.html#3723" class="Bound">p</a> <a id="3736" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="3738" href="Varieties.FreeAlgebras.html#3725" class="Bound">q</a><a id="3739" class="Symbol">)</a>

</pre>

To express `ÏˆRel` as a congruence of the term algebra `ğ‘» X`, we must prove that

1. `ÏˆRel` is compatible with the operations of `ğ‘» X` (which are jsut the terms themselves) and
2. `ÏˆRel` it is an equivalence relation.

<pre class="Agda">

<a id="Ïˆcompatible"></a><a id="3986" href="Varieties.FreeAlgebras.html#3986" class="Function">Ïˆcompatible</a> <a id="3998" class="Symbol">:</a> <a id="4000" class="Symbol">(</a><a id="4001" href="Varieties.FreeAlgebras.html#4001" class="Bound">ğ’¦</a> <a id="4003" class="Symbol">:</a> <a id="4005" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4010" class="Symbol">(</a><a id="4011" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4019" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="4021" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="4022" class="Symbol">)</a> <a id="4024" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="4025" class="Symbol">){</a><a id="4027" href="Varieties.FreeAlgebras.html#4027" class="Bound">fe</a> <a id="4030" class="Symbol">:</a> <a id="4032" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="4040" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="4042" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="4043" class="Symbol">}</a> <a id="4045" class="Symbol">â†’</a> <a id="4047" href="Algebras.Algebras.html#5885" class="Function">compatible</a> <a id="4058" class="Symbol">(</a><a id="4059" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="4061" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4062" class="Symbol">)(</a><a id="4064" href="Varieties.FreeAlgebras.html#3666" class="Function">ÏˆRel</a> <a id="4069" href="Varieties.FreeAlgebras.html#4001" class="Bound">ğ’¦</a><a id="4070" class="Symbol">)</a>
<a id="4072" href="Varieties.FreeAlgebras.html#3986" class="Function">Ïˆcompatible</a> <a id="4084" href="Varieties.FreeAlgebras.html#4084" class="Bound">ğ’¦</a><a id="4085" class="Symbol">{</a><a id="4086" href="Varieties.FreeAlgebras.html#4086" class="Bound">fe</a><a id="4088" class="Symbol">}</a> <a id="4090" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4092" class="Symbol">{</a><a id="4093" href="Varieties.FreeAlgebras.html#4093" class="Bound">p</a><a id="4094" class="Symbol">}</a> <a id="4096" class="Symbol">{</a><a id="4097" href="Varieties.FreeAlgebras.html#4097" class="Bound">q</a><a id="4098" class="Symbol">}</a> <a id="4100" href="Varieties.FreeAlgebras.html#4100" class="Bound">Ïˆpq</a> <a id="4104" href="Varieties.FreeAlgebras.html#4104" class="Bound">ğ‘¨</a> <a id="4106" href="Varieties.FreeAlgebras.html#4106" class="Bound">sA</a> <a id="4109" href="Varieties.FreeAlgebras.html#4109" class="Bound">h</a> <a id="4111" class="Symbol">=</a> <a id="4113" href="Varieties.FreeAlgebras.html#4162" class="Function">Î³</a>
 <a id="4116" class="Keyword">where</a>
  <a id="4124" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4126" class="Symbol">:</a> <a id="4128" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="4132" class="Symbol">(</a><a id="4133" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="4135" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4136" class="Symbol">)</a> <a id="4138" href="Varieties.FreeAlgebras.html#4104" class="Bound">ğ‘¨</a>
  <a id="4142" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4144" class="Symbol">=</a> <a id="4146" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="4155" href="Varieties.FreeAlgebras.html#4104" class="Bound">ğ‘¨</a> <a id="4157" href="Varieties.FreeAlgebras.html#4109" class="Bound">h</a>

  <a id="4162" href="Varieties.FreeAlgebras.html#4162" class="Function">Î³</a> <a id="4164" class="Symbol">:</a> <a id="4166" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4168" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4170" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4172" class="Symbol">((</a><a id="4174" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4176" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="4178" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="4180" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4181" class="Symbol">)</a> <a id="4183" href="Varieties.FreeAlgebras.html#4093" class="Bound">p</a><a id="4184" class="Symbol">)</a> <a id="4186" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="4188" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4190" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4192" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4194" class="Symbol">((</a><a id="4196" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4198" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="4200" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="4202" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4203" class="Symbol">)</a> <a id="4205" href="Varieties.FreeAlgebras.html#4097" class="Bound">q</a><a id="4206" class="Symbol">)</a>

  <a id="4211" href="Varieties.FreeAlgebras.html#4162" class="Function">Î³</a> <a id="4213" class="Symbol">=</a> <a id="4215" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4217" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4219" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4221" class="Symbol">((</a><a id="4223" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4225" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="4227" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="4229" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4230" class="Symbol">)</a> <a id="4232" href="Varieties.FreeAlgebras.html#4093" class="Bound">p</a><a id="4233" class="Symbol">)</a>  <a id="4236" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="4239" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="4241" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4243" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="4245" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4247" href="Varieties.FreeAlgebras.html#4093" class="Bound">p</a> <a id="4249" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
      <a id="4257" class="Symbol">(</a><a id="4258" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4260" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="4262" href="Varieties.FreeAlgebras.html#4104" class="Bound">ğ‘¨</a><a id="4263" class="Symbol">)</a> <a id="4265" class="Symbol">(</a><a id="4266" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4268" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4270" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4272" href="MGS-MLTT.html#3813" class="Function Operator">âˆ˜</a> <a id="4274" href="Varieties.FreeAlgebras.html#4093" class="Bound">p</a><a id="4275" class="Symbol">)</a>  <a id="4278" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="4281" href="MGS-MLTT.html#6613" class="Function">ap</a><a id="4283" class="Symbol">(</a><a id="4284" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4286" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="4288" href="Varieties.FreeAlgebras.html#4104" class="Bound">ğ‘¨</a><a id="4289" class="Symbol">)(</a><a id="4291" href="Varieties.FreeAlgebras.html#4086" class="Bound">fe</a> <a id="4294" class="Symbol">Î»</a> <a id="4296" href="Varieties.FreeAlgebras.html#4296" class="Bound">x</a> <a id="4298" class="Symbol">â†’</a> <a id="4300" class="Symbol">(</a><a id="4301" href="Varieties.FreeAlgebras.html#4100" class="Bound">Ïˆpq</a> <a id="4305" href="Varieties.FreeAlgebras.html#4296" class="Bound">x</a><a id="4306" class="Symbol">)</a> <a id="4308" href="Varieties.FreeAlgebras.html#4104" class="Bound">ğ‘¨</a> <a id="4310" href="Varieties.FreeAlgebras.html#4106" class="Bound">sA</a> <a id="4313" href="Varieties.FreeAlgebras.html#4109" class="Bound">h</a><a id="4314" class="Symbol">)</a> <a id="4316" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
      <a id="4324" class="Symbol">(</a><a id="4325" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4327" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="4329" href="Varieties.FreeAlgebras.html#4104" class="Bound">ğ‘¨</a><a id="4330" class="Symbol">)</a> <a id="4332" class="Symbol">(</a><a id="4333" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4335" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4337" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4339" href="MGS-MLTT.html#3813" class="Function Operator">âˆ˜</a> <a id="4341" href="Varieties.FreeAlgebras.html#4097" class="Bound">q</a><a id="4342" class="Symbol">)</a>  <a id="4345" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="4348" class="Symbol">(</a><a id="4349" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="4351" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4353" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="4355" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4357" href="Varieties.FreeAlgebras.html#4097" class="Bound">q</a><a id="4358" class="Symbol">)</a><a id="4359" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a> <a id="4362" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
      <a id="4370" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4372" href="Varieties.FreeAlgebras.html#4124" class="Function">Ï†</a> <a id="4374" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="4376" class="Symbol">((</a><a id="4378" href="Varieties.FreeAlgebras.html#4090" class="Bound">ğ‘“</a> <a id="4380" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="4382" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="4384" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4385" class="Symbol">)</a> <a id="4387" href="Varieties.FreeAlgebras.html#4097" class="Bound">q</a><a id="4388" class="Symbol">)</a>  <a id="4391" href="MGS-MLTT.html#6079" class="Function Operator">âˆ</a>

<a id="ÏˆIsEquivalence"></a><a id="4394" href="Varieties.FreeAlgebras.html#4394" class="Function">ÏˆIsEquivalence</a> <a id="4409" class="Symbol">:</a> <a id="4411" class="Symbol">{</a><a id="4412" href="Varieties.FreeAlgebras.html#4412" class="Bound">ğ’¦</a> <a id="4414" class="Symbol">:</a> <a id="4416" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4421" class="Symbol">(</a><a id="4422" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4430" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="4432" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="4433" class="Symbol">)</a> <a id="4435" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="4437" class="Symbol">}</a> <a id="4439" class="Symbol">â†’</a> <a id="4441" href="Relations.Quotients.html#2442" class="Record">IsEquivalence</a> <a id="4455" class="Symbol">(</a><a id="4456" href="Varieties.FreeAlgebras.html#3666" class="Function">ÏˆRel</a> <a id="4461" href="Varieties.FreeAlgebras.html#4412" class="Bound">ğ’¦</a><a id="4462" class="Symbol">)</a>
<a id="4464" href="Varieties.FreeAlgebras.html#4394" class="Function">ÏˆIsEquivalence</a> <a id="4479" class="Symbol">=</a> <a id="4481" class="Keyword">record</a> <a id="4488" class="Symbol">{</a> <a id="4490" href="Relations.Quotients.html#2503" class="Field">rfl</a> <a id="4494" class="Symbol">=</a> <a id="4496" class="Symbol">Î»</a> <a id="4498" href="Varieties.FreeAlgebras.html#4498" class="Bound">ğ‘¨</a> <a id="4500" href="Varieties.FreeAlgebras.html#4500" class="Bound">sA</a> <a id="4503" href="Varieties.FreeAlgebras.html#4503" class="Bound">h</a> <a id="4505" class="Symbol">â†’</a> <a id="4507" href="MGS-MLTT.html#4221" class="InductiveConstructor">refl</a>
                        <a id="4536" class="Symbol">;</a> <a id="4538" href="Relations.Quotients.html#2518" class="Field">sym</a> <a id="4542" class="Symbol">=</a> <a id="4544" class="Symbol">Î»</a> <a id="4546" href="Varieties.FreeAlgebras.html#4546" class="Bound">pÏˆq</a> <a id="4550" href="Varieties.FreeAlgebras.html#4550" class="Bound">ğ‘¨</a> <a id="4552" href="Varieties.FreeAlgebras.html#4552" class="Bound">sA</a> <a id="4555" href="Varieties.FreeAlgebras.html#4555" class="Bound">h</a> <a id="4557" class="Symbol">â†’</a> <a id="4559" class="Symbol">(</a><a id="4560" href="Varieties.FreeAlgebras.html#4546" class="Bound">pÏˆq</a> <a id="4564" href="Varieties.FreeAlgebras.html#4550" class="Bound">ğ‘¨</a> <a id="4566" href="Varieties.FreeAlgebras.html#4552" class="Bound">sA</a> <a id="4569" href="Varieties.FreeAlgebras.html#4555" class="Bound">h</a><a id="4570" class="Symbol">)</a><a id="4571" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a>
                        <a id="4598" class="Symbol">;</a> <a id="4600" href="Relations.Quotients.html#2533" class="Field">trans</a> <a id="4606" class="Symbol">=</a> <a id="4608" class="Symbol">Î»</a> <a id="4610" href="Varieties.FreeAlgebras.html#4610" class="Bound">pÏˆq</a> <a id="4614" href="Varieties.FreeAlgebras.html#4614" class="Bound">qÏˆr</a> <a id="4618" href="Varieties.FreeAlgebras.html#4618" class="Bound">ğ‘¨</a> <a id="4620" href="Varieties.FreeAlgebras.html#4620" class="Bound">sA</a> <a id="4623" href="Varieties.FreeAlgebras.html#4623" class="Bound">h</a> <a id="4625" class="Symbol">â†’</a> <a id="4627" class="Symbol">(</a><a id="4628" href="Varieties.FreeAlgebras.html#4610" class="Bound">pÏˆq</a> <a id="4632" href="Varieties.FreeAlgebras.html#4618" class="Bound">ğ‘¨</a> <a id="4634" href="Varieties.FreeAlgebras.html#4620" class="Bound">sA</a> <a id="4637" href="Varieties.FreeAlgebras.html#4623" class="Bound">h</a><a id="4638" class="Symbol">)</a> <a id="4640" href="MGS-MLTT.html#5910" class="Function Operator">âˆ™</a> <a id="4642" class="Symbol">(</a><a id="4643" href="Varieties.FreeAlgebras.html#4614" class="Bound">qÏˆr</a> <a id="4647" href="Varieties.FreeAlgebras.html#4618" class="Bound">ğ‘¨</a> <a id="4649" href="Varieties.FreeAlgebras.html#4620" class="Bound">sA</a> <a id="4652" href="Varieties.FreeAlgebras.html#4623" class="Bound">h</a><a id="4653" class="Symbol">)}</a>

</pre>

We have collected all the pieces necessary to express the collection of identities satisfied by all subalgebras of algebras in the class as a congruence relation of the term algebra. We call this congruence `ÏˆCon` and define it using the Congruence constructor `mkcon`.

<pre class="Agda">

<a id="ÏˆCon"></a><a id="4954" href="Varieties.FreeAlgebras.html#4954" class="Function">ÏˆCon</a> <a id="4959" class="Symbol">:</a> <a id="4961" class="Symbol">(</a><a id="4962" href="Varieties.FreeAlgebras.html#4962" class="Bound">ğ’¦</a> <a id="4964" class="Symbol">:</a> <a id="4966" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4971" class="Symbol">(</a><a id="4972" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4980" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="4982" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="4983" class="Symbol">)</a> <a id="4985" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="4986" class="Symbol">){</a><a id="4988" href="Varieties.FreeAlgebras.html#4988" class="Bound">fe</a> <a id="4991" class="Symbol">:</a> <a id="4993" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="5001" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="5003" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="5004" class="Symbol">}</a> <a id="5006" class="Symbol">â†’</a> <a id="5008" href="Algebras.Congruences.html#1166" class="Record">Congruence</a> <a id="5019" class="Symbol">(</a><a id="5020" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="5022" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="5023" class="Symbol">)</a>
<a id="5025" href="Varieties.FreeAlgebras.html#4954" class="Function">ÏˆCon</a> <a id="5030" href="Varieties.FreeAlgebras.html#5030" class="Bound">ğ’¦</a> <a id="5032" class="Symbol">{</a><a id="5033" href="Varieties.FreeAlgebras.html#5033" class="Bound">fe</a><a id="5035" class="Symbol">}</a> <a id="5037" class="Symbol">=</a> <a id="5039" href="Algebras.Congruences.html#1244" class="InductiveConstructor">mkcon</a> <a id="5045" class="Symbol">(</a><a id="5046" href="Varieties.FreeAlgebras.html#3666" class="Function">ÏˆRel</a> <a id="5051" href="Varieties.FreeAlgebras.html#5030" class="Bound">ğ’¦</a><a id="5052" class="Symbol">)</a> <a id="5054" href="Varieties.FreeAlgebras.html#4394" class="Function">ÏˆIsEquivalence</a> <a id="5069" class="Symbol">(</a><a id="5070" href="Varieties.FreeAlgebras.html#3986" class="Function">Ïˆcompatible</a> <a id="5082" href="Varieties.FreeAlgebras.html#5030" class="Bound">ğ’¦</a> <a id="5084" class="Symbol">{</a><a id="5085" href="Varieties.FreeAlgebras.html#5033" class="Bound">fe</a><a id="5087" class="Symbol">})</a>

</pre>





-----------------------------




#### <a id="hsp-theorem">HSP Theorem</a>

This section presents a formal proof of the Birkhoff HSP theorem.

To complete the proof of Birkhoff's HSP theorem, it remains to show that every algebra ğ‘¨ that belongs to `Mod X (Th (V ğ’¦))`---i.e., every algebra that models the equations in `Th (V ğ’¦)`---belongs to `V ğ’¦`.  This will prove that `V ğ’¦` is an equational class.  (The converse, that every equational class is a variety was already proved; see the remarks at the end of this module.)

We accomplish this goal by constructing an algebra `ğ”½` with the following properties:

1. `ğ”½ âˆˆ V ğ’¦` and

2. Every `ğ‘¨ âˆˆ Mod X (Th (V ğ’¦))` is a homomorphic image of `ğ”½`.

We denote by `â„­` the product of all subalgebras of algebras in `ğ’¦`, and by `homâ„­` the homomorphism from `ğ‘» X` to `â„­` defined as follows:

`homâ„­ := â¨…-hom-co (ğ‘» X) ğ”„s homğ”„`.

Here, `â¨…-hom-co` (defined in [Homomorphisms.Basic](Homomorphisms.Basic.html#product-homomorphisms)) takes the term algebra `ğ‘» X`, a family `{ğ”„s : I â†’ Algebra ğ“¤ ğ‘†}` of `ğ‘†`-algebras, and a family `homğ”„ : âˆ€ i â†’ hom (ğ‘» X) (ğ”„s i)` of homomorphisms and constructs the natural homomorphism `homâ„­` from `ğ‘» X` to the product `â„­ := â¨… ğ”„`.  The homomorphism `homâ„­ : hom (ğ‘» X) (â¨… â„­)` is natural in the sense that the `i`-th component of the image of `ğ‘¡ : Term X` under `homâ„­` is the image `âˆ£ homğ”„ i âˆ£ ğ‘¡` of ğ‘¡ under the i-th homomorphism `homğ”„ i`.





#### <a id="F-in-classproduct">ğ”½ â‰¤  â¨… S(ğ’¦)</a>
Now we come to a step in the Agda formalization of Birkhoff's theorem that is highly nontrivial. We must prove that the free algebra embeds in the product â„­ of all subalgebras of algebras in the class `ğ’¦`.  This is really the only stage in the proof of Birkhoff's theorem that requires the truncation assumption that `â„­` be a set.  We will also need to assume several (ten, to be honest) local function extensionality postulates and, as a result, the next submodule will take as given the parameter `fe : DFunExt`.  This allows us to postulate local function extensionality when and where we need it in the proof. For example, if we want to assume function extensionality at universes ğ“¥ and ğ“¤, we simply apply `fe` to those universes. (Earlier versions of the library used just a single *global* function extensionality postulate at the start of most modules, but we have since decided to exchange that elegant but crude option for greater precision and transparency.)

<pre class="Agda">

<a id="7542" class="Keyword">module</a> <a id="7549" href="Varieties.FreeAlgebras.html#7549" class="Module">_</a> <a id="7551" class="Symbol">{</a><a id="7552" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="7555" class="Symbol">:</a> <a id="7557" href="Varieties.EquationalLogic.html#4240" class="Function">DFunExt</a><a id="7564" class="Symbol">}</a> <a id="7566" class="Symbol">{</a><a id="7567" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a> <a id="7569" class="Symbol">:</a> <a id="7571" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="7576" class="Symbol">(</a><a id="7577" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="7585" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="7587" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="7588" class="Symbol">)</a> <a id="7590" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="7591" class="Symbol">}</a> <a id="7593" class="Keyword">where</a>

 <a id="7601" class="Keyword">open</a> <a id="7606" href="Varieties.Varieties.html#19374" class="Module">class-products-with-maps</a> <a id="7631" class="Symbol">{</a><a id="7632" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="7633" class="Symbol">}{</a><a id="7635" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="7636" class="Symbol">}{</a><a id="7638" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="7641" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="7643" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="7644" class="Symbol">}{</a><a id="7646" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="7649" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="7652" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="7654" class="Symbol">}{</a><a id="7656" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="7659" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="7661" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="7662" class="Symbol">}</a> <a id="7664" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>

</pre>

We begin by constructing `â„­`, using the techniques described in the section on <a href="https://ualib.gitlab.io/Varieties.Varieties.html#products-of-classes">products of classes</a>.

<pre class="Agda">

 <a id="7878" class="Comment">-- â„­ is the product of all subalgebras of algebras in ğ’¦.</a>
 <a id="7936" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="7938" class="Symbol">:</a> <a id="7940" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="7948" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="7950" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a>
 <a id="7953" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="7955" class="Symbol">=</a> <a id="7957" href="Algebras.Products.html#1145" class="Function">â¨…</a> <a id="7959" href="Varieties.Varieties.html#20759" class="Function">ğ”„</a>

</pre>

Observe that the inhabitants of `â„­` are maps from `â„‘s` to `{ğ”„s i : i âˆˆ â„‘s}`.

<pre class="Agda">

 <a id="8067" class="Comment">-- NOTATION.</a>
 <a id="8081" href="Varieties.FreeAlgebras.html#8081" class="Function">ğ”„h</a> <a id="8084" class="Symbol">:</a> <a id="8086" class="Symbol">(</a><a id="8087" href="Varieties.FreeAlgebras.html#8087" class="Bound">i</a> <a id="8089" class="Symbol">:</a> <a id="8091" href="Varieties.Varieties.html#19558" class="Function">â„‘</a><a id="8092" class="Symbol">)</a> <a id="8094" class="Symbol">â†’</a> <a id="8096" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="8098" class="Symbol">â†’</a> <a id="8100" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="8102" href="Varieties.Varieties.html#20759" class="Function">ğ”„</a> <a id="8104" href="Varieties.FreeAlgebras.html#8087" class="Bound">i</a> <a id="8106" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a>
 <a id="8109" href="Varieties.FreeAlgebras.html#8081" class="Function">ğ”„h</a> <a id="8112" class="Symbol">=</a> <a id="8114" class="Symbol">Î»</a> <a id="8116" class="Symbol">(</a><a id="8117" href="Varieties.FreeAlgebras.html#8117" class="Bound">i</a> <a id="8119" class="Symbol">:</a> <a id="8121" href="Varieties.Varieties.html#19558" class="Function">â„‘</a><a id="8122" class="Symbol">)</a> <a id="8124" class="Symbol">â†’</a> <a id="8126" href="Overture.Preliminaries.html#13888" class="Function">snd</a> <a id="8130" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="8132" href="Varieties.FreeAlgebras.html#8117" class="Bound">i</a> <a id="8134" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a>

 <a id="8138" href="Varieties.FreeAlgebras.html#8138" class="Function">homğ”„</a> <a id="8143" class="Symbol">:</a> <a id="8145" class="Symbol">âˆ€</a> <a id="8147" href="Varieties.FreeAlgebras.html#8147" class="Bound">i</a> <a id="8149" class="Symbol">â†’</a> <a id="8151" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="8155" class="Symbol">(</a><a id="8156" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="8158" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="8159" class="Symbol">)</a> <a id="8161" class="Symbol">(</a><a id="8162" href="Varieties.Varieties.html#20759" class="Function">ğ”„</a> <a id="8164" href="Varieties.FreeAlgebras.html#8147" class="Bound">i</a><a id="8165" class="Symbol">)</a>
 <a id="8168" href="Varieties.FreeAlgebras.html#8138" class="Function">homğ”„</a> <a id="8173" href="Varieties.FreeAlgebras.html#8173" class="Bound">i</a> <a id="8175" class="Symbol">=</a> <a id="8177" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="8186" class="Symbol">(</a><a id="8187" href="Varieties.Varieties.html#20759" class="Function">ğ”„</a> <a id="8189" href="Varieties.FreeAlgebras.html#8173" class="Bound">i</a><a id="8190" class="Symbol">)</a> <a id="8192" class="Symbol">(</a><a id="8193" href="Varieties.FreeAlgebras.html#8081" class="Function">ğ”„h</a> <a id="8196" href="Varieties.FreeAlgebras.html#8173" class="Bound">i</a><a id="8197" class="Symbol">)</a>

 <a id="8201" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="8206" class="Symbol">:</a> <a id="8208" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="8212" class="Symbol">(</a><a id="8213" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="8215" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="8216" class="Symbol">)</a> <a id="8218" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a>
 <a id="8221" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="8226" class="Symbol">=</a> <a id="8228" href="Homomorphisms.Basic.html#10265" class="Function">â¨…-hom-co</a> <a id="8237" class="Symbol">{</a><a id="8238" class="Argument">fe</a> <a id="8241" class="Symbol">=</a> <a id="8243" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="8246" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="8248" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="8249" class="Symbol">}</a> <a id="8251" href="Varieties.Varieties.html#20759" class="Function">ğ”„</a> <a id="8253" href="Varieties.FreeAlgebras.html#8138" class="Function">homğ”„</a>

</pre>


#### <a id="the-free-algebra">The free algebra</a>

As mentioned above, the initial version of the [Agda UALib][] used the free algebra `ğ”‰` developed above.  However, our new, more direct proof uses the algebra `ğ”½`, which we now define, along with the natural epimorphism `epiğ”½ : epi (ğ‘» X) ğ”½` from `ğ‘» X` to `ğ”½`.

We now define the algebra `ğ”½`, which plays the role of the free algebra, along with the natural epimorphism `epiğ”½ : epi (ğ‘» X) ğ”½` from `ğ‘» X` to `ğ”½`.

<pre class="Agda">

 <a id="8749" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="8751" class="Symbol">:</a> <a id="8753" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="8761" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="8764" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a>
 <a id="8767" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="8769" class="Symbol">=</a> <a id="8771" class="Symbol">((</a><a id="8773" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="8775" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="8776" class="Symbol">)</a> <a id="8778" href="Homomorphisms.Basic.html#7552" class="Function Operator">[</a> <a id="8780" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="8782" href="Homomorphisms.Basic.html#7552" class="Function Operator">]/ker</a> <a id="8788" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a><a id="8792" class="Symbol">){</a><a id="8794" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="8797" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="8799" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="8800" class="Symbol">}</a>

 <a id="8804" href="Varieties.FreeAlgebras.html#8804" class="Function">epiğ”½</a> <a id="8809" class="Symbol">:</a> <a id="8811" href="Homomorphisms.Basic.html#4062" class="Function">epi</a> <a id="8815" class="Symbol">(</a><a id="8816" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="8818" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="8819" class="Symbol">)</a> <a id="8821" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a>
 <a id="8824" href="Varieties.FreeAlgebras.html#8804" class="Function">epiğ”½</a> <a id="8829" class="Symbol">=</a> <a id="8831" href="Homomorphisms.Basic.html#9089" class="Function">Ï€ker</a> <a id="8836" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="8838" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="8843" class="Symbol">{</a><a id="8844" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="8847" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="8849" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="8850" class="Symbol">}</a>

 <a id="8854" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="8859" class="Symbol">:</a> <a id="8861" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="8865" class="Symbol">(</a><a id="8866" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="8868" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="8869" class="Symbol">)</a> <a id="8871" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a>
 <a id="8874" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="8879" class="Symbol">=</a> <a id="8881" href="Homomorphisms.Basic.html#4528" class="Function">epi-to-hom</a> <a id="8892" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="8894" href="Varieties.FreeAlgebras.html#8804" class="Function">epiğ”½</a>

 <a id="8901" href="Varieties.FreeAlgebras.html#8901" class="Function">homğ”½-is-epic</a> <a id="8914" class="Symbol">:</a> <a id="8916" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="8921" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="8923" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="8928" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a>
 <a id="8931" href="Varieties.FreeAlgebras.html#8901" class="Function">homğ”½-is-epic</a> <a id="8944" class="Symbol">=</a> <a id="8946" href="Overture.Preliminaries.html#13888" class="Function">snd</a> <a id="8950" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="8952" href="Varieties.FreeAlgebras.html#8804" class="Function">epiğ”½</a> <a id="8957" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a>

</pre>

We will need the following facts relating `homâ„­`, `homğ”½`, `and Ïˆ`.

<pre class="Agda">

 <a id="9055" href="Varieties.FreeAlgebras.html#9055" class="Function">Ïˆlemma0</a> <a id="9063" class="Symbol">:</a> <a id="9065" class="Symbol">âˆ€</a> <a id="9067" href="Varieties.FreeAlgebras.html#9067" class="Bound">p</a> <a id="9069" href="Varieties.FreeAlgebras.html#9069" class="Bound">q</a> <a id="9071" class="Symbol">â†’</a>  <a id="9074" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9076" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="9081" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9083" href="Varieties.FreeAlgebras.html#9067" class="Bound">p</a> <a id="9085" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="9087" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9089" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="9094" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9096" href="Varieties.FreeAlgebras.html#9069" class="Bound">q</a>  <a id="9099" class="Symbol">â†’</a> <a id="9101" class="Symbol">(</a><a id="9102" href="Varieties.FreeAlgebras.html#9067" class="Bound">p</a> <a id="9104" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="9106" href="Varieties.FreeAlgebras.html#9069" class="Bound">q</a><a id="9107" class="Symbol">)</a> <a id="9109" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="9111" href="Varieties.FreeAlgebras.html#3353" class="Function">Ïˆ</a> <a id="9113" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>
 <a id="9116" href="Varieties.FreeAlgebras.html#9055" class="Function">Ïˆlemma0</a> <a id="9124" href="Varieties.FreeAlgebras.html#9124" class="Bound">p</a> <a id="9126" href="Varieties.FreeAlgebras.html#9126" class="Bound">q</a> <a id="9128" href="Varieties.FreeAlgebras.html#9128" class="Bound">phomâ„­q</a> <a id="9135" href="Varieties.FreeAlgebras.html#9135" class="Bound">ğ‘¨</a> <a id="9137" href="Varieties.FreeAlgebras.html#9137" class="Bound">sA</a> <a id="9140" href="Varieties.FreeAlgebras.html#9140" class="Bound">h</a> <a id="9142" class="Symbol">=</a> <a id="9144" href="Overture.Equality.html#5843" class="Function">cong-app</a> <a id="9153" href="Varieties.FreeAlgebras.html#9128" class="Bound">phomâ„­q</a> <a id="9160" class="Symbol">(</a><a id="9161" href="Varieties.FreeAlgebras.html#9135" class="Bound">ğ‘¨</a> <a id="9163" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="9165" href="Varieties.FreeAlgebras.html#9137" class="Bound">sA</a> <a id="9168" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="9170" href="Varieties.FreeAlgebras.html#9140" class="Bound">h</a><a id="9171" class="Symbol">)</a>

 <a id="9175" href="Varieties.FreeAlgebras.html#9175" class="Function">Ïˆlemma0-ap</a> <a id="9186" class="Symbol">:</a> <a id="9188" class="Symbol">{</a><a id="9189" href="Varieties.FreeAlgebras.html#9189" class="Bound">ğ‘¨</a> <a id="9191" class="Symbol">:</a> <a id="9193" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="9201" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="9203" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="9204" class="Symbol">}{</a><a id="9206" href="Varieties.FreeAlgebras.html#9206" class="Bound">h</a> <a id="9208" class="Symbol">:</a> <a id="9210" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="9212" class="Symbol">â†’</a> <a id="9214" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9216" href="Varieties.FreeAlgebras.html#9189" class="Bound">ğ‘¨</a> <a id="9218" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="9219" class="Symbol">}</a> <a id="9221" class="Symbol">â†’</a> <a id="9223" href="Varieties.FreeAlgebras.html#9189" class="Bound">ğ‘¨</a> <a id="9225" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="9227" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="9228" class="Symbol">{</a><a id="9229" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="9230" class="Symbol">}{</a><a id="9232" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="9233" class="Symbol">}</a> <a id="9235" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>
  <a id="9239" class="Symbol">â†’</a>           <a id="9251" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="9258" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9260" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="9265" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9267" href="Relations.Discrete.html#2587" class="Function Operator">âŠ†</a> <a id="9269" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="9276" class="Symbol">(</a><a id="9277" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="9287" href="Varieties.FreeAlgebras.html#9189" class="Bound">ğ‘¨</a> <a id="9289" href="Varieties.FreeAlgebras.html#9206" class="Bound">h</a><a id="9290" class="Symbol">)</a>

 <a id="9294" href="Varieties.FreeAlgebras.html#9175" class="Function">Ïˆlemma0-ap</a> <a id="9305" class="Symbol">{</a><a id="9306" href="Varieties.FreeAlgebras.html#9306" class="Bound">ğ‘¨</a><a id="9307" class="Symbol">}{</a><a id="9309" href="Varieties.FreeAlgebras.html#9309" class="Bound">h</a><a id="9310" class="Symbol">}</a> <a id="9312" href="Varieties.FreeAlgebras.html#9312" class="Bound">skA</a> <a id="9316" class="Symbol">{</a><a id="9317" href="Varieties.FreeAlgebras.html#9317" class="Bound">p</a> <a id="9319" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="9321" href="Varieties.FreeAlgebras.html#9321" class="Bound">q</a><a id="9322" class="Symbol">}</a> <a id="9324" href="Varieties.FreeAlgebras.html#9324" class="Bound">x</a> <a id="9326" class="Symbol">=</a> <a id="9328" href="Varieties.FreeAlgebras.html#9450" class="Function">Î³</a> <a id="9330" class="Keyword">where</a>

   <a id="9340" href="Varieties.FreeAlgebras.html#9340" class="Function">Î½</a> <a id="9342" class="Symbol">:</a> <a id="9344" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9346" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="9351" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9353" href="Varieties.FreeAlgebras.html#9317" class="Bound">p</a> <a id="9355" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="9357" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9359" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="9364" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9366" href="Varieties.FreeAlgebras.html#9321" class="Bound">q</a>
   <a id="9371" href="Varieties.FreeAlgebras.html#9340" class="Function">Î½</a> <a id="9373" class="Symbol">=</a> <a id="9375" href="Homomorphisms.Basic.html#9580" class="Function">ker-in-con</a> <a id="9386" class="Symbol">{</a><a id="9387" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="9390" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="9391" class="Symbol">}{</a><a id="9393" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="9396" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="9397" class="Symbol">}{</a><a id="9399" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="9401" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="9402" class="Symbol">}{</a><a id="9404" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="9407" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="9409" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="9411" class="Symbol">}(</a><a id="9413" href="Homomorphisms.Basic.html#7083" class="Function">kercon</a> <a id="9420" class="Symbol">(</a><a id="9421" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="9424" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="9426" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="9427" class="Symbol">)</a> <a id="9429" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="9431" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a><a id="9435" class="Symbol">)</a> <a id="9437" class="Symbol">{</a><a id="9438" href="Varieties.FreeAlgebras.html#9317" class="Bound">p</a><a id="9439" class="Symbol">}{</a><a id="9441" href="Varieties.FreeAlgebras.html#9321" class="Bound">q</a><a id="9442" class="Symbol">}</a> <a id="9444" href="Varieties.FreeAlgebras.html#9324" class="Bound">x</a>

   <a id="9450" href="Varieties.FreeAlgebras.html#9450" class="Function">Î³</a> <a id="9452" class="Symbol">:</a> <a id="9454" class="Symbol">(</a><a id="9455" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="9465" href="Varieties.FreeAlgebras.html#9306" class="Bound">ğ‘¨</a> <a id="9467" href="Varieties.FreeAlgebras.html#9309" class="Bound">h</a><a id="9468" class="Symbol">)</a> <a id="9470" href="Varieties.FreeAlgebras.html#9317" class="Bound">p</a> <a id="9472" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="9474" class="Symbol">(</a><a id="9475" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="9485" href="Varieties.FreeAlgebras.html#9306" class="Bound">ğ‘¨</a> <a id="9487" href="Varieties.FreeAlgebras.html#9309" class="Bound">h</a><a id="9488" class="Symbol">)</a> <a id="9490" href="Varieties.FreeAlgebras.html#9321" class="Bound">q</a>
   <a id="9495" href="Varieties.FreeAlgebras.html#9450" class="Function">Î³</a> <a id="9497" class="Symbol">=</a> <a id="9499" class="Symbol">((</a><a id="9501" href="Varieties.FreeAlgebras.html#9055" class="Function">Ïˆlemma0</a> <a id="9509" href="Varieties.FreeAlgebras.html#9317" class="Bound">p</a> <a id="9511" href="Varieties.FreeAlgebras.html#9321" class="Bound">q</a><a id="9512" class="Symbol">)</a> <a id="9514" href="Varieties.FreeAlgebras.html#9340" class="Function">Î½</a><a id="9515" class="Symbol">)</a> <a id="9517" href="Varieties.FreeAlgebras.html#9306" class="Bound">ğ‘¨</a> <a id="9519" href="Varieties.FreeAlgebras.html#9312" class="Bound">skA</a> <a id="9523" href="Varieties.FreeAlgebras.html#9309" class="Bound">h</a>


</pre>

We now use `Ïˆlemma0-ap` to prove that every map `h : X â†’ âˆ£ ğ‘¨ âˆ£`, from `X` to a subalgebra `ğ‘¨ âˆˆ S ğ’¦` of `ğ’¦`, lifts to a homomorphism from `ğ”½` to `ğ‘¨`.

<pre class="Agda">

 <a id="9704" href="Varieties.FreeAlgebras.html#9704" class="Function">ğ”½-lift-hom</a> <a id="9715" class="Symbol">:</a> <a id="9717" class="Symbol">(</a><a id="9718" href="Varieties.FreeAlgebras.html#9718" class="Bound">ğ‘¨</a> <a id="9720" class="Symbol">:</a> <a id="9722" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="9730" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="9732" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="9733" class="Symbol">)</a> <a id="9735" class="Symbol">â†’</a> <a id="9737" href="Varieties.FreeAlgebras.html#9718" class="Bound">ğ‘¨</a> <a id="9739" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="9741" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="9742" class="Symbol">{</a><a id="9743" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="9744" class="Symbol">}{</a><a id="9746" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="9747" class="Symbol">}</a> <a id="9749" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a> <a id="9751" class="Symbol">â†’</a> <a id="9753" class="Symbol">(</a><a id="9754" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="9756" class="Symbol">â†’</a> <a id="9758" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="9760" href="Varieties.FreeAlgebras.html#9718" class="Bound">ğ‘¨</a> <a id="9762" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="9763" class="Symbol">)</a> <a id="9765" class="Symbol">â†’</a> <a id="9767" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="9771" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="9773" href="Varieties.FreeAlgebras.html#9718" class="Bound">ğ‘¨</a>
 <a id="9776" href="Varieties.FreeAlgebras.html#9704" class="Function">ğ”½-lift-hom</a> <a id="9787" href="Varieties.FreeAlgebras.html#9787" class="Bound">ğ‘¨</a> <a id="9789" href="Varieties.FreeAlgebras.html#9789" class="Bound">skA</a> <a id="9793" href="Varieties.FreeAlgebras.html#9793" class="Bound">h</a> <a id="9795" class="Symbol">=</a> <a id="9797" href="Overture.Preliminaries.html#13836" class="Function">fst</a><a id="9800" class="Symbol">(</a><a id="9801" href="Homomorphisms.Noether.html#10058" class="Function">HomFactor</a> <a id="9811" class="Symbol">(</a><a id="9812" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="9815" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="9817" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="9818" class="Symbol">)(</a><a id="9820" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="9823" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="9826" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="9828" class="Symbol">)</a> <a id="9830" href="Varieties.FreeAlgebras.html#9787" class="Bound">ğ‘¨</a> <a id="9832" class="Symbol">(</a><a id="9833" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="9842" href="Varieties.FreeAlgebras.html#9787" class="Bound">ğ‘¨</a> <a id="9844" href="Varieties.FreeAlgebras.html#9793" class="Bound">h</a><a id="9845" class="Symbol">)</a> <a id="9847" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="9852" class="Symbol">(</a><a id="9853" href="Varieties.FreeAlgebras.html#9175" class="Function">Ïˆlemma0-ap</a> <a id="9864" href="Varieties.FreeAlgebras.html#9789" class="Bound">skA</a><a id="9867" class="Symbol">)</a> <a id="9869" href="Varieties.FreeAlgebras.html#8901" class="Function">homğ”½-is-epic</a><a id="9881" class="Symbol">)</a>

</pre>


#### <a id="k-models-psi">ğ’¦ models Ïˆ</a>

The goal of this subsection is to prove that `ğ’¦` models `Ïˆ ğ’¦`. In other terms, for all pairs `(p , q) âˆˆ Term X Ã— Term X` of terms, if `(p , q) âˆˆ Ïˆ ğ’¦`, then `ğ’¦ âŠ§ p â‰‹ q`.

Next we define the lift of the natural embedding from `X` into ğ”½. We denote this homomorphism by `ğ”‘ : hom (ğ‘» X) ğ”½` and define it as follows.

<pre class="Agda">

 <a id="10266" class="Keyword">open</a> <a id="10271" href="Algebras.Congruences.html#1166" class="Module">Congruence</a>

 <a id="10284" href="Varieties.FreeAlgebras.html#10284" class="Function">Xâ†ªğ”½</a> <a id="10288" class="Symbol">:</a> <a id="10290" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="10292" class="Symbol">â†’</a> <a id="10294" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10296" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="10298" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a>
 <a id="10301" href="Varieties.FreeAlgebras.html#10284" class="Function">Xâ†ªğ”½</a> <a id="10305" href="Varieties.FreeAlgebras.html#10305" class="Bound">x</a> <a id="10307" class="Symbol">=</a> <a id="10309" href="Relations.Quotients.html#4767" class="Function Operator">âŸª</a> <a id="10311" href="Terms.Operations.html#665" class="InductiveConstructor">â„Š</a> <a id="10313" href="Varieties.FreeAlgebras.html#10305" class="Bound">x</a> <a id="10315" href="Relations.Quotients.html#4767" class="Function Operator">âŸ«</a> <a id="10317" class="Comment">-- (the implicit relation here is  âŸ¨ kercon (fe ğ“¥ ğ“•) â„­ homâ„­ âŸ© )</a>

 <a id="10383" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="10385" class="Symbol">:</a> <a id="10387" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="10391" class="Symbol">(</a><a id="10392" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="10394" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="10395" class="Symbol">)</a> <a id="10397" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a>
 <a id="10400" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="10402" class="Symbol">=</a> <a id="10404" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="10413" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="10415" href="Varieties.FreeAlgebras.html#10284" class="Function">Xâ†ªğ”½</a>

</pre>

It turns out that the homomorphism so defined is equivalent to `homğ”½`.

<pre class="Agda">

 <a id="10519" href="Varieties.FreeAlgebras.html#10519" class="Function">homğ”½-is-lift-hom</a> <a id="10536" class="Symbol">:</a> <a id="10538" class="Symbol">âˆ€</a> <a id="10540" href="Varieties.FreeAlgebras.html#10540" class="Bound">p</a> <a id="10542" class="Symbol">â†’</a> <a id="10544" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10546" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="10548" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10550" href="Varieties.FreeAlgebras.html#10540" class="Bound">p</a> <a id="10552" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="10554" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10556" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="10561" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10563" href="Varieties.FreeAlgebras.html#10540" class="Bound">p</a>
 <a id="10566" href="Varieties.FreeAlgebras.html#10519" class="Function">homğ”½-is-lift-hom</a> <a id="10583" class="Symbol">(</a><a id="10584" href="Terms.Operations.html#665" class="InductiveConstructor">â„Š</a> <a id="10586" href="Varieties.FreeAlgebras.html#10586" class="Bound">x</a><a id="10587" class="Symbol">)</a> <a id="10589" class="Symbol">=</a> <a id="10591" href="MGS-MLTT.html#4221" class="InductiveConstructor">refl</a>
 <a id="10597" href="Varieties.FreeAlgebras.html#10519" class="Function">homğ”½-is-lift-hom</a> <a id="10614" class="Symbol">(</a><a id="10615" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="10620" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10622" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a><a id="10623" class="Symbol">)</a> <a id="10625" class="Symbol">=</a>
  <a id="10629" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10631" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="10633" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10635" class="Symbol">(</a><a id="10636" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="10641" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10643" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a><a id="10644" class="Symbol">)</a>              <a id="10659" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="10662" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="10664" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="10666" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="10668" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10670" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a> <a id="10672" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
  <a id="10676" class="Symbol">(</a><a id="10677" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10679" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="10681" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a><a id="10682" class="Symbol">)(Î»</a> <a id="10686" href="Varieties.FreeAlgebras.html#10686" class="Bound">i</a> <a id="10688" class="Symbol">â†’</a> <a id="10690" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10692" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="10694" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="10695" class="Symbol">(</a><a id="10696" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a> <a id="10698" href="Varieties.FreeAlgebras.html#10686" class="Bound">i</a><a id="10699" class="Symbol">))</a>      <a id="10707" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="10710" href="MGS-MLTT.html#6613" class="Function">ap</a><a id="10712" class="Symbol">(</a><a id="10713" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10715" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="10717" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a><a id="10718" class="Symbol">)(</a><a id="10720" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="10723" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="10725" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="10728" class="Symbol">(Î»</a> <a id="10731" href="Varieties.FreeAlgebras.html#10731" class="Bound">x</a> <a id="10733" class="Symbol">â†’</a> <a id="10735" href="Varieties.FreeAlgebras.html#10519" class="Function">homğ”½-is-lift-hom</a><a id="10751" class="Symbol">(</a><a id="10752" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a> <a id="10754" href="Varieties.FreeAlgebras.html#10731" class="Bound">x</a><a id="10755" class="Symbol">)))</a> <a id="10759" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
  <a id="10763" class="Symbol">(</a><a id="10764" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10766" href="Algebras.Algebras.html#3080" class="Function Operator">Ì‚</a> <a id="10768" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a><a id="10769" class="Symbol">)(Î»</a> <a id="10773" href="Varieties.FreeAlgebras.html#10773" class="Bound">i</a> <a id="10775" class="Symbol">â†’</a> <a id="10777" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10779" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="10784" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10786" class="Symbol">(</a><a id="10787" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a> <a id="10789" href="Varieties.FreeAlgebras.html#10773" class="Bound">i</a><a id="10790" class="Symbol">))</a>  <a id="10794" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="10797" class="Symbol">(</a><a id="10798" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="10800" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="10805" href="Overture.Preliminaries.html#13884" class="Function Operator">âˆ¥</a> <a id="10807" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10809" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a><a id="10810" class="Symbol">)</a><a id="10811" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a> <a id="10814" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
  <a id="10818" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10820" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="10825" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10827" class="Symbol">(</a><a id="10828" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="10833" href="Varieties.FreeAlgebras.html#10620" class="Bound">ğ‘“</a> <a id="10835" href="Varieties.FreeAlgebras.html#10622" class="Bound">ğ’•</a><a id="10836" class="Symbol">)</a>           <a id="10848" href="MGS-MLTT.html#6079" class="Function Operator">âˆ</a>

</pre>

We need a three more lemmas before we are ready to tackle our main goal.

<pre class="Agda">

 <a id="10952" href="Varieties.FreeAlgebras.html#10952" class="Function">Ïˆlemma1</a> <a id="10960" class="Symbol">:</a> <a id="10962" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="10969" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10971" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="10973" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="10975" href="Relations.Discrete.html#2587" class="Function Operator">âŠ†</a> <a id="10977" href="Varieties.FreeAlgebras.html#3353" class="Function">Ïˆ</a> <a id="10979" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>
 <a id="10982" href="Varieties.FreeAlgebras.html#10952" class="Function">Ïˆlemma1</a> <a id="10990" class="Symbol">{</a><a id="10991" href="Varieties.FreeAlgebras.html#10991" class="Bound">p</a> <a id="10993" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="10995" href="Varieties.FreeAlgebras.html#10995" class="Bound">q</a><a id="10996" class="Symbol">}</a> <a id="10998" href="Varieties.FreeAlgebras.html#10998" class="Bound">ğ”‘pq</a> <a id="11002" href="Varieties.FreeAlgebras.html#11002" class="Bound">ğ‘¨</a> <a id="11004" href="Varieties.FreeAlgebras.html#11004" class="Bound">sA</a> <a id="11007" href="Varieties.FreeAlgebras.html#11007" class="Bound">h</a> <a id="11009" class="Symbol">=</a> <a id="11011" href="Varieties.FreeAlgebras.html#11292" class="Function">Î³</a>
  <a id="11015" class="Keyword">where</a>
   <a id="11024" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a> <a id="11026" class="Symbol">:</a> <a id="11028" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="11032" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="11034" href="Varieties.FreeAlgebras.html#11002" class="Bound">ğ‘¨</a>
   <a id="11039" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a> <a id="11041" class="Symbol">=</a> <a id="11043" href="Varieties.FreeAlgebras.html#9704" class="Function">ğ”½-lift-hom</a> <a id="11054" href="Varieties.FreeAlgebras.html#11002" class="Bound">ğ‘¨</a> <a id="11056" href="Varieties.FreeAlgebras.html#11004" class="Bound">sA</a> <a id="11059" href="Varieties.FreeAlgebras.html#11007" class="Bound">h</a>

   <a id="11065" href="Varieties.FreeAlgebras.html#11065" class="Function">h&#39;</a> <a id="11068" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11070" class="Symbol">:</a> <a id="11072" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="11076" class="Symbol">(</a><a id="11077" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="11079" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="11080" class="Symbol">)</a> <a id="11082" href="Varieties.FreeAlgebras.html#11002" class="Bound">ğ‘¨</a>
   <a id="11087" href="Varieties.FreeAlgebras.html#11065" class="Function">h&#39;</a> <a id="11090" class="Symbol">=</a> <a id="11092" href="Homomorphisms.Noether.html#7186" class="Function">âˆ˜-hom</a> <a id="11098" class="Symbol">(</a><a id="11099" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="11101" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="11102" class="Symbol">)</a> <a id="11104" href="Varieties.FreeAlgebras.html#11002" class="Bound">ğ‘¨</a> <a id="11106" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="11108" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a>
   <a id="11113" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11115" class="Symbol">=</a> <a id="11117" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="11126" href="Varieties.FreeAlgebras.html#11002" class="Bound">ğ‘¨</a> <a id="11128" href="Varieties.FreeAlgebras.html#11007" class="Bound">h</a>

   <a id="11134" href="Varieties.FreeAlgebras.html#11134" class="Function">fğ”‘â‰¡Ï†</a> <a id="11139" class="Symbol">:</a> <a id="11141" class="Symbol">âˆ€</a> <a id="11143" href="Varieties.FreeAlgebras.html#11143" class="Bound">x</a> <a id="11145" class="Symbol">â†’</a> <a id="11147" class="Symbol">(</a><a id="11148" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11150" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a> <a id="11152" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11154" href="MGS-MLTT.html#3813" class="Function Operator">âˆ˜</a> <a id="11156" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11158" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="11160" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="11161" class="Symbol">)(</a><a id="11163" href="Terms.Operations.html#665" class="InductiveConstructor">â„Š</a> <a id="11165" href="Varieties.FreeAlgebras.html#11143" class="Bound">x</a><a id="11166" class="Symbol">)</a> <a id="11168" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="11170" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11172" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11174" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="11175" class="Symbol">(</a><a id="11176" href="Terms.Operations.html#665" class="InductiveConstructor">â„Š</a> <a id="11178" href="Varieties.FreeAlgebras.html#11143" class="Bound">x</a><a id="11179" class="Symbol">)</a>
   <a id="11184" href="Varieties.FreeAlgebras.html#11134" class="Function">fğ”‘â‰¡Ï†</a> <a id="11189" href="Varieties.FreeAlgebras.html#11189" class="Bound">x</a> <a id="11191" class="Symbol">=</a> <a id="11193" href="MGS-MLTT.html#4221" class="InductiveConstructor">refl</a>

   <a id="11202" href="Varieties.FreeAlgebras.html#11202" class="Function">hâ‰¡Ï†</a> <a id="11206" class="Symbol">:</a> <a id="11208" class="Symbol">âˆ€</a> <a id="11210" href="Varieties.FreeAlgebras.html#11210" class="Bound">t</a> <a id="11212" class="Symbol">â†’</a> <a id="11214" class="Symbol">(</a><a id="11215" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11217" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a> <a id="11219" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11221" href="MGS-MLTT.html#3813" class="Function Operator">âˆ˜</a> <a id="11223" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11225" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="11227" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="11228" class="Symbol">)</a> <a id="11230" href="Varieties.FreeAlgebras.html#11210" class="Bound">t</a> <a id="11232" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="11234" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11236" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11238" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11240" href="Varieties.FreeAlgebras.html#11210" class="Bound">t</a>
   <a id="11245" href="Varieties.FreeAlgebras.html#11202" class="Function">hâ‰¡Ï†</a> <a id="11249" href="Varieties.FreeAlgebras.html#11249" class="Bound">t</a> <a id="11251" class="Symbol">=</a> <a id="11253" href="Terms.Basic.html#5537" class="Function">free-unique</a> <a id="11265" class="Symbol">(</a><a id="11266" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="11269" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="11271" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="11272" class="Symbol">)</a> <a id="11274" href="Varieties.FreeAlgebras.html#11002" class="Bound">ğ‘¨</a> <a id="11276" href="Varieties.FreeAlgebras.html#11065" class="Function">h&#39;</a> <a id="11279" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11281" href="Varieties.FreeAlgebras.html#11134" class="Function">fğ”‘â‰¡Ï†</a> <a id="11286" href="Varieties.FreeAlgebras.html#11249" class="Bound">t</a>

   <a id="11292" href="Varieties.FreeAlgebras.html#11292" class="Function">Î³</a> <a id="11294" class="Symbol">:</a> <a id="11296" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11298" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11300" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11302" href="Varieties.FreeAlgebras.html#10991" class="Bound">p</a> <a id="11304" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="11306" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11308" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11310" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11312" href="Varieties.FreeAlgebras.html#10995" class="Bound">q</a>
   <a id="11317" href="Varieties.FreeAlgebras.html#11292" class="Function">Î³</a> <a id="11319" class="Symbol">=</a> <a id="11321" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11323" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11325" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11327" href="Varieties.FreeAlgebras.html#10991" class="Bound">p</a>             <a id="11341" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="11344" class="Symbol">(</a><a id="11345" href="Varieties.FreeAlgebras.html#11202" class="Function">hâ‰¡Ï†</a> <a id="11349" href="Varieties.FreeAlgebras.html#10991" class="Bound">p</a><a id="11350" class="Symbol">)</a><a id="11351" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a> <a id="11354" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="11363" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11365" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a> <a id="11367" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11369" class="Symbol">(</a> <a id="11371" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11373" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="11375" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11377" href="Varieties.FreeAlgebras.html#10991" class="Bound">p</a> <a id="11379" class="Symbol">)</a>   <a id="11383" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="11386" href="MGS-MLTT.html#6613" class="Function">ap</a> <a id="11389" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11391" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a> <a id="11393" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11395" href="Varieties.FreeAlgebras.html#10998" class="Bound">ğ”‘pq</a> <a id="11399" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="11408" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11410" href="Varieties.FreeAlgebras.html#11024" class="Function">f</a> <a id="11412" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11414" class="Symbol">(</a> <a id="11416" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11418" href="Varieties.FreeAlgebras.html#10383" class="Function">ğ”‘</a> <a id="11420" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11422" href="Varieties.FreeAlgebras.html#10995" class="Bound">q</a> <a id="11424" class="Symbol">)</a>   <a id="11428" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="11431" href="Varieties.FreeAlgebras.html#11202" class="Function">hâ‰¡Ï†</a> <a id="11435" href="Varieties.FreeAlgebras.html#10995" class="Bound">q</a> <a id="11437" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="11446" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11448" href="Varieties.FreeAlgebras.html#11068" class="Function">Ï†</a> <a id="11450" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11452" href="Varieties.FreeAlgebras.html#10995" class="Bound">q</a>             <a id="11466" href="MGS-MLTT.html#6079" class="Function Operator">âˆ</a>


 <a id="11471" href="Varieties.FreeAlgebras.html#11471" class="Function">Ïˆlemma2</a> <a id="11479" class="Symbol">:</a> <a id="11481" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="11488" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11490" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="11495" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="11497" href="Relations.Discrete.html#2587" class="Function Operator">âŠ†</a> <a id="11499" href="Varieties.FreeAlgebras.html#3353" class="Function">Ïˆ</a> <a id="11501" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>
 <a id="11504" href="Varieties.FreeAlgebras.html#11471" class="Function">Ïˆlemma2</a> <a id="11512" class="Symbol">{</a><a id="11513" href="Varieties.FreeAlgebras.html#11513" class="Bound">p</a> <a id="11515" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="11517" href="Varieties.FreeAlgebras.html#11517" class="Bound">q</a><a id="11518" class="Symbol">}</a> <a id="11520" href="Varieties.FreeAlgebras.html#11520" class="Bound">hyp</a> <a id="11524" class="Symbol">=</a> <a id="11526" href="Varieties.FreeAlgebras.html#10952" class="Function">Ïˆlemma1</a> <a id="11534" class="Symbol">{</a><a id="11535" href="Varieties.FreeAlgebras.html#11513" class="Bound">p</a> <a id="11537" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="11539" href="Varieties.FreeAlgebras.html#11517" class="Bound">q</a><a id="11540" class="Symbol">}</a> <a id="11542" href="Varieties.FreeAlgebras.html#11557" class="Function">Î³</a>
   <a id="11547" class="Keyword">where</a>
    <a id="11557" href="Varieties.FreeAlgebras.html#11557" class="Function">Î³</a> <a id="11559" class="Symbol">:</a> <a id="11561" class="Symbol">(</a><a id="11562" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="11572" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="11574" href="Varieties.FreeAlgebras.html#10284" class="Function">Xâ†ªğ”½</a><a id="11577" class="Symbol">)</a> <a id="11579" href="Varieties.FreeAlgebras.html#11513" class="Bound">p</a> <a id="11581" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="11583" class="Symbol">(</a><a id="11584" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="11594" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="11596" href="Varieties.FreeAlgebras.html#10284" class="Function">Xâ†ªğ”½</a><a id="11599" class="Symbol">)</a> <a id="11601" href="Varieties.FreeAlgebras.html#11517" class="Bound">q</a>
    <a id="11607" href="Varieties.FreeAlgebras.html#11557" class="Function">Î³</a> <a id="11609" class="Symbol">=</a> <a id="11611" class="Symbol">(</a><a id="11612" href="Varieties.FreeAlgebras.html#10519" class="Function">homğ”½-is-lift-hom</a> <a id="11629" href="Varieties.FreeAlgebras.html#11513" class="Bound">p</a><a id="11630" class="Symbol">)</a> <a id="11632" href="MGS-MLTT.html#5910" class="Function Operator">âˆ™</a> <a id="11634" href="Varieties.FreeAlgebras.html#11520" class="Bound">hyp</a> <a id="11638" href="MGS-MLTT.html#5910" class="Function Operator">âˆ™</a> <a id="11640" class="Symbol">(</a><a id="11641" href="Varieties.FreeAlgebras.html#10519" class="Function">homğ”½-is-lift-hom</a> <a id="11658" href="Varieties.FreeAlgebras.html#11517" class="Bound">q</a><a id="11659" class="Symbol">)</a><a id="11660" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a>


 <a id="11666" href="Varieties.FreeAlgebras.html#11666" class="Function">Ïˆlemma3</a> <a id="11674" class="Symbol">:</a> <a id="11676" class="Symbol">âˆ€</a> <a id="11678" href="Varieties.FreeAlgebras.html#11678" class="Bound">p</a> <a id="11680" href="Varieties.FreeAlgebras.html#11680" class="Bound">q</a> <a id="11682" class="Symbol">â†’</a> <a id="11684" class="Symbol">(</a><a id="11685" href="Varieties.FreeAlgebras.html#11678" class="Bound">p</a> <a id="11687" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="11689" href="Varieties.FreeAlgebras.html#11680" class="Bound">q</a><a id="11690" class="Symbol">)</a> <a id="11692" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="11694" href="Varieties.FreeAlgebras.html#3353" class="Function">Ïˆ</a> <a id="11696" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a> <a id="11698" class="Symbol">â†’</a> <a id="11700" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a> <a id="11702" href="Varieties.EquationalLogic.html#2723" class="Function Operator">âŠ§</a> <a id="11704" href="Varieties.FreeAlgebras.html#11678" class="Bound">p</a> <a id="11706" href="Varieties.EquationalLogic.html#2723" class="Function Operator">â‰‹</a> <a id="11708" href="Varieties.FreeAlgebras.html#11680" class="Bound">q</a>
 <a id="11711" href="Varieties.FreeAlgebras.html#11666" class="Function">Ïˆlemma3</a> <a id="11719" href="Varieties.FreeAlgebras.html#11719" class="Bound">p</a> <a id="11721" href="Varieties.FreeAlgebras.html#11721" class="Bound">q</a> <a id="11723" href="Varieties.FreeAlgebras.html#11723" class="Bound">pÏˆq</a> <a id="11727" class="Symbol">{</a><a id="11728" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a><a id="11729" class="Symbol">}</a> <a id="11731" href="Varieties.FreeAlgebras.html#11731" class="Bound">kA</a> <a id="11734" class="Symbol">=</a> <a id="11736" href="Varieties.FreeAlgebras.html#11807" class="Function">Î³</a>
  <a id="11740" class="Keyword">where</a>
   <a id="11749" href="Varieties.FreeAlgebras.html#11749" class="Function">skA</a> <a id="11753" class="Symbol">:</a> <a id="11755" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11757" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="11759" href="Varieties.Varieties.html#2859" class="Datatype">S</a> <a id="11761" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>
   <a id="11766" href="Varieties.FreeAlgebras.html#11749" class="Function">skA</a> <a id="11770" class="Symbol">=</a> <a id="11772" href="Varieties.Varieties.html#3211" class="InductiveConstructor">siso</a> <a id="11777" class="Symbol">(</a><a id="11778" href="Varieties.Varieties.html#2950" class="InductiveConstructor">sbase</a> <a id="11784" href="Varieties.FreeAlgebras.html#11731" class="Bound">kA</a><a id="11786" class="Symbol">)</a> <a id="11788" class="Symbol">(</a><a id="11789" href="Homomorphisms.Isomorphisms.html#1560" class="Function">â‰…-sym</a> <a id="11795" href="Homomorphisms.Isomorphisms.html#2754" class="Function">Lift-â‰…</a><a id="11801" class="Symbol">)</a>

   <a id="11807" href="Varieties.FreeAlgebras.html#11807" class="Function">Î³</a> <a id="11809" class="Symbol">:</a> <a id="11811" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11813" href="Terms.Operations.html#1672" class="Function Operator">âŸ¦</a> <a id="11815" href="Varieties.FreeAlgebras.html#11719" class="Bound">p</a> <a id="11817" href="Terms.Operations.html#1672" class="Function Operator">âŸ§</a> <a id="11819" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="11821" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11823" href="Terms.Operations.html#1672" class="Function Operator">âŸ¦</a> <a id="11825" href="Varieties.FreeAlgebras.html#11721" class="Bound">q</a> <a id="11827" href="Terms.Operations.html#1672" class="Function Operator">âŸ§</a>
   <a id="11832" href="Varieties.FreeAlgebras.html#11807" class="Function">Î³</a> <a id="11834" class="Symbol">=</a> <a id="11836" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="11839" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="11841" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="11843" class="Symbol">Î»</a> <a id="11845" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a> <a id="11847" class="Symbol">â†’</a> <a id="11849" class="Symbol">(</a><a id="11850" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11852" href="Terms.Operations.html#1672" class="Function Operator">âŸ¦</a> <a id="11854" href="Varieties.FreeAlgebras.html#11719" class="Bound">p</a> <a id="11856" href="Terms.Operations.html#1672" class="Function Operator">âŸ§</a><a id="11857" class="Symbol">)</a> <a id="11859" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a>       <a id="11867" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="11870" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="11887" class="Symbol">(</a><a id="11888" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="11891" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="11893" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="11894" class="Symbol">)</a> <a id="11896" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11898" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a> <a id="11900" href="Varieties.FreeAlgebras.html#11719" class="Bound">p</a> <a id="11902" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
                 <a id="11921" class="Symbol">(</a><a id="11922" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="11932" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11934" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a><a id="11935" class="Symbol">)</a> <a id="11937" href="Varieties.FreeAlgebras.html#11719" class="Bound">p</a> <a id="11939" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="11942" href="Varieties.FreeAlgebras.html#11723" class="Bound">pÏˆq</a> <a id="11946" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11948" href="Varieties.FreeAlgebras.html#11749" class="Function">skA</a> <a id="11952" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a> <a id="11954" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
                 <a id="11973" class="Symbol">(</a><a id="11974" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="11984" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="11986" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a><a id="11987" class="Symbol">)</a> <a id="11989" href="Varieties.FreeAlgebras.html#11721" class="Bound">q</a> <a id="11991" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="11994" class="Symbol">(</a><a id="11995" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="12012" class="Symbol">(</a><a id="12013" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="12016" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="12018" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="12019" class="Symbol">)</a> <a id="12021" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="12023" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a> <a id="12025" href="Varieties.FreeAlgebras.html#11721" class="Bound">q</a><a id="12026" class="Symbol">)</a><a id="12027" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a>  <a id="12031" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
                 <a id="12050" class="Symbol">(</a><a id="12051" href="Varieties.FreeAlgebras.html#11728" class="Bound">ğ‘¨</a> <a id="12053" href="Terms.Operations.html#1672" class="Function Operator">âŸ¦</a> <a id="12055" href="Varieties.FreeAlgebras.html#11721" class="Bound">q</a> <a id="12057" href="Terms.Operations.html#1672" class="Function Operator">âŸ§</a><a id="12058" class="Symbol">)</a> <a id="12060" href="Varieties.FreeAlgebras.html#11845" class="Bound">h</a>       <a id="12068" href="MGS-MLTT.html#6079" class="Function Operator">âˆ</a>

</pre>

With these results in hand, it is now trivial to prove the main theorem of this subsection.

<pre class="Agda">

 <a id="12191" href="Varieties.FreeAlgebras.html#12191" class="Function">class-models-kernel</a> <a id="12211" class="Symbol">:</a> <a id="12213" class="Symbol">âˆ€</a> <a id="12215" href="Varieties.FreeAlgebras.html#12215" class="Bound">p</a> <a id="12217" href="Varieties.FreeAlgebras.html#12217" class="Bound">q</a> <a id="12219" class="Symbol">â†’</a> <a id="12221" class="Symbol">(</a><a id="12222" href="Varieties.FreeAlgebras.html#12215" class="Bound">p</a> <a id="12224" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="12226" href="Varieties.FreeAlgebras.html#12217" class="Bound">q</a><a id="12227" class="Symbol">)</a> <a id="12229" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="12231" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12238" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12240" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="12245" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12247" class="Symbol">â†’</a> <a id="12249" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a> <a id="12251" href="Varieties.EquationalLogic.html#2723" class="Function Operator">âŠ§</a> <a id="12253" href="Varieties.FreeAlgebras.html#12215" class="Bound">p</a> <a id="12255" href="Varieties.EquationalLogic.html#2723" class="Function Operator">â‰‹</a> <a id="12257" href="Varieties.FreeAlgebras.html#12217" class="Bound">q</a>
 <a id="12260" href="Varieties.FreeAlgebras.html#12191" class="Function">class-models-kernel</a>  <a id="12281" href="Varieties.FreeAlgebras.html#12281" class="Bound">p</a> <a id="12283" href="Varieties.FreeAlgebras.html#12283" class="Bound">q</a> <a id="12285" href="Varieties.FreeAlgebras.html#12285" class="Bound">hyp</a> <a id="12289" class="Symbol">=</a> <a id="12291" href="Varieties.FreeAlgebras.html#11666" class="Function">Ïˆlemma3</a> <a id="12299" href="Varieties.FreeAlgebras.html#12281" class="Bound">p</a> <a id="12301" href="Varieties.FreeAlgebras.html#12283" class="Bound">q</a> <a id="12303" class="Symbol">(</a><a id="12304" href="Varieties.FreeAlgebras.html#11471" class="Function">Ïˆlemma2</a> <a id="12312" href="Varieties.FreeAlgebras.html#12285" class="Bound">hyp</a><a id="12315" class="Symbol">)</a>

</pre>

<pre class="Agda">

 <a id="12345" href="Varieties.FreeAlgebras.html#12345" class="Function">ğ•ğ’¦</a> <a id="12348" class="Symbol">:</a> <a id="12350" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="12355" class="Symbol">(</a><a id="12356" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="12364" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="12367" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="12368" class="Symbol">)</a> <a id="12370" class="Symbol">(</a><a id="12371" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="12374" href="Universes.html#181" class="Function Operator">âº</a><a id="12375" class="Symbol">)</a>
 <a id="12378" href="Varieties.FreeAlgebras.html#12345" class="Function">ğ•ğ’¦</a> <a id="12381" class="Symbol">=</a> <a id="12383" href="Varieties.Varieties.html#4487" class="Datatype">V</a><a id="12384" class="Symbol">{</a><a id="12385" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="12386" class="Symbol">}{</a><a id="12388" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="12390" class="Symbol">}</a> <a id="12392" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>

 <a id="12396" href="Varieties.FreeAlgebras.html#12396" class="Function">kernel-in-theory</a> <a id="12413" class="Symbol">:</a> <a id="12415" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12422" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12424" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="12429" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12431" href="Relations.Discrete.html#2587" class="Function Operator">âŠ†</a> <a id="12433" href="Varieties.EquationalLogic.html#3601" class="Function">Th</a> <a id="12436" class="Symbol">(</a><a id="12437" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="12439" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a><a id="12440" class="Symbol">)</a>
 <a id="12443" href="Varieties.FreeAlgebras.html#12396" class="Function">kernel-in-theory</a> <a id="12460" class="Symbol">{</a><a id="12461" href="Varieties.FreeAlgebras.html#12461" class="Bound">p</a> <a id="12463" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="12465" href="Varieties.FreeAlgebras.html#12465" class="Bound">q</a><a id="12466" class="Symbol">}</a> <a id="12468" href="Varieties.FreeAlgebras.html#12468" class="Bound">pKq</a> <a id="12472" class="Symbol">=</a> <a id="12474" class="Symbol">(</a><a id="12475" href="Varieties.Preservation.html#8764" class="Function">class-ids-â‡’</a> <a id="12487" class="Symbol">{</a><a id="12488" class="Argument">fe</a> <a id="12491" class="Symbol">=</a> <a id="12493" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a><a id="12495" class="Symbol">}</a> <a id="12497" href="Varieties.FreeAlgebras.html#12461" class="Bound">p</a> <a id="12499" href="Varieties.FreeAlgebras.html#12465" class="Bound">q</a> <a id="12501" class="Symbol">(</a><a id="12502" href="Varieties.FreeAlgebras.html#12191" class="Function">class-models-kernel</a> <a id="12522" href="Varieties.FreeAlgebras.html#12461" class="Bound">p</a> <a id="12524" href="Varieties.FreeAlgebras.html#12465" class="Bound">q</a> <a id="12526" href="Varieties.FreeAlgebras.html#12468" class="Bound">pKq</a><a id="12529" class="Symbol">))</a>

 <a id="12534" href="Varieties.FreeAlgebras.html#12534" class="Function Operator">_â† _</a> <a id="12538" class="Symbol">:</a> <a id="12540" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a> <a id="12542" href="Universes.html#403" class="Function Operator">Ì‡</a> <a id="12544" class="Symbol">â†’</a> <a id="12546" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="12554" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="12557" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a> <a id="12559" class="Symbol">â†’</a> <a id="12561" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="12564" href="Universes.html#403" class="Function Operator">Ì‡</a>
 <a id="12567" href="Varieties.FreeAlgebras.html#12567" class="Bound">X</a> <a id="12569" href="Varieties.FreeAlgebras.html#12534" class="Function Operator">â† </a> <a id="12571" href="Varieties.FreeAlgebras.html#12571" class="Bound">ğ‘¨</a> <a id="12573" class="Symbol">=</a> <a id="12575" href="MGS-MLTT.html#3074" class="Function">Î£</a> <a id="12577" href="Varieties.FreeAlgebras.html#12577" class="Bound">h</a> <a id="12579" href="MGS-MLTT.html#3074" class="Function">ê‰</a> <a id="12581" class="Symbol">(</a><a id="12582" href="Varieties.FreeAlgebras.html#12567" class="Bound">X</a> <a id="12584" class="Symbol">â†’</a> <a id="12586" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12588" href="Varieties.FreeAlgebras.html#12571" class="Bound">ğ‘¨</a> <a id="12590" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="12591" class="Symbol">)</a> <a id="12593" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="12595" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="12600" href="Varieties.FreeAlgebras.html#12577" class="Bound">h</a>

 <a id="12604" href="Varieties.FreeAlgebras.html#12604" class="Function">ğ”½-ModTh-epi</a> <a id="12616" class="Symbol">:</a> <a id="12618" class="Symbol">(</a><a id="12619" href="Varieties.FreeAlgebras.html#12619" class="Bound">ğ‘¨</a> <a id="12621" class="Symbol">:</a> <a id="12623" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="12631" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="12634" href="Varieties.FreeAlgebras.html#1001" class="Bound">ğ‘†</a><a id="12635" class="Symbol">)</a> <a id="12637" class="Symbol">â†’</a> <a id="12639" class="Symbol">(</a><a id="12640" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="12642" href="Varieties.FreeAlgebras.html#12534" class="Function Operator">â† </a> <a id="12644" href="Varieties.FreeAlgebras.html#12619" class="Bound">ğ‘¨</a><a id="12645" class="Symbol">)</a> <a id="12647" class="Symbol">â†’</a> <a id="12649" href="Varieties.FreeAlgebras.html#12619" class="Bound">ğ‘¨</a> <a id="12651" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="12653" href="Varieties.EquationalLogic.html#3889" class="Function">Mod</a> <a id="12657" class="Symbol">(</a><a id="12658" href="Varieties.EquationalLogic.html#3601" class="Function">Th</a> <a id="12661" href="Varieties.FreeAlgebras.html#12345" class="Function">ğ•ğ’¦</a><a id="12663" class="Symbol">)</a> <a id="12665" class="Symbol">â†’</a> <a id="12667" href="Homomorphisms.Basic.html#4062" class="Function">epi</a> <a id="12671" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="12673" href="Varieties.FreeAlgebras.html#12619" class="Bound">ğ‘¨</a>
 <a id="12676" href="Varieties.FreeAlgebras.html#12604" class="Function">ğ”½-ModTh-epi</a> <a id="12688" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="12690" class="Symbol">(</a><a id="12691" href="Varieties.FreeAlgebras.html#12691" class="Bound">Î·</a> <a id="12693" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="12695" href="Varieties.FreeAlgebras.html#12695" class="Bound">Î·E</a><a id="12697" class="Symbol">)</a> <a id="12699" href="Varieties.FreeAlgebras.html#12699" class="Bound">AinMTV</a> <a id="12706" class="Symbol">=</a> <a id="12708" href="Varieties.FreeAlgebras.html#13268" class="Function">Î³</a>
  <a id="12712" class="Keyword">where</a>
  <a id="12720" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="12722" class="Symbol">:</a> <a id="12724" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="12728" class="Symbol">(</a><a id="12729" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="12731" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="12732" class="Symbol">)</a> <a id="12734" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a>
  <a id="12738" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="12740" class="Symbol">=</a> <a id="12742" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="12751" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="12753" href="Varieties.FreeAlgebras.html#12691" class="Bound">Î·</a>

  <a id="12758" href="Varieties.FreeAlgebras.html#12758" class="Function">Ï†E</a> <a id="12761" class="Symbol">:</a> <a id="12763" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="12768" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12770" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="12772" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a>
  <a id="12776" href="Varieties.FreeAlgebras.html#12758" class="Function">Ï†E</a> <a id="12779" class="Symbol">=</a> <a id="12781" href="Terms.Basic.html#6934" class="Function">lift-of-epi-is-epi</a> <a id="12800" href="Varieties.FreeAlgebras.html#12695" class="Bound">Î·E</a>

  <a id="12806" href="Varieties.FreeAlgebras.html#12806" class="Function">pqlem2</a> <a id="12813" class="Symbol">:</a> <a id="12815" class="Symbol">âˆ€</a> <a id="12817" href="Varieties.FreeAlgebras.html#12817" class="Bound">p</a> <a id="12819" href="Varieties.FreeAlgebras.html#12819" class="Bound">q</a> <a id="12821" class="Symbol">â†’</a> <a id="12823" class="Symbol">(</a><a id="12824" href="Varieties.FreeAlgebras.html#12817" class="Bound">p</a> <a id="12826" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="12828" href="Varieties.FreeAlgebras.html#12819" class="Bound">q</a><a id="12829" class="Symbol">)</a> <a id="12831" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="12833" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12840" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12842" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="12847" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12849" class="Symbol">â†’</a> <a id="12851" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="12853" href="Varieties.EquationalLogic.html#2642" class="Function Operator">âŠ§</a> <a id="12855" href="Varieties.FreeAlgebras.html#12817" class="Bound">p</a> <a id="12857" href="Varieties.EquationalLogic.html#2642" class="Function Operator">â‰ˆ</a> <a id="12859" href="Varieties.FreeAlgebras.html#12819" class="Bound">q</a>
  <a id="12863" href="Varieties.FreeAlgebras.html#12806" class="Function">pqlem2</a> <a id="12870" href="Varieties.FreeAlgebras.html#12870" class="Bound">p</a> <a id="12872" href="Varieties.FreeAlgebras.html#12872" class="Bound">q</a> <a id="12874" href="Varieties.FreeAlgebras.html#12874" class="Bound">hyp</a> <a id="12878" class="Symbol">=</a> <a id="12880" href="Varieties.FreeAlgebras.html#12699" class="Bound">AinMTV</a> <a id="12887" href="Varieties.FreeAlgebras.html#12870" class="Bound">p</a> <a id="12889" href="Varieties.FreeAlgebras.html#12872" class="Bound">q</a> <a id="12891" class="Symbol">(</a><a id="12892" href="Varieties.FreeAlgebras.html#12396" class="Function">kernel-in-theory</a> <a id="12909" href="Varieties.FreeAlgebras.html#12874" class="Bound">hyp</a><a id="12912" class="Symbol">)</a>

  <a id="12917" href="Varieties.FreeAlgebras.html#12917" class="Function">kerincl</a> <a id="12925" class="Symbol">:</a> <a id="12927" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12934" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12936" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="12941" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12943" href="Relations.Discrete.html#2587" class="Function Operator">âŠ†</a> <a id="12945" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12952" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="12954" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="12956" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a>
  <a id="12960" href="Varieties.FreeAlgebras.html#12917" class="Function">kerincl</a> <a id="12968" class="Symbol">{</a><a id="12969" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a> <a id="12971" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="12973" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a><a id="12974" class="Symbol">}</a> <a id="12976" href="Varieties.FreeAlgebras.html#12976" class="Bound">x</a> <a id="12978" class="Symbol">=</a> <a id="12980" href="Varieties.FreeAlgebras.html#13035" class="Function">Î³</a>
   <a id="12985" class="Keyword">where</a>
   <a id="12994" href="Varieties.FreeAlgebras.html#12994" class="Function">Apq</a> <a id="12998" class="Symbol">:</a> <a id="13000" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="13002" href="Varieties.EquationalLogic.html#2642" class="Function Operator">âŠ§</a> <a id="13004" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a> <a id="13006" href="Varieties.EquationalLogic.html#2642" class="Function Operator">â‰ˆ</a> <a id="13008" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a>
   <a id="13013" href="Varieties.FreeAlgebras.html#12994" class="Function">Apq</a> <a id="13017" class="Symbol">=</a> <a id="13019" href="Varieties.FreeAlgebras.html#12806" class="Function">pqlem2</a> <a id="13026" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a> <a id="13028" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a> <a id="13030" href="Varieties.FreeAlgebras.html#12976" class="Bound">x</a>
   <a id="13035" href="Varieties.FreeAlgebras.html#13035" class="Function">Î³</a> <a id="13037" class="Symbol">:</a> <a id="13039" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13041" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="13043" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13045" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a> <a id="13047" href="MGS-MLTT.html#4207" class="Datatype Operator">â‰¡</a> <a id="13049" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13051" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="13053" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13055" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a>
   <a id="13060" href="Varieties.FreeAlgebras.html#13035" class="Function">Î³</a> <a id="13062" class="Symbol">=</a> <a id="13064" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13066" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="13068" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13070" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a>          <a id="13081" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="13084" class="Symbol">(</a><a id="13085" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="13102" class="Symbol">(</a><a id="13103" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="13106" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="13108" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="13110" class="Symbol">)</a> <a id="13112" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="13114" href="Varieties.FreeAlgebras.html#12691" class="Bound">Î·</a> <a id="13116" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a><a id="13117" class="Symbol">)</a><a id="13118" href="MGS-MLTT.html#6125" class="Function Operator">â»Â¹</a> <a id="13121" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="13130" class="Symbol">(</a><a id="13131" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="13133" href="Terms.Operations.html#1672" class="Function Operator">âŸ¦</a> <a id="13135" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a> <a id="13137" href="Terms.Operations.html#1672" class="Function Operator">âŸ§</a><a id="13138" class="Symbol">)</a> <a id="13140" href="Varieties.FreeAlgebras.html#12691" class="Bound">Î·</a>      <a id="13147" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="13150" href="Overture.Extensionality.html#5468" class="Function">happly</a> <a id="13157" class="Symbol">(</a><a id="13158" href="Varieties.FreeAlgebras.html#12806" class="Function">pqlem2</a> <a id="13165" href="Varieties.FreeAlgebras.html#12969" class="Bound">p</a> <a id="13167" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a> <a id="13169" href="Varieties.FreeAlgebras.html#12976" class="Bound">x</a><a id="13170" class="Symbol">)</a> <a id="13172" href="Varieties.FreeAlgebras.html#12691" class="Bound">Î·</a>  <a id="13175" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="13184" class="Symbol">(</a><a id="13185" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="13187" href="Terms.Operations.html#1672" class="Function Operator">âŸ¦</a> <a id="13189" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a> <a id="13191" href="Terms.Operations.html#1672" class="Function Operator">âŸ§</a><a id="13192" class="Symbol">)</a> <a id="13194" href="Varieties.FreeAlgebras.html#12691" class="Bound">Î·</a>      <a id="13201" href="MGS-MLTT.html#5997" class="Function Operator">â‰¡âŸ¨</a> <a id="13204" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="13221" class="Symbol">(</a><a id="13222" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="13225" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="13227" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="13229" class="Symbol">)</a> <a id="13231" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="13233" href="Varieties.FreeAlgebras.html#12691" class="Bound">Î·</a> <a id="13235" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a> <a id="13237" href="MGS-MLTT.html#5997" class="Function Operator">âŸ©</a>
       <a id="13246" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13248" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="13250" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13252" href="Varieties.FreeAlgebras.html#12973" class="Bound">q</a>          <a id="13263" href="MGS-MLTT.html#6079" class="Function Operator">âˆ</a>

  <a id="13268" href="Varieties.FreeAlgebras.html#13268" class="Function">Î³</a> <a id="13270" class="Symbol">:</a> <a id="13272" href="Homomorphisms.Basic.html#4062" class="Function">epi</a> <a id="13276" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="13278" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a>
  <a id="13282" href="Varieties.FreeAlgebras.html#13268" class="Function">Î³</a> <a id="13284" class="Symbol">=</a> <a id="13286" href="Overture.Preliminaries.html#13836" class="Function">fst</a> <a id="13290" class="Symbol">(</a><a id="13291" href="Homomorphisms.Noether.html#11780" class="Function">HomFactorEpi</a> <a id="13304" class="Symbol">(</a><a id="13305" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="13308" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="13310" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="13312" class="Symbol">)(</a><a id="13314" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="13317" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="13320" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="13322" class="Symbol">)(</a><a id="13324" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="13327" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="13330" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="13332" class="Symbol">)</a> <a id="13334" href="Varieties.FreeAlgebras.html#12688" class="Bound">ğ‘¨</a> <a id="13336" href="Varieties.FreeAlgebras.html#12720" class="Function">Ï†</a> <a id="13338" href="Varieties.FreeAlgebras.html#8854" class="Function">homğ”½</a> <a id="13343" href="Varieties.FreeAlgebras.html#12917" class="Function">kerincl</a> <a id="13351" href="Varieties.FreeAlgebras.html#8901" class="Function">homğ”½-is-epic</a> <a id="13364" href="Varieties.FreeAlgebras.html#12758" class="Function">Ï†E</a><a id="13366" class="Symbol">)</a>

</pre>





#### <a id="the-homomorphic-images-of-F">The homomorphic images of ğ”½</a>

Finally we come to one of the main theorems of this module; it asserts that every algebra in `Mod X (Th ğ•ğ’¦)` is a homomorphic image of ğ”½.  We prove this below as the function (or proof object) `ğ”½-ModTh-epi`.  Before that, we prove two auxiliary lemmas.

<pre class="Agda">

 <a id="13728" class="Keyword">module</a> <a id="13735" href="Varieties.FreeAlgebras.html#13735" class="Module">_</a> <a id="13737" class="Comment">-- prop extensionality assumption:</a>
          <a id="13782" class="Symbol">(</a><a id="13783" href="Varieties.FreeAlgebras.html#13783" class="Bound">pe</a> <a id="13786" class="Symbol">:</a> <a id="13788" href="Relations.Truncation.html#7530" class="Function">prop-ext</a> <a id="13797" class="Symbol">(</a><a id="13798" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="13801" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="13802" class="Symbol">)(</a><a id="13804" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="13807" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="13808" class="Symbol">))</a>

          <a id="13822" class="Comment">-- truncation assumptions:</a>
          <a id="13859" class="Symbol">(</a><a id="13860" href="Varieties.FreeAlgebras.html#13860" class="Bound">UIPcod</a> <a id="13867" class="Symbol">:</a> <a id="13869" href="MGS-Basic-UF.html#1929" class="Function">is-set</a> <a id="13876" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a> <a id="13878" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="13880" href="Overture.Preliminaries.html#13832" class="Function Operator">âˆ£</a><a id="13881" class="Symbol">)</a>
          <a id="13893" class="Symbol">(</a><a id="13894" href="Varieties.FreeAlgebras.html#13894" class="Bound">UMPker</a> <a id="13901" class="Symbol">:</a> <a id="13903" href="MGS-Quotient.html#398" class="Function">is-subsingleton-valued</a> <a id="13926" href="Algebras.Congruences.html#1259" class="Field Operator">âŸ¨</a> <a id="13928" href="Homomorphisms.Basic.html#7083" class="Function">kercon</a> <a id="13935" class="Symbol">(</a><a id="13936" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="13939" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="13941" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="13942" class="Symbol">)</a> <a id="13944" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="13946" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="13951" href="Algebras.Congruences.html#1259" class="Field Operator">âŸ©</a><a id="13952" class="Symbol">)</a>
          <a id="13964" class="Symbol">(</a><a id="13965" href="Varieties.FreeAlgebras.html#13965" class="Bound">UMPblk</a> <a id="13972" class="Symbol">:</a> <a id="13974" class="Symbol">âˆ€</a> <a id="13976" href="Varieties.FreeAlgebras.html#13976" class="Bound">C</a> <a id="13978" class="Symbol">â†’</a> <a id="13980" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="13996" class="Symbol">(</a><a id="13997" href="Relations.Quotients.html#4049" class="Function">IsBlock</a> <a id="14005" href="Varieties.FreeAlgebras.html#13976" class="Bound">C</a><a id="14006" class="Symbol">))</a>

  <a id="14012" class="Keyword">where</a>

  <a id="14021" href="Varieties.FreeAlgebras.html#14021" class="Function">ğ”½â‰¤â„­|Set</a> <a id="14029" class="Symbol">:</a> <a id="14031" class="Symbol">(((</a><a id="14034" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="14036" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="14037" class="Symbol">)</a> <a id="14039" href="Homomorphisms.Basic.html#7552" class="Function Operator">[</a> <a id="14041" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="14043" href="Homomorphisms.Basic.html#7552" class="Function Operator">]/ker</a> <a id="14049" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a><a id="14053" class="Symbol">){</a><a id="14055" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="14058" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="14060" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="14061" class="Symbol">})</a> <a id="14064" href="Subalgebras.Subalgebras.html#3778" class="Function Operator">â‰¤</a> <a id="14066" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a>
  <a id="14070" href="Varieties.FreeAlgebras.html#14021" class="Function">ğ”½â‰¤â„­|Set</a> <a id="14078" class="Symbol">=</a> <a id="14080" href="Subalgebras.Subalgebras.html#2554" class="Function">FirstHomCorollary|Set</a> <a id="14102" class="Symbol">(</a><a id="14103" href="Terms.Basic.html#3732" class="Function">ğ‘»</a> <a id="14105" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="14106" class="Symbol">)</a> <a id="14108" href="Varieties.FreeAlgebras.html#7936" class="Function">â„­</a> <a id="14110" href="Varieties.FreeAlgebras.html#8201" class="Function">homâ„­</a> <a id="14115" href="Varieties.FreeAlgebras.html#13783" class="Bound">pe</a> <a id="14118" class="Symbol">(</a><a id="14119" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="14122" href="Varieties.FreeAlgebras.html#1017" class="Bound">ğ“¥</a> <a id="14124" class="Symbol">(</a><a id="14125" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14128" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="14129" class="Symbol">))</a> <a id="14132" href="Varieties.FreeAlgebras.html#13860" class="Bound">UIPcod</a> <a id="14139" href="Varieties.FreeAlgebras.html#13894" class="Bound">UMPker</a> <a id="14146" href="Varieties.FreeAlgebras.html#13965" class="Bound">UMPblk</a>

</pre>

The last piece we need to prove that every model of `Th ğ•ğ’¦` is a homomorphic image of `ğ”½` is a crucial assumption that is taken for granted throughout informal universal algebra---namely, that our collection `X` of variable symbols is arbitrarily large and that we have an *environment* which interprets the variable symbols in every algebra under consideration. In other terms, an environment provides, for every algebra `ğ‘¨`, a surjective mapping `Î· : X â†’ âˆ£ ğ‘¨ âˆ£` from `X` onto the domain of `ğ‘¨`.

We do *not* assert that for an arbitrary type `X` such surjective maps exist.  Indeed, our `X` must is quite special to have this property.  Later, we will construct such an `X`, but for now we simply postulate its existence. Note that this assumption that an environment exists is only required in the proof of the theorem `ğ”½-ModTh-epi`.

<pre class="Agda">


</pre>

#### <a id="F-in-VK">ğ”½ âˆˆ V(ğ’¦)</a>

With this result in hand, along with what we proved earlier---namely, `PS(ğ’¦) âŠ† SP(ğ’¦) âŠ† HSP(ğ’¦) â‰¡ V ğ’¦`---it is not hard to show that `ğ”½` belongs to `V ğ’¦`.

<pre class="Agda">

  <a id="15236" class="Keyword">open</a> <a id="15241" href="Varieties.Varieties.html#16236" class="Module">Vlift</a> <a id="15247" class="Symbol">{</a><a id="15248" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15249" class="Symbol">}{</a><a id="15251" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="15254" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="15256" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15257" class="Symbol">}{</a><a id="15259" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="15262" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a> <a id="15265" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="15267" class="Symbol">}{</a><a id="15269" href="Varieties.FreeAlgebras.html#7552" class="Bound">fe</a> <a id="15272" href="Varieties.Preservation.html#756" class="Function">ğ“•</a> <a id="15274" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="15275" class="Symbol">}{</a><a id="15277" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a><a id="15278" class="Symbol">}</a>

  <a id="15283" href="Varieties.FreeAlgebras.html#15283" class="Function">ğ”½âˆˆSP|Set</a> <a id="15292" class="Symbol">:</a> <a id="15294" href="MGS-FunExt-from-Univalence.html#2235" class="Function">hfunext</a> <a id="15302" class="Symbol">(</a><a id="15303" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="15306" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15307" class="Symbol">)(</a><a id="15309" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="15312" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15313" class="Symbol">)</a> <a id="15315" class="Symbol">â†’</a> <a id="15317" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="15319" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="15321" class="Symbol">(</a><a id="15322" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="15323" class="Symbol">{</a><a id="15324" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="15325" class="Symbol">}{</a><a id="15327" href="Varieties.Preservation.html#758" class="Function">ğ“•âº</a><a id="15329" class="Symbol">}</a> <a id="15331" class="Symbol">(</a><a id="15332" href="Varieties.Varieties.html#3548" class="Datatype">P</a><a id="15333" class="Symbol">{</a><a id="15334" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15335" class="Symbol">}{</a><a id="15337" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="15338" class="Symbol">}</a> <a id="15340" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a><a id="15341" class="Symbol">))</a>
  <a id="15346" href="Varieties.FreeAlgebras.html#15283" class="Function">ğ”½âˆˆSP|Set</a> <a id="15355" href="Varieties.FreeAlgebras.html#15355" class="Bound">hfe</a> <a id="15359" class="Symbol">=</a> <a id="15361" href="Varieties.Varieties.html#3070" class="InductiveConstructor">ssub</a> <a id="15366" class="Symbol">(</a><a id="15367" href="Varieties.Varieties.html#21859" class="Function">class-prod-s-âˆˆ-sp</a> <a id="15385" href="Varieties.FreeAlgebras.html#15355" class="Bound">hfe</a><a id="15388" class="Symbol">)</a> <a id="15390" href="Varieties.FreeAlgebras.html#14021" class="Function">ğ”½â‰¤â„­|Set</a>

  <a id="15401" href="Varieties.FreeAlgebras.html#15401" class="Function">ğ”½âˆˆğ•|Set</a> <a id="15409" class="Symbol">:</a> <a id="15411" href="MGS-FunExt-from-Univalence.html#2235" class="Function">hfunext</a> <a id="15419" class="Symbol">(</a><a id="15420" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="15423" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15424" class="Symbol">)(</a><a id="15426" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="15429" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15430" class="Symbol">)</a> <a id="15432" class="Symbol">â†’</a> <a id="15434" href="Varieties.FreeAlgebras.html#8749" class="Function">ğ”½</a> <a id="15436" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="15438" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="15440" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>
  <a id="15444" href="Varieties.FreeAlgebras.html#15401" class="Function">ğ”½âˆˆğ•|Set</a> <a id="15452" href="Varieties.FreeAlgebras.html#15452" class="Bound">hfe</a> <a id="15456" class="Symbol">=</a> <a id="15458" href="Varieties.Varieties.html#18217" class="Function">SPâŠ†V&#39;</a> <a id="15464" class="Symbol">(</a><a id="15465" href="Varieties.FreeAlgebras.html#15283" class="Function">ğ”½âˆˆSP|Set</a> <a id="15474" href="Varieties.FreeAlgebras.html#15452" class="Bound">hfe</a><a id="15477" class="Symbol">)</a>

</pre>

#### <a id="the-hsp-theorem"> The HSP Theorem</a>

Now that we have all of the necessary ingredients, it is all but trivial to combine them to prove Birkhoff's HSP theorem. (Note that since the proof enlists the help of the `ğ”½-ModTh-epi` theorem, we must assume an environment exists, which is manifested in the premise `âˆ€ ğ‘¨ â†’ X â†  ğ‘¨`.

<pre class="Agda">

  <a id="15844" href="Varieties.FreeAlgebras.html#15844" class="Function">Birkhoff|Set</a> <a id="15857" class="Symbol">:</a> <a id="15859" href="MGS-FunExt-from-Univalence.html#2235" class="Function">hfunext</a> <a id="15867" class="Symbol">(</a><a id="15868" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="15871" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15872" class="Symbol">)(</a><a id="15874" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="15877" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="15878" class="Symbol">)</a> <a id="15880" class="Symbol">â†’</a> <a id="15882" class="Symbol">(âˆ€</a> <a id="15885" href="Varieties.FreeAlgebras.html#15885" class="Bound">ğ‘¨</a> <a id="15887" class="Symbol">â†’</a> <a id="15889" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="15891" href="Varieties.FreeAlgebras.html#12534" class="Function Operator">â† </a> <a id="15893" href="Varieties.FreeAlgebras.html#15885" class="Bound">ğ‘¨</a><a id="15894" class="Symbol">)</a> <a id="15896" class="Symbol">â†’</a> <a id="15898" href="Varieties.EquationalLogic.html#3889" class="Function">Mod</a> <a id="15902" class="Symbol">(</a><a id="15903" href="Varieties.EquationalLogic.html#3601" class="Function">Th</a> <a id="15906" class="Symbol">(</a><a id="15907" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="15909" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a><a id="15910" class="Symbol">))</a> <a id="15913" href="Relations.Discrete.html#2587" class="Function Operator">âŠ†</a> <a id="15915" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="15917" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a>

  <a id="15922" href="Varieties.FreeAlgebras.html#15844" class="Function">Birkhoff|Set</a> <a id="15935" href="Varieties.FreeAlgebras.html#15935" class="Bound">hfe</a> <a id="15939" href="Varieties.FreeAlgebras.html#15939" class="Bound">ğ•</a> <a id="15941" class="Symbol">{</a><a id="15942" href="Varieties.FreeAlgebras.html#15942" class="Bound">ğ‘¨</a><a id="15943" class="Symbol">}</a> <a id="15945" href="Varieties.FreeAlgebras.html#15945" class="Bound">Î±</a> <a id="15947" class="Symbol">=</a> <a id="15949" href="Varieties.FreeAlgebras.html#15963" class="Function">Î³</a>
   <a id="15954" class="Keyword">where</a>
   <a id="15963" href="Varieties.FreeAlgebras.html#15963" class="Function">Î³</a> <a id="15965" class="Symbol">:</a> <a id="15967" href="Varieties.FreeAlgebras.html#15942" class="Bound">ğ‘¨</a> <a id="15969" href="Relations.Discrete.html#2402" class="Function Operator">âˆˆ</a> <a id="15971" class="Symbol">(</a><a id="15972" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="15974" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a><a id="15975" class="Symbol">)</a>
   <a id="15980" href="Varieties.FreeAlgebras.html#15963" class="Function">Î³</a> <a id="15982" class="Symbol">=</a> <a id="15984" href="Varieties.Varieties.html#4771" class="InductiveConstructor">vhimg</a> <a id="15990" class="Symbol">(</a><a id="15991" href="Varieties.FreeAlgebras.html#15401" class="Function">ğ”½âˆˆğ•|Set</a> <a id="15999" href="Varieties.FreeAlgebras.html#15935" class="Bound">hfe</a><a id="16002" class="Symbol">)</a> <a id="16004" class="Symbol">((</a><a id="16006" href="Varieties.FreeAlgebras.html#15942" class="Bound">ğ‘¨</a> <a id="16008" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="16010" href="Varieties.FreeAlgebras.html#12604" class="Function">ğ”½-ModTh-epi</a> <a id="16022" href="Varieties.FreeAlgebras.html#15942" class="Bound">ğ‘¨</a> <a id="16024" class="Symbol">(</a><a id="16025" href="Varieties.FreeAlgebras.html#15939" class="Bound">ğ•</a> <a id="16027" href="Varieties.FreeAlgebras.html#15942" class="Bound">ğ‘¨</a><a id="16028" class="Symbol">)</a> <a id="16030" href="Varieties.FreeAlgebras.html#15945" class="Bound">Î±</a> <a id="16032" class="Symbol">)</a> <a id="16034" href="MGS-MLTT.html#2929" class="InductiveConstructor Operator">,</a> <a id="16036" href="Homomorphisms.Isomorphisms.html#1451" class="Function">â‰…-refl</a><a id="16042" class="Symbol">)</a>

</pre>

The converse inclusion, `V ğ’¦ âŠ† Mod X (Th (V ğ’¦))`, is a simple consequence of the fact that `Mod Th` is a closure operator. Nonetheless, completeness demands that we formalize this inclusion as well, however trivial the proof.

<pre class="Agda">

  <a id="16300" href="Varieties.FreeAlgebras.html#16300" class="Function">Birkhoff-converse</a> <a id="16318" class="Symbol">:</a> <a id="16320" href="Varieties.Varieties.html#4487" class="Datatype">V</a><a id="16321" class="Symbol">{</a><a id="16322" href="Varieties.FreeAlgebras.html#1021" class="Bound">ğ“¤</a><a id="16323" class="Symbol">}{</a><a id="16325" href="Varieties.Preservation.html#756" class="Function">ğ“•</a><a id="16326" class="Symbol">}</a> <a id="16328" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a> <a id="16330" href="Relations.Discrete.html#2587" class="Function Operator">âŠ†</a> <a id="16332" href="Varieties.EquationalLogic.html#3889" class="Function">Mod</a> <a id="16336" class="Symbol">(</a><a id="16337" href="Varieties.EquationalLogic.html#3601" class="Function">Th</a> <a id="16340" class="Symbol">(</a><a id="16341" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="16343" href="Varieties.FreeAlgebras.html#7567" class="Bound">ğ’¦</a><a id="16344" class="Symbol">))</a>
  <a id="16349" href="Varieties.FreeAlgebras.html#16300" class="Function">Birkhoff-converse</a> <a id="16367" href="Varieties.FreeAlgebras.html#16367" class="Bound">Î±</a> <a id="16369" href="Varieties.FreeAlgebras.html#16369" class="Bound">p</a> <a id="16371" href="Varieties.FreeAlgebras.html#16371" class="Bound">q</a> <a id="16373" href="Varieties.FreeAlgebras.html#16373" class="Bound">pThq</a> <a id="16378" class="Symbol">=</a> <a id="16380" href="Varieties.FreeAlgebras.html#16373" class="Bound">pThq</a> <a id="16385" href="Varieties.FreeAlgebras.html#16367" class="Bound">Î±</a>

</pre>

We have thus proved that every variety is an equational class.  Readers familiar with the classical formulation of the Birkhoff HSP theorem, as an "if and only if" result, might worry that we haven't completed the proof.  But recall that in the [Varieties.Preservation][] module we proved the following identity preservation lemmas:

* [(H-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#964) ğ’¦ âŠ§ p â‰‹ q â†’ H ğ’¦ âŠ§ p â‰‹ q
* [(S-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#2592) ğ’¦ âŠ§ p â‰‹ q â†’ S ğ’¦ âŠ§ p â‰‹ q
* [(P-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#4111) ğ’¦ âŠ§ p â‰‹ q â†’ P ğ’¦ âŠ§ p â‰‹ q

From these it follows that every equational class is a variety. Thus, our formal proof of Birkhoff's theorem is complete.

----------------------------


<sup>1</sup><span class="footnote" id="fn1"> Since `X` is not a subset of `ğ”‰`, technically it doesn't make sense to say "`X` generates `ğ”‰`." But as long as ğ’¦ contains a nontrivial algebra, we will have `Ïˆ(ğ’¦, ğ‘» ğ‘‹) âˆ© XÂ² â‰  âˆ…`, and we can identify `X` with `X / Ïˆ(ğ’¦, ğ‘» X)` which does belong to ğ”‰.</span>

<br>
<br>


[â† Varieties.Preservation](Varieties.Preservation.html)
<span style="float:right;">[Varieties â†‘](Varieties.html)</span>

{% include UALib.Links.md %}













<!--

<sup>2</sup><span class="footnote" id="fn2"> In the previous version of the [UALib][] this section was part of a module called HSPTheorem module.</span>

<sup>3</sup><span class="footnote" id="fn3"> In earlier versions of the [Agda UALib][], the free algebra ğ”‰ developed above played the role of the algebra ğ”½ with properties 1 and 2.  However, we found a more direct path to the proof using the algebra `ğ”½ := (ğ‘» X) [ â„­ ]/ker homâ„­`.</span>

<sup>4</sup><span class="footnote" id="fn4"> It might be an instructive exercise to prove that `ğ”½` is, in fact, isomorphic to the algebra `ğ”‰` that we defined earlier.</span>





Finally, we are ready to define the type representing the relatively free algebra in Agda.  We denote this type by ğ”‰ and define it as the quotient `ğ‘» X â•± (ÏˆCon ğ’¦)`.

module _ {ğ’¦ : Pred (Algebra ğ“¤ ğ‘†) (ov ğ“¤)}{fe : dfunext ğ“¥ ğ“¤} where

 ğ”‰ : Algebra ğ“•âº ğ‘†
 ğ”‰ =  ğ‘» X â•± (ÏˆCon ğ’¦ {fe})

The domain of `ğ”‰` is `âˆ£ ğ”‰ âˆ£ = âˆ£ ğ‘» X âˆ£ / âŸ¨ ÏˆCon ğ’¦ âŸ©`, which is equal to

`Î£ C ê‰ _ ,  Î£ p ê‰ âˆ£ ğ‘» X âˆ£ ,  C â‰¡ ( [ p ] âŸ¨ ÏˆCon ğ’¦ âŸ© )`.

This Sigma type denotes the set `{ C : âˆƒ p âˆˆ âˆ£ ğ‘» X âˆ£ , C â‰¡ [ p ] âŸ¨ ÏˆCon ğ’¦ âŸ© }` of `âŸ¨ ÏˆCon ğ’¦ âŸ©`-classses of terms, as desired.

We left the type of `C` implicit (using the underscore symbol) for readability.  Since `C` denotes a particular class of the congruence relation `ÏˆCon ğ’¦` of `ğ‘» X`, and since congruence classes are subsets of the domain of the underlying algebra, the type of `C` is a predicate on the type of terms; specifically, `C : Pred âˆ£ ğ‘» X âˆ£ (ğ“§ âŠ” ğ“•)`.
-->

