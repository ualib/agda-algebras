%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Product algebra type}\label{ssec:product-algebra-type}
%% This section describes some parts of the \ualibAlgProducts module of the \agdaualib.
Suppose we are given a type \ab I \as : \ab ğ“˜ (of ``indices'') and an indexed family \ab ğ’œ \as : \ab I \as â†’ \af{Algebra} \ab ğ“¤ \ab ğ‘† of \ab ğ‘†-algebras. Then we define the \emph{product algebra}
\AgdaFunction{â¨…} \AgdaBound{ğ’œ}
in the following natural way.%
%
\footnote{To distinguish the product algebra from the standard product type available in the \agdastdlib, instead of \af âˆ (\texttt{\textbackslash prod}) or \af Î  (\texttt{\textbackslash Pi}), we use the symbol \AgdaFunction{â¨…}, which is typed in \agdamode as \texttt{\textbackslash Glb}.}%
%
\ccpad
\begin{code}%
\>[1]\AgdaFunction{â¨…}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ğ“˜}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Universe}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ğ“˜}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ì‡}}\AgdaSpace{}%
\AgdaSymbol{\}(}\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{I}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ“˜}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ğ‘†}\<%
\\
%
\>[1]\AgdaFunction{â¨…}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ğ“˜}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[1][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{((}\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{Î»(}\AgdaBound{f}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)(}\AgdaBound{ğ’‚}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ¥}}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ¥}}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{j}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaBound{j}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)(}\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{f}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ì‚}}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaBound{i}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{Î»\{}\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaBound{ğ’‚}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{i}\AgdaSymbol{\}}\<%
\end{code}
\ccpad
Here, the domain is the dependent function type
\af âˆ \af âˆ£ \ab ğ’œ \af âˆ£ := \AgdaSymbol{(}\AgdaBound{i}\AgdaSpace{}\AgdaSymbol{:}\AgdaSpace{}\AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}\AgdaSymbol{â†’}\AgdaSpace{}\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}\AgdaBound{ğ’œ}\AgdaSpace{}\AgdaBound{i}\AgdaSpace{}\AgdaOperator{\AgdaFunction{âˆ£}}
of ``tuples'', the \ab i-th components of which live in \af âˆ£ \ab ğ’œ \ab i \af âˆ£, and the operations are simply the operations of the \ab ğ’œ~\ab i, interpreted component-wise.

The Birkhoff theorem involves products of entire arbitrary (nonindexed) classes of algebras, and it is not obvious how to handle this constructively, or whether it is even possible to do so without making extra assumptions about the class. (See~\cite{Carlstrom:2008} for a discussion of this issue.)  We describe our solution to this problem in \S\ref{sssec:products-of-classes}.


%% We define products of algebras for both the Sigma type representation (the one we use most often) and the record type representation.
%% \ccpad
%% \begin{code}%
%% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
%% \AgdaModule{UALib.Algebras.Products}\AgdaSpace{}%
%% \AgdaKeyword{where}\<%
%% \\
%% %
%% \ccpad
%% %
%% \>[0]\AgdaKeyword{open}\AgdaSpace{}%
%% \AgdaKeyword{import}\AgdaSpace{}%
%% \AgdaModule{UALib.Algebras.Algebras}\AgdaSpace{}%
%% \AgdaKeyword{public}\<%
%% \\
%% %
%% \ccpad
%% %
%% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
%% \AgdaModule{\AgdaUnderscore{}}\AgdaSpace{}%
%% \AgdaSymbol{\{}\AgdaBound{ğ“¤}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaPostulate{Universe}\AgdaSymbol{\}\{}\AgdaBound{ğ‘†}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaFunction{Signature}\AgdaSpace{}%
%% \AgdaGeneralizable{ğ“}\AgdaSpace{}%
%% \AgdaGeneralizable{ğ“¥}\AgdaSymbol{\}}%
%% \>[44]\AgdaKeyword{where}\<%
%% \\
%% %
%% \>[0][@{}l@{\AgdaIndent{0}}]%
%% \>[1]\AgdaComment{-- product for algebras of sigma type}\<%
%% \\
%% %
%% \>[1]\AgdaFunction{â¨…}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaSymbol{\{}\AgdaBound{ğ“˜}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaPostulate{Universe}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{ğ“˜}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{Ì‡}}\AgdaSpace{}%
%% \AgdaSymbol{\}(}\AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaFunction{Algebra}\AgdaSpace{}%
%% \AgdaBound{ğ“¤}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\AgdaSpace{}%
%% \AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaFunction{Algebra}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{ğ“˜}\AgdaSpace{}%
%% \AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
%% \AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\<%
%% \\
%% %
%% \>[1]\AgdaFunction{â¨…}\AgdaSpace{}%
%% \AgdaSymbol{\{}\AgdaBound{ğ“˜}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSymbol{\}}\AgdaSpace{}%
%% \AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaSymbol{=}\<%
%% \\
%% \>[1][@{}l@{\AgdaIndent{0}}]%
%% \>[2]\AgdaSymbol{((}\AgdaBound{i}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
%% \AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaBound{i}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
%% \AgdaSymbol{Î»(}\AgdaBound{f}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)(}\AgdaBound{ğ’‚}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ¥}}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ¥}}\AgdaSpace{}%
%% \AgdaBound{f}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{j}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
%% \AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaBound{j}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)(}\AgdaBound{i}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{f}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{Ì‚}}\AgdaSpace{}%
%% \AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaBound{i}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{Î»\{}\AgdaBound{x}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaBound{ğ’‚}\AgdaSpace{}%
%% \AgdaBound{x}\AgdaSpace{}%
%% \AgdaBound{i}\AgdaSymbol{\}}\<%
%% \\
%% %
%% \\[\AgdaEmptyExtraSkip]%
%% %
%% \>[1]\AgdaFunction{âŠ“}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaSymbol{\{}\AgdaBound{I}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{ğ“¤}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{Ì‡}}\AgdaSpace{}%
%% \AgdaSymbol{\}(}\AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaFunction{Algebra}\AgdaSpace{}%
%% \AgdaBound{ğ“¤}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\AgdaSpace{}%
%% \AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaFunction{Algebra}\AgdaSpace{}%
%% \AgdaBound{ğ“¤}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\<%
%% \\
%% %
%% \>[1]\AgdaFunction{âŠ“}\AgdaSpace{}%
%% \AgdaSymbol{=}\AgdaSpace{}%
%% \AgdaFunction{â¨…}\AgdaSpace{}%
%% \AgdaSymbol{\{}\AgdaBound{ğ“¤}\AgdaSymbol{\}}\<%
%% \\
%% %
%% \\[\AgdaEmptyExtraSkip]%
%% %
%% \>[1]\AgdaKeyword{open}\AgdaSpace{}%
%% \AgdaModule{algebra}\<%
%% \\
%% %
%% \\[\AgdaEmptyExtraSkip]%
%% %
%% \>[1]\AgdaComment{-- product for algebras of record type}\<%
%% \\
%% %
%% \>[1]\AgdaFunction{â¨…'}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaSymbol{\{}\AgdaBound{ğ“˜}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaPostulate{Universe}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{ğ“˜}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{Ì‡}}\AgdaSpace{}%
%% \AgdaSymbol{\}(}\AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaRecord{algebra}\AgdaSpace{}%
%% \AgdaBound{ğ“¤}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaRecord{algebra}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{ğ“˜}\AgdaSpace{}%
%% \AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
%% \AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\<%
%% \\
%% %
%% \>[1]\AgdaFunction{â¨…'}\AgdaSpace{}%
%% \AgdaSymbol{\{}\AgdaBound{ğ“˜}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSymbol{\}}\AgdaSpace{}%
%% \AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaSymbol{=}%
%% \>[125I]\AgdaKeyword{record}\<%
%% \\
%% \>[125I][@{}l@{\AgdaIndent{0}}]%
%% \>[18]\AgdaSymbol{\{}\AgdaSpace{}%
%% \AgdaField{univ}\AgdaSpace{}%
%% \AgdaSymbol{=}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{i}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaField{univ}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaBound{i}\AgdaSymbol{)}\<%
%% \\
%% %
%% \>[18]\AgdaSymbol{;}\AgdaSpace{}%
%% \AgdaField{op}\AgdaSpace{}%
%% \AgdaSymbol{=}%
%% \>[137I]\AgdaSymbol{Î»(}\AgdaBound{f}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)}\<%
%% \\
%% \>[137I][@{}l@{\AgdaIndent{0}}]%
%% \>[26]\AgdaSymbol{(}\AgdaBound{ğ’‚}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ¥}}\AgdaSpace{}%
%% \AgdaBound{ğ‘†}\AgdaSpace{}%
%% \AgdaOperator{\AgdaFunction{âˆ¥}}\AgdaSpace{}%
%% \AgdaBound{f}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{j}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaField{univ}\AgdaSymbol{(}\AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaBound{j}\AgdaSymbol{))}\<%
%% \\
%% %
%% \>[26]\AgdaSymbol{(}\AgdaBound{i}\AgdaSpace{}%
%% \AgdaSymbol{:}\AgdaSpace{}%
%% \AgdaBound{I}\AgdaSymbol{)}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaSymbol{((}\AgdaField{op}\AgdaSpace{}%
%% \AgdaSymbol{(}\AgdaBound{ğ’œ}\AgdaSpace{}%
%% \AgdaBound{i}\AgdaSymbol{))}\AgdaSpace{}%
%% \AgdaBound{f}\AgdaSymbol{)}\<%
%% \\
%% %
%% \>[26]\AgdaSymbol{Î»\{}\AgdaBound{x}\AgdaSpace{}%
%% \AgdaSymbol{â†’}\AgdaSpace{}%
%% \AgdaBound{ğ’‚}\AgdaSpace{}%
%% \AgdaBound{x}\AgdaSpace{}%
%% \AgdaBound{i}\AgdaSymbol{\}}\<%
%% \\
%% %
%% \>[18]\AgdaSymbol{\}}\<%
%% \end{code}



