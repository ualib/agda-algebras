% -*- TeX-master: "ualib-part1.tex" -*-
%%% Local Variables: 
%%% mode: latex
%%% TeX-engine: 'xetex
%%% End:
We begin this module by assuming a signature \ab{ğ‘†} \as : \af{Signature} \ab ğ“ \ab ğ“¥ which is then present and available throughout the module.  Thus the start of the \ualibhtml{Algebras.Products} module is declared with the line
\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{Algebras.Products}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ğ‘†}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Signature}\AgdaSpace{}%
\AgdaGeneralizable{ğ“}\AgdaSpace{}%
\AgdaGeneralizable{ğ“¥}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaKeyword{where}.%
% We begin this module by assuming a signature \ab{ğ‘†} \as : \af{Signature} \ab ğ“ \ab ğ“¥ which is then present and available throughout the module.  Because of this, in contrast to descriptions of previous modules, we present the first few lines of the \ualibhtml{Algebras.Products} module in full.
% \ccpad
% \begin{code}%
% \>[0]\AgdaSymbol{\{-\#}\AgdaSpace{}%
% \AgdaKeyword{OPTIONS}\AgdaSpace{}%
% \AgdaPragma{--without-K}\AgdaSpace{}%
% \AgdaPragma{--exact-split}\AgdaSpace{}%
% \AgdaPragma{--safe}\AgdaSpace{}%
% \AgdaSymbol{\#-\}}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0]\AgdaKeyword{open}\AgdaSpace{}%
% \AgdaKeyword{import}\AgdaSpace{}%
% \AgdaModule{Algebras.Signatures}\AgdaSpace{}%
% \AgdaKeyword{using}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaFunction{Signature}\AgdaSymbol{;}\AgdaSpace{}%
% \AgdaGeneralizable{ğ“}\AgdaSymbol{;}\AgdaSpace{}%
% \AgdaGeneralizable{ğ“¥}\AgdaSymbol{)}\<%
% \\
% %
% % \\[\AgdaEmptyExtraSkip]%
% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
% \AgdaModule{Algebras.Products}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{ğ‘†}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaFunction{Signature}\AgdaSpace{}%
% \AgdaGeneralizable{ğ“}\AgdaSpace{}%
% \AgdaGeneralizable{ğ“¥}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaKeyword{where}\<%
% \\
% %
% % \\[\AgdaEmptyExtraSkip]%
% \>[0]\AgdaKeyword{open}\AgdaSpace{}%
% \AgdaKeyword{import}\AgdaSpace{}%
% \AgdaModule{Algebras.Algebras}\AgdaSpace{}%
% \AgdaKeyword{hiding}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaGeneralizable{ğ“}\AgdaSymbol{;}\AgdaSpace{}%
% \AgdaGeneralizable{ğ“¥}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaKeyword{public}\<%
% \end{code}
% \ccpad
% Notice that we must import the \af{Signature} type from \ualibhtml{Algebras.Signatures} first so that we can use it to declare the signature \AgdaBound{ğ‘†} as a parameter of the \ualibhtml{Algebras.Products} module.

% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
% \AgdaModule{Algebras.Products}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{ğ‘†}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaFunction{Signature}\AgdaSpace{}%
% \AgdaGeneralizable{ğ“}\AgdaSpace{}%
% \AgdaGeneralizable{ğ“¥}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaKeyword{where}\<%
% \end{code}

In the \ualib the \defn{product of} \ab ğ‘†-\defn{algebras} is represented by the following type.\footnote{Alternative equivalent notation for the domain of the product is \as âˆ€~\ab i~\as â†’~\af âˆ£~\ab ğ’œ~\ab i~\af âˆ£.}
\ccpad
\begin{code}%
% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
% \AgdaModule{\AgdaUnderscore{}}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{ğ“¤}\AgdaSpace{}%
% \AgdaBound{ğ“˜}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaPostulate{Universe}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ğ“˜}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ì‡}}\AgdaSpace{}%
% \AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaKeyword{where}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaFunction{â¨…}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{I}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ“˜}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ğ‘†}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[1]\AgdaFunction{â¨…}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[51I]\AgdaSymbol{(}\AgdaFunction{Î }\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaFunction{ê‰}\AgdaSpace{}%
\AgdaBound{I}\AgdaSpace{}%
\AgdaFunction{,}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}%
\>[43]\AgdaComment{-- domain of the product algebra}\<%
\\
\>[.][@{}l@{}]\<[51I]%
\>[7]\AgdaSymbol{Î»}\AgdaSpace{}%
\AgdaBound{ğ‘“}\AgdaSpace{}%
\AgdaBound{ğ‘}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ‘“}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ì‚}}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaBound{i}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{Î»}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaBound{ğ‘}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{i}%
\>[43]\AgdaComment{-- basic operations of the product algebra}\<%
\end{code}
\ccpad
Other modules of the \ualib will use the foregoing product type exclusively. However, for completeness, here is how one constructs a product algebra type when the factor algebras inhabit the record type \AgdaRecord{algebra}.
\ccpad
\begin{code}%
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0]\AgdaComment{-- product for algebras of record type}\<%
% \\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{algebra}\<%
\\
\>[1]\AgdaFunction{â¨…'}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{ğ“¤}\AgdaSpace{}%
% \AgdaBound{ğ“˜}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaPostulate{Universe}\AgdaSymbol{\}\{}\AgdaBound{I}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ğ“˜}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ì‡}}\AgdaSymbol{\}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{I}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaRecord{algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaRecord{algebra}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ“˜}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ğ‘†}\<%
\\
%
% \\[\AgdaEmptyExtraSkip]%
\>[1]\AgdaFunction{â¨…'}\AgdaSpace{}%
\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaKeyword{record}%
\>[100I]\AgdaSymbol{\{}\AgdaSpace{}%
\AgdaField{univ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{âˆ€}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaField{univ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaBound{i}\AgdaSymbol{)}\AgdaSpace{}\AgdaSymbol{;}%
\>[55]\AgdaComment{-- domain}\<%
\\
%\AgdaTab{100}%\>[.][@{}l@{}]\<[100I]%
\>[100I][@{}l@{\AgdaIndent{0}}]%
\>[15]\AgdaField{op}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{Î»}\AgdaSpace{}%
\AgdaBound{ğ‘“}\AgdaSpace{}%
\AgdaBound{ğ‘}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{op}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ’œ}\AgdaSpace{}%
\AgdaBound{i}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaBound{ğ‘“}\AgdaSpace{}%
\AgdaSymbol{Î»}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaBound{ğ‘}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}\AgdaSymbol{\}}%
\>[55]\AgdaComment{-- basic operations}\<%
% \\
% \>[10]\AgdaSymbol{\}}\<%
\end{code}

\subsubsection{Products of classes of algebras}\label{products-of-classes-of-algebras}
\context{\AgdaSymbol{\{}\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ“§}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Universe}\AgdaSymbol{\}\{}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ğ“§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ì‡}}\AgdaSymbol{\}}}

An arbitrary class \ab ğ’¦ of algebras is represented as a predicate over the type \AgdaFunction{Algebra}\AgdaSpace{}\AgdaBound{ğ“¤}\AgdaSpace{}\AgdaBound{ğ‘†}, for some universe \AgdaBound{ğ“¤} and signature \AgdaBound{ğ‘†}. That is, \ab ğ’¦ \as : \AgdaFunction{Pred}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaUnderscore.\footnote{%
The underscore is merely a placeholder for the universe of the predicate type and needn't concern us here.} Later we will formally state and prove that the product of all subalgebras of algebras in such a class belongs to the class \af{SP}(\ab ğ’¦) of subalgebras of products of algebras in \ab ğ’¦. That is, \af â¨… \af S(\ab ğ’¦) \af âˆˆ \af{SP}(\ab ğ’¦).This turns out to be a nontrivial exercise. In fact, it is not immediately clear (at least not to this author) how to even express the product of an entire class of algebras as a dependent type. (We urge the reader to take a moment and try this before reading on.)

After some concentrated thought and a few failed attempts, eventually the right type reveals itself and, as is often the case, the thing we sought seems almost obvious once we lay our hands on it.\footnote{%
This was our own experience, but readers are encouraged to try to derive for themselves a type that represents the product of all things satisfying a predicate (e.g., over a type like \AgdaFunction{Algebra}\AgdaSpace{}\AgdaBound{ğ“¤}\AgdaSpace{}\AgdaBound{ğ‘†}, or over an arbitrary type). It is a good exercise.} The solution we propose in the \ualib is the \af{class-product} type whose construction is the main goal of this section.

First, let us establish a notational convention that is used in many of the later modules of the \ualib. Given a signature \ab{ğ‘†} \as : \af{Signature} \ab  ğ“ \ab ğ“¥, the type \af{Algebra} \ab ğ“¤ \ab ğ‘† has universe level \ab{ğ“} \ap âŠ” \ab ğ“¥ \ap âŠ” \ab ğ“¤ \af âº. Such levels occur very frequently and the \ab{ğ“} \ap âŠ” \ab ğ“¥ part remains fixed since \ab{ğ“} and \ab ğ“¥ always denote the levels of operation and arity types, respectively. Thus, we define the following shorthand: \AgdaFunction{ov}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaSymbol{:=}\AgdaSpace{}%
\AgdaBound{ğ“}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaBound{ğ“¥}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âº}}.

% We now proceed to develop types that will represent products of classes of algebras. First
Next, we define the type \AgdaFunction{â„‘} that will serve as the \defn{index} for the class, as well as for the product of all members of the class.
\ccpad
\begin{code}%
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaFunction{â„‘}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Pred}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSymbol{)(}\AgdaFunction{ov}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ“§}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaFunction{ov}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ì‡}}\<%
\\
%
% \\[\AgdaEmptyExtraSkip]%
%
\>[1]\AgdaFunction{â„‘}\AgdaSpace{}%
\AgdaBound{ğ’¦}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Î£}\AgdaSpace{}%
\AgdaBound{ğ‘¨}\AgdaSpace{}%
\AgdaFunction{ê‰}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{,}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ‘¨}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆˆ}}\AgdaSpace{}%
\AgdaBound{ğ’¦}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ã—}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
\AgdaBound{ğ‘¨}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)}\<%
\end{code}
\ccpad
Each inhabitant \ab{i} \as : \af â„‘ \ab ğ’¦ denotes a triple of the form (\ab{ğ‘¨} , \ab p , \ab h), where \ab{ğ‘¨} \as : \af{Algebra} \ab ğ“¤ \ab ğ‘†, \ab{p}~\as :~\ab ğ‘¨~\af âˆˆ~\ab ğ’¦, and \ab{h} \as : \ab X \as â†’ \af âˆ£ \ab ğ‘¨ \af âˆ£.
% Thus, if \ab{p} \as : \ab ğ‘¨ \af âˆˆ \ab ğ’¦ and \ab{h} \as : \ab X \as â†’ \af âˆ£ \ab ğ‘¨ \af âˆ£, then the triple (\ab{ğ‘¨} , \ab p , \ab h) inhabits the type \af â„‘ \ab ğ’¦, and w
We view such a triple as an \emph{index} identifying a particular member, \ab{ğ‘¨}, of the class \ab ğ’¦, along with proof of membership \ab p, and a \defn{context map} \ab h.

% The second component of this Sigma type is (\ab{ğ‘¨} \af âˆˆ \ab ğ’¦) \af Ã— (\ab X \as â†’ \af âˆ£ \ab ğ‘¨ \af âˆ£). 
In previous versions of the \ualib this second component of the Sigma type defining \af â„‘ was simply \ab{ğ‘¨} \af âˆˆ \ab ğ’¦, and did not include \ab X \as â†’ \af âˆ£ \ab ğ‘¨ \af âˆ£. However, we realized that adding the latter is quite useful. Later we will see exactly why, but for now suffice it to say that a map of type \ab X \as â†’ \af âˆ£ \ab ğ‘¨ \af âˆ£ may be viewed abstractly as an \emph{ambient context}, or more concretely, as an assignment of \emph{values} in \af âˆ£ \ab ğ‘¨ \af âˆ£ to \emph{variable symbols} in \ab X.  When computing with or reasoning about products, while we don't want to rigidly impose a context in advance, we do want to lay our hands on whatever context is ultimately assumed.  Including the ``context map'' inside the index type \af â„‘ of the product turns out to be a convenient way to achieve this flexibility.

Taking the product over the index type \af â„‘ requires a function that maps an index \ab{i} \as : \af â„‘ to the corresponding algebra.  the function mapping an index to the corresponding algebra is simply the first projection.
\ccpad
\begin{code}%
\>[1]\AgdaFunction{ğ”„}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ’¦}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Pred}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSymbol{)(}\AgdaFunction{ov}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaFunction{â„‘}\AgdaSpace{}%
\AgdaBound{ğ’¦}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\<%
\\
%
% \\[\AgdaEmptyExtraSkip]%
%
\>[1]\AgdaFunction{ğ”„}\AgdaSpace{}%
\AgdaBound{ğ’¦}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{Î»}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{â„‘}\AgdaSpace{}%
\AgdaBound{ğ’¦}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{âˆ£}}\<%
\end{code}
\ccpad
Finally, we define \af{class-product} which represents the product of all members of \ab ğ’¦.
\ccpad
\begin{code}%
\>[1]\AgdaFunction{class-product}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Pred}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSpace{}%
\AgdaBound{ğ‘†}\AgdaSymbol{)(}\AgdaFunction{ov}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{â†’}\AgdaSpace{}%
\AgdaFunction{Algebra}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ğ“§}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
\AgdaFunction{ov}\AgdaSpace{}%
\AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ğ‘†}\<%
\\
%
% \\[\AgdaEmptyExtraSkip]%
%
\>[1]\AgdaFunction{class-product}\AgdaSpace{}%
\AgdaBound{ğ’¦}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{â¨…}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaSpace{}%
\AgdaFunction{ğ”„}\AgdaSpace{}%
\AgdaBound{ğ’¦}\AgdaSpace{}%
\AgdaSymbol{)}\<%
\end{code}
\ccpad
% Alternatively, we could have defined the class product in a way that
% explicitly displays the index, like so.
% \ccpad
% \begin{code}%
% \>[0][@{}l@{\AgdaIndent{1}}]%
% \>[1]\AgdaFunction{class-product'}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaFunction{Pred}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaFunction{Algebra}\AgdaSpace{}%
% \AgdaBound{ğ“¤}\AgdaSpace{}%
% \AgdaBound{ğ‘†}\AgdaSymbol{)(}\AgdaFunction{ov}\AgdaSpace{}%
% \AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaSymbol{â†’}\AgdaSpace{}%
% \AgdaFunction{Algebra}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{ğ“§}\AgdaSpace{}%
% \AgdaOperator{\AgdaPrimitive{âŠ”}}\AgdaSpace{}%
% \AgdaFunction{ov}\AgdaSpace{}%
% \AgdaBound{ğ“¤}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaBound{ğ‘†}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% %
% \>[1]\AgdaFunction{class-product'}\AgdaSpace{}%
% \AgdaBound{ğ’¦}\AgdaSpace{}%
% \AgdaSymbol{=}\AgdaSpace{}%
% \AgdaFunction{â¨…}\AgdaSpace{}%
% \AgdaSymbol{Î»}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{i}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaFunction{Î£}\AgdaSpace{}%
% \AgdaBound{ğ‘¨}\AgdaSpace{}%
% \AgdaFunction{ê‰}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaFunction{Algebra}\AgdaSpace{}%
% \AgdaBound{ğ“¤}\AgdaSpace{}%
% \AgdaBound{ğ‘†}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaFunction{,}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{ğ‘¨}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{âˆˆ}}\AgdaSpace{}%
% \AgdaBound{ğ’¦}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ã—}}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{X}\AgdaSpace{}%
% \AgdaSymbol{â†’}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
% \AgdaBound{ğ‘¨}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSymbol{)))}\AgdaSpace{}%
% \AgdaSymbol{â†’}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{âˆ£}}\AgdaSpace{}%
% \AgdaBound{i}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{âˆ£}}\<%
% \end{code}
% \ccpad
Observe that \af ğ”„ \ab ğ’¦ (\ab ğ‘¨ , \ab p , \ab h) (which is simply \ab{ğ‘¨}) may be viewed as the \defn{projection of the product} \af â¨… \af ğ”„ \ab ğ’¦ onto the ``(\ab ğ‘¨ , \ab p , \ab h)-th component'' of the product.

% If \ab{p} \as : \ab ğ‘¨ \af âˆˆ \ab ğ’¦ and \ab{h} \as 
% : \ab X \as â†’ \af âˆ£ \ab ğ‘¨ \af âˆ£, then we can think of the triple (\ab{ğ‘¨} , \ab p , \ab h) \af âˆˆ \af â„‘ \ab ğ’¦ as an index over the class, and so we can think of \af ğ”„ (\ab ğ‘¨ , \ab p , \ab h) (which is simply \ab{ğ‘¨}) as the projection of the product \af â¨… ( \af ğ”„ \ab ğ’¦ ) onto the (\ab ğ‘¨ , \ab p , \ab h)-th component.
