TODO

-- Obs 2.0 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- composing homs gives a hom.
-- Obs 2.1 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Equalizer of homs is a subuniverse.
-- End Obs 2.1 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.2 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Homs are determined on generating sets (UAFST Ex 1.4.6.b)
-- End Obs 2.2 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.3 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- If A, B are fin, X generates ğ‘¨, then |Hom(ğ‘¨, ğ‘©)| â‰¤ |B|^|X|.
-- End Obs 2.3 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.4 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Factorization of homs.
-- If g âˆˆ Epi(ğ‘¨, ğ‘©), h âˆˆ Hom(ğ‘¨, ğ‘ª), ker g âŠ† ker h, then
-- âˆƒ k âˆˆ Hom(ğ‘©, ğ‘ª), h = k âˆ˜ g.
-- End Obs 2.4 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.5 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- CLAIM. Suppose Aáµ¢ â‰¤ ğ‘¨ for all i in some set I. Then â‹‚áµ¢ Aáµ¢ is a subuniverse of ğ‘¨.
-- End Obs 2.5 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.6 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Inductive version of Sg^ğ‘¨.                                       
-- ğ‘¨ an algebra in S and Aâ‚€ a subset of A. Define, by recursion
-- on n, Aâ‚™ as follows: If Aâ‚€ = âˆ…, then Aâ‚™ = âˆ… for all n<Ï‰.
-- If Aâ‚€ â‰  âˆ…, then A_{n+1} = Aâ‚™ âˆª { f a âˆ£ f âˆˆ F, a âˆˆ Fin(Ï f) -> Aâ‚™}.
-- Then the subuniverse of ğ‘¨ generated by Aâ‚€ is Sg^ğ‘¨(Aâ‚€) = â‹ƒâ‚™ Aâ‚™.
-- End Obs 2.6 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.7 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Inductive version of Clo(F).                                     -- Let A be a set, F âŠ† Op(A):= â‹ƒâ‚™ A^Aâ¿ a collection of ops on A.
-- Define Fâ‚€ := Proj(A) (the projections on A),
--        and âˆ€ 0 â‰¤ n < Ï‰, let
-- F_{n+1} := Fâ‚™ âˆª { f g | f âˆˆ F, g : Fin(Ï f) -> Fâ‚™ âˆ© (Fin(Ïg) -> A) }.
--        Then Clo(F) = â‹ƒâ‚™ Fâ‚™.
-- End Obs 2.7 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


-- Obs 2.8 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Lift of a map h : X -> A extends uniquly to a hom ğ‘»(X) -> ğ‘¨.     
-- (1) ğ‘» := ğ‘»_Ïƒ(X) is generated by X.
-- (2) âˆ€ ğ‘¨ = âŸ¨A, F^ğ‘¨âŸ©, âˆ€ g: X â†’ A, âˆƒ! hom h: ğ‘» â†’ ğ‘¨,  h|_X = g.
-- End Obs 2.8 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.9 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Homs commute with terms.
-- Let t âˆˆ T_Ïƒ (X) be an n-ary term, t^ğ‘¨ its interpretation in ğ‘¨,
-- so t^ğ‘¨ a = t^ğ‘¨ (a 0, a 1, ..., a (n-1)), for each
-- a : Fin(n) -> A. Similarly for ğ‘©, have t^ğ‘©: (Fin(n) -> B) -> B. 
-- If g: ğ‘¨ â†’ ğ‘© is a hom, then g âˆ˜ a: Fin(n) â†’ B is the n-tuple
-- whose i-th component is (g âˆ˜ a) i = g(a i), and
-- g(t^ğ‘¨ a) = t^ğ‘©(g âˆ˜ a) holds.
-- End Obs 2.9 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


-- Obs 2.10 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Terms respect congruences
-- If Î¸ âˆˆ Con ğ‘¨ and a, a': Fin(n) -> A are n-tuples over A, then
--        (a, a') âˆˆ Î¸  âŸ¹  (t^ğ‘¨ a, t^ğ‘¨ a') âˆˆ Î¸.
-- End Obs 2.10 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


-- Obs 2.11 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Subuniverse generation as image of terms.
-- If Y is a subset of A, then
-- Sg^{ğ‘¨}(Y) = { t^ğ‘¨ a : t âˆˆ T_Ïƒ(X_n), n âˆˆ â„•, a: Fin(Ï t) -> Y }.
-- End Obs 2.11 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.12 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- CLAIM. âˆ€ ğ’¦ (class of structures) each of ğ–²(ğ’¦), ğ–§(ğ’¦), ğ–¯(ğ’¦),
--        ğ•(ğ’¦) satisfies exaxtly the same set of identities
--        as does ğ’¦.
-- End Obs 2.12 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.13 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- ğ’¦ âŠ§ p â‰ˆ q iff âˆ€ ğ‘¨ âˆˆ ğ’¦, âˆ€ h âˆˆ Hom(ğ‘»(X_Ï‰), ğ‘¨), h p^ğ‘¨ = h q^ğ‘¨`.
-- End Obs 2.13 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.14 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Let ğ’¦ be a class of algebras, p â‰ˆ q an equation. TFAE.
--   (1) ğ’¦ âŠ§ p â‰ˆ q.
--   (2) (p, q) belongs to the congruence Î»_ğ’¦ on ğ‘»(X_Ï‰).
--   (3) ğ‘­_ğ’¦(X_Ï‰) âŠ§ p â‰ˆ q.
--
-- End Obs 2.14 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

-- Obs 2.15 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Let ğ’¦ be a class of algebras, p and q terms (say, n-ary),
-- Y a set, and yâ‚,..., yâ‚™ distinct elements of Y.
-- Then ğ’¦ âŠ§ p â‰ˆ q iff
--   p^{ğ‘­_ğ’¦(Y)}(yâ‚,..., yâ‚™) =  q^{ğ‘­_ğ’¦}(Y)(yâ‚, ..., yâ‚™).
-- In particular, ğ’¦ âŠ§ p â‰ˆ q iff ğ‘­_ğ’¦(Xâ‚™) âŠ§ p â‰ˆ q.
-- End Obs 2.15 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
--
--        (The converse of Obs 2.15 is **Birkhoff's HSP Theorem**.)
--
-- Obs 2.16 vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
-- Every  finitely  generated  variety  is  locally finite.
-- End Obs 2.16 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
--
-- The converse of the last theorem is false.  That is, âˆƒ loc fin varieties that are not finitely generated
-- (e.g., the variety of p-algebras; see UAFSt Cor. 4.55).
--

--------------
-- VARIETIES
--------------

--cf Def 1.10 of Bergman
--Let ğ“š be a class of similar algebras. We write
--  H(ğ“š) for the class of all homomorphic images of members of ğ“š;
--  S(ğ“š) for the class of all algebras isomorphic to a subalgebra of a member of ğ“š;
--  P(ğ“š) for the class of all algebras isomorphic to a direct product of members of ğ“š;
--We say that ğ“š is closed under the formation of homomorphic images if H(ğ“š) âŠ† ğ“š,
--and similarly for subalgebras and products.
--Notice that all three of these "class operators" are designed so that for any
--class ğ“š, H(ğ“š), S(ğ“š), P(ğ“š) are closed under isomorphic images.
--On those rare occasions that we need it, we can write I(ğ“š) for the class of algebras
--isomorphic to a member of ğ“š.
--Finally, we call ğ“š a VARIETY if it is closed under each of H, S and P.

-- contains : {A : Set} -> (L : List A) -> A -> Prp
-- contains [] a = âŠ¥
-- contains (h :: tail) a = (h â‰¡ a) â‹ (contains tail a)

--data class-of-algebras : Set where

-- --Hom-closed
-- H-closed : (ğ“š : Pred (algebra S)) -> Prp
-- H-closed ğ“š = âˆ€ (A : algebra S)  ->  (ğ“š A)
--   ->     (âˆƒ Î¸ : Con A)   ->   (âˆƒ C : algebra S)
--   ->     (ğ“š C) âˆ§ (A / Î¸ â‰… C)

-- --Sub-closed
-- -- SC : (ğ“š : List (algebra S)) -> Prp
-- -- SC ğ“š = âˆ€(A : algebra S) -> (contains ğ“š A)
-- --   -> (B : subalgebra A) -> (âˆƒ C : algebra S)
-- --   -> (contains ğ“š C) âˆ§ B â‰ƒ C
















--====================================================
------------------------------------------------------
-- OLD STUFF
--
-- open import Level
-- open import basic
-- open import subuniverse
-- open algebra
-- open signature
-- open import preliminaries
-- open import Relation.Unary
-- open import Relation.Binary.Core
-- import Relation.Binary.PropositionalEquality as Eq
-- open Eq using (_â‰¡_; refl; cong; trans; sym)
-- open Eq.â‰¡-Reasoning
-- open import Data.Product using (Î£; _,_; âˆƒ; Î£-syntax; âˆƒ-syntax)
