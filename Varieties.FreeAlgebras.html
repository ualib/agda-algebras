<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Varieties.FreeAlgebras</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Background">---
layout: default
title : Varieties.FreeAlgebras module (Agda Universal Algebra Library)
date : 2021-03-01
author: [agda-algebras development team][]
---

## &lt;a id=&quot;free-algebras-and-birkhoffs-theorem&quot;&gt;Free Algebras and Birkhoff&#39;s Theorem&lt;/a&gt;

This is the [Varieties.FreeAlgebras.Basic][] module of the [Agda Universal Algebra Library][].

First we will define the relatively free algebra in a variety, which is the &quot;freest&quot; algebra among (universal for) those algebras that model all identities holding in the variety. Then we give a formal proof of Birkhoff&#39;s theorem which says that a variety is an equational class. In other terms, a class `𝒦` of algebras is closed under the operators `H`, `S`, and `P` if and only if 𝒦 is the class of algebras that satisfy some set of identities.

</a><a id="791" class="Markup">\begin{code}</a>

<a id="805" class="Symbol">{-#</a> <a id="809" class="Keyword">OPTIONS</a> <a id="817" class="Pragma">--without-K</a> <a id="829" class="Pragma">--exact-split</a> <a id="843" class="Pragma">--safe</a> <a id="850" class="Symbol">#-}</a>


<a id="856" class="Keyword">open</a> <a id="861" class="Keyword">import</a> <a id="868" href="Level.html" class="Module">Level</a> <a id="874" class="Keyword">renaming</a> <a id="883" class="Symbol">(</a> <a id="885" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="889" class="Symbol">to</a> <a id="892" class="Primitive">lsuc</a> <a id="897" class="Symbol">)</a>
<a id="899" class="Keyword">open</a> <a id="904" class="Keyword">import</a> <a id="911" href="Algebras.Basic.html" class="Module">Algebras.Basic</a> <a id="926" class="Keyword">using</a> <a id="932" class="Symbol">(</a> <a id="934" href="Algebras.Basic.html#1210" class="Generalizable">𝓞</a> <a id="936" class="Symbol">;</a> <a id="938" href="Algebras.Basic.html#1212" class="Generalizable">𝓥</a> <a id="940" class="Symbol">;</a> <a id="942" href="Algebras.Basic.html#3576" class="Function">Signature</a> <a id="952" class="Symbol">)</a>

<a id="955" class="Keyword">module</a> <a id="962" href="Varieties.FreeAlgebras.html" class="Module">Varieties.FreeAlgebras</a> <a id="985" class="Symbol">{</a><a id="986" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="988" href="Varieties.FreeAlgebras.html#988" class="Bound">𝓞</a> <a id="990" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="992" class="Symbol">:</a> <a id="994" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="999" class="Symbol">}</a> <a id="1001" class="Symbol">(</a><a id="1002" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a> <a id="1004" class="Symbol">:</a> <a id="1006" href="Algebras.Basic.html#3576" class="Function">Signature</a> <a id="1016" href="Varieties.FreeAlgebras.html#988" class="Bound">𝓞</a> <a id="1018" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a><a id="1019" class="Symbol">)</a> <a id="1021" class="Keyword">where</a>


<a id="1029" class="Comment">-- Imports from Agda (builtin/primitive) and the Agda Standard Library ---------------------</a>
<a id="1122" class="Keyword">open</a> <a id="1127" class="Keyword">import</a> <a id="1134" href="Axiom.Extensionality.Propositional.html" class="Module">Axiom.Extensionality.Propositional</a> <a id="1169" class="Keyword">renaming</a> <a id="1178" class="Symbol">(</a><a id="1179" href="Axiom.Extensionality.Propositional.html#741" class="Function">Extensionality</a> <a id="1194" class="Symbol">to</a> <a id="1197" class="Function">funext</a><a id="1203" class="Symbol">)</a>
<a id="1205" class="Keyword">open</a> <a id="1210" class="Keyword">import</a> <a id="1217" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>   <a id="1241" class="Keyword">using</a>    <a id="1250" class="Symbol">(</a> <a id="1252" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="1256" class="Symbol">;</a> <a id="1258" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="1263" class="Symbol">)</a>
<a id="1265" class="Keyword">open</a> <a id="1270" class="Keyword">import</a> <a id="1277" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>          <a id="1301" class="Keyword">renaming</a> <a id="1310" class="Symbol">(</a> <a id="1312" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1316" class="Symbol">to</a> <a id="1319" class="Primitive">Type</a> <a id="1324" class="Symbol">)</a>
                                    <a id="1362" class="Keyword">using</a>    <a id="1371" class="Symbol">(</a> <a id="1373" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a> <a id="1377" class="Symbol">)</a>
<a id="1379" class="Keyword">open</a> <a id="1384" class="Keyword">import</a> <a id="1391" href="Data.Product.html" class="Module">Data.Product</a>            <a id="1415" class="Keyword">using</a>    <a id="1424" class="Symbol">(</a> <a id="1426" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="1430" class="Symbol">;</a> <a id="1432" href="Data.Product.html#916" class="Function">Σ-syntax</a> <a id="1441" class="Symbol">;</a> <a id="1443" href="Agda.Builtin.Sigma.html#166" class="Record">Σ</a> <a id="1445" class="Symbol">;</a> <a id="1447" href="Data.Product.html#1167" class="Function Operator">_×_</a> <a id="1451" class="Symbol">)</a>
                                    <a id="1489" class="Keyword">renaming</a> <a id="1498" class="Symbol">(</a> <a id="1500" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1506" class="Symbol">to</a> <a id="1509" class="Field">fst</a>
                                             <a id="1558" class="Symbol">;</a> <a id="1560" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="1566" class="Symbol">to</a> <a id="1569" class="Field">snd</a> <a id="1573" class="Symbol">)</a>
<a id="1575" class="Keyword">open</a> <a id="1580" class="Keyword">import</a> <a id="1587" href="Function.Base.html" class="Module">Function.Base</a>           <a id="1611" class="Keyword">using</a>    <a id="1620" class="Symbol">(</a> <a id="1622" href="Function.Base.html#1031" class="Function Operator">_∘_</a> <a id="1626" class="Symbol">)</a>
<a id="1628" class="Keyword">open</a> <a id="1633" class="Keyword">import</a> <a id="1640" href="Relation.Binary.html" class="Module">Relation.Binary</a>         <a id="1664" class="Keyword">using</a>    <a id="1673" class="Symbol">(</a> <a id="1675" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="1689" class="Symbol">)</a>
                                    <a id="1727" class="Keyword">renaming</a> <a id="1736" class="Symbol">(</a> <a id="1738" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1742" class="Symbol">to</a> <a id="1745" class="Function">BinRel</a> <a id="1752" class="Symbol">)</a>
<a id="1754" class="Keyword">open</a> <a id="1759" class="Keyword">import</a> <a id="1766" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
                                    <a id="1840" class="Keyword">using</a>    <a id="1849" class="Symbol">(</a> <a id="1851" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="1856" class="Symbol">;</a> <a id="1858" href="Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a> <a id="1867" class="Symbol">;</a> <a id="1869" class="Keyword">module</a> <a id="1876" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="1888" class="Symbol">)</a>
<a id="1890" class="Keyword">open</a> <a id="1895" class="Keyword">import</a> <a id="1902" href="Relation.Unary.html" class="Module">Relation.Unary</a>          <a id="1926" class="Keyword">using</a>    <a id="1935" class="Symbol">(</a> <a id="1937" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="1942" class="Symbol">;</a> <a id="1944" href="Relation.Unary.html#1523" class="Function Operator">_∈_</a> <a id="1948" class="Symbol">;</a> <a id="1950" href="Relation.Unary.html#1742" class="Function Operator">_⊆_</a> <a id="1954" class="Symbol">;</a> <a id="1956" href="Relation.Unary.html#1335" class="Function Operator">｛_｝</a> <a id="1960" class="Symbol">;</a> <a id="1962" href="Relation.Unary.html#4417" class="Function Operator">_∪_</a> <a id="1966" class="Symbol">)</a>

<a id="1969" class="Comment">-- Imports from the Agda Universal Algebra Library -------------------------------------------</a>
<a id="2064" class="Keyword">open</a> <a id="2069" class="Keyword">import</a> <a id="2076" href="Overture.Preliminaries.html" class="Module">Overture.Preliminaries</a>             <a id="2111" class="Keyword">using</a> <a id="2117" class="Symbol">(</a> <a id="2119" href="Overture.Preliminaries.html#4144" class="Function Operator">∣_∣</a> <a id="2123" class="Symbol">;</a> <a id="2125" href="Overture.Preliminaries.html#4182" class="Function Operator">∥_∥</a> <a id="2129" class="Symbol">;</a> <a id="2131" href="Overture.Preliminaries.html#5177" class="Function Operator">_∙_</a> <a id="2135" class="Symbol">;</a> <a id="2137" href="Overture.Preliminaries.html#4848" class="Function Operator">_⁻¹</a> <a id="2141" class="Symbol">)</a>
<a id="2143" class="Keyword">open</a> <a id="2148" class="Keyword">import</a> <a id="2155" href="Overture.Inverses.html" class="Module">Overture.Inverses</a>                  <a id="2190" class="Keyword">using</a> <a id="2196" class="Symbol">(</a> <a id="2198" href="Overture.Inverses.html#3166" class="Function">IsSurjective</a> <a id="2211" class="Symbol">)</a>
<a id="2213" class="Keyword">open</a> <a id="2218" class="Keyword">import</a> <a id="2225" href="Relations.Discrete.html" class="Module">Relations.Discrete</a>                 <a id="2260" class="Keyword">using</a> <a id="2266" class="Symbol">(</a> <a id="2268" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="2275" class="Symbol">)</a>
<a id="2277" class="Keyword">open</a> <a id="2282" class="Keyword">import</a> <a id="2289" href="Relations.Quotients.html" class="Module">Relations.Quotients</a>                <a id="2324" class="Keyword">using</a> <a id="2330" class="Symbol">(</a> <a id="2332" href="Relations.Quotients.html#4973" class="Function Operator">⟪_⟫</a> <a id="2336" class="Symbol">)</a>
<a id="2338" class="Keyword">open</a> <a id="2343" class="Keyword">import</a> <a id="2350" href="Foundations.Truncation.html" class="Module">Foundations.Truncation</a>             <a id="2385" class="Keyword">using</a> <a id="2391" class="Symbol">(</a> <a id="2393" href="Foundations.Truncation.html#6487" class="Function">is-set</a> <a id="2400" class="Symbol">;</a> <a id="2402" href="Foundations.Truncation.html#10684" class="Function">blk-uip</a> <a id="2410" class="Symbol">;</a> <a id="2412" href="Foundations.Truncation.html#3875" class="Function">hfunext</a> <a id="2420" class="Symbol">)</a>
<a id="2422" class="Keyword">open</a> <a id="2427" class="Keyword">import</a> <a id="2434" href="Foundations.Welldefined.html" class="Module">Foundations.Welldefined</a>            <a id="2469" class="Keyword">using</a> <a id="2475" class="Symbol">(</a> <a id="2477" href="Foundations.Welldefined.html#3096" class="Function">SwellDef</a> <a id="2486" class="Symbol">;</a> <a id="2488" href="Foundations.Welldefined.html#2798" class="Function">swelldef</a> <a id="2497" class="Symbol">)</a>
<a id="2499" class="Keyword">open</a> <a id="2504" class="Keyword">import</a> <a id="2511" href="Foundations.Extensionality.html" class="Module">Foundations.Extensionality</a>         <a id="2546" class="Keyword">using</a> <a id="2552" class="Symbol">(</a> <a id="2554" href="Foundations.Extensionality.html#2398" class="Function">DFunExt</a><a id="2561" class="Symbol">;</a> <a id="2563" href="Foundations.Extensionality.html#4178" class="Function">pred-ext</a> <a id="2572" class="Symbol">)</a>
<a id="2574" class="Keyword">open</a> <a id="2579" class="Keyword">import</a> <a id="2586" href="Algebras.Basic.html" class="Module">Algebras.Basic</a>                     <a id="2621" class="Keyword">using</a> <a id="2627" class="Symbol">(</a> <a id="2629" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="2637" class="Symbol">;</a> <a id="2639" href="Algebras.Basic.html#10865" class="Function">Lift-Alg</a> <a id="2648" class="Symbol">;</a> <a id="2650" href="Algebras.Basic.html#12721" class="Function">compatible</a> <a id="2661" class="Symbol">;</a> <a id="2663" href="Algebras.Basic.html#9889" class="Function Operator">_̂_</a> <a id="2667" class="Symbol">)</a>
<a id="2669" class="Keyword">open</a> <a id="2674" class="Keyword">import</a> <a id="2681" href="Algebras.Products.html" class="Module">Algebras.Products</a>          <a id="2708" class="Symbol">{</a><a id="2709" class="Argument">𝑆</a> <a id="2711" class="Symbol">=</a> <a id="2713" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="2714" class="Symbol">}</a> <a id="2716" class="Keyword">using</a> <a id="2722" class="Symbol">(</a> <a id="2724" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="2727" class="Symbol">;</a> <a id="2729" href="Algebras.Products.html#1756" class="Function">⨅</a> <a id="2731" class="Symbol">)</a>
<a id="2733" class="Keyword">open</a> <a id="2738" class="Keyword">import</a> <a id="2745" href="Algebras.Congruences.html" class="Module">Algebras.Congruences</a>       <a id="2772" class="Symbol">{</a><a id="2773" class="Argument">𝑆</a> <a id="2775" class="Symbol">=</a> <a id="2777" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="2778" class="Symbol">}</a> <a id="2780" class="Keyword">using</a> <a id="2786" class="Symbol">(</a> <a id="2788" href="Algebras.Congruences.html#1976" class="Function">Con</a><a id="2791" class="Symbol">;</a> <a id="2793" href="Algebras.Congruences.html#1878" class="InductiveConstructor">mkcon</a> <a id="2799" class="Symbol">;</a> <a id="2801" href="Algebras.Congruences.html#1790" class="Record">IsCongruence</a> <a id="2814" class="Symbol">)</a>
<a id="2816" class="Keyword">open</a> <a id="2821" class="Keyword">import</a> <a id="2828" href="Homomorphisms.Basic.html" class="Module">Homomorphisms.Basic</a>        <a id="2855" class="Symbol">{</a><a id="2856" class="Argument">𝑆</a> <a id="2858" class="Symbol">=</a> <a id="2860" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="2861" class="Symbol">}</a> <a id="2863" class="Keyword">using</a> <a id="2869" class="Symbol">(</a> <a id="2871" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="2875" class="Symbol">;</a> <a id="2877" href="Homomorphisms.Basic.html#11043" class="Function">⨅-hom-co</a> <a id="2886" class="Symbol">;</a> <a id="2888" href="Homomorphisms.Basic.html#8387" class="Function Operator">ker[_⇒_]_↾_</a> <a id="2900" class="Symbol">;</a> <a id="2902" href="Homomorphisms.Basic.html#6302" class="Function">epi</a>
                                                     <a id="2959" class="Symbol">;</a> <a id="2961" href="Homomorphisms.Basic.html#9846" class="Function">πker</a> <a id="2966" class="Symbol">;</a> <a id="2968" href="Homomorphisms.Basic.html#6769" class="Function">epi-to-hom</a> <a id="2979" class="Symbol">;</a> <a id="2981" href="Homomorphisms.Basic.html#10355" class="Function">ker-in-con</a>
                                                     <a id="3045" class="Symbol">;</a>  <a id="3048" href="Homomorphisms.Basic.html#7979" class="Function">kercon</a> <a id="3055" class="Symbol">;</a> <a id="3057" href="Homomorphisms.Basic.html#3793" class="Function">∘-hom</a> <a id="3063" class="Symbol">)</a>
<a id="3065" class="Keyword">open</a> <a id="3070" class="Keyword">import</a> <a id="3077" href="Homomorphisms.Noether.html" class="Module">Homomorphisms.Noether</a>      <a id="3104" class="Symbol">{</a><a id="3105" class="Argument">𝑆</a> <a id="3107" class="Symbol">=</a> <a id="3109" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3110" class="Symbol">}</a> <a id="3112" class="Keyword">using</a> <a id="3118" class="Symbol">(</a> <a id="3120" href="Homomorphisms.Noether.html#8583" class="Function">HomFactor</a> <a id="3130" class="Symbol">;</a> <a id="3132" href="Homomorphisms.Noether.html#9901" class="Function">HomFactorEpi</a> <a id="3145" class="Symbol">)</a>
<a id="3147" class="Keyword">open</a> <a id="3152" class="Keyword">import</a> <a id="3159" href="Homomorphisms.Isomorphisms.html" class="Module">Homomorphisms.Isomorphisms</a> <a id="3186" class="Symbol">{</a><a id="3187" class="Argument">𝑆</a> <a id="3189" class="Symbol">=</a> <a id="3191" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3192" class="Symbol">}</a> <a id="3194" class="Keyword">using</a> <a id="3200" class="Symbol">(</a> <a id="3202" href="Homomorphisms.Isomorphisms.html#2193" class="Record Operator">_≅_</a> <a id="3206" class="Symbol">;</a> <a id="3208" href="Homomorphisms.Isomorphisms.html#2685" class="Function">≅-refl</a> <a id="3215" class="Symbol">;</a> <a id="3217" href="Homomorphisms.Isomorphisms.html#2775" class="Function">≅-sym</a> <a id="3223" class="Symbol">;</a> <a id="3225" href="Homomorphisms.Isomorphisms.html#4215" class="Function">Lift-≅</a> <a id="3232" class="Symbol">)</a>
<a id="3234" class="Keyword">open</a> <a id="3239" class="Keyword">import</a> <a id="3246" href="Terms.Basic.html" class="Module">Terms.Basic</a>                <a id="3273" class="Symbol">{</a><a id="3274" class="Argument">𝑆</a> <a id="3276" class="Symbol">=</a> <a id="3278" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3279" class="Symbol">}</a> <a id="3281" class="Keyword">using</a> <a id="3287" class="Symbol">(</a> <a id="3289" href="Terms.Basic.html#1897" class="Datatype">Term</a> <a id="3294" class="Symbol">;</a> <a id="3296" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="3298" class="Symbol">)</a>
<a id="3300" class="Keyword">open</a> <a id="3305" class="Keyword">import</a> <a id="3312" href="Terms.Properties.html" class="Module">Terms.Properties</a>           <a id="3339" class="Symbol">{</a><a id="3340" class="Argument">𝑆</a> <a id="3342" class="Symbol">=</a> <a id="3344" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3345" class="Symbol">}</a> <a id="3347" class="Keyword">using</a> <a id="3353" class="Symbol">(</a> <a id="3355" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="3365" class="Symbol">;</a> <a id="3367" href="Terms.Properties.html#3226" class="Function">lift-hom</a>
                                                     <a id="3429" class="Symbol">;</a> <a id="3431" href="Terms.Properties.html#3631" class="Function">free-unique</a> <a id="3443" class="Symbol">;</a> <a id="3445" href="Terms.Properties.html#4837" class="Function">lift-of-epi-is-epi</a> <a id="3464" class="Symbol">)</a>
<a id="3466" class="Keyword">open</a> <a id="3471" class="Keyword">import</a> <a id="3478" href="Terms.Operations.html" class="Module">Terms.Operations</a>           <a id="3505" class="Symbol">{</a><a id="3506" class="Argument">𝑆</a> <a id="3508" class="Symbol">=</a> <a id="3510" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3511" class="Symbol">}</a> <a id="3513" class="Keyword">using</a> <a id="3519" class="Symbol">(</a> <a id="3521" href="Terms.Operations.html#2805" class="Function Operator">_⟦_⟧</a><a id="3525" class="Symbol">;</a> <a id="3527" href="Terms.Operations.html#8241" class="Function">comm-hom-term</a><a id="3540" class="Symbol">;</a> <a id="3542" href="Terms.Operations.html#3116" class="Function">free-lift-interp</a> <a id="3559" class="Symbol">)</a>
<a id="3561" class="Keyword">open</a> <a id="3566" class="Keyword">import</a> <a id="3573" href="Subalgebras.Subalgebras.html" class="Module">Subalgebras.Subalgebras</a>    <a id="3600" class="Symbol">{</a><a id="3601" class="Argument">𝑆</a> <a id="3603" class="Symbol">=</a> <a id="3605" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3606" class="Symbol">}</a> <a id="3608" class="Keyword">using</a> <a id="3614" class="Symbol">(</a> <a id="3616" href="Subalgebras.Subalgebras.html#2619" class="Function Operator">_≤_</a> <a id="3620" class="Symbol">;</a> <a id="3622" href="Subalgebras.Subalgebras.html#4451" class="Function">FirstHomCorollary|Set</a> <a id="3644" class="Symbol">)</a>
<a id="3646" class="Keyword">open</a> <a id="3651" class="Keyword">import</a> <a id="3658" href="Varieties.EquationalLogic.html" class="Module">Varieties.EquationalLogic</a>  <a id="3685" class="Symbol">{</a><a id="3686" class="Argument">𝑆</a> <a id="3688" class="Symbol">=</a> <a id="3690" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3691" class="Symbol">}</a> <a id="3693" class="Keyword">using</a> <a id="3699" class="Symbol">(</a> <a id="3701" href="Varieties.EquationalLogic.html#2637" class="Function Operator">_⊫_≈_</a><a id="3706" class="Symbol">;</a> <a id="3708" href="Varieties.EquationalLogic.html#2559" class="Function Operator">_⊧_≈_</a><a id="3713" class="Symbol">;</a> <a id="3715" href="Varieties.EquationalLogic.html#3319" class="Function">Th</a><a id="3717" class="Symbol">;</a> <a id="3719" href="Varieties.EquationalLogic.html#3894" class="Function">Mod</a> <a id="3723" class="Symbol">)</a>
<a id="3725" class="Keyword">open</a> <a id="3730" class="Keyword">import</a> <a id="3737" href="Varieties.Closure.html" class="Module">Varieties.Closure</a>          <a id="3764" class="Symbol">{</a><a id="3765" class="Argument">𝑆</a> <a id="3767" class="Symbol">=</a> <a id="3769" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3770" class="Symbol">}</a> <a id="3772" class="Keyword">using</a> <a id="3778" class="Symbol">(</a> <a id="3780" href="Varieties.Closure.html#3835" class="Datatype">S</a> <a id="3782" class="Symbol">;</a> <a id="3784" href="Varieties.Closure.html#4419" class="Datatype">P</a> <a id="3786" class="Symbol">;</a> <a id="3788" href="Varieties.Closure.html#5379" class="Datatype">V</a> <a id="3790" class="Symbol">)</a>
<a id="3792" class="Keyword">open</a> <a id="3797" class="Keyword">import</a> <a id="3804" href="Varieties.Preservation.html" class="Module">Varieties.Preservation</a>     <a id="3831" class="Symbol">{</a><a id="3832" class="Argument">𝑆</a> <a id="3834" class="Symbol">=</a> <a id="3836" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="3837" class="Symbol">}</a> <a id="3839" class="Keyword">using</a> <a id="3845" class="Symbol">(</a> <a id="3847" class="Keyword">module</a> <a id="3854" href="Varieties.Preservation.html#10458" class="Module">class-products-with-maps</a>
                                                     <a id="3932" class="Symbol">;</a> <a id="3934" href="Varieties.Preservation.html#20383" class="Function">class-ids-⇒</a> <a id="3946" class="Symbol">;</a> <a id="3948" href="Varieties.Preservation.html#20496" class="Function">class-ids</a> <a id="3958" class="Symbol">;</a> <a id="3960" href="Varieties.Preservation.html#9308" class="Function">SP⊆V&#39;</a><a id="3965" class="Symbol">)</a>
<a id="3967" class="Keyword">open</a> <a id="3972" href="Terms.Basic.html#1897" class="Module">Term</a>
<a id="3977" class="Keyword">open</a> <a id="3982" href="Varieties.Closure.html#3835" class="Module">S</a>
<a id="3984" class="Keyword">open</a> <a id="3989" href="Varieties.Closure.html#5379" class="Module">V</a>

<a id="𝓕"></a><a id="3992" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="𝓕⁺"></a><a id="3994" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="3997" class="Symbol">:</a> <a id="3999" href="Agda.Primitive.html#597" class="Postulate">Level</a>
<a id="4005" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="4007" class="Symbol">=</a> <a id="4009" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="4012" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a>
<a id="4014" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="4017" class="Symbol">=</a> <a id="4019" href="Varieties.FreeAlgebras.html#892" class="Primitive">lsuc</a> <a id="4024" class="Symbol">(</a><a id="4025" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="4028" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="4029" class="Symbol">)</a>    <a id="4034" class="Comment">-- (this will be the level of the relatively free algebra)</a>

<a id="4094" class="Markup">\end{code}</a><a id="4104" class="Background">


#### &lt;a id=&quot;the-free-algebra-in-theory&quot;&gt;The free algebra in theory&lt;/a&gt;

Recall, we proved in [the universal property](Terms.Basic.html#the-universal-property) section of the [Terms.Basic][] module that the term algebra `𝑻 X` is the absolutely free algebra in the class of all `𝑆`-structures. In this section, we formalize, for a given class `𝒦` of `𝑆`-algebras, the (relatively) free algebra in `S(P 𝒦)` over `X`.

We use the next definition to take a free algebra *for* a class `𝒦` and produce the free algebra *in* `𝒦`.

`Θ(𝒦, 𝑨) := {θ ∈ Con 𝑨 : 𝑨 / θ ∈ (S 𝒦)}` &amp;nbsp; &amp;nbsp; and &amp;nbsp; &amp;nbsp; `ψ(𝒦, 𝑨) := ⋂ Θ(𝒦, 𝑨)`.

Notice that `Θ(𝒦, 𝑨)` may be empty, in which case `ψ(𝒦, 𝑨) = 1` and then `𝑨 / ψ(𝒦, 𝑨)` is trivial.

The free algebra is constructed by applying the above definitions to the special case in which `𝑨` is the term algebra `𝑻 X` of `𝑆`-terms over `X`.

Since `𝑻 X` is free for (and in) the class of all `𝑆`-algebras, it follows that `𝑻 X` is free for every class `𝒦` of `𝑆`-algebras. Of course, `𝑻 X` is not necessarily a member of `𝒦`, but if we form the quotient of `𝑻 X` modulo the congruence `ψ(𝒦, 𝑻 X)`, which we denote by `𝔉 := (𝑻 X) / ψ(𝒦, 𝑻 X)`, then it&#39;s not hard to see that `𝔉` is a subdirect product of the algebras in `{(𝑻 𝑋) / θ}`, where `θ` ranges over `Θ(𝒦, 𝑻 X)`, so `𝔉` belongs to `S(P 𝒦)`, and it follows that `𝔉` satisfies all the identities satisfied by all members of `𝒦`.  Indeed, for each pair `p q : 𝑻 X`, if `𝒦 ⊧ p ≈ q`, then `p` and `q` must belong to the same `ψ(𝒦, 𝑻 X)`-class, so `p` and `q` are identified in the quotient `𝔉`.

The `𝔉` that we have just defined is called the **free algebra over** `𝒦` **generated by** `X` and (because of what we just observed) we may say that `𝔉` is free *in* `S(P 𝒦)`.&lt;sup&gt;[1](Varieties.FreeAlgebras.html#fn1)&lt;/sup&gt;

#### &lt;a id=&quot;the-free-algebra-in-agda&quot;&gt;The free algebra in Agda&lt;/a&gt;

Before we attempt to represent the free algebra in Agda we construct the congruence `ψ(𝒦, 𝑻 𝑋)` described above.
First, we represent the congruence relation `ψCon`, modulo which `𝑻 X` yields the relatively free algebra, `𝔉 𝒦 X := 𝑻 X ╱ ψCon`.  We let `ψ` be the collection of identities `(p, q)` satisfied by all subalgebras of algebras in `𝒦`.

</a><a id="6322" class="Markup">\begin{code}</a>

<a id="6336" class="Keyword">module</a> <a id="6343" href="Varieties.FreeAlgebras.html#6343" class="Module">_</a> <a id="6345" class="Symbol">{</a><a id="6346" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a> <a id="6348" class="Symbol">:</a> <a id="6350" href="Varieties.FreeAlgebras.html#1319" class="Primitive">Type</a> <a id="6355" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="6356" class="Symbol">}(</a><a id="6358" href="Varieties.FreeAlgebras.html#6358" class="Bound">𝒦</a> <a id="6360" class="Symbol">:</a> <a id="6362" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="6367" class="Symbol">(</a><a id="6368" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="6376" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="6378" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="6379" class="Symbol">)</a> <a id="6381" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="6382" class="Symbol">)</a> <a id="6384" class="Keyword">where</a>

 <a id="6392" href="Varieties.FreeAlgebras.html#6392" class="Function">ψ</a> <a id="6394" class="Symbol">:</a> <a id="6396" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="6401" class="Symbol">(</a><a id="6402" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="6404" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="6406" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a> <a id="6408" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="6410" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6412" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="6414" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="6416" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a> <a id="6418" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="6419" class="Symbol">)</a> <a id="6421" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a>
 <a id="6424" href="Varieties.FreeAlgebras.html#6392" class="Function">ψ</a> <a id="6426" class="Symbol">(</a><a id="6427" href="Varieties.FreeAlgebras.html#6427" class="Bound">p</a> <a id="6429" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6431" href="Varieties.FreeAlgebras.html#6431" class="Bound">q</a><a id="6432" class="Symbol">)</a> <a id="6434" class="Symbol">=</a> <a id="6436" class="Symbol">∀(</a><a id="6438" href="Varieties.FreeAlgebras.html#6438" class="Bound">𝑨</a> <a id="6440" class="Symbol">:</a> <a id="6442" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="6450" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="6452" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="6453" class="Symbol">)(</a><a id="6455" href="Varieties.FreeAlgebras.html#6455" class="Bound">sA</a> <a id="6458" class="Symbol">:</a> <a id="6460" href="Varieties.FreeAlgebras.html#6438" class="Bound">𝑨</a> <a id="6462" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6464" href="Varieties.Closure.html#3835" class="Datatype">S</a><a id="6465" class="Symbol">{</a><a id="6466" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="6467" class="Symbol">}{</a><a id="6469" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="6470" class="Symbol">}</a> <a id="6472" href="Varieties.FreeAlgebras.html#6358" class="Bound">𝒦</a><a id="6473" class="Symbol">)(</a><a id="6475" href="Varieties.FreeAlgebras.html#6475" class="Bound">h</a> <a id="6477" class="Symbol">:</a> <a id="6479" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a> <a id="6481" class="Symbol">→</a> <a id="6483" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="6485" href="Varieties.FreeAlgebras.html#6438" class="Bound">𝑨</a> <a id="6487" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="6489" class="Symbol">)</a>
                 <a id="6508" class="Symbol">→</a>  <a id="6511" class="Symbol">(</a><a id="6512" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="6522" href="Varieties.FreeAlgebras.html#6438" class="Bound">𝑨</a> <a id="6524" href="Varieties.FreeAlgebras.html#6475" class="Bound">h</a><a id="6525" class="Symbol">)</a> <a id="6527" href="Varieties.FreeAlgebras.html#6427" class="Bound">p</a> <a id="6529" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6531" class="Symbol">(</a><a id="6532" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="6542" href="Varieties.FreeAlgebras.html#6438" class="Bound">𝑨</a> <a id="6544" href="Varieties.FreeAlgebras.html#6475" class="Bound">h</a><a id="6545" class="Symbol">)</a> <a id="6547" href="Varieties.FreeAlgebras.html#6431" class="Bound">q</a>

<a id="6550" class="Markup">\end{code}</a><a id="6560" class="Background">

We convert the predicate ψ into a relation by [currying](https://en.wikipedia.org/wiki/Currying).

</a><a id="6661" class="Markup">\begin{code}</a>

 <a id="6676" href="Varieties.FreeAlgebras.html#6676" class="Function">ψRel</a> <a id="6681" class="Symbol">:</a> <a id="6683" href="Varieties.FreeAlgebras.html#1745" class="Function">BinRel</a> <a id="6690" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="6692" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="6694" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a> <a id="6696" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="6698" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a>
 <a id="6701" href="Varieties.FreeAlgebras.html#6676" class="Function">ψRel</a> <a id="6706" href="Varieties.FreeAlgebras.html#6706" class="Bound">p</a> <a id="6708" href="Varieties.FreeAlgebras.html#6708" class="Bound">q</a> <a id="6710" class="Symbol">=</a> <a id="6712" href="Varieties.FreeAlgebras.html#6392" class="Function">ψ</a> <a id="6714" class="Symbol">(</a><a id="6715" href="Varieties.FreeAlgebras.html#6706" class="Bound">p</a> <a id="6717" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6719" href="Varieties.FreeAlgebras.html#6708" class="Bound">q</a><a id="6720" class="Symbol">)</a>

<a id="6723" class="Markup">\end{code}</a><a id="6733" class="Background">

To express `ψRel` as a congruence of the term algebra `𝑻 X`, we must prove that

1. `ψRel` is compatible with the operations of `𝑻 X` (which are jsut the terms themselves) and
2. `ψRel` it is an equivalence relation.

</a><a id="6953" class="Markup">\begin{code}</a>

 <a id="6968" class="Keyword">open</a> <a id="6973" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a>

 <a id="6987" href="Varieties.FreeAlgebras.html#6987" class="Function">ψcompatible</a> <a id="6999" class="Symbol">:</a> <a id="7001" href="Foundations.Welldefined.html#2798" class="Function">swelldef</a> <a id="7010" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="7012" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="7014" class="Symbol">→</a> <a id="7016" href="Algebras.Basic.html#12721" class="Function">compatible</a> <a id="7027" class="Symbol">(</a><a id="7028" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="7030" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a><a id="7031" class="Symbol">)</a> <a id="7033" href="Varieties.FreeAlgebras.html#6676" class="Function">ψRel</a>
 <a id="7039" href="Varieties.FreeAlgebras.html#6987" class="Function">ψcompatible</a> <a id="7051" href="Varieties.FreeAlgebras.html#7051" class="Bound">wd</a> <a id="7054" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7056" class="Symbol">{</a><a id="7057" href="Varieties.FreeAlgebras.html#7057" class="Bound">p</a><a id="7058" class="Symbol">}</a> <a id="7060" class="Symbol">{</a><a id="7061" href="Varieties.FreeAlgebras.html#7061" class="Bound">q</a><a id="7062" class="Symbol">}</a> <a id="7064" href="Varieties.FreeAlgebras.html#7064" class="Bound">ψpq</a> <a id="7068" href="Varieties.FreeAlgebras.html#7068" class="Bound">𝑨</a> <a id="7070" href="Varieties.FreeAlgebras.html#7070" class="Bound">sA</a> <a id="7073" href="Varieties.FreeAlgebras.html#7073" class="Bound">h</a> <a id="7075" class="Symbol">=</a> <a id="7077" href="Varieties.FreeAlgebras.html#7127" class="Function">γ</a>
  <a id="7081" class="Keyword">where</a>
  <a id="7089" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7091" class="Symbol">:</a> <a id="7093" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="7097" class="Symbol">(</a><a id="7098" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="7100" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a><a id="7101" class="Symbol">)</a> <a id="7103" href="Varieties.FreeAlgebras.html#7068" class="Bound">𝑨</a>
  <a id="7107" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7109" class="Symbol">=</a> <a id="7111" href="Terms.Properties.html#3226" class="Function">lift-hom</a> <a id="7120" href="Varieties.FreeAlgebras.html#7068" class="Bound">𝑨</a> <a id="7122" href="Varieties.FreeAlgebras.html#7073" class="Bound">h</a>

  <a id="7127" href="Varieties.FreeAlgebras.html#7127" class="Function">γ</a> <a id="7129" class="Symbol">:</a> <a id="7131" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7133" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7135" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7137" class="Symbol">((</a><a id="7139" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7141" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="7143" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="7145" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a><a id="7146" class="Symbol">)</a> <a id="7148" href="Varieties.FreeAlgebras.html#7057" class="Bound">p</a><a id="7149" class="Symbol">)</a> <a id="7151" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7153" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7155" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7157" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7159" class="Symbol">((</a><a id="7161" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7163" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="7165" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="7167" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a><a id="7168" class="Symbol">)</a> <a id="7170" href="Varieties.FreeAlgebras.html#7061" class="Bound">q</a><a id="7171" class="Symbol">)</a>

  <a id="7176" href="Varieties.FreeAlgebras.html#7127" class="Function">γ</a> <a id="7178" class="Symbol">=</a> <a id="7180" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7182" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7184" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7186" class="Symbol">((</a><a id="7188" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7190" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="7192" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="7194" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a><a id="7195" class="Symbol">)</a> <a id="7197" href="Varieties.FreeAlgebras.html#7057" class="Bound">p</a><a id="7198" class="Symbol">)</a>  <a id="7201" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="7204" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="7206" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7208" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="7210" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7212" href="Varieties.FreeAlgebras.html#7057" class="Bound">p</a> <a id="7214" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
      <a id="7222" class="Symbol">(</a><a id="7223" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7225" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="7227" href="Varieties.FreeAlgebras.html#7068" class="Bound">𝑨</a><a id="7228" class="Symbol">)</a> <a id="7230" class="Symbol">(</a><a id="7231" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7233" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7235" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7237" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7239" href="Varieties.FreeAlgebras.html#7057" class="Bound">p</a><a id="7240" class="Symbol">)</a>  <a id="7243" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="7246" href="Varieties.FreeAlgebras.html#7051" class="Bound">wd</a> <a id="7249" class="Symbol">(</a><a id="7250" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7252" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="7254" href="Varieties.FreeAlgebras.html#7068" class="Bound">𝑨</a><a id="7255" class="Symbol">)(</a><a id="7257" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7259" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7261" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7263" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7265" href="Varieties.FreeAlgebras.html#7057" class="Bound">p</a><a id="7266" class="Symbol">)(</a><a id="7268" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7270" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7272" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7274" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7276" href="Varieties.FreeAlgebras.html#7061" class="Bound">q</a><a id="7277" class="Symbol">)(λ</a> <a id="7281" href="Varieties.FreeAlgebras.html#7281" class="Bound">x</a> <a id="7283" class="Symbol">→</a> <a id="7285" href="Varieties.FreeAlgebras.html#7064" class="Bound">ψpq</a> <a id="7289" href="Varieties.FreeAlgebras.html#7281" class="Bound">x</a> <a id="7291" href="Varieties.FreeAlgebras.html#7068" class="Bound">𝑨</a> <a id="7293" href="Varieties.FreeAlgebras.html#7070" class="Bound">sA</a> <a id="7296" href="Varieties.FreeAlgebras.html#7073" class="Bound">h</a><a id="7297" class="Symbol">)</a> <a id="7299" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
      <a id="7307" class="Symbol">(</a><a id="7308" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7310" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="7312" href="Varieties.FreeAlgebras.html#7068" class="Bound">𝑨</a><a id="7313" class="Symbol">)</a> <a id="7315" class="Symbol">(</a><a id="7316" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7318" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7320" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7322" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7324" href="Varieties.FreeAlgebras.html#7061" class="Bound">q</a><a id="7325" class="Symbol">)</a>  <a id="7328" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="7331" class="Symbol">(</a><a id="7332" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="7334" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7336" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="7338" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7340" href="Varieties.FreeAlgebras.html#7061" class="Bound">q</a><a id="7341" class="Symbol">)</a><a id="7342" href="Overture.Preliminaries.html#4848" class="Function Operator">⁻¹</a> <a id="7345" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
      <a id="7353" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7355" href="Varieties.FreeAlgebras.html#7089" class="Function">φ</a> <a id="7357" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="7359" class="Symbol">((</a><a id="7361" href="Varieties.FreeAlgebras.html#7054" class="Bound">𝑓</a> <a id="7363" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="7365" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="7367" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a><a id="7368" class="Symbol">)</a> <a id="7370" href="Varieties.FreeAlgebras.html#7061" class="Bound">q</a><a id="7371" class="Symbol">)</a>  <a id="7374" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>

 <a id="7378" href="Varieties.FreeAlgebras.html#7378" class="Function">ψIsEquivalence</a> <a id="7393" class="Symbol">:</a> <a id="7395" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="7409" href="Varieties.FreeAlgebras.html#6676" class="Function">ψRel</a>
 <a id="7415" href="Varieties.FreeAlgebras.html#7378" class="Function">ψIsEquivalence</a> <a id="7430" class="Symbol">=</a> <a id="7432" class="Keyword">record</a> <a id="7439" class="Symbol">{</a> <a id="7441" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="7446" class="Symbol">=</a> <a id="7448" class="Symbol">λ</a> <a id="7450" href="Varieties.FreeAlgebras.html#7450" class="Bound">𝑨</a> <a id="7452" href="Varieties.FreeAlgebras.html#7452" class="Bound">sA</a> <a id="7455" href="Varieties.FreeAlgebras.html#7455" class="Bound">h</a> <a id="7457" class="Symbol">→</a> <a id="7459" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
                         <a id="7489" class="Symbol">;</a> <a id="7491" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="7495" class="Symbol">=</a> <a id="7497" class="Symbol">λ</a> <a id="7499" href="Varieties.FreeAlgebras.html#7499" class="Bound">x</a> <a id="7501" href="Varieties.FreeAlgebras.html#7501" class="Bound">𝑨</a> <a id="7503" href="Varieties.FreeAlgebras.html#7503" class="Bound">sA</a> <a id="7506" href="Varieties.FreeAlgebras.html#7506" class="Bound">h</a> <a id="7508" class="Symbol">→</a> <a id="7510" class="Symbol">(</a><a id="7511" href="Varieties.FreeAlgebras.html#7499" class="Bound">x</a> <a id="7513" href="Varieties.FreeAlgebras.html#7501" class="Bound">𝑨</a> <a id="7515" href="Varieties.FreeAlgebras.html#7503" class="Bound">sA</a> <a id="7518" href="Varieties.FreeAlgebras.html#7506" class="Bound">h</a><a id="7519" class="Symbol">)</a><a id="7520" href="Overture.Preliminaries.html#4848" class="Function Operator">⁻¹</a>
                         <a id="7548" class="Symbol">;</a> <a id="7550" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="7556" class="Symbol">=</a> <a id="7558" class="Symbol">λ</a> <a id="7560" href="Varieties.FreeAlgebras.html#7560" class="Bound">pψq</a> <a id="7564" href="Varieties.FreeAlgebras.html#7564" class="Bound">qψr</a> <a id="7568" href="Varieties.FreeAlgebras.html#7568" class="Bound">𝑨</a> <a id="7570" href="Varieties.FreeAlgebras.html#7570" class="Bound">sA</a> <a id="7573" href="Varieties.FreeAlgebras.html#7573" class="Bound">h</a> <a id="7575" class="Symbol">→</a> <a id="7577" class="Symbol">(</a><a id="7578" href="Varieties.FreeAlgebras.html#7560" class="Bound">pψq</a> <a id="7582" href="Varieties.FreeAlgebras.html#7568" class="Bound">𝑨</a> <a id="7584" href="Varieties.FreeAlgebras.html#7570" class="Bound">sA</a> <a id="7587" href="Varieties.FreeAlgebras.html#7573" class="Bound">h</a><a id="7588" class="Symbol">)</a> <a id="7590" href="Overture.Preliminaries.html#5177" class="Function Operator">∙</a> <a id="7592" class="Symbol">(</a><a id="7593" href="Varieties.FreeAlgebras.html#7564" class="Bound">qψr</a> <a id="7597" href="Varieties.FreeAlgebras.html#7568" class="Bound">𝑨</a> <a id="7599" href="Varieties.FreeAlgebras.html#7570" class="Bound">sA</a> <a id="7602" href="Varieties.FreeAlgebras.html#7573" class="Bound">h</a><a id="7603" class="Symbol">)</a> <a id="7605" class="Symbol">}</a>
<a id="7607" class="Markup">\end{code}</a><a id="7617" class="Background">

We have collected all the pieces necessary to express the collection of identities satisfied by all subalgebras of algebras in the class as a congruence relation of the term algebra. We call this congruence `ψCon` and define it using the Congruence constructor `mkcon`.

</a><a id="7890" class="Markup">\begin{code}</a>

 <a id="7905" href="Varieties.FreeAlgebras.html#7905" class="Function">ψCon</a> <a id="7910" class="Symbol">:</a> <a id="7912" href="Foundations.Welldefined.html#2798" class="Function">swelldef</a> <a id="7921" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="7923" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="7925" class="Symbol">→</a> <a id="7927" href="Algebras.Congruences.html#1976" class="Function">Con</a> <a id="7931" class="Symbol">(</a><a id="7932" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="7934" href="Varieties.FreeAlgebras.html#6346" class="Bound">X</a><a id="7935" class="Symbol">)</a>
 <a id="7938" href="Varieties.FreeAlgebras.html#7905" class="Function">ψCon</a> <a id="7943" href="Varieties.FreeAlgebras.html#7943" class="Bound">wd</a> <a id="7946" class="Symbol">=</a> <a id="7948" href="Varieties.FreeAlgebras.html#6676" class="Function">ψRel</a> <a id="7953" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7955" href="Algebras.Congruences.html#1878" class="InductiveConstructor">mkcon</a> <a id="7961" href="Varieties.FreeAlgebras.html#7378" class="Function">ψIsEquivalence</a> <a id="7976" class="Symbol">(</a><a id="7977" href="Varieties.FreeAlgebras.html#6987" class="Function">ψcompatible</a> <a id="7989" href="Varieties.FreeAlgebras.html#7943" class="Bound">wd</a><a id="7991" class="Symbol">)</a>

<a id="7994" class="Markup">\end{code}</a><a id="8004" class="Background">





#### &lt;a id=&quot;hsp-theorem&quot;&gt;HSP Theorem&lt;/a&gt;

This section presents a formal proof of the Birkhoff HSP theorem.

To complete the proof of Birkhoff&#39;s HSP theorem, it remains to show that `Mod X (Th (V 𝒦))` is contained in `V 𝒦`; that is, every algebra that models the equations in `Th (V 𝒦)` belongs to `V 𝒦`.  This will prove that `V 𝒦` is an equational class.  (The converse, that every equational class is a variety was already proved; see the remarks at the end of this module.)

We accomplish this goal by constructing an algebra `𝔽` with the following properties:

1. `𝔽 ∈ V 𝒦` and

2. Every `𝑨 ∈ Mod X (Th (V 𝒦))` is a homomorphic image of `𝔽`.

We denote by `ℭ` the product of all subalgebras of algebras in `𝒦`, and by `homℭ` the homomorphism from `𝑻 X` to `ℭ` defined as follows: `homℭ := ⨅-hom-co (𝑻 X) 𝔄s hom𝔄`.

Here, `⨅-hom-co` (defined in [Homomorphisms.Basic](Homomorphisms.Basic.html#product-homomorphisms)) takes the term algebra `𝑻 X`, a family `{𝔄s : I → Algebra α 𝑆}` of `𝑆`-algebras, and a family `hom𝔄 : ∀ i → hom (𝑻 X) (𝔄s i)` of homomorphisms and constructs the natural homomorphism `homℭ` from `𝑻 X` to the product `ℭ := ⨅ 𝔄`.  The homomorphism `homℭ : hom (𝑻 X) (⨅ ℭ)` is natural in the sense that the `i`-th component of the image of `𝑡 : Term X` under `homℭ` is the image `∣ hom𝔄 i ∣ 𝑡` of 𝑡 under the i-th homomorphism `hom𝔄 i`.





#### &lt;a id=&quot;F-in-classproduct&quot;&gt;𝔽 ≤  ⨅ S(𝒦)&lt;/a&gt;
Now we come to a step in the Agda formalization of Birkhoff&#39;s theorem that is highly nontrivial. We must prove that the free algebra embeds in the product ℭ of all subalgebras of algebras in the class `𝒦`.  This is really the only stage in the proof of Birkhoff&#39;s theorem that requires the truncation assumption that `ℭ` be a *set* (that is, `ℭ` has the [UIP][] property).  We will also need to assume several local function extensionality postulates and, as a result, the next submodule will take as given the parameter `fe : (∀ a b → funext a b)`.  This allows us to postulate local function extensionality when and where we need it in the proof. For example, if we want to assume function extensionality at universe levels 𝓥 and α, we simply apply `fe` to those universes: `fe 𝓥 α`. (Earlier versions of the library used just a single *global* function extensionality postulate at the start of most modules, but we have since decided to exchange that elegant but crude option for greater precision and transparency.)

</a><a id="10437" class="Markup">\begin{code}</a>

<a id="10451" class="Keyword">module</a> <a id="10458" href="Varieties.FreeAlgebras.html#10458" class="Module">_</a> <a id="10460" class="Symbol">{</a><a id="10461" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="10464" class="Symbol">:</a> <a id="10466" href="Foundations.Extensionality.html#2398" class="Function">DFunExt</a><a id="10473" class="Symbol">}{</a><a id="10475" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="10478" class="Symbol">:</a> <a id="10480" href="Foundations.Welldefined.html#3096" class="Function">SwellDef</a><a id="10488" class="Symbol">}{</a><a id="10490" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="10492" class="Symbol">:</a> <a id="10494" href="Varieties.FreeAlgebras.html#1319" class="Primitive">Type</a> <a id="10499" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="10500" class="Symbol">}</a> <a id="10502" class="Symbol">{</a><a id="10503" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a> <a id="10505" class="Symbol">:</a> <a id="10507" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="10512" class="Symbol">(</a><a id="10513" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="10521" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="10523" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="10524" class="Symbol">)</a> <a id="10526" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="10527" class="Symbol">}</a> <a id="10529" class="Keyword">where</a>

 <a id="10537" class="Keyword">open</a> <a id="10542" href="Varieties.Preservation.html#10458" class="Module">class-products-with-maps</a> <a id="10567" class="Symbol">{</a><a id="10568" class="Argument">X</a> <a id="10570" class="Symbol">=</a> <a id="10572" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="10573" class="Symbol">}{</a><a id="10575" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="10578" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="10580" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="10581" class="Symbol">}{</a><a id="10583" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="10586" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="10589" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a><a id="10591" class="Symbol">}{</a><a id="10593" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="10596" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="10598" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="10599" class="Symbol">}</a> <a id="10601" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>

<a id="10604" class="Markup">\end{code}</a><a id="10614" class="Background">

We begin by constructing `ℭ`, using the techniques described in the section on &lt;a href=&quot;https://ualib.gitlab.io/Varieties.Varieties.html#products-of-classes&quot;&gt;products of classes&lt;/a&gt;.

</a><a id="10800" class="Markup">\begin{code}</a>

  <a id="10816" class="Comment">-- ℭ is the product of all subalgebras of algebras in 𝒦.</a>
 <a id="10874" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a> <a id="10876" class="Symbol">:</a> <a id="10878" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="10886" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="10888" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a>
 <a id="10891" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a> <a id="10893" class="Symbol">=</a> <a id="10895" href="Algebras.Products.html#1756" class="Function">⨅</a> <a id="10897" href="Varieties.Preservation.html#11874" class="Function">𝔄&#39;</a>

<a id="10901" class="Markup">\end{code}</a><a id="10911" class="Background">

Observe that the inhabitants of `ℭ` are maps from `ℑ` to `{𝔄 i : i ∈ ℑ}`.  A homomorphism from `𝑻 X` to `ℭ` is obtained as follows.

</a><a id="11046" class="Markup">\begin{code}</a>

 <a id="11061" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="11066" class="Symbol">:</a> <a id="11068" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="11072" class="Symbol">(</a><a id="11073" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="11075" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="11076" class="Symbol">)</a> <a id="11078" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a>
 <a id="11081" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="11086" class="Symbol">=</a> <a id="11088" href="Homomorphisms.Basic.html#11043" class="Function">⨅-hom-co</a> <a id="11097" href="Varieties.Preservation.html#11874" class="Function">𝔄&#39;</a> <a id="11100" class="Symbol">(</a><a id="11101" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="11104" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="11106" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="11107" class="Symbol">){</a><a id="11109" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="11110" class="Symbol">}(</a><a id="11112" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="11114" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="11115" class="Symbol">)</a> <a id="11117" class="Symbol">λ</a> <a id="11119" href="Varieties.FreeAlgebras.html#11119" class="Bound">i</a> <a id="11121" class="Symbol">→</a> <a id="11123" href="Terms.Properties.html#3226" class="Function">lift-hom</a> <a id="11132" class="Symbol">(</a><a id="11133" href="Varieties.Preservation.html#11874" class="Function">𝔄&#39;</a> <a id="11136" href="Varieties.FreeAlgebras.html#11119" class="Bound">i</a><a id="11137" class="Symbol">)(</a><a id="11139" href="Varieties.FreeAlgebras.html#1569" class="Field">snd</a> <a id="11143" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="11145" href="Varieties.FreeAlgebras.html#11119" class="Bound">i</a> <a id="11147" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a><a id="11148" class="Symbol">)</a>

<a id="11151" class="Markup">\end{code}</a><a id="11161" class="Background">


#### &lt;a id=&quot;the-free-algebra&quot;&gt;The free algebra&lt;/a&gt;

 As mentioned above, the initial version of the [Agda UniversalAlgebra][] used the free algebra `𝔉` developed above.  However, our new, more direct proof uses the algebra `𝔽`, which we now define, along with the natural epimorphism `epi𝔽 : epi (𝑻 X) 𝔽` from `𝑻 X` to `𝔽`.

 We now define the algebra `𝔽`, which plays the role of the free algebra, along with the natural epimorphism `epi𝔽 : epi (𝑻 X) 𝔽` from `𝑻 X` to `𝔽`.

</a><a id="11639" class="Markup">\begin{code}</a>

 <a id="11654" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="11656" class="Symbol">:</a> <a id="11658" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="11666" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="11669" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a>
 <a id="11672" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="11674" class="Symbol">=</a> <a id="11676" href="Homomorphisms.Basic.html#8387" class="Function Operator">ker[</a> <a id="11681" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="11683" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="11685" href="Homomorphisms.Basic.html#8387" class="Function Operator">⇒</a> <a id="11687" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a> <a id="11689" href="Homomorphisms.Basic.html#8387" class="Function Operator">]</a> <a id="11691" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="11696" href="Homomorphisms.Basic.html#8387" class="Function Operator">↾</a> <a id="11698" class="Symbol">(</a><a id="11699" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="11702" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="11704" class="Symbol">(</a><a id="11705" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="11708" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="11709" class="Symbol">))</a>

 <a id="11714" href="Varieties.FreeAlgebras.html#11714" class="Function">epi𝔽</a> <a id="11719" class="Symbol">:</a> <a id="11721" href="Homomorphisms.Basic.html#6302" class="Function">epi</a> <a id="11725" class="Symbol">(</a><a id="11726" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="11728" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="11729" class="Symbol">)</a> <a id="11731" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a>
 <a id="11734" href="Varieties.FreeAlgebras.html#11714" class="Function">epi𝔽</a> <a id="11739" class="Symbol">=</a> <a id="11741" href="Homomorphisms.Basic.html#9846" class="Function">πker</a> <a id="11746" class="Symbol">(</a><a id="11747" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="11750" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="11752" class="Symbol">(</a><a id="11753" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="11756" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="11757" class="Symbol">))</a> <a id="11760" class="Symbol">{</a><a id="11761" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a><a id="11762" class="Symbol">}</a> <a id="11764" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a>

 <a id="11771" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="11776" class="Symbol">:</a> <a id="11778" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="11782" class="Symbol">(</a><a id="11783" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="11785" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="11786" class="Symbol">)</a> <a id="11788" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a>
 <a id="11791" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="11796" class="Symbol">=</a> <a id="11798" href="Homomorphisms.Basic.html#6769" class="Function">epi-to-hom</a> <a id="11809" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="11811" href="Varieties.FreeAlgebras.html#11714" class="Function">epi𝔽</a>

 <a id="11818" href="Varieties.FreeAlgebras.html#11818" class="Function">hom𝔽-is-epic</a> <a id="11831" class="Symbol">:</a> <a id="11833" href="Overture.Inverses.html#3166" class="Function">IsSurjective</a> <a id="11846" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="11848" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="11853" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a>
 <a id="11856" href="Varieties.FreeAlgebras.html#11818" class="Function">hom𝔽-is-epic</a> <a id="11869" class="Symbol">=</a> <a id="11871" href="Varieties.FreeAlgebras.html#1569" class="Field">snd</a> <a id="11875" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="11877" href="Varieties.FreeAlgebras.html#11714" class="Function">epi𝔽</a> <a id="11882" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a>

<a id="11885" class="Markup">\end{code}</a><a id="11895" class="Background">

We will need the following facts relating `homℭ`, `hom𝔽`, `and ψ`.

</a><a id="11965" class="Markup">\begin{code}</a>

 <a id="11980" href="Varieties.FreeAlgebras.html#11980" class="Function">ψlemma0</a> <a id="11988" class="Symbol">:</a> <a id="11990" class="Symbol">∀</a> <a id="11992" href="Varieties.FreeAlgebras.html#11992" class="Bound">p</a> <a id="11994" href="Varieties.FreeAlgebras.html#11994" class="Bound">q</a> <a id="11996" class="Symbol">→</a>  <a id="11999" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12001" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="12006" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12008" href="Varieties.FreeAlgebras.html#11992" class="Bound">p</a> <a id="12010" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12012" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12014" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="12019" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12021" href="Varieties.FreeAlgebras.html#11994" class="Bound">q</a>  <a id="12024" class="Symbol">→</a> <a id="12026" class="Symbol">(</a><a id="12027" href="Varieties.FreeAlgebras.html#11992" class="Bound">p</a> <a id="12029" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12031" href="Varieties.FreeAlgebras.html#11994" class="Bound">q</a><a id="12032" class="Symbol">)</a> <a id="12034" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="12036" href="Varieties.FreeAlgebras.html#6392" class="Function">ψ</a> <a id="12038" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>
 <a id="12041" href="Varieties.FreeAlgebras.html#11980" class="Function">ψlemma0</a> <a id="12049" href="Varieties.FreeAlgebras.html#12049" class="Bound">p</a> <a id="12051" href="Varieties.FreeAlgebras.html#12051" class="Bound">q</a> <a id="12053" href="Varieties.FreeAlgebras.html#12053" class="Bound">phomℭq</a> <a id="12060" href="Varieties.FreeAlgebras.html#12060" class="Bound">𝑨</a> <a id="12062" href="Varieties.FreeAlgebras.html#12062" class="Bound">sA</a> <a id="12065" href="Varieties.FreeAlgebras.html#12065" class="Bound">h</a> <a id="12067" class="Symbol">=</a> <a id="12069" href="Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a> <a id="12078" href="Varieties.FreeAlgebras.html#12053" class="Bound">phomℭq</a> <a id="12085" class="Symbol">(</a><a id="12086" href="Varieties.FreeAlgebras.html#12060" class="Bound">𝑨</a> <a id="12088" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12090" href="Varieties.FreeAlgebras.html#12062" class="Bound">sA</a> <a id="12093" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12095" href="Varieties.FreeAlgebras.html#12065" class="Bound">h</a><a id="12096" class="Symbol">)</a>

 <a id="12100" href="Varieties.FreeAlgebras.html#12100" class="Function">ψlemma0-ap</a> <a id="12111" class="Symbol">:</a> <a id="12113" class="Symbol">{</a><a id="12114" href="Varieties.FreeAlgebras.html#12114" class="Bound">𝑨</a> <a id="12116" class="Symbol">:</a> <a id="12118" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="12126" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="12128" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="12129" class="Symbol">}{</a><a id="12131" href="Varieties.FreeAlgebras.html#12131" class="Bound">h</a> <a id="12133" class="Symbol">:</a> <a id="12135" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="12137" class="Symbol">→</a> <a id="12139" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12141" href="Varieties.FreeAlgebras.html#12114" class="Bound">𝑨</a> <a id="12143" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="12144" class="Symbol">}</a> <a id="12146" class="Symbol">→</a> <a id="12148" href="Varieties.FreeAlgebras.html#12114" class="Bound">𝑨</a> <a id="12150" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="12152" href="Varieties.Closure.html#3835" class="Datatype">S</a><a id="12153" class="Symbol">{</a><a id="12154" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12155" class="Symbol">}{</a><a id="12157" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12158" class="Symbol">}</a> <a id="12160" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>
  <a id="12164" class="Symbol">→</a>           <a id="12176" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="12183" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12185" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="12190" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12192" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="12194" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="12201" class="Symbol">(</a><a id="12202" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="12212" href="Varieties.FreeAlgebras.html#12114" class="Bound">𝑨</a> <a id="12214" href="Varieties.FreeAlgebras.html#12131" class="Bound">h</a><a id="12215" class="Symbol">)</a>

 <a id="12219" href="Varieties.FreeAlgebras.html#12100" class="Function">ψlemma0-ap</a> <a id="12230" class="Symbol">{</a><a id="12231" href="Varieties.FreeAlgebras.html#12231" class="Bound">𝑨</a><a id="12232" class="Symbol">}{</a><a id="12234" href="Varieties.FreeAlgebras.html#12234" class="Bound">h</a><a id="12235" class="Symbol">}</a> <a id="12237" href="Varieties.FreeAlgebras.html#12237" class="Bound">skA</a> <a id="12241" class="Symbol">{</a><a id="12242" href="Varieties.FreeAlgebras.html#12242" class="Bound">p</a> <a id="12244" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12246" href="Varieties.FreeAlgebras.html#12246" class="Bound">q</a><a id="12247" class="Symbol">}</a> <a id="12249" href="Varieties.FreeAlgebras.html#12249" class="Bound">x</a> <a id="12251" class="Symbol">=</a> <a id="12253" href="Varieties.FreeAlgebras.html#12396" class="Function">γ</a> <a id="12255" class="Keyword">where</a>

  <a id="12264" href="Varieties.FreeAlgebras.html#12264" class="Function">ν</a> <a id="12266" class="Symbol">:</a> <a id="12268" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12270" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="12275" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12277" href="Varieties.FreeAlgebras.html#12242" class="Bound">p</a> <a id="12279" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12281" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12283" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="12288" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12290" href="Varieties.FreeAlgebras.html#12246" class="Bound">q</a>
  <a id="12294" href="Varieties.FreeAlgebras.html#12264" class="Function">ν</a> <a id="12296" class="Symbol">=</a> <a id="12298" href="Homomorphisms.Basic.html#10355" class="Function">ker-in-con</a> <a id="12309" class="Symbol">{</a><a id="12310" class="Argument">α</a> <a id="12312" class="Symbol">=</a> <a id="12314" class="Symbol">(</a><a id="12315" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="12318" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12319" class="Symbol">)}{</a><a id="12322" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="12325" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12326" class="Symbol">}{</a><a id="12328" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="12330" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="12331" class="Symbol">}{</a><a id="12333" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="12336" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="12338" class="Symbol">(</a><a id="12339" href="Varieties.FreeAlgebras.html#892" class="Primitive">lsuc</a> <a id="12344" class="Symbol">(</a><a id="12345" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="12348" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12349" class="Symbol">))}(</a><a id="12353" href="Homomorphisms.Basic.html#7979" class="Function">kercon</a> <a id="12360" class="Symbol">(</a><a id="12361" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="12364" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="12366" class="Symbol">(</a><a id="12367" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="12370" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12371" class="Symbol">))</a> <a id="12374" class="Symbol">{</a><a id="12375" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a><a id="12376" class="Symbol">}</a> <a id="12378" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a><a id="12382" class="Symbol">)</a> <a id="12384" class="Symbol">{</a><a id="12385" href="Varieties.FreeAlgebras.html#12242" class="Bound">p</a><a id="12386" class="Symbol">}{</a><a id="12388" href="Varieties.FreeAlgebras.html#12246" class="Bound">q</a><a id="12389" class="Symbol">}</a> <a id="12391" href="Varieties.FreeAlgebras.html#12249" class="Bound">x</a>

  <a id="12396" href="Varieties.FreeAlgebras.html#12396" class="Function">γ</a> <a id="12398" class="Symbol">:</a> <a id="12400" class="Symbol">(</a><a id="12401" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="12411" href="Varieties.FreeAlgebras.html#12231" class="Bound">𝑨</a> <a id="12413" href="Varieties.FreeAlgebras.html#12234" class="Bound">h</a><a id="12414" class="Symbol">)</a> <a id="12416" href="Varieties.FreeAlgebras.html#12242" class="Bound">p</a> <a id="12418" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12420" class="Symbol">(</a><a id="12421" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="12431" href="Varieties.FreeAlgebras.html#12231" class="Bound">𝑨</a> <a id="12433" href="Varieties.FreeAlgebras.html#12234" class="Bound">h</a><a id="12434" class="Symbol">)</a> <a id="12436" href="Varieties.FreeAlgebras.html#12246" class="Bound">q</a>
  <a id="12440" href="Varieties.FreeAlgebras.html#12396" class="Function">γ</a> <a id="12442" class="Symbol">=</a> <a id="12444" class="Symbol">((</a><a id="12446" href="Varieties.FreeAlgebras.html#11980" class="Function">ψlemma0</a> <a id="12454" href="Varieties.FreeAlgebras.html#12242" class="Bound">p</a> <a id="12456" href="Varieties.FreeAlgebras.html#12246" class="Bound">q</a><a id="12457" class="Symbol">)</a> <a id="12459" href="Varieties.FreeAlgebras.html#12264" class="Function">ν</a><a id="12460" class="Symbol">)</a> <a id="12462" href="Varieties.FreeAlgebras.html#12231" class="Bound">𝑨</a> <a id="12464" href="Varieties.FreeAlgebras.html#12237" class="Bound">skA</a> <a id="12468" href="Varieties.FreeAlgebras.html#12234" class="Bound">h</a>


<a id="12472" class="Markup">\end{code}</a><a id="12482" class="Background">

We now use `ψlemma0-ap` to prove that every map `h : X → ∣ 𝑨 ∣`, from `X` to a subalgebra `𝑨 ∈ S 𝒦` of `𝒦`, lifts to a homomorphism from `𝔽` to `𝑨`.

</a><a id="12634" class="Markup">\begin{code}</a>

 <a id="12649" href="Varieties.FreeAlgebras.html#12649" class="Function">𝔽-lift-hom</a> <a id="12660" class="Symbol">:</a> <a id="12662" class="Symbol">(</a><a id="12663" href="Varieties.FreeAlgebras.html#12663" class="Bound">𝑨</a> <a id="12665" class="Symbol">:</a> <a id="12667" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="12675" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="12677" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="12678" class="Symbol">)</a> <a id="12680" class="Symbol">→</a> <a id="12682" href="Varieties.FreeAlgebras.html#12663" class="Bound">𝑨</a> <a id="12684" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="12686" href="Varieties.Closure.html#3835" class="Datatype">S</a><a id="12687" class="Symbol">{</a><a id="12688" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12689" class="Symbol">}{</a><a id="12691" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12692" class="Symbol">}</a> <a id="12694" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a> <a id="12696" class="Symbol">→</a> <a id="12698" class="Symbol">(</a><a id="12699" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="12701" class="Symbol">→</a> <a id="12703" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="12705" href="Varieties.FreeAlgebras.html#12663" class="Bound">𝑨</a> <a id="12707" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="12708" class="Symbol">)</a> <a id="12710" class="Symbol">→</a> <a id="12712" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="12716" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="12718" href="Varieties.FreeAlgebras.html#12663" class="Bound">𝑨</a>
 <a id="12721" href="Varieties.FreeAlgebras.html#12649" class="Function">𝔽-lift-hom</a> <a id="12732" href="Varieties.FreeAlgebras.html#12732" class="Bound">𝑨</a> <a id="12734" href="Varieties.FreeAlgebras.html#12734" class="Bound">skA</a> <a id="12738" href="Varieties.FreeAlgebras.html#12738" class="Bound">h</a> <a id="12740" class="Symbol">=</a> <a id="12742" href="Varieties.FreeAlgebras.html#1509" class="Field">fst</a><a id="12745" class="Symbol">(</a><a id="12746" href="Homomorphisms.Noether.html#8583" class="Function">HomFactor</a> <a id="12756" class="Symbol">(</a><a id="12757" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="12760" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="12762" class="Symbol">(</a><a id="12763" href="Varieties.FreeAlgebras.html#892" class="Primitive">lsuc</a> <a id="12768" class="Symbol">(</a><a id="12769" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="12772" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="12773" class="Symbol">)))</a>  <a id="12778" href="Varieties.FreeAlgebras.html#12732" class="Bound">𝑨</a> <a id="12780" class="Symbol">(</a><a id="12781" href="Terms.Properties.html#3226" class="Function">lift-hom</a> <a id="12790" href="Varieties.FreeAlgebras.html#12732" class="Bound">𝑨</a> <a id="12792" href="Varieties.FreeAlgebras.html#12738" class="Bound">h</a><a id="12793" class="Symbol">)</a> <a id="12795" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="12800" class="Symbol">(</a><a id="12801" href="Varieties.FreeAlgebras.html#12100" class="Function">ψlemma0-ap</a> <a id="12812" href="Varieties.FreeAlgebras.html#12734" class="Bound">skA</a><a id="12815" class="Symbol">)</a> <a id="12817" href="Varieties.FreeAlgebras.html#11818" class="Function">hom𝔽-is-epic</a><a id="12829" class="Symbol">)</a>

<a id="12832" class="Markup">\end{code}</a><a id="12842" class="Background">


#### &lt;a id=&quot;k-models-psi&quot;&gt;𝒦 models ψ&lt;/a&gt;

The goal of this subsection is to prove that `𝒦` models `ψ 𝒦`. In other terms, for all pairs `(p , q) ∈ Term X × Term X` of terms, if `(p , q) ∈ ψ 𝒦`, then `𝒦 ⊫ p ≈ q`.

Next we define the lift of the natural embedding from `X` into 𝔽. We denote this homomorphism by `𝔑 : hom (𝑻 X) 𝔽` and define it as follows.

</a><a id="13199" class="Markup">\begin{code}</a>

 <a id="13214" class="Keyword">open</a> <a id="13219" href="Algebras.Congruences.html#1790" class="Module">IsCongruence</a>

 <a id="13234" href="Varieties.FreeAlgebras.html#13234" class="Function">X↪𝔽</a> <a id="13238" class="Symbol">:</a> <a id="13240" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="13242" class="Symbol">→</a> <a id="13244" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13246" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="13248" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a>
 <a id="13251" href="Varieties.FreeAlgebras.html#13234" class="Function">X↪𝔽</a> <a id="13255" href="Varieties.FreeAlgebras.html#13255" class="Bound">x</a> <a id="13257" class="Symbol">=</a> <a id="13259" href="Relations.Quotients.html#4973" class="Function Operator">⟪</a> <a id="13261" href="Terms.Basic.html#1938" class="InductiveConstructor">ℊ</a> <a id="13263" href="Varieties.FreeAlgebras.html#13255" class="Bound">x</a> <a id="13265" href="Relations.Quotients.html#4973" class="Function Operator">⟫</a> <a id="13267" class="Comment">-- (the implicit relation here is  ⟨ kercon (fe 𝓥 𝓕) ℭ homℭ ⟩ )</a>

 <a id="13333" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="13335" class="Symbol">:</a> <a id="13337" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="13341" class="Symbol">(</a><a id="13342" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="13344" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="13345" class="Symbol">)</a> <a id="13347" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a>
 <a id="13350" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="13352" class="Symbol">=</a> <a id="13354" href="Terms.Properties.html#3226" class="Function">lift-hom</a> <a id="13363" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="13365" href="Varieties.FreeAlgebras.html#13234" class="Function">X↪𝔽</a>

<a id="13370" class="Markup">\end{code}</a><a id="13380" class="Background">

It turns out that the homomorphism so defined is equivalent to `hom𝔽`.

</a><a id="13454" class="Markup">\begin{code}</a>
 <a id="13468" class="Keyword">open</a> <a id="13473" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a>

 <a id="13487" href="Varieties.FreeAlgebras.html#13487" class="Function">hom𝔽-is-lift-hom</a> <a id="13504" class="Symbol">:</a> <a id="13506" class="Symbol">∀</a> <a id="13508" href="Varieties.FreeAlgebras.html#13508" class="Bound">p</a> <a id="13510" class="Symbol">→</a> <a id="13512" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13514" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="13516" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13518" href="Varieties.FreeAlgebras.html#13508" class="Bound">p</a> <a id="13520" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="13522" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13524" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="13529" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13531" href="Varieties.FreeAlgebras.html#13508" class="Bound">p</a>
 <a id="13534" href="Varieties.FreeAlgebras.html#13487" class="Function">hom𝔽-is-lift-hom</a> <a id="13551" class="Symbol">(</a><a id="13552" href="Terms.Basic.html#1938" class="InductiveConstructor">ℊ</a> <a id="13554" href="Varieties.FreeAlgebras.html#13554" class="Bound">x</a><a id="13555" class="Symbol">)</a> <a id="13557" class="Symbol">=</a> <a id="13559" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
 <a id="13565" href="Varieties.FreeAlgebras.html#13487" class="Function">hom𝔽-is-lift-hom</a> <a id="13582" class="Symbol">(</a><a id="13583" href="Terms.Basic.html#1980" class="InductiveConstructor">node</a> <a id="13588" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13590" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a><a id="13591" class="Symbol">)</a> <a id="13593" class="Symbol">=</a>
  <a id="13597" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13599" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="13601" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13603" class="Symbol">(</a><a id="13604" href="Terms.Basic.html#1980" class="InductiveConstructor">node</a> <a id="13609" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13611" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a><a id="13612" class="Symbol">)</a>              <a id="13627" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="13630" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="13632" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="13634" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="13636" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13638" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a> <a id="13640" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
  <a id="13644" class="Symbol">(</a><a id="13645" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13647" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="13649" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a><a id="13650" class="Symbol">)(λ</a> <a id="13654" href="Varieties.FreeAlgebras.html#13654" class="Bound">i</a> <a id="13656" class="Symbol">→</a> <a id="13658" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13660" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="13662" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="13663" class="Symbol">(</a><a id="13664" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a> <a id="13666" href="Varieties.FreeAlgebras.html#13654" class="Bound">i</a><a id="13667" class="Symbol">))</a>     <a id="13674" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="13677" href="Varieties.FreeAlgebras.html#13785" class="Function">wd-proof</a> <a id="13686" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
  <a id="13690" class="Symbol">(</a><a id="13691" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13693" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="13695" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a><a id="13696" class="Symbol">)(λ</a> <a id="13700" href="Varieties.FreeAlgebras.html#13700" class="Bound">i</a> <a id="13702" class="Symbol">→</a> <a id="13704" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13706" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="13711" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13713" class="Symbol">(</a><a id="13714" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a> <a id="13716" href="Varieties.FreeAlgebras.html#13700" class="Bound">i</a><a id="13717" class="Symbol">))</a> <a id="13720" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="13723" class="Symbol">(</a><a id="13724" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="13726" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="13731" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="13733" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13735" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a><a id="13736" class="Symbol">)</a><a id="13737" href="Overture.Preliminaries.html#4848" class="Function Operator">⁻¹</a> <a id="13740" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
  <a id="13744" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13746" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="13751" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13753" class="Symbol">(</a><a id="13754" href="Terms.Basic.html#1980" class="InductiveConstructor">node</a> <a id="13759" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13761" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a><a id="13762" class="Symbol">)</a>           <a id="13774" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>
   <a id="13779" class="Keyword">where</a> <a id="13785" href="Varieties.FreeAlgebras.html#13785" class="Function">wd-proof</a> <a id="13794" class="Symbol">=</a> <a id="13796" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="13799" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="13801" class="Symbol">(</a><a id="13802" href="Varieties.FreeAlgebras.html#892" class="Primitive">lsuc</a> <a id="13807" class="Symbol">(</a><a id="13808" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="13811" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="13812" class="Symbol">))</a>
                    <a id="13835" class="Symbol">(</a><a id="13836" href="Varieties.FreeAlgebras.html#13588" class="Bound">𝑓</a> <a id="13838" href="Algebras.Basic.html#9889" class="Function Operator">̂</a> <a id="13840" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a><a id="13841" class="Symbol">)</a> <a id="13843" class="Symbol">(λ</a> <a id="13846" href="Varieties.FreeAlgebras.html#13846" class="Bound">i</a> <a id="13848" class="Symbol">→</a> <a id="13850" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13852" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="13854" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="13855" class="Symbol">(</a><a id="13856" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a> <a id="13858" href="Varieties.FreeAlgebras.html#13846" class="Bound">i</a><a id="13859" class="Symbol">))</a> <a id="13862" class="Symbol">(λ</a> <a id="13865" href="Varieties.FreeAlgebras.html#13865" class="Bound">i</a> <a id="13867" class="Symbol">→</a> <a id="13869" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13871" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="13876" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="13878" class="Symbol">(</a><a id="13879" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a> <a id="13881" href="Varieties.FreeAlgebras.html#13865" class="Bound">i</a><a id="13882" class="Symbol">))</a>
                    <a id="13905" class="Symbol">(λ</a> <a id="13908" href="Varieties.FreeAlgebras.html#13908" class="Bound">x</a> <a id="13910" class="Symbol">→</a> <a id="13912" href="Varieties.FreeAlgebras.html#13487" class="Function">hom𝔽-is-lift-hom</a><a id="13928" class="Symbol">(</a><a id="13929" href="Varieties.FreeAlgebras.html#13590" class="Bound">𝒕</a> <a id="13931" href="Varieties.FreeAlgebras.html#13908" class="Bound">x</a><a id="13932" class="Symbol">))</a>
<a id="13935" class="Markup">\end{code}</a><a id="13945" class="Background">

We need a three more lemmas before we are ready to tackle our main goal.

</a><a id="14021" class="Markup">\begin{code}</a>

 <a id="14036" href="Varieties.FreeAlgebras.html#14036" class="Function">ψlemma1</a> <a id="14044" class="Symbol">:</a> <a id="14046" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="14053" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14055" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="14057" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14059" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="14061" href="Varieties.FreeAlgebras.html#6392" class="Function">ψ</a> <a id="14063" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>
 <a id="14066" href="Varieties.FreeAlgebras.html#14036" class="Function">ψlemma1</a> <a id="14074" class="Symbol">{</a><a id="14075" href="Varieties.FreeAlgebras.html#14075" class="Bound">p</a> <a id="14077" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14079" href="Varieties.FreeAlgebras.html#14079" class="Bound">q</a><a id="14080" class="Symbol">}</a> <a id="14082" href="Varieties.FreeAlgebras.html#14082" class="Bound">𝔑pq</a> <a id="14086" href="Varieties.FreeAlgebras.html#14086" class="Bound">𝑨</a> <a id="14088" href="Varieties.FreeAlgebras.html#14088" class="Bound">sA</a> <a id="14091" href="Varieties.FreeAlgebras.html#14091" class="Bound">h</a> <a id="14093" class="Symbol">=</a> <a id="14095" href="Varieties.FreeAlgebras.html#14316" class="Function">γ</a>
  <a id="14099" class="Keyword">where</a>
   <a id="14108" href="Varieties.FreeAlgebras.html#14108" class="Function">f</a> <a id="14110" class="Symbol">:</a> <a id="14112" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="14116" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="14118" href="Varieties.FreeAlgebras.html#14086" class="Bound">𝑨</a>
   <a id="14123" href="Varieties.FreeAlgebras.html#14108" class="Function">f</a> <a id="14125" class="Symbol">=</a> <a id="14127" href="Varieties.FreeAlgebras.html#12649" class="Function">𝔽-lift-hom</a> <a id="14138" href="Varieties.FreeAlgebras.html#14086" class="Bound">𝑨</a> <a id="14140" href="Varieties.FreeAlgebras.html#14088" class="Bound">sA</a> <a id="14143" href="Varieties.FreeAlgebras.html#14091" class="Bound">h</a>

   <a id="14149" href="Varieties.FreeAlgebras.html#14149" class="Function">h&#39;</a> <a id="14152" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14154" class="Symbol">:</a> <a id="14156" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="14160" class="Symbol">(</a><a id="14161" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="14163" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="14164" class="Symbol">)</a> <a id="14166" href="Varieties.FreeAlgebras.html#14086" class="Bound">𝑨</a>
   <a id="14171" href="Varieties.FreeAlgebras.html#14149" class="Function">h&#39;</a> <a id="14174" class="Symbol">=</a> <a id="14176" href="Homomorphisms.Basic.html#3793" class="Function">∘-hom</a> <a id="14182" class="Symbol">(</a><a id="14183" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="14185" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="14186" class="Symbol">)</a> <a id="14188" href="Varieties.FreeAlgebras.html#14086" class="Bound">𝑨</a> <a id="14190" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="14192" href="Varieties.FreeAlgebras.html#14108" class="Function">f</a>
   <a id="14197" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14199" class="Symbol">=</a> <a id="14201" href="Terms.Properties.html#3226" class="Function">lift-hom</a> <a id="14210" href="Varieties.FreeAlgebras.html#14086" class="Bound">𝑨</a> <a id="14212" href="Varieties.FreeAlgebras.html#14091" class="Bound">h</a>

   <a id="14218" href="Varieties.FreeAlgebras.html#14218" class="Function">h≡φ</a> <a id="14222" class="Symbol">:</a> <a id="14224" class="Symbol">∀</a> <a id="14226" href="Varieties.FreeAlgebras.html#14226" class="Bound">t</a> <a id="14228" class="Symbol">→</a> <a id="14230" class="Symbol">(</a><a id="14231" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14233" href="Varieties.FreeAlgebras.html#14108" class="Function">f</a> <a id="14235" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14237" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="14239" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14241" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="14243" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="14244" class="Symbol">)</a> <a id="14246" href="Varieties.FreeAlgebras.html#14226" class="Bound">t</a> <a id="14248" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14250" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14252" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14254" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14256" href="Varieties.FreeAlgebras.html#14226" class="Bound">t</a>
   <a id="14261" href="Varieties.FreeAlgebras.html#14218" class="Function">h≡φ</a> <a id="14265" href="Varieties.FreeAlgebras.html#14265" class="Bound">t</a> <a id="14267" class="Symbol">=</a> <a id="14269" href="Terms.Properties.html#3631" class="Function">free-unique</a> <a id="14281" class="Symbol">(</a><a id="14282" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="14285" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="14287" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="14288" class="Symbol">)</a> <a id="14290" href="Varieties.FreeAlgebras.html#14086" class="Bound">𝑨</a> <a id="14292" href="Varieties.FreeAlgebras.html#14149" class="Function">h&#39;</a> <a id="14295" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14297" class="Symbol">(λ</a> <a id="14300" href="Varieties.FreeAlgebras.html#14300" class="Bound">x</a> <a id="14302" class="Symbol">→</a> <a id="14304" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="14308" class="Symbol">)</a> <a id="14310" href="Varieties.FreeAlgebras.html#14265" class="Bound">t</a>

   <a id="14316" href="Varieties.FreeAlgebras.html#14316" class="Function">γ</a> <a id="14318" class="Symbol">:</a> <a id="14320" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14322" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14324" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14326" href="Varieties.FreeAlgebras.html#14075" class="Bound">p</a> <a id="14328" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14330" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14332" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14334" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14336" href="Varieties.FreeAlgebras.html#14079" class="Bound">q</a>
   <a id="14341" href="Varieties.FreeAlgebras.html#14316" class="Function">γ</a> <a id="14343" class="Symbol">=</a> <a id="14345" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14347" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14349" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14351" href="Varieties.FreeAlgebras.html#14075" class="Bound">p</a>             <a id="14365" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14368" class="Symbol">(</a><a id="14369" href="Varieties.FreeAlgebras.html#14218" class="Function">h≡φ</a> <a id="14373" href="Varieties.FreeAlgebras.html#14075" class="Bound">p</a><a id="14374" class="Symbol">)</a><a id="14375" href="Overture.Preliminaries.html#4848" class="Function Operator">⁻¹</a> <a id="14378" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
       <a id="14387" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14389" href="Varieties.FreeAlgebras.html#14108" class="Function">f</a> <a id="14391" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14393" class="Symbol">(</a> <a id="14395" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14397" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="14399" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14401" href="Varieties.FreeAlgebras.html#14075" class="Bound">p</a> <a id="14403" class="Symbol">)</a>   <a id="14407" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14410" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="14415" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14417" href="Varieties.FreeAlgebras.html#14108" class="Function">f</a> <a id="14419" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14421" href="Varieties.FreeAlgebras.html#14082" class="Bound">𝔑pq</a> <a id="14425" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
       <a id="14434" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14436" href="Varieties.FreeAlgebras.html#14108" class="Function">f</a> <a id="14438" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14440" class="Symbol">(</a> <a id="14442" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14444" href="Varieties.FreeAlgebras.html#13333" class="Function">𝔑</a> <a id="14446" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14448" href="Varieties.FreeAlgebras.html#14079" class="Bound">q</a> <a id="14450" class="Symbol">)</a>   <a id="14454" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14457" href="Varieties.FreeAlgebras.html#14218" class="Function">h≡φ</a> <a id="14461" href="Varieties.FreeAlgebras.html#14079" class="Bound">q</a> <a id="14463" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
       <a id="14472" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14474" href="Varieties.FreeAlgebras.html#14152" class="Function">φ</a> <a id="14476" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14478" href="Varieties.FreeAlgebras.html#14079" class="Bound">q</a>             <a id="14492" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>


 <a id="14497" href="Varieties.FreeAlgebras.html#14497" class="Function">ψlemma2</a> <a id="14505" class="Symbol">:</a> <a id="14507" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="14514" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14516" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="14521" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="14523" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="14525" href="Varieties.FreeAlgebras.html#6392" class="Function">ψ</a> <a id="14527" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>
 <a id="14530" href="Varieties.FreeAlgebras.html#14497" class="Function">ψlemma2</a> <a id="14538" class="Symbol">{</a><a id="14539" href="Varieties.FreeAlgebras.html#14539" class="Bound">p</a> <a id="14541" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14543" href="Varieties.FreeAlgebras.html#14543" class="Bound">q</a><a id="14544" class="Symbol">}</a> <a id="14546" href="Varieties.FreeAlgebras.html#14546" class="Bound">x</a> <a id="14548" class="Symbol">=</a> <a id="14550" href="Varieties.FreeAlgebras.html#14036" class="Function">ψlemma1</a> <a id="14558" class="Symbol">{</a><a id="14559" href="Varieties.FreeAlgebras.html#14539" class="Bound">p</a> <a id="14561" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14563" href="Varieties.FreeAlgebras.html#14543" class="Bound">q</a><a id="14564" class="Symbol">}</a> <a id="14566" href="Varieties.FreeAlgebras.html#14581" class="Function">γ</a>
   <a id="14571" class="Keyword">where</a>
    <a id="14581" href="Varieties.FreeAlgebras.html#14581" class="Function">γ</a> <a id="14583" class="Symbol">:</a> <a id="14585" class="Symbol">(</a><a id="14586" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="14596" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="14598" href="Varieties.FreeAlgebras.html#13234" class="Function">X↪𝔽</a><a id="14601" class="Symbol">)</a> <a id="14603" href="Varieties.FreeAlgebras.html#14539" class="Bound">p</a> <a id="14605" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14607" class="Symbol">(</a><a id="14608" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="14618" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="14620" href="Varieties.FreeAlgebras.html#13234" class="Function">X↪𝔽</a><a id="14623" class="Symbol">)</a> <a id="14625" href="Varieties.FreeAlgebras.html#14543" class="Bound">q</a>
    <a id="14631" href="Varieties.FreeAlgebras.html#14581" class="Function">γ</a> <a id="14633" class="Symbol">=</a> <a id="14635" class="Symbol">(</a><a id="14636" href="Varieties.FreeAlgebras.html#13487" class="Function">hom𝔽-is-lift-hom</a> <a id="14653" href="Varieties.FreeAlgebras.html#14539" class="Bound">p</a><a id="14654" class="Symbol">)</a> <a id="14656" href="Overture.Preliminaries.html#5177" class="Function Operator">∙</a> <a id="14658" href="Varieties.FreeAlgebras.html#14546" class="Bound">x</a> <a id="14660" href="Overture.Preliminaries.html#5177" class="Function Operator">∙</a> <a id="14662" class="Symbol">(</a><a id="14663" href="Varieties.FreeAlgebras.html#13487" class="Function">hom𝔽-is-lift-hom</a> <a id="14680" href="Varieties.FreeAlgebras.html#14543" class="Bound">q</a><a id="14681" class="Symbol">)</a><a id="14682" href="Overture.Preliminaries.html#4848" class="Function Operator">⁻¹</a>


 <a id="14688" href="Varieties.FreeAlgebras.html#14688" class="Function">ψlemma3</a> <a id="14696" class="Symbol">:</a> <a id="14698" class="Symbol">∀</a> <a id="14700" href="Varieties.FreeAlgebras.html#14700" class="Bound">p</a> <a id="14702" href="Varieties.FreeAlgebras.html#14702" class="Bound">q</a> <a id="14704" class="Symbol">→</a> <a id="14706" class="Symbol">(</a><a id="14707" href="Varieties.FreeAlgebras.html#14700" class="Bound">p</a> <a id="14709" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14711" href="Varieties.FreeAlgebras.html#14702" class="Bound">q</a><a id="14712" class="Symbol">)</a> <a id="14714" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="14716" href="Varieties.FreeAlgebras.html#6392" class="Function">ψ</a><a id="14717" class="Symbol">{</a><a id="14718" class="Argument">X</a> <a id="14720" class="Symbol">=</a> <a id="14722" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="14723" class="Symbol">}</a> <a id="14725" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a> <a id="14727" class="Symbol">→</a> <a id="14729" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a> <a id="14731" href="Varieties.EquationalLogic.html#2637" class="Function Operator">⊫</a> <a id="14733" href="Varieties.FreeAlgebras.html#14700" class="Bound">p</a> <a id="14735" href="Varieties.EquationalLogic.html#2637" class="Function Operator">≈</a> <a id="14737" href="Varieties.FreeAlgebras.html#14702" class="Bound">q</a>
 <a id="14740" href="Varieties.FreeAlgebras.html#14688" class="Function">ψlemma3</a> <a id="14748" href="Varieties.FreeAlgebras.html#14748" class="Bound">p</a> <a id="14750" href="Varieties.FreeAlgebras.html#14750" class="Bound">q</a> <a id="14752" href="Varieties.FreeAlgebras.html#14752" class="Bound">pψq</a> <a id="14756" class="Symbol">{</a><a id="14757" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a><a id="14758" class="Symbol">}</a> <a id="14760" href="Varieties.FreeAlgebras.html#14760" class="Bound">kA</a> <a id="14763" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a> <a id="14765" class="Symbol">=</a> <a id="14767" href="Varieties.FreeAlgebras.html#14784" class="Function">goal</a>
   <a id="14775" class="Keyword">where</a>
   <a id="14784" href="Varieties.FreeAlgebras.html#14784" class="Function">goal</a> <a id="14789" class="Symbol">:</a> <a id="14791" class="Symbol">(</a><a id="14792" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="14794" href="Terms.Operations.html#2805" class="Function Operator">⟦</a> <a id="14796" href="Varieties.FreeAlgebras.html#14748" class="Bound">p</a> <a id="14798" href="Terms.Operations.html#2805" class="Function Operator">⟧</a><a id="14799" class="Symbol">)</a> <a id="14801" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a> <a id="14803" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14805" class="Symbol">(</a><a id="14806" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="14808" href="Terms.Operations.html#2805" class="Function Operator">⟦</a> <a id="14810" href="Varieties.FreeAlgebras.html#14750" class="Bound">q</a> <a id="14812" href="Terms.Operations.html#2805" class="Function Operator">⟧</a><a id="14813" class="Symbol">)</a> <a id="14815" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a>
   <a id="14820" href="Varieties.FreeAlgebras.html#14784" class="Function">goal</a> <a id="14825" class="Symbol">=</a> <a id="14827" class="Symbol">(</a><a id="14828" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="14830" href="Terms.Operations.html#2805" class="Function Operator">⟦</a> <a id="14832" href="Varieties.FreeAlgebras.html#14748" class="Bound">p</a> <a id="14834" href="Terms.Operations.html#2805" class="Function Operator">⟧</a><a id="14835" class="Symbol">)</a> <a id="14837" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a>       <a id="14845" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14848" href="Terms.Operations.html#3116" class="Function">free-lift-interp</a> <a id="14865" class="Symbol">(</a><a id="14866" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="14869" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="14871" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="14872" class="Symbol">)</a> <a id="14874" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="14876" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a> <a id="14878" href="Varieties.FreeAlgebras.html#14748" class="Bound">p</a> <a id="14880" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
          <a id="14892" class="Symbol">(</a><a id="14893" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="14903" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="14905" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a><a id="14906" class="Symbol">)</a> <a id="14908" href="Varieties.FreeAlgebras.html#14748" class="Bound">p</a> <a id="14910" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14913" href="Varieties.FreeAlgebras.html#14752" class="Bound">pψq</a> <a id="14917" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="14919" class="Symbol">(</a><a id="14920" href="Varieties.Closure.html#4121" class="InductiveConstructor">siso</a> <a id="14925" class="Symbol">(</a><a id="14926" href="Varieties.Closure.html#3923" class="InductiveConstructor">sbase</a> <a id="14932" href="Varieties.FreeAlgebras.html#14760" class="Bound">kA</a><a id="14934" class="Symbol">)</a> <a id="14936" class="Symbol">(</a><a id="14937" href="Homomorphisms.Isomorphisms.html#2775" class="Function">≅-sym</a> <a id="14943" href="Homomorphisms.Isomorphisms.html#4215" class="Function">Lift-≅</a><a id="14949" class="Symbol">))</a> <a id="14952" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a> <a id="14954" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
          <a id="14966" class="Symbol">(</a><a id="14967" href="Terms.Properties.html#2519" class="Function">free-lift</a> <a id="14977" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="14979" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a><a id="14980" class="Symbol">)</a> <a id="14982" href="Varieties.FreeAlgebras.html#14750" class="Bound">q</a> <a id="14984" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14987" class="Symbol">(</a><a id="14988" href="Terms.Operations.html#3116" class="Function">free-lift-interp</a> <a id="15005" class="Symbol">(</a><a id="15006" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="15009" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="15011" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="15012" class="Symbol">)</a> <a id="15014" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="15016" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a> <a id="15018" href="Varieties.FreeAlgebras.html#14750" class="Bound">q</a><a id="15019" class="Symbol">)</a><a id="15020" href="Overture.Preliminaries.html#4848" class="Function Operator">⁻¹</a>  <a id="15024" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
          <a id="15036" class="Symbol">(</a><a id="15037" href="Varieties.FreeAlgebras.html#14757" class="Bound">𝑨</a> <a id="15039" href="Terms.Operations.html#2805" class="Function Operator">⟦</a> <a id="15041" href="Varieties.FreeAlgebras.html#14750" class="Bound">q</a> <a id="15043" href="Terms.Operations.html#2805" class="Function Operator">⟧</a><a id="15044" class="Symbol">)</a> <a id="15046" href="Varieties.FreeAlgebras.html#14763" class="Bound">h</a>       <a id="15054" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>

<a id="15057" class="Markup">\end{code}</a><a id="15067" class="Background">

With these results in hand, it is now trivial to prove the main theorem of this subsection.

</a><a id="15162" class="Markup">\begin{code}</a>

 <a id="15177" href="Varieties.FreeAlgebras.html#15177" class="Function">class-models-kernel</a> <a id="15197" class="Symbol">:</a> <a id="15199" class="Symbol">∀</a> <a id="15201" href="Varieties.FreeAlgebras.html#15201" class="Bound">p</a> <a id="15203" href="Varieties.FreeAlgebras.html#15203" class="Bound">q</a> <a id="15205" class="Symbol">→</a> <a id="15207" class="Symbol">(</a><a id="15208" href="Varieties.FreeAlgebras.html#15201" class="Bound">p</a> <a id="15210" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15212" href="Varieties.FreeAlgebras.html#15203" class="Bound">q</a><a id="15213" class="Symbol">)</a> <a id="15215" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="15217" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="15224" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15226" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="15231" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15233" class="Symbol">→</a> <a id="15235" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a> <a id="15237" href="Varieties.EquationalLogic.html#2637" class="Function Operator">⊫</a> <a id="15239" href="Varieties.FreeAlgebras.html#15201" class="Bound">p</a> <a id="15241" href="Varieties.EquationalLogic.html#2637" class="Function Operator">≈</a> <a id="15243" href="Varieties.FreeAlgebras.html#15203" class="Bound">q</a>
 <a id="15246" href="Varieties.FreeAlgebras.html#15177" class="Function">class-models-kernel</a> <a id="15266" href="Varieties.FreeAlgebras.html#15266" class="Bound">p</a> <a id="15268" href="Varieties.FreeAlgebras.html#15268" class="Bound">q</a> <a id="15270" href="Varieties.FreeAlgebras.html#15270" class="Bound">x</a> <a id="15272" class="Symbol">=</a> <a id="15274" href="Varieties.FreeAlgebras.html#14688" class="Function">ψlemma3</a> <a id="15282" href="Varieties.FreeAlgebras.html#15266" class="Bound">p</a> <a id="15284" href="Varieties.FreeAlgebras.html#15268" class="Bound">q</a> <a id="15286" class="Symbol">(</a><a id="15287" href="Varieties.FreeAlgebras.html#14497" class="Function">ψlemma2</a> <a id="15295" href="Varieties.FreeAlgebras.html#15270" class="Bound">x</a><a id="15296" class="Symbol">)</a>

 <a id="15300" href="Varieties.FreeAlgebras.html#15300" class="Function">𝕍𝒦</a> <a id="15303" class="Symbol">:</a> <a id="15305" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="15310" class="Symbol">(</a><a id="15311" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="15319" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="15322" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="15323" class="Symbol">)</a> <a id="15325" class="Symbol">(</a><a id="15326" href="Varieties.FreeAlgebras.html#892" class="Primitive">lsuc</a> <a id="15331" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a><a id="15333" class="Symbol">)</a>
 <a id="15336" href="Varieties.FreeAlgebras.html#15300" class="Function">𝕍𝒦</a> <a id="15339" class="Symbol">=</a> <a id="15341" href="Varieties.Closure.html#5379" class="Datatype">V</a><a id="15342" class="Symbol">{</a><a id="15343" class="Argument">α</a> <a id="15345" class="Symbol">=</a> <a id="15347" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="15348" class="Symbol">}{</a><a id="15350" class="Argument">β</a> <a id="15352" class="Symbol">=</a> <a id="15354" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a><a id="15356" class="Symbol">}</a> <a id="15358" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>

 <a id="15362" href="Varieties.FreeAlgebras.html#15362" class="Function">kernel-in-theory&#39;</a> <a id="15380" class="Symbol">:</a> <a id="15382" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="15389" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15391" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="15396" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15398" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="15400" href="Varieties.EquationalLogic.html#3319" class="Function">Th</a> <a id="15403" class="Symbol">(</a><a id="15404" href="Varieties.Closure.html#5379" class="Datatype">V</a> <a id="15406" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a><a id="15407" class="Symbol">)</a>
 <a id="15410" href="Varieties.FreeAlgebras.html#15362" class="Function">kernel-in-theory&#39;</a> <a id="15428" class="Symbol">{</a><a id="15429" href="Varieties.FreeAlgebras.html#15429" class="Bound">p</a> <a id="15431" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15433" href="Varieties.FreeAlgebras.html#15433" class="Bound">q</a><a id="15434" class="Symbol">}</a> <a id="15436" href="Varieties.FreeAlgebras.html#15436" class="Bound">pKq</a> <a id="15440" class="Symbol">=</a> <a id="15442" class="Symbol">(</a><a id="15443" href="Varieties.Preservation.html#20383" class="Function">class-ids-⇒</a> <a id="15455" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="15458" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="15461" href="Varieties.FreeAlgebras.html#15429" class="Bound">p</a> <a id="15463" href="Varieties.FreeAlgebras.html#15433" class="Bound">q</a> <a id="15465" class="Symbol">(</a><a id="15466" href="Varieties.FreeAlgebras.html#15177" class="Function">class-models-kernel</a> <a id="15486" href="Varieties.FreeAlgebras.html#15429" class="Bound">p</a> <a id="15488" href="Varieties.FreeAlgebras.html#15433" class="Bound">q</a> <a id="15490" href="Varieties.FreeAlgebras.html#15436" class="Bound">pKq</a><a id="15493" class="Symbol">))</a>

 <a id="15498" href="Varieties.FreeAlgebras.html#15498" class="Function">kernel-in-theory</a> <a id="15515" class="Symbol">:</a> <a id="15517" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="15524" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15526" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="15531" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15533" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="15535" href="Varieties.EquationalLogic.html#3319" class="Function">Th</a> <a id="15538" href="Varieties.FreeAlgebras.html#15300" class="Function">𝕍𝒦</a>
 <a id="15542" href="Varieties.FreeAlgebras.html#15498" class="Function">kernel-in-theory</a> <a id="15559" class="Symbol">{</a><a id="15560" href="Varieties.FreeAlgebras.html#15560" class="Bound">p</a> <a id="15562" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15564" href="Varieties.FreeAlgebras.html#15564" class="Bound">q</a><a id="15565" class="Symbol">}</a> <a id="15567" href="Varieties.FreeAlgebras.html#15567" class="Bound">pKq</a> <a id="15571" href="Varieties.FreeAlgebras.html#15571" class="Bound">vkA</a> <a id="15575" href="Varieties.FreeAlgebras.html#15575" class="Bound">x</a> <a id="15577" class="Symbol">=</a> <a id="15579" href="Varieties.Preservation.html#20496" class="Function">class-ids</a> <a id="15589" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="15592" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="15595" href="Varieties.FreeAlgebras.html#15560" class="Bound">p</a> <a id="15597" href="Varieties.FreeAlgebras.html#15564" class="Bound">q</a> <a id="15599" class="Symbol">(</a><a id="15600" href="Varieties.FreeAlgebras.html#15177" class="Function">class-models-kernel</a> <a id="15620" href="Varieties.FreeAlgebras.html#15560" class="Bound">p</a> <a id="15622" href="Varieties.FreeAlgebras.html#15564" class="Bound">q</a> <a id="15624" href="Varieties.FreeAlgebras.html#15567" class="Bound">pKq</a><a id="15627" class="Symbol">)</a> <a id="15629" href="Varieties.FreeAlgebras.html#15571" class="Bound">vkA</a> <a id="15633" href="Varieties.FreeAlgebras.html#15575" class="Bound">x</a>

 <a id="15637" href="Varieties.FreeAlgebras.html#15637" class="Function Operator">_↠_</a> <a id="15641" class="Symbol">:</a> <a id="15643" href="Varieties.FreeAlgebras.html#1319" class="Primitive">Type</a> <a id="15648" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a> <a id="15650" class="Symbol">→</a> <a id="15652" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="15660" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="15663" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a> <a id="15665" class="Symbol">→</a> <a id="15667" href="Varieties.FreeAlgebras.html#1319" class="Primitive">Type</a> <a id="15672" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a>
 <a id="15676" href="Varieties.FreeAlgebras.html#15676" class="Bound">X</a> <a id="15678" href="Varieties.FreeAlgebras.html#15637" class="Function Operator">↠</a> <a id="15680" href="Varieties.FreeAlgebras.html#15680" class="Bound">𝑨</a> <a id="15682" class="Symbol">=</a> <a id="15684" href="Data.Product.html#916" class="Function">Σ[</a> <a id="15687" href="Varieties.FreeAlgebras.html#15687" class="Bound">h</a> <a id="15689" href="Data.Product.html#916" class="Function">∈</a> <a id="15691" class="Symbol">(</a><a id="15692" href="Varieties.FreeAlgebras.html#15676" class="Bound">X</a> <a id="15694" class="Symbol">→</a> <a id="15696" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15698" href="Varieties.FreeAlgebras.html#15680" class="Bound">𝑨</a> <a id="15700" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="15701" class="Symbol">)</a> <a id="15703" href="Data.Product.html#916" class="Function">]</a> <a id="15705" href="Overture.Inverses.html#3166" class="Function">IsSurjective</a> <a id="15718" href="Varieties.FreeAlgebras.html#15687" class="Bound">h</a>

 <a id="15722" href="Varieties.FreeAlgebras.html#15722" class="Function">𝔽-ModTh-epi</a> <a id="15734" class="Symbol">:</a> <a id="15736" class="Symbol">(</a><a id="15737" href="Varieties.FreeAlgebras.html#15737" class="Bound">𝑨</a> <a id="15739" class="Symbol">:</a> <a id="15741" href="Algebras.Basic.html#6389" class="Function">Algebra</a> <a id="15749" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="15752" href="Varieties.FreeAlgebras.html#1002" class="Bound">𝑆</a><a id="15753" class="Symbol">)</a> <a id="15755" class="Symbol">→</a> <a id="15757" class="Symbol">(</a><a id="15758" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="15760" href="Varieties.FreeAlgebras.html#15637" class="Function Operator">↠</a> <a id="15762" href="Varieties.FreeAlgebras.html#15737" class="Bound">𝑨</a><a id="15763" class="Symbol">)</a> <a id="15765" class="Symbol">→</a> <a id="15767" href="Varieties.FreeAlgebras.html#15737" class="Bound">𝑨</a> <a id="15769" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="15771" href="Varieties.EquationalLogic.html#3894" class="Function">Mod</a> <a id="15775" class="Symbol">(</a><a id="15776" href="Varieties.EquationalLogic.html#3319" class="Function">Th</a> <a id="15779" href="Varieties.FreeAlgebras.html#15300" class="Function">𝕍𝒦</a><a id="15781" class="Symbol">)</a> <a id="15783" class="Symbol">→</a> <a id="15785" href="Homomorphisms.Basic.html#6302" class="Function">epi</a> <a id="15789" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="15791" href="Varieties.FreeAlgebras.html#15737" class="Bound">𝑨</a>
 <a id="15794" href="Varieties.FreeAlgebras.html#15722" class="Function">𝔽-ModTh-epi</a> <a id="15806" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="15808" class="Symbol">(</a><a id="15809" href="Varieties.FreeAlgebras.html#15809" class="Bound">η</a> <a id="15811" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15813" href="Varieties.FreeAlgebras.html#15813" class="Bound">ηE</a><a id="15815" class="Symbol">)</a> <a id="15817" href="Varieties.FreeAlgebras.html#15817" class="Bound">AinMTV</a> <a id="15824" class="Symbol">=</a> <a id="15826" href="Varieties.FreeAlgebras.html#16338" class="Function">goal</a>
  <a id="15833" class="Keyword">where</a>
  <a id="15841" href="Varieties.FreeAlgebras.html#15841" class="Function">φ</a> <a id="15843" class="Symbol">:</a> <a id="15845" href="Homomorphisms.Basic.html#3431" class="Function">hom</a> <a id="15849" class="Symbol">(</a><a id="15850" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="15852" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="15853" class="Symbol">)</a> <a id="15855" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a>
  <a id="15859" href="Varieties.FreeAlgebras.html#15841" class="Function">φ</a> <a id="15861" class="Symbol">=</a> <a id="15863" href="Terms.Properties.html#3226" class="Function">lift-hom</a> <a id="15872" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="15874" href="Varieties.FreeAlgebras.html#15809" class="Bound">η</a>

  <a id="15879" href="Varieties.FreeAlgebras.html#15879" class="Function">φE</a> <a id="15882" class="Symbol">:</a> <a id="15884" href="Overture.Inverses.html#3166" class="Function">IsSurjective</a> <a id="15897" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15899" href="Varieties.FreeAlgebras.html#15841" class="Function">φ</a> <a id="15901" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a>
  <a id="15905" href="Varieties.FreeAlgebras.html#15879" class="Function">φE</a> <a id="15908" class="Symbol">=</a> <a id="15910" href="Terms.Properties.html#4837" class="Function">lift-of-epi-is-epi</a> <a id="15929" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="15931" href="Varieties.FreeAlgebras.html#15813" class="Bound">ηE</a>

  <a id="15937" href="Varieties.FreeAlgebras.html#15937" class="Function">pqlem2</a> <a id="15944" class="Symbol">:</a> <a id="15946" class="Symbol">∀</a> <a id="15948" href="Varieties.FreeAlgebras.html#15948" class="Bound">p</a> <a id="15950" href="Varieties.FreeAlgebras.html#15950" class="Bound">q</a> <a id="15952" class="Symbol">→</a> <a id="15954" class="Symbol">(</a><a id="15955" href="Varieties.FreeAlgebras.html#15948" class="Bound">p</a> <a id="15957" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15959" href="Varieties.FreeAlgebras.html#15950" class="Bound">q</a><a id="15960" class="Symbol">)</a> <a id="15962" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="15964" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="15971" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15973" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="15978" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="15980" class="Symbol">→</a> <a id="15982" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="15984" href="Varieties.EquationalLogic.html#2559" class="Function Operator">⊧</a> <a id="15986" href="Varieties.FreeAlgebras.html#15948" class="Bound">p</a> <a id="15988" href="Varieties.EquationalLogic.html#2559" class="Function Operator">≈</a> <a id="15990" href="Varieties.FreeAlgebras.html#15950" class="Bound">q</a>
  <a id="15994" href="Varieties.FreeAlgebras.html#15937" class="Function">pqlem2</a> <a id="16001" href="Varieties.FreeAlgebras.html#16001" class="Bound">p</a> <a id="16003" href="Varieties.FreeAlgebras.html#16003" class="Bound">q</a> <a id="16005" href="Varieties.FreeAlgebras.html#16005" class="Bound">z</a> <a id="16007" class="Symbol">=</a> <a id="16009" class="Symbol">λ</a> <a id="16011" href="Varieties.FreeAlgebras.html#16011" class="Bound">x</a> <a id="16013" class="Symbol">→</a> <a id="16015" href="Varieties.FreeAlgebras.html#15817" class="Bound">AinMTV</a> <a id="16022" href="Varieties.FreeAlgebras.html#16001" class="Bound">p</a> <a id="16024" href="Varieties.FreeAlgebras.html#16003" class="Bound">q</a> <a id="16026" class="Symbol">(</a><a id="16027" href="Varieties.FreeAlgebras.html#15498" class="Function">kernel-in-theory</a> <a id="16044" href="Varieties.FreeAlgebras.html#16005" class="Bound">z</a><a id="16045" class="Symbol">)</a> <a id="16047" href="Varieties.FreeAlgebras.html#16011" class="Bound">x</a>

  <a id="16052" href="Varieties.FreeAlgebras.html#16052" class="Function">kerincl</a> <a id="16060" class="Symbol">:</a> <a id="16062" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="16069" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16071" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="16076" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16078" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="16080" href="Relations.Discrete.html#3759" class="Function">kernel</a> <a id="16087" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16089" href="Varieties.FreeAlgebras.html#15841" class="Function">φ</a> <a id="16091" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a>
  <a id="16095" href="Varieties.FreeAlgebras.html#16052" class="Function">kerincl</a> <a id="16103" class="Symbol">{</a><a id="16104" href="Varieties.FreeAlgebras.html#16104" class="Bound">p</a> <a id="16106" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="16108" href="Varieties.FreeAlgebras.html#16108" class="Bound">q</a><a id="16109" class="Symbol">}</a> <a id="16111" href="Varieties.FreeAlgebras.html#16111" class="Bound">x</a> <a id="16113" class="Symbol">=</a> <a id="16115" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16117" href="Varieties.FreeAlgebras.html#15841" class="Function">φ</a> <a id="16119" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16121" href="Varieties.FreeAlgebras.html#16104" class="Bound">p</a>      <a id="16128" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16131" class="Symbol">(</a><a id="16132" href="Terms.Operations.html#3116" class="Function">free-lift-interp</a> <a id="16149" class="Symbol">(</a><a id="16150" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="16153" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="16155" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a><a id="16157" class="Symbol">)</a> <a id="16159" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="16161" href="Varieties.FreeAlgebras.html#15809" class="Bound">η</a> <a id="16163" href="Varieties.FreeAlgebras.html#16104" class="Bound">p</a><a id="16164" class="Symbol">)</a><a id="16165" href="Overture.Preliminaries.html#4848" class="Function Operator">⁻¹</a> <a id="16168" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
                      <a id="16192" class="Symbol">(</a><a id="16193" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="16195" href="Terms.Operations.html#2805" class="Function Operator">⟦</a> <a id="16197" href="Varieties.FreeAlgebras.html#16104" class="Bound">p</a> <a id="16199" href="Terms.Operations.html#2805" class="Function Operator">⟧</a><a id="16200" class="Symbol">)</a> <a id="16202" href="Varieties.FreeAlgebras.html#15809" class="Bound">η</a>  <a id="16205" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16208" href="Varieties.FreeAlgebras.html#15937" class="Function">pqlem2</a> <a id="16215" href="Varieties.FreeAlgebras.html#16104" class="Bound">p</a> <a id="16217" href="Varieties.FreeAlgebras.html#16108" class="Bound">q</a> <a id="16219" href="Varieties.FreeAlgebras.html#16111" class="Bound">x</a> <a id="16221" href="Varieties.FreeAlgebras.html#15809" class="Bound">η</a> <a id="16223" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
                      <a id="16247" class="Symbol">(</a><a id="16248" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="16250" href="Terms.Operations.html#2805" class="Function Operator">⟦</a> <a id="16252" href="Varieties.FreeAlgebras.html#16108" class="Bound">q</a> <a id="16254" href="Terms.Operations.html#2805" class="Function Operator">⟧</a><a id="16255" class="Symbol">)</a> <a id="16257" href="Varieties.FreeAlgebras.html#15809" class="Bound">η</a>  <a id="16260" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16263" href="Terms.Operations.html#3116" class="Function">free-lift-interp</a> <a id="16280" class="Symbol">(</a><a id="16281" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="16284" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="16286" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a><a id="16288" class="Symbol">)</a> <a id="16290" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="16292" href="Varieties.FreeAlgebras.html#15809" class="Bound">η</a> <a id="16294" href="Varieties.FreeAlgebras.html#16108" class="Bound">q</a> <a id="16296" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
                      <a id="16320" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16322" href="Varieties.FreeAlgebras.html#15841" class="Function">φ</a> <a id="16324" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16326" href="Varieties.FreeAlgebras.html#16108" class="Bound">q</a>      <a id="16333" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>

  <a id="16338" href="Varieties.FreeAlgebras.html#16338" class="Function">goal</a> <a id="16343" class="Symbol">:</a> <a id="16345" href="Homomorphisms.Basic.html#6302" class="Function">epi</a> <a id="16349" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="16351" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a>
  <a id="16355" href="Varieties.FreeAlgebras.html#16338" class="Function">goal</a> <a id="16360" class="Symbol">=</a> <a id="16362" href="Varieties.FreeAlgebras.html#1509" class="Field">fst</a> <a id="16366" class="Symbol">(</a><a id="16367" href="Homomorphisms.Noether.html#9901" class="Function">HomFactorEpi</a> <a id="16380" class="Symbol">(</a><a id="16381" href="Varieties.FreeAlgebras.html#10475" class="Bound">wd</a> <a id="16384" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="16386" class="Symbol">(</a><a id="16387" href="Varieties.FreeAlgebras.html#892" class="Primitive">lsuc</a> <a id="16392" class="Symbol">(</a><a id="16393" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="16396" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="16397" class="Symbol">)))</a> <a id="16401" href="Varieties.FreeAlgebras.html#15806" class="Bound">𝑨</a> <a id="16403" href="Varieties.FreeAlgebras.html#15841" class="Function">φ</a> <a id="16405" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽</a> <a id="16410" href="Varieties.FreeAlgebras.html#16052" class="Function">kerincl</a> <a id="16418" href="Varieties.FreeAlgebras.html#11818" class="Function">hom𝔽-is-epic</a> <a id="16431" href="Varieties.FreeAlgebras.html#15879" class="Function">φE</a><a id="16433" class="Symbol">)</a>

<a id="16436" class="Markup">\end{code}</a><a id="16446" class="Background">





#### &lt;a id=&quot;the-homomorphic-images-of-F&quot;&gt;The homomorphic images of 𝔽&lt;/a&gt;

Finally we come to one of the main theorems of this module; it asserts that every algebra in `Mod X (Th 𝕍𝒦)` is a homomorphic image of 𝔽.  We prove this below as the function (or proof object) `𝔽-ModTh-epi`.  Before that, we prove two auxiliary lemmas.

</a><a id="16780" class="Markup">\begin{code}</a>

 <a id="16795" class="Keyword">module</a> <a id="16802" href="Varieties.FreeAlgebras.html#16802" class="Module">_</a> <a id="16804" class="Symbol">(</a><a id="16805" href="Varieties.FreeAlgebras.html#16805" class="Bound">pe</a> <a id="16808" class="Symbol">:</a> <a id="16810" href="Foundations.Extensionality.html#4178" class="Function">pred-ext</a> <a id="16819" class="Symbol">(</a><a id="16820" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="16823" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="16824" class="Symbol">)(</a><a id="16826" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="16829" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="16830" class="Symbol">))(</a><a id="16833" href="Varieties.FreeAlgebras.html#16833" class="Bound">wd</a> <a id="16836" class="Symbol">:</a> <a id="16838" href="Foundations.Welldefined.html#3096" class="Function">SwellDef</a><a id="16846" class="Symbol">)</a> <a id="16848" class="Comment">-- extensionality assumptions</a>
          <a id="16888" class="Symbol">(</a><a id="16889" href="Varieties.FreeAlgebras.html#16889" class="Bound">Cset</a> <a id="16894" class="Symbol">:</a> <a id="16896" href="Foundations.Truncation.html#6487" class="Function">is-set</a> <a id="16903" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16905" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a> <a id="16907" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="16908" class="Symbol">)</a>                       <a id="16932" class="Comment">-- truncation assumptions</a>
          <a id="16968" class="Symbol">(</a><a id="16969" href="Varieties.FreeAlgebras.html#16969" class="Bound">kuip</a> <a id="16974" class="Symbol">:</a> <a id="16976" href="Foundations.Truncation.html#10684" class="Function">blk-uip</a><a id="16983" class="Symbol">(</a><a id="16984" href="Terms.Basic.html#1897" class="Datatype">Term</a> <a id="16989" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="16990" class="Symbol">)</a><a id="16991" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a> <a id="16993" href="Homomorphisms.Basic.html#7979" class="Function">kercon</a> <a id="17000" class="Symbol">(</a><a id="17001" href="Varieties.FreeAlgebras.html#16833" class="Bound">wd</a> <a id="17004" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="17006" class="Symbol">(</a><a id="17007" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="17010" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="17011" class="Symbol">)){</a><a id="17014" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a><a id="17015" class="Symbol">}</a><a id="17016" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="17021" href="Overture.Preliminaries.html#4144" class="Function Operator">∣</a><a id="17022" class="Symbol">)</a>
  <a id="17026" class="Keyword">where</a>

  <a id="17035" href="Varieties.FreeAlgebras.html#17035" class="Function">𝔽≤ℭ</a> <a id="17039" class="Symbol">:</a> <a id="17041" class="Symbol">(</a><a id="17042" href="Homomorphisms.Basic.html#8387" class="Function Operator">ker[</a> <a id="17047" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="17049" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="17051" href="Homomorphisms.Basic.html#8387" class="Function Operator">⇒</a> <a id="17053" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a> <a id="17055" href="Homomorphisms.Basic.html#8387" class="Function Operator">]</a> <a id="17057" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="17062" href="Homomorphisms.Basic.html#8387" class="Function Operator">↾</a> <a id="17064" class="Symbol">(</a><a id="17065" href="Varieties.FreeAlgebras.html#16833" class="Bound">wd</a> <a id="17068" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="17070" class="Symbol">(</a><a id="17071" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="17074" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="17075" class="Symbol">)))</a> <a id="17079" href="Subalgebras.Subalgebras.html#2619" class="Function Operator">≤</a> <a id="17081" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a>
  <a id="17085" href="Varieties.FreeAlgebras.html#17035" class="Function">𝔽≤ℭ</a> <a id="17089" class="Symbol">=</a> <a id="17091" href="Subalgebras.Subalgebras.html#4451" class="Function">FirstHomCorollary|Set</a> <a id="17113" class="Symbol">(</a><a id="17114" href="Terms.Basic.html#3141" class="Function">𝑻</a> <a id="17116" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="17117" class="Symbol">)</a> <a id="17119" href="Varieties.FreeAlgebras.html#10874" class="Function">ℭ</a> <a id="17121" href="Varieties.FreeAlgebras.html#11061" class="Function">homℭ</a> <a id="17126" href="Varieties.FreeAlgebras.html#16805" class="Bound">pe</a> <a id="17129" class="Symbol">(</a><a id="17130" href="Varieties.FreeAlgebras.html#16833" class="Bound">wd</a> <a id="17133" href="Varieties.FreeAlgebras.html#990" class="Bound">𝓥</a> <a id="17135" class="Symbol">(</a><a id="17136" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="17139" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="17140" class="Symbol">))</a> <a id="17143" href="Varieties.FreeAlgebras.html#16889" class="Bound">Cset</a> <a id="17148" href="Varieties.FreeAlgebras.html#16969" class="Bound">kuip</a>

<a id="17154" class="Markup">\end{code}</a><a id="17164" class="Background">

The last piece we need to prove that every model of `Th 𝕍𝒦` is a homomorphic image of `𝔽` is a crucial assumption that is taken for granted throughout informal universal algebra---namely, that our collection `X` of variable symbols is arbitrarily large and that we have an *environment* which interprets the variable symbols in every algebra under consideration. In other terms, an environment provides, for every algebra `𝑨`, a surjective mapping `η : X → ∣ 𝑨 ∣` from `X` onto the domain of `𝑨`.

We do *not* assert that for an arbitrary type `X` such surjective maps exist.  Indeed, our `X` must is quite special to have this property.  Later, we will construct such an `X`, but for now we simply postulate its existence. Note that this assumption that an environment exists is only required in the proof of the theorem `𝔽-ModTh-epi`.

</a><a id="18004" class="Markup">\begin{code}</a>


<a id="18019" class="Markup">\end{code}</a><a id="18029" class="Background">

#### &lt;a id=&quot;F-in-VK&quot;&gt;𝔽 ∈ V(𝒦)&lt;/a&gt;

With this result in hand, along with what we proved earlier---namely, `PS(𝒦) ⊆ SP(𝒦) ⊆ HSP(𝒦) ≡ V 𝒦`---it is not hard to show that `𝔽` belongs to `V 𝒦`.

</a><a id="18220" class="Markup">\begin{code}</a>

  <a id="18236" href="Varieties.FreeAlgebras.html#18236" class="Function">𝔽∈SP</a> <a id="18241" class="Symbol">:</a> <a id="18243" href="Foundations.Truncation.html#3875" class="Function">hfunext</a> <a id="18251" class="Symbol">(</a><a id="18252" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="18255" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18256" class="Symbol">)(</a><a id="18258" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="18261" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18262" class="Symbol">)</a> <a id="18264" class="Symbol">→</a> <a id="18266" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="18268" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="18270" class="Symbol">(</a><a id="18271" href="Varieties.Closure.html#3835" class="Datatype">S</a><a id="18272" class="Symbol">{</a><a id="18273" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="18274" class="Symbol">}{</a><a id="18276" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a><a id="18278" class="Symbol">}</a> <a id="18280" class="Symbol">(</a><a id="18281" href="Varieties.Closure.html#4419" class="Datatype">P</a><a id="18282" class="Symbol">{</a><a id="18283" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18284" class="Symbol">}{</a><a id="18286" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="18287" class="Symbol">}</a> <a id="18289" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a><a id="18290" class="Symbol">))</a>
  <a id="18295" href="Varieties.FreeAlgebras.html#18236" class="Function">𝔽∈SP</a> <a id="18300" href="Varieties.FreeAlgebras.html#18300" class="Bound">hfe</a> <a id="18304" class="Symbol">=</a> <a id="18306" href="Varieties.Closure.html#4043" class="InductiveConstructor">ssub</a> <a id="18311" class="Symbol">(</a><a id="18312" href="Varieties.Preservation.html#12979" class="Function">class-prod-s-∈-sp</a> <a id="18330" href="Varieties.FreeAlgebras.html#18300" class="Bound">hfe</a><a id="18333" class="Symbol">)</a> <a id="18335" href="Varieties.FreeAlgebras.html#17035" class="Function">𝔽≤ℭ</a>

  <a id="18342" href="Varieties.FreeAlgebras.html#18342" class="Function">𝔽∈𝕍</a> <a id="18346" class="Symbol">:</a> <a id="18348" href="Foundations.Truncation.html#3875" class="Function">hfunext</a> <a id="18356" class="Symbol">(</a><a id="18357" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="18360" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18361" class="Symbol">)(</a><a id="18363" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="18366" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18367" class="Symbol">)</a> <a id="18369" class="Symbol">→</a> <a id="18371" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="18373" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="18375" href="Varieties.Closure.html#5379" class="Datatype">V</a> <a id="18377" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>
  <a id="18381" href="Varieties.FreeAlgebras.html#18342" class="Function">𝔽∈𝕍</a> <a id="18385" href="Varieties.FreeAlgebras.html#18385" class="Bound">hfe</a> <a id="18389" class="Symbol">=</a> <a id="18391" href="Varieties.Preservation.html#9308" class="Function">SP⊆V&#39;</a> <a id="18397" class="Symbol">{</a><a id="18398" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18399" class="Symbol">}{</a><a id="18401" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="18404" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="18406" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18407" class="Symbol">}{</a><a id="18409" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="18412" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a> <a id="18415" href="Varieties.FreeAlgebras.html#3994" class="Function">𝓕⁺</a><a id="18417" class="Symbol">}{</a><a id="18419" href="Varieties.FreeAlgebras.html#10461" class="Bound">fe</a> <a id="18422" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a> <a id="18424" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="18425" class="Symbol">}{</a><a id="18427" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a><a id="18428" class="Symbol">}</a> <a id="18430" class="Symbol">(</a><a id="18431" href="Varieties.FreeAlgebras.html#18236" class="Function">𝔽∈SP</a> <a id="18436" href="Varieties.FreeAlgebras.html#18385" class="Bound">hfe</a><a id="18439" class="Symbol">)</a>

<a id="18442" class="Markup">\end{code}</a><a id="18452" class="Background">

#### The HSP Theorem
Now that we have all of the necessary ingredients, it is all but trivial to
combine them to prove Birkhoff&#39;s HSP theorem. (Note that since the proof enlists
the help of the `𝔽-ModTh-epi` theorem, we must assume an environment exists,
which is manifested in the premise `∀ 𝑨 → X ↠ 𝑨`.

</a><a id="18760" class="Markup">\begin{code}</a>

  <a id="18776" href="Varieties.FreeAlgebras.html#18776" class="Function">Birkhoff</a> <a id="18785" class="Symbol">:</a> <a id="18787" href="Foundations.Truncation.html#3875" class="Function">hfunext</a> <a id="18795" class="Symbol">(</a><a id="18796" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="18799" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18800" class="Symbol">)(</a><a id="18802" href="Algebras.Products.html#2952" class="Function">ov</a> <a id="18805" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="18806" class="Symbol">)</a> <a id="18808" class="Symbol">→</a> <a id="18810" class="Symbol">(∀</a> <a id="18813" href="Varieties.FreeAlgebras.html#18813" class="Bound">𝑨</a> <a id="18815" class="Symbol">→</a> <a id="18817" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a> <a id="18819" href="Varieties.FreeAlgebras.html#15637" class="Function Operator">↠</a> <a id="18821" href="Varieties.FreeAlgebras.html#18813" class="Bound">𝑨</a><a id="18822" class="Symbol">)</a> <a id="18824" class="Symbol">→</a> <a id="18826" href="Varieties.EquationalLogic.html#3894" class="Function">Mod</a> <a id="18830" class="Symbol">(</a><a id="18831" href="Varieties.EquationalLogic.html#3319" class="Function">Th</a> <a id="18834" class="Symbol">(</a><a id="18835" href="Varieties.Closure.html#5379" class="Datatype">V</a> <a id="18837" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a><a id="18838" class="Symbol">))</a> <a id="18841" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="18843" href="Varieties.Closure.html#5379" class="Datatype">V</a> <a id="18845" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a>
  <a id="18849" href="Varieties.FreeAlgebras.html#18776" class="Function">Birkhoff</a> <a id="18858" href="Varieties.FreeAlgebras.html#18858" class="Bound">hfe</a> <a id="18862" href="Varieties.FreeAlgebras.html#18862" class="Bound">𝕏</a> <a id="18864" class="Symbol">{</a><a id="18865" href="Varieties.FreeAlgebras.html#18865" class="Bound">𝑨</a><a id="18866" class="Symbol">}</a> <a id="18868" href="Varieties.FreeAlgebras.html#18868" class="Bound">α</a> <a id="18870" class="Symbol">=</a> <a id="18872" href="Varieties.Closure.html#5660" class="InductiveConstructor">vhimg</a><a id="18877" class="Symbol">{</a><a id="18878" class="Argument">𝑩</a> <a id="18880" class="Symbol">=</a> <a id="18882" href="Varieties.FreeAlgebras.html#18865" class="Bound">𝑨</a><a id="18883" class="Symbol">}</a> <a id="18885" class="Symbol">(</a><a id="18886" href="Varieties.FreeAlgebras.html#18342" class="Function">𝔽∈𝕍</a> <a id="18890" href="Varieties.FreeAlgebras.html#18858" class="Bound">hfe</a><a id="18893" class="Symbol">)</a> <a id="18895" class="Symbol">(</a><a id="18896" href="Varieties.FreeAlgebras.html#18865" class="Bound">𝑨</a> <a id="18898" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="18900" href="Homomorphisms.Basic.html#6769" class="Function">epi-to-hom</a> <a id="18911" href="Varieties.FreeAlgebras.html#18865" class="Bound">𝑨</a> <a id="18913" href="Varieties.FreeAlgebras.html#18942" class="Function">φE</a> <a id="18916" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="18918" href="Varieties.FreeAlgebras.html#1569" class="Field">snd</a> <a id="18922" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a> <a id="18924" href="Varieties.FreeAlgebras.html#18942" class="Function">φE</a> <a id="18927" href="Overture.Preliminaries.html#4182" class="Function Operator">∥</a><a id="18928" class="Symbol">)</a>
   <a id="18933" class="Keyword">where</a>
   <a id="18942" href="Varieties.FreeAlgebras.html#18942" class="Function">φE</a> <a id="18945" class="Symbol">:</a> <a id="18947" href="Homomorphisms.Basic.html#6302" class="Function">epi</a> <a id="18951" href="Varieties.FreeAlgebras.html#11654" class="Function">𝔽</a> <a id="18953" href="Varieties.FreeAlgebras.html#18865" class="Bound">𝑨</a>
   <a id="18958" href="Varieties.FreeAlgebras.html#18942" class="Function">φE</a> <a id="18961" class="Symbol">=</a> <a id="18963" href="Varieties.FreeAlgebras.html#15722" class="Function">𝔽-ModTh-epi</a> <a id="18975" href="Varieties.FreeAlgebras.html#18865" class="Bound">𝑨</a> <a id="18977" class="Symbol">(</a><a id="18978" href="Varieties.FreeAlgebras.html#18862" class="Bound">𝕏</a> <a id="18980" href="Varieties.FreeAlgebras.html#18865" class="Bound">𝑨</a><a id="18981" class="Symbol">)</a> <a id="18983" href="Varieties.FreeAlgebras.html#18868" class="Bound">α</a>

<a id="18986" class="Markup">\end{code}</a><a id="18996" class="Background">

The converse inclusion, `V 𝒦 ⊆ Mod X (Th (V 𝒦))`, is a simple consequence of the
fact that `Mod Th` is a closure operator. Nonetheless, completeness demands
that we formalize this inclusion as well, however trivial the proof.

</a><a id="19225" class="Markup">\begin{code}</a>

  <a id="19241" href="Varieties.FreeAlgebras.html#19241" class="Function">Birkhoff-converse</a> <a id="19259" class="Symbol">:</a> <a id="19261" href="Varieties.Closure.html#5379" class="Datatype">V</a><a id="19262" class="Symbol">{</a><a id="19263" href="Varieties.FreeAlgebras.html#986" class="Bound">α</a><a id="19264" class="Symbol">}{</a><a id="19266" href="Varieties.FreeAlgebras.html#3992" class="Function">𝓕</a><a id="19267" class="Symbol">}</a> <a id="19269" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a> <a id="19271" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="19273" href="Varieties.EquationalLogic.html#3894" class="Function">Mod</a><a id="19276" class="Symbol">{</a><a id="19277" class="Argument">X</a> <a id="19279" class="Symbol">=</a> <a id="19281" href="Varieties.FreeAlgebras.html#10490" class="Bound">X</a><a id="19282" class="Symbol">}</a> <a id="19284" class="Symbol">(</a><a id="19285" href="Varieties.EquationalLogic.html#3319" class="Function">Th</a> <a id="19288" class="Symbol">(</a><a id="19289" href="Varieties.Closure.html#5379" class="Datatype">V</a> <a id="19291" href="Varieties.FreeAlgebras.html#10503" class="Bound">𝒦</a><a id="19292" class="Symbol">))</a>
  <a id="19297" href="Varieties.FreeAlgebras.html#19241" class="Function">Birkhoff-converse</a> <a id="19315" href="Varieties.FreeAlgebras.html#19315" class="Bound">α</a> <a id="19317" href="Varieties.FreeAlgebras.html#19317" class="Bound">p</a> <a id="19319" href="Varieties.FreeAlgebras.html#19319" class="Bound">q</a> <a id="19321" href="Varieties.FreeAlgebras.html#19321" class="Bound">pThq</a> <a id="19326" class="Symbol">=</a> <a id="19328" href="Varieties.FreeAlgebras.html#19321" class="Bound">pThq</a> <a id="19333" href="Varieties.FreeAlgebras.html#19315" class="Bound">α</a>

<a id="19336" class="Markup">\end{code}</a><a id="19346" class="Background">

We have thus proved that every variety is an equational class.  Readers familiar
with the classical formulation of the Birkhoff HSP theorem, as an &quot;if and only
if&quot; result, might worry that we haven&#39;t completed the proof.  But recall that
in the [Varieties.Preservation][] module we proved the following identity
preservation lemmas:

* `𝒦 ⊫ p ≈ q → H 𝒦 ⊫ p ≈ q`
* `𝒦 ⊫ p ≈ q → S 𝒦 ⊫ p ≈ q`
* `𝒦 ⊫ p ≈ q → P 𝒦 ⊫ p ≈ q`

From these it follows that every equational class is a variety. Thus, our formal
proof of Birkhoff&#39;s theorem is complete.




----------------------------


&lt;sup&gt;1&lt;/sup&gt;&lt;span class=&quot;footnote&quot; id=&quot;fn1&quot;&gt; Since `X` is not a subset of `𝔉`, technically it doesn&#39;t make sense to say &quot;`X` generates `𝔉`.&quot; But as long as 𝒦 contains a nontrivial algebra, we will have `ψ(𝒦, 𝑻 𝑋) ∩ X² ≠ ∅`, and we can identify `X` with `X / ψ(𝒦, 𝑻 X)` which does belong to 𝔉.&lt;/span&gt;

&lt;br&gt;
&lt;br&gt;


[← Varieties.Preservation](Varieties.Preservation.html)
&lt;span style=&quot;float:right;&quot;&gt;[Varieties ↑](Varieties.html)&lt;/span&gt;

{% include UALib.Links.md %}


--------------------------------

[agda-algebras development team]: https://github.com/ualib/agda-algebras#the-agda-algebras-development-team
</a></pre></body></html>